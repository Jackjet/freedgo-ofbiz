!function(e){"function"==typeof define&&define.amd?define("backbone.modelbinder",["underscore","jquery","backbone"],e):e(_,jQuery,Backbone)}(function(e,t,n){if(!n)throw"Please include Backbone.js before Backbone.ModelBinder.js";return n.ModelBinder=function(){e.bindAll.apply(e,[this].concat(e.functions(this)))},n.ModelBinder.SetOptions=function(e){n.ModelBinder.options=e},n.ModelBinder.VERSION="1.0.5",n.ModelBinder.Constants={},n.ModelBinder.Constants.ModelToView="ModelToView",n.ModelBinder.Constants.ViewToModel="ViewToModel",e.extend(n.ModelBinder.prototype,{bind:function(e,n,i,o){this.unbind(),this._model=e,this._rootEl=n,this._setOptions(o),this._model||this._throwException("model must be specified"),this._rootEl||this._throwException("rootEl must be specified"),i?(this._attributeBindings=t.extend(!0,{},i),this._initializeAttributeBindings(),this._initializeElBindings()):this._initializeDefaultBindings(),this._bindModelToView(),this._bindViewToModel()},bindCustomTriggers:function(e,t,n,i,o){this._triggers=n,this.bind(e,t,i,o)},unbind:function(){this._unbindModelToView(),this._unbindViewToModel(),this._attributeBindings&&(delete this._attributeBindings,this._attributeBindings=void 0)},_setOptions:function(t){this._options=e.extend({boundAttribute:"name"},n.ModelBinder.options,t),this._options.modelSetOptions||(this._options.modelSetOptions={}),this._options.modelSetOptions.changeSource="ModelBinder",this._options.changeTriggers||(this._options.changeTriggers={"":"change","[contenteditable]":"blur"}),this._options.initialCopyDirection||(this._options.initialCopyDirection=n.ModelBinder.Constants.ModelToView)},_initializeAttributeBindings:function(){var t,n,i,o,s;for(t in this._attributeBindings){for(n=this._attributeBindings[t],e.isString(n)?i={elementBindings:[{selector:n}]}:e.isArray(n)?i={elementBindings:n}:e.isObject(n)?i={elementBindings:[n]}:this._throwException("Unsupported type passed to Model Binder "+i),o=0;o<i.elementBindings.length;o++)s=i.elementBindings[o],s.attributeBinding=i;i.attributeName=t,this._attributeBindings[t]=i}},_initializeDefaultBindings:function(){var e,n,i,o,s;for(this._attributeBindings={},n=t("["+this._options.boundAttribute+"]",this._rootEl),e=0;e<n.length;e++)i=n[e],o=t(i).attr(this._options.boundAttribute),this._attributeBindings[o]?this._attributeBindings[o].elementBindings.push({attributeBinding:this._attributeBindings[o],boundEls:[i]}):(s={attributeName:o},s.elementBindings=[{attributeBinding:s,boundEls:[i]}],this._attributeBindings[o]=s)},_initializeElBindings:function(){var e,n,i,o,s,a,l;for(e in this._attributeBindings)for(n=this._attributeBindings[e],i=0;i<n.elementBindings.length;i++)if(o=n.elementBindings[i],s=""===o.selector?t(this._rootEl):t(o.selector,this._rootEl),0===s.length)this._throwException("Bad binding found. No elements returned for binding selector "+o.selector);else for(o.boundEls=[],a=0;a<s.length;a++)l=s[a],o.boundEls.push(l)},_bindModelToView:function(){this._model.on("change",this._onModelChange,this),this._options.initialCopyDirection===n.ModelBinder.Constants.ModelToView&&this.copyModelAttributesToView()},copyModelAttributesToView:function(t){var n,i;for(n in this._attributeBindings)void 0!==t&&e.indexOf(t,n)===-1||(i=this._attributeBindings[n],this._copyModelToView(i))},copyViewValuesToModel:function(){var e,n,i,o,s,a;for(e in this._attributeBindings)for(n=this._attributeBindings[e],i=0;i<n.elementBindings.length;i++)if(o=n.elementBindings[i],this._isBindingUserEditable(o))if(this._isBindingRadioGroup(o))(a=this._getRadioButtonGroupCheckedEl(o))&&this._copyViewToModel(o,a);else for(s=0;s<o.boundEls.length;s++)a=t(o.boundEls[s]),this._isElUserEditable(a)&&this._copyViewToModel(o,a)},_unbindModelToView:function(){this._model&&(this._model.off("change",this._onModelChange),this._model=void 0)},_bindViewToModel:function(){e.each(this._options.changeTriggers,function(e,n){t(this._rootEl).delegate(n,e,this._onElChanged)},this),this._options.initialCopyDirection===n.ModelBinder.Constants.ViewToModel&&this.copyViewValuesToModel()},_unbindViewToModel:function(){this._options&&this._options.changeTriggers&&e.each(this._options.changeTriggers,function(e,n){t(this._rootEl).undelegate(n,e,this._onElChanged)},this)},_onElChanged:function(e){var n,i,o,s;for(n=t(e.target)[0],i=this._getElBindings(n),o=0;o<i.length;o++)s=i[o],this._isBindingUserEditable(s)&&this._copyViewToModel(s,n)},_isBindingUserEditable:function(e){return void 0===e.elAttribute||"text"===e.elAttribute||"html"===e.elAttribute},_isElUserEditable:function(e){return e.attr("contenteditable")||e.is("input")||e.is("select")||e.is("textarea")},_isBindingRadioGroup:function(e){var n,i,o=e.boundEls.length>0;for(n=0;n<e.boundEls.length;n++)if(i=t(e.boundEls[n]),"radio"!==i.attr("type")){o=!1;break}return o},_getRadioButtonGroupCheckedEl:function(e){var n,i;for(n=0;n<e.boundEls.length;n++)if(i=t(e.boundEls[n]),"radio"===i.attr("type")&&i.attr("checked"))return i},_getElBindings:function(e){var t,n,i,o,s,a=[];for(t in this._attributeBindings)for(n=this._attributeBindings[t],i=0;i<n.elementBindings.length;i++)for(o=n.elementBindings[i],s=0;s<o.boundEls.length;s++)o.boundEls[s]===e&&a.push(o);return a},_onModelChange:function(){var e,t;for(e in this._model.changedAttributes())(t=this._attributeBindings[e])&&this._copyModelToView(t)},_copyModelToView:function(e){var i,o,s,a,l,r;for(l=this._model.get(e.attributeName),i=0;i<e.elementBindings.length;i++)for(o=e.elementBindings[i],s=0;s<o.boundEls.length;s++)a=o.boundEls[s],a._isSetting||(r=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,o,l),this._setEl(t(a),o,r))},_setEl:function(e,t,n){t.elAttribute?this._setElAttribute(e,t,n):this._setElValue(e,n)},_setElAttribute:function(t,i,o){switch(i.elAttribute){case"html":t.html(o);break;case"text":t.text(o);break;case"enabled":t.prop("disabled",!o);break;case"displayed":t[o?"show":"hide"]();break;case"hidden":t[o?"hide":"show"]();break;case"css":t.css(i.cssAttribute,o);break;case"class":var s=this._model.previous(i.attributeBinding.attributeName),a=this._model.get(i.attributeBinding.attributeName);e.isUndefined(s)&&e.isUndefined(a)||(s=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,i,s),t.removeClass(s)),o&&t.addClass(o);break;default:t.attr(i.elAttribute,o)}},_setElValue:function(e,t){if(e.attr("type"))switch(e.attr("type")){case"radio":e.prop("checked",e.val()===t);break;case"checkbox":e.prop("checked",!!t);break;case"file":break;default:e.val(t)}else e.is("input")||e.is("select")||e.is("textarea")?e.val(t||(0===t?"0":"")):e.text(t||(0===t?"0":""))},_copyViewToModel:function(e,i){var o,s,a;i._isSetting||(i._isSetting=!0,o=this._setModel(e,t(i)),i._isSetting=!1,o&&e.converter&&(s=this._model.get(e.attributeBinding.attributeName),a=this._getConvertedValue(n.ModelBinder.Constants.ModelToView,e,s),this._setEl(t(i),e,a)))},_getElValue:function(e,t){switch(t.attr("type")){case"checkbox":return!!t.prop("checked");default:return void 0!==t.attr("contenteditable")?t.html():t.val()}},_setModel:function(e,t){var i={},o=this._getElValue(e,t);return o=this._getConvertedValue(n.ModelBinder.Constants.ViewToModel,e,o),i[e.attributeBinding.attributeName]=o,this._model.set(i,this._options.modelSetOptions)},_getConvertedValue:function(e,t,n){return t.converter?n=t.converter(e,n,t.attributeBinding.attributeName,this._model,t.boundEls):this._options.converter&&(n=this._options.converter(e,n,t.attributeBinding.attributeName,this._model,t.boundEls)),n},_throwException:function(e){if(!this._options.suppressThrows)throw e;console&&console.error}}),n.ModelBinder.CollectionConverter=function(t){if(this._collection=t,!this._collection)throw"Collection must be defined";e.bindAll(this,"convert")},e.extend(n.ModelBinder.CollectionConverter.prototype,{convert:function(e,t){return e===n.ModelBinder.Constants.ModelToView?t?t.id:void 0:this._collection.get(t)}}),n.ModelBinder.createDefaultBindings=function(e,n,i,o){var s,a,l,r,c={};for(s=t("["+n+"]",e),a=0;a<s.length;a++)if(l=s[a],r=t(l).attr(n),!c[r]){var d={selector:"["+n+'="'+r+'"]'};c[r]=d,i&&(c[r].converter=i),o&&(c[r].elAttribute=o)}return c},n.ModelBinder.combineBindings=function(t,n){return e.each(n,function(e,n){var i={selector:e.selector};e.converter&&(i.converter=e.converter),e.elAttribute&&(i.elAttribute=e.elAttribute),t[n]?t[n]=[t[n],i]:t[n]=i}),t},n.ModelBinder}),define("components/pop/base",["backbone","jqueryui"],function(e,t){return e.View.extend({className:"popover left",initialize:function(e){window.__components__pop&&window.__components__pop.hide&&window.__components__pop.hide(),window.__components__pop=this,this.callback=e.callback,this.target=e.target,this.trigger=e.trigger,e.notAutoHide||this.autoHide()},render:function(){return this.$el.html(this.template({})),this.onRender&&this.onRender(),this},autoHide:function(){var e=this;$(document).on("click",function(t){e.isShow()&&0===e.$el.has(t.target).length&&t.target!==e.trigger[0]&&e.hide()})},setCallback:function(e){this.callback=e},setTarget:function(e){this.target=e},setTrigger:function(e){this.trigger=e},isShow:function(){return"none"!==this.$el.css("display")},hide:function(){return this.$el.hide(),this.remove(),window.__components__pop=null,this.$el},show:function(){return this.$el.show(),this.$el},toggle:function(){return this.$el.toggle(),this.$e},positioning:function(){var e=this,t=e.options.className;e.$el.show(),t.indexOf("left")!==-1?e.$el.position({of:e.target,my:"right center",at:"left center",collision:"none"}):t.indexOf("bottom")!==-1?e.$el.position({of:e.target,my:"center top",at:"center bottom",collision:"none"}):t.indexOf("top")!==-1?e.$el.position({of:e.target,my:"center bottom",at:"center top",collision:"none"}):e.$el.position({of:e.target,my:"left center",at:"right center",collision:"none"}),e.el.className=e.options.className},reset:function(e){var t=e.callback,n=e.target,i=e.trigger;this.setCallback(t),this.setTarget(n),this.setTrigger(i),this.positioning(),this.show()},triggerCallback:function(){this.callback.call(this),this.hide()}})}),define("text!components/pop/templates/help_notes.html",[],function(){return'<div class="arrow"></div>\n<div class="popover-inner">\n    <div class="popover-content">\n        <%= content %>\n    </div>\n</div>\n'}),define("components/pop/help_notes",["backbone","components/pop/base","text!components/pop/templates/help_notes.html","core/utils","clipboard"],function(e,t,n,i,o){var s=window._;return t.extend({template:s.template(n),className:function(){return this.options.className},events:{"click .js-btn-cancel":"hide","click .js-btn-confirm":"triggerCallback","keydown .js-rename-placeholder":function(e){e.keyCode===i.keyCode.ENTER&&this.triggerCallback()}},initialize:function(e){t.prototype.initialize.call(this,e),o.config({moviePath:window._global.url.cdn_static.replace(/^https?:\/\//,"//")+"/vendor/plugin/ZeroClipboard.swf",trustedDomains:["*"],allowScriptAccess:"always"}),this.data=e.data},render:function(){var e=this,t="暂时没有注释内容。";this.target.parent(".js-help-notes").length&&(this.target=this.target.parent()),t=this.target.parent().find(".js-notes-cont").html(),this.$el.html(this.template({content:t}));var n=new o(this.$(".js-help-notes-btn-copy"));return n.on("load",function(t){t.on("complete",function(t,o){i.successNotify("复制成功"),e.hide(),n.off("load")})}),this},positioning:function(){var e=this,t=e.options.className;e.$el.show(),t.indexOf("custom-right")!==-1?e.$el.position({of:e.target,my:"right top",at:"right bottom",collision:"none"}):t.indexOf("left")!==-1?e.$el.position({of:e.target,my:"right center",at:"left center",collision:"none"}):t.indexOf("bottom")!==-1?e.$el.position({of:e.target,my:"center top",at:"center bottom",collision:"none"}):t.indexOf("top")!==-1?e.$el.position({of:e.target,my:"center bottom",at:"center top",collision:"none"}):e.$el.position({of:e.target,my:"left center",at:"right center",collision:"none"}),e.el.className=e.options.className},setData:function(e){this.data=e,this.render()},reset:function(e){var t=e.callback,n=e.target,i=e.trigger,o=e.data,s=e.className||"popover bottom";this.options.className=s,this.setCallback(t),this.setTarget(n),this.setTrigger(i),this.setData(o),this.positioning(),this.clearInput(),this.show()},triggerCallback:function(){this.callback(),this.hide()},clearInput:function(){this.$(".js-link-placeholder").val("")}})}),define("components/pop/atom/help_notes",["require","backbone","components/pop/help_notes"],function(e){"use strict";var t=(e("backbone"),e("components/pop/help_notes"));return{initialize:function(e){var n=e.target=$(e.target),i=e.className,o=(e.type,e.callback),s=e.trigger=$(e.trigger||n),a=(e.data,e.notAutoHide,e.content,e.appendTarget||"body"),l=new t({callback:o,target:n,className:i||"popover bottom",trigger:s});return l.render().$el.appendTo(a),l.positioning(),l}}}),define("components/help_notes/com",["require","jquery","components/pop/atom/help_notes"],function(e){"use strict";var t=e("jquery"),n=e("components/pop/atom/help_notes"),i=null,o=1,s=1,a="",l=2,r=".js-intro-popover .popover-inner",c=function(e){var o="js-intro-popover popover popover-help-notes "+a;2!==l&&(o="js-intro-popover popover popover-intro "+a),s=0,i&&clearTimeout(i),i=setTimeout(function(){t(".js-intro-popover").remove(),n.initialize({target:t(e.target),className:o})},200)},d=function(){i&&clearTimeout(i),i=setTimeout(function(){s&&o&&t(".js-intro-popover").hide()},200)};t("body").on("mouseover",".js-help-notes, .js-help-notes-btn-copy",function(e){var n=t(this);a=n.data("class")||"bottom",l=n.data("ui-version")||2,c(e)}).on("mouseout",".js-help-notes, #global-zeroclipboard-html-bridge",function(){s=1,d()}),t("body").on("mouseover",r,function(){o=0}).on("mouseout",r,function(){o=1,d()})}),define("components/balance_tip/models/balance",["require","backbone","core/utils"],function(e){"use strict";var t=e("backbone"),n=e("core/utils");return t.Model.extend({url:window._global.url.www+"/pay/recharge/teambalance.json",defaults:{balance:""},fetch:function(){var e=this;this.toJSON();return n.ajax({url:this.url}).done(function(t){e.set(t),e.trigger("sync")}).fail(function(t,n){e.trigger("error",t,n)})}})}),define("text!components/balance_tip/templates/balance.html",[],function(){return'<div class="balance-info">\n    <h2>\n        <span class="remind-icon">店铺余额不足，请尽快充值</span>\n    </h2>\n    <p class="tips">\n        截至目前，由于您的店铺余额不足，已有<span><%= Math.abs(balance) %>元</span>交易手续费未缴纳。现已暂停提供在线导入/导出、开放接口（API）等服务。请及时充值店铺余额，以免影响服务。\n    </p>\n    <a href="<%= _global.url.www %>/trade/newsettlement#rechargeMoney" class="btn btn-block btn-red">立即充值</a>\n</div>\n'}),define("components/balance_tip/app",["require","backbone","jquery","underscore","./models/balance","text!./templates/balance.html"],function(e){"use strict";var t=e("backbone"),n=e("jquery"),i=e("underscore"),o=e("./models/balance"),s=e("text!./templates/balance.html");return t.View.extend({className:"shop-balance-tip hide",template:i.template(s),initialize:function(){this.model=new o,this.model.fetch(),this.listenTo(this.model,"sync",this.render)},render:function(){var e=this;this.model.get("balance")<0&&(e.$el.html(e.template(this.model.toJSON())),n("body").append(e.$el),e.$el.show())}})}),function(e,t){"function"==typeof define&&define.amd?define("@youzan/notice/dist/main",["react","react-dom"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"object"==typeof exports?exports.notice=t(require("react"),require("react-dom")):e.notice=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderNotice=void 0;var i=n(2);Object.defineProperty(t,"renderNotice",{enumerable:!0,get:function(){return i.renderNotice}});var o=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.querySelector("#widget-notice-center");t||(t=document.createElement("div"),t.id="widget-notice-center",document.body.appendChild(t));var n=(0,l.unmountComponentAtNode)(t);return(0,l.render)(a.default.createElement(c.default,e),t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.renderNotice=o;var s=n(3),a=i(s),l=n(4),r=n(5),c=i(r)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,r,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(3),u=i(d),p=n(6),m=i(p),h=n(54),f=i(h),_=n(96),g=n(97),v=i(g),b=window._global||{},w=b.url||{},y=w.www||"",k=["is_risk_control_setting_open","is_order_setting_open","is_goods_comment_setting_open","is_cash_setting_open","is_invoice_setting_open"],x=(r=l=function(e){function t(){var e,n,i,a;o(this,t);for(var l=arguments.length,r=Array(l),c=0;c<l;c++)r[c]=arguments[c];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={is_panel_open:!1,list:[],settings:[],unread_message:0,unread_notice:0},i.getUnreadNotice=function(){var e=0;(0,m.default)(i.props.listApi,{method:"GET"}).then(function(t){t=t||[],t.forEach(function(t){e+=parseInt(t.count,10)}),i.setState({list:t,unread_notice:e})})},i.getUnredMessage=function(){(0,m.default)(i.props.unreadApi,{method:"GET"}).then(function(e){var t=e&&e.unread_num||0;i.setState({unread_message:t})})},i.markAllAsRead=function(){(0,m.default)(i.props.readApi,{method:"PUT"}).then(function(){i.getUnreadNotice()})},i.getSettingData=function(){(0,m.default)(i.props.settingApi,{method:"GET"}).then(function(e){var t=(0,_.transformNumberKeyToBoolean)(e);i.setState({settings:t})})},i.updateSetting=function(e){var t=(0,f.default)({},i.state.settings),n=0;if("is_total_setting_open"===e){Object.keys(t).forEach(function(n){t[n]=!t[e]}),t.is_shop_setting_open=1,t.is_youzan_setting_open=1}else t[e]=!t[e],k.forEach(function(e){n+=t[e]}),5===n?t.is_total_setting_open=!0:0===n&&(t.is_total_setting_open=!1);i.setState({settings:t});var o=(0,_.transformBooleanKeyToNumber)(t);(0,m.default)(i.props.settingApi,{method:"PUT",data:o}).then(function(){i.getUnreadNotice()})},i.togglePanel=function(){i.setState({is_panel_open:!i.state.is_panel_open})},a=n,s(i,a)}return a(t,e),c(t,[{key:"componentDidMount",value:function(){"online"===b.run_mode?setInterval(this.getUnredMessage,6e4):this.getUnredMessage(),this.getUnreadNotice()}},{key:"render",value:function(){var e=this.state,t=this.props;return u.default.createElement("div",{className:"notice-center"},u.default.createElement("div",{className:"notice-nav"},u.default.createElement("a",{className:e.unread_message>0?"active":"",target:"_blank",rel:"noopener noreferrer",href:t.imUrl},u.default.createElement("span",{className:"icon icon-message"}),"客户消息"," ",e.unread_message>0?u.default.createElement("span",{className:"unread-badge"},e.unread_message>999?"999+":e.unread_message):" "),u.default.createElement("a",{className:e.unread_notice>0?"active":"",onClick:this.togglePanel},u.default.createElement("span",{className:"icon icon-notice"}),"通知"," ",e.unread_notice>0?u.default.createElement("span",{className:"unread-badge"},e.unread_notice>999?"999+":e.unread_notice):" ")),e.is_panel_open?u.default.createElement(v.default,{list:e.list,settings:e.settings,unreadNum:e.unread_notice,dashboardUrl:t.dashboardUrl,markAllAsRead:this.markAllAsRead,getUnreadNotice:this.getUnreadNotice,getSettingData:this.getSettingData,updateSetting:this.updateSetting,onClose:this.togglePanel}):"")}}]),t}(d.Component),l.defaultProps={imUrl:w.im,interval:6e4,dashboardUrl:y+"/notice/dashboard",unreadApi:y+"/notice/courier/ImUnreadNum.json",listApi:y+"/notice/dashboard/AllTypeList.json",settingApi:y+"/notice/dashboard/noticeSetting.json",readApi:y+"/notice/dashboard/readAllNotices.json"},r);t.default=x,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if((0,d.default)(e)){if(t=t||{},t.url=e,(0,d.default)(t.url))return t}else if((0,p.default)(e)&&(0,d.default)(e.url))return e;throw new TypeError("ajax expects a url or an options object")}function s(e){return e.isJSONP||e.config&&"json"===e.config.responseType}function a(e,t){var n=o(e,t);void 0===n.timeout&&(n.timeout=1e4);var i=(0,r.default)(n,h),a=!!n.rawResponse;return i.then(function(e){var t=e.data;return s(e)?(void 0!==t.errcode&&(t.code=t.errcode,t.msg=t.errmsg),0==+t.code||void 0===t.code||t.success&&200==+t.code?Promise.resolve({json:!0,resp:t}):Promise.reject({json:!0,resp:t})):Promise.resolve({json:!1,resp:t})},function(e){var t=e.response;if(s(e)){if(t&&t.data)return Promise.reject({json:!0,resp:t.data});var n=e.message||"网络请求错误";return Promise.reject({json:!0,resp:{msg:n,code:99999}})}return Promise.reject({json:!1,resp:t||e.message})}).then(function(e){return a||!e.json?e.resp:e.resp.data},function(e){return a||!e.json?Promise.reject(e.resp):Promise.reject(e.resp.msg)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(7),r=i(l),c=n(42),d=i(c),u=n(51),p=i(u),m=function(){return"undefined"!=typeof window?window:void 0!==m?m:"undefined"!=typeof self?self:{}}(),h={transformRequest:function(e){var t=e.disableCsrfToken,n=(m._global||{}).csrf_token;if(n&&!t){if(e.data=e.data||{},!(0,p.default)(e.data))throw new TypeError("expects `data` to be a plain object when csrf token is enabled, but got "+JSON.stringify(e.data));e.data.csrf_token=n}return e.xhrFields&&e.xhrFields.withCredentials&&(e.withCredentials=!0,delete e.xhrFields),e}};a.CancelToken=r.default.CancelToken,a.isCancel=r.default.isCancel,t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(o).default}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return"jsonp"===e.dataType}function s(e){var t=e.jsonp,n=e.jsonpCallback,i={};return v.addEntry(i,"url",e.data?v.addQueryString(e.url,v.stringifyQueryString(e.data)):e.url),v.isString(t)&&v.addEntry(i,"param",t),v.isString(n)?v.addEntry(i,"name",n):v.isFunction(n)&&v.addEntry(i,"name",n()),v.addEntry(i,"timeout",e.timeout),v.addEntry(i,"cache",e.cache),v.addEntry(i,"prefix",e.prefix),i}function a(e){var t={};v.addEntry(t,"url",e.url),v.addEntry(t,"method",(e.method||e.type||"GET").toLowerCase()),v.addEntry(t,"timeout",0===e.timeout?void 0:e.timeout),v.addEntry(t,"auth.username",e.username),v.addEntry(t,"auth.password",e.password),v.addEntry(t,"responseType",e.dataType||"json"),v.addEntry(t,"withCredentials",e.withCredentials),v.addEntry(t,"headers",e.noXRequestedWithHeader?e.headers:v.assign({"X-Requested-With":"XMLHttpRequest"},e.headers)),v.addEntry(t,"onUploadProgress",e.onUploadProgress),v.addEntry(t,"onDownloadProgress",e.onDownloadProgress),v.addEntry(t,"cancelToken",e.cancelToken);var n=t.method,i=v.getHeaderContentType(e.contentType,e.headers);return"get"!==n&&"head"!==n||(v.addEntry(t,"paramsSerializer",v.stringifyQueryString),v.addEntry(t,"params",e.data),v.addEntry(t,"headers.Content-Type",i)),["post","put","patch","delete"].indexOf(n)!==-1&&(v.addEntry(t,"data",e.data),v.addEntry(t,"headers.Content-Type",i||"application/x-www-form-urlencoded; charset=UTF-8"),t.headers["Content-Type"].toLowerCase().indexOf("application/x-www-form-urlencoded")!==-1&&v.addEntry(t,"transformRequest",v.stringifyQueryString)),e.allowBigNumberInJSON&&v.addEntry(t,"transformResponse",[function(e){if("string"==typeof e)try{e=(0,h.default)(e)}catch(e){}return e}]),t}function l(e){var t=s(e);return new Promise(function(e,n){(0,_.default)(t.url,t,function(i,o){if(i)return n(v.assign(i,{message:"网络请求错误",headers:{},config:t,isJSONP:!0}));e({data:o,status:200,statusText:"OK",headers:{},config:t,isJSONP:!0})})})}function r(e){var t=a(e);return(0,p.default)(t)}function c(e){v.isUndefined(e.noXRequestedWithHeader)&&(e.noXRequestedWithHeader=!0)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transformRequest;return v.isFunction(n)&&(e=n(e)),c(e),o(e)?l(e):r(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(9),p=i(u),m=n(36),h=i(m),f=n(38),_=i(f),g=n(39),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g);d.CancelToken=p.default.CancelToken,d.isCancel=p.default.isCancel,t.default=d},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";function i(e){var t=new a(e),n=s(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(11),s=n(12),a=n(14),l=n(15),r=i(l);r.Axios=a,r.create=function(e){return i(o.merge(l,e))},r.Cancel=n(33),r.CancelToken=n(34),r.isCancel=n(30),r.all=function(e){return Promise.all(e)},r.spread=n(35),e.exports=r,e.exports.default=r},function(e,t,n){"use strict";function i(e){return"[object Array]"===j.call(e)}function o(e){return"[object ArrayBuffer]"===j.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function l(e){return"string"==typeof e}function r(e){return"number"==typeof e}function c(e){return void 0===e}function d(e){return null!==e&&"object"==typeof e}function u(e){return"[object Date]"===j.call(e)}function p(e){return"[object File]"===j.call(e)}function m(e){return"[object Blob]"===j.call(e)}function h(e){return"[object Function]"===j.call(e)}function f(e){return d(e)&&h(e.pipe)}function _(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||i(e)||(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,i=arguments.length;n<i;n++)b(arguments[n],e);return t}function y(e,t,n){return b(t,function(t,i){e[i]=n&&"function"==typeof t?k(t,n):t}),e}var k=n(12),x=n(13),j=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:o,isBuffer:x,isFormData:s,isArrayBufferView:a,isString:l,isNumber:r,isObject:d,isUndefined:c,isDate:u,isFile:p,isBlob:m,isFunction:h,isStream:f,isURLSearchParams:_,isStandardBrowserEnv:v,forEach:b,merge:w,extend:y,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function i(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(15),s=n(11),a=n(27),l=n(28),r=n(31),c=n(32);i.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),e=s.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!r(e.url)&&(e.url=c(e.baseURL,e.url));var t=[l,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},s.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,n){return this.request(s.merge(n||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,n,i){return this.request(s.merge(i||{},{method:e,url:t,data:n}))}}),e.exports=i},function(e,t,n){(function(t){"use strict";function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(11),s=n(17),a={"Content-Type":"application/x-www-form-urlencoded"},l={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(18):void 0!==t&&(e=n(18)),e}(),transformRequest:[function(e,t){return s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){l.headers[e]={}}),o.forEach(["post","put","patch"],function(e){l.headers[e]=o.merge(a)}),e.exports=l}).call(t,n(16))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function s(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){f&&m&&(f=!1,m.length?h=m.concat(h):_=-1,h.length&&l())}function l(){if(!f){var e=o(a);f=!0;for(var t=h.length;t;){for(m=h,h=[];++_<t;)m&&m[_].run();_=-1,t=h.length}m=null,f=!1,s(e)}}function r(e,t){this.fun=e,this.array=t}function c(){}var d,u,p=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var m,h=[],f=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new r(e,t)),1!==h.length||f||o(l)},r.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}
},function(e,t,n){"use strict";var i=n(11);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},function(e,t,n){(function(t){"use strict";var i=n(11),o=n(19),s=n(22),a=n(23),l=n(24),r=n(20),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(25);e.exports=function(e){return new Promise(function(d,u){var p=e.data,m=e.headers;i.isFormData(p)&&delete m["Content-Type"];var h=new XMLHttpRequest,f="onreadystatechange",_=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||l(e.url)||(h=new window.XDomainRequest,f="onload",_=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";m.Authorization="Basic "+c(g+":"+v)}if(h.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[f]=function(){if(h&&(4===h.readyState||_)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null;o(d,u,{data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:t,config:e,request:h}),h=null}},h.onerror=function(){u(r("Network Error",e,null,h)),h=null},h.ontimeout=function(){u(r("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var b=n(26),w=(e.withCredentials||l(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in h&&i.forEach(m,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),u(e),h=null)}),void 0===p&&(p=null),h.send(p)})}}).call(t,n(16))},function(e,t,n){"use strict";var i=n(20);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var i=n(21);e.exports=function(e,t,n,o,s){return i(new Error(e),t,n,o,s)}},function(e,t){"use strict";e.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e}},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(11);e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),s=a.join("&")}return s&&(e+=(e.indexOf("?")===-1?"?":"&")+s),e}},function(e,t,n){"use strict";var i=n(11);e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t&&(s[t]=s[t]?s[t]+", "+n:n)}),s):s}},function(e,t,n){"use strict";var i=n(11);e.exports=i.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=i.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function i(e){for(var t,i,s=String(e),a="",l=0,r=o;s.charAt(0|l)||(r="=",l%1);a+=r.charAt(63&t>>8-l%1*8)){if((i=s.charCodeAt(l+=.75))>255)throw new n;t=t<<8|i}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var i=n(11);e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,s,a){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(o)&&l.push("path="+o),i.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function i(){this.handlers=[]}var o=n(11);i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(11),s=n(29),a=n(30),l=n(15);e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||l.adapter)(e).then(function(t){return i(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(i(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var i=n(11);e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){"use strict";function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(33);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(37),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function e(e){return e.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):r[n]})}var t,n,o,a,l,r={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},c={go:function(){t="ok"},firstokey:function(){a=l,t="colon"},okey:function(){a=l,t="colon"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},d={go:function(){t="ok"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},u={"{":{go:function(){n.push({state:"ok"}),o={},t="firstokey"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o={},t="firstokey"},firstavalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"},avalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"}},"}":{firstokey:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},ocomma:function(){var e=n.pop();o[a]=l,l=o,o=e.container,a=e.key,t=e.state}},"[":{go:function(){n.push({state:"ok"}),o=[],t="firstavalue"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o=[],t="firstavalue"},firstavalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"},avalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"}},"]":{firstavalue:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},acomma:function(){var e=n.pop();o.push(l),l=o,o=e.container,a=e.key,t=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(o,a))throw new SyntaxError("Duplicate key '"+a+'"');t="ovalue"}},",":{ocomma:function(){o[a]=l,t="okey"},acomma:function(){o.push(l),t="avalue"}},true:{go:function(){l=!0,t="ok"},ovalue:function(){l=!0,t="ocomma"},firstavalue:function(){l=!0,t="acomma"},avalue:function(){l=!0,t="acomma"}},false:{go:function(){l=!1,t="ok"},ovalue:function(){l=!1,t="ocomma"},firstavalue:function(){l=!1,t="acomma"},avalue:function(){l=!1,t="acomma"}},null:{go:function(){l=null,t="ok"},ovalue:function(){l=null,t="ocomma"},firstavalue:function(){l=null,t="acomma"},avalue:function(){l=null,t="acomma"}}};return function(o,a){var r,p=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;t="go",n=[];try{for(;;){if(!(r=p.exec(o)))break;r[1]?u[r[1]][t]():r[2]?(l=(0,s.default)(r[2])?r[2]:+r[2],d[t]()):(l=e(r[3]),c[t]()),o=o.slice(r[0].length)}}catch(e){t=e}if("ok"!==t||/[^\u0020\t\n\r]/.test(o))throw t instanceof SyntaxError?t:new SyntaxError("JSON");return"function"==typeof a?function e(t,n){var o,s,r=t[n];if(r&&"object"===(void 0===r?"undefined":i(r)))for(o in l)Object.prototype.hasOwnProperty.call(r,o)&&(s=e(r,o),void 0!==s?r[o]=s:delete r[o]);return a.call(t,n,r)}({"":l},""):l}}();t.default=a},function(e,t){"use strict";function n(e){var t=void 0,n=void 0,o=void 0,s=e.trim();for("-"!==s[0]&&"+"!==s[0]||(s=s.slice(1)),(t=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(t<0&&(t=n),t+=+s.slice(n+1),s=s.substring(0,n)):t<0&&(t=s.length),n=0;48===s.charCodeAt(n);n++);for(o=s.length;48===s.charCodeAt(--o););return!!(s=s.slice(n,o+1))&&(t=t-n-1,s.length>15&&(e>i||e!==+e+"")||t<-308||t>308)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=9007199254740991},function(e,t,n){"use strict";function i(){}function o(e,t,n){function o(){f.parentNode&&f.parentNode.removeChild(f),window[d]=i,_&&(clearTimeout(_),_=void 0)}function s(){window[d]&&o()}a.isFunction(t)&&(n=t,t={}),t||(t={});var l=t.prefix||"__jp",c=t.cache||!1,d=t.name||l+(0,r.default)(),u=t.param||"callback",p=a.isNil(t.timeout)?6e4:t.timeout,m=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head,f=void 0,_=void 0;p&&(_=setTimeout(function(){o(),n&&n({status:408,statusText:"Request Time-out"})},p)),window[d]=function(e){o(),n&&n(null,e)};var g=c?"":"_="+Date.now();return e=a.addQueryString(e,m(u)+"="+m(d)+"&"+g),f=document.createElement("script"),h.parentNode.insertBefore(f,h),f.onerror=function(){o(),n&&n({status:400,statusText:"Bad Request"})},f.src=e,s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(39),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),l=n(41),r=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function i(e){return"[object Object]"===v.call(e)}function o(e){if(!e||"[object Object]"!==v.call(e))return!1;var t=Object.getPrototypeOf(e);if(!t)return!0;var n=b.call(t,"constructor")&&t.constructor;return"function"==typeof n&&w.call(n)===y}function s(e){return"[object String]"===v.call(e)}function a(e){return"[object Function]"===v.call(e)}function l(e){return void 0===e}function r(e){return null===e}function c(e){return void 0===e||null===e}function d(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var s=0;s<i.length;s++){var a=i[s];if(null!=a)for(var l in a)b.call(a,l)&&(t[l]=a[l])}return t}function u(e){return(0,g.default)(e)}function p(e,t){return e+=(~e.indexOf("?")?"&":"?")+t,e=e.replace("?&","?")}function m(e,t,n){if(!l(n)){for(var o=t.split("."),s=e,a=0;a<o.length-1;a++){var r=o[a];i(s[r])||(s[r]={}),s=s[r]}s[o[o.length-1]]=n}return e}function h(e,t){return e&&t?Object.keys(e).reduce(function(e,n,i){return t.indexOf(n)===-1&&(e[n]=i),e},{}):e}function f(e,t){if(e)return e;for(var n=Object.keys(t||{}),i=n.length,o=1;o<i;o++){var s=n[o];if("content-type"===s.toLowerCase())return t[s]}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=void 0,t.isObject=i,t.isPlainObject=o,t.isString=s,t.isFunction=a,t.isUndefined=l,t.isNull=r,t.isNil=c,t.assign=d,t.stringifyQueryString=u,t.addQueryString=p,t.addEntry=m,t.omit=h,t.getHeaderContentType=f;var _=n(40),g=function(e){return e&&e.__esModule?e:{default:e}}(_),v=Object.prototype.toString,b=t.hasOwn=Object.prototype.hasOwnProperty,w=b.toString,y=w.call(Object)},function(e,t,n){"use strict";function i(e,t,n){var o=void 0;if(Array.isArray(t))t.forEach(function(t,o){r.test(e)?n(e,t):i(e+"["+("object"===(void 0===t?"undefined":s(t))&&null!=t?o:"")+"]",t,n)});else if(l.isObject(t))for(o in t)l.hasOwn.call(t,o)&&i(e+"["+o+"]",t[o],n);else n(e,t)}function o(e){var t=void 0,n=[],o=function(e,t){var i=l.isFunction(t)?t():t;n[n.length]=c(e)+"="+c(null==i?"":i)};if(Array.isArray(e))e.forEach(function(e){o(e.name,e.value)});else for(t in e)l.hasOwn.call(e,t)&&i(t,e[t],o);return n.join("&")}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var a=n(39),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),r=/\[\]$/,c=encodeURIComponent},function(e,t){"use strict";function n(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+i[255&t]+i[t>>8&255]+i[t>>16&15|64]+i[t>>24&255]+i[63&n|128]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]+i[255&o]+i[o>>8&255]+i[o>>16&255]+i[o>>24&255]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;for(var i=[],o=0;o<256;o++)i[o]=(o<16?"0":"")+o.toString(16)},function(e,t,n){function i(e){return"string"==typeof e||!s(e)&&a(e)&&o(e)==l}var o=n(43),s=n(49),a=n(50),l="[object String]";e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?r:l:c&&c in Object(e)?s(e):a(e)}var o=n(44),s=n(47),a=n(48),l="[object Null]",r="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(45),o=i.Symbol;e.exports=o},function(e,t,n){var i=n(46),o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")();e.exports=s},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=a.call(e,r),n=e[r];try{e[r]=void 0}catch(e){}var i=l.call(e);return t?e[r]=n:delete e[r],i}var o=n(44),s=Object.prototype,a=s.hasOwnProperty,l=s.toString,r=o?o.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){if(!a(e)||o(e)!=l)return!1;var t=s(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==p}var o=n(43),s=n(52),a=n(50),l="[object Object]",r=Function.prototype,c=Object.prototype,d=r.toString,u=c.hasOwnProperty,p=d.call(Object);e.exports=i},function(e,t,n){var i=n(53),o=i(Object.getPrototypeOf,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var i=n(55),o=n(67),s=n(68),a=n(78),l=n(81),r=n(82),c=Object.prototype,d=c.hasOwnProperty,u=s(function(e,t){if(l(t)||a(t))return void o(t,r(t),e);for(var n in t)d.call(t,n)&&i(e,n,t[n])});e.exports=u},function(e,t,n){function i(e,t,n){var i=e[t];l.call(e,t)&&s(i,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(56),s=n(66),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(57);e.exports=i},function(e,t,n){var i=n(58),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function i(e,t){var n=s(e,t);return o(n)?n:void 0}var o=n(59),s=n(65);e.exports=i},function(e,t,n){function i(e){return!(!a(e)||s(e))&&(o(e)?m:r).test(l(e))}var o=n(60),s=n(62),a=n(61),l=n(64),r=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,u=c.toString,p=d.hasOwnProperty,m=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){if(!s(e))return!1;var t=o(e);return t==l||t==r||t==a||t==c}var o=n(43),s=n(61),a="[object AsyncFunction]",l="[object Function]",r="[object GeneratorFunction]",c="[object Proxy]";e.exports=i},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function i(e){return!!s&&s in e}var o=n(63),s=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(45),o=i["__core-js_shared__"];e.exports=o},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,o=i.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n,i){var a=!n;n||(n={});for(var l=-1,r=t.length;++l<r;){var c=t[l],d=i?i(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),a?s(n,c,d):o(n,c,d)}return n}var o=n(55),s=n(56);e.exports=i},function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&s(n[0],n[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++i<o;){var r=n[i];r&&e(t,r,i,a)}return t})}var o=n(69),s=n(77);e.exports=i},function(e,t,n){function i(e,t){return a(s(e,t,o),e+"")}var o=n(70),s=n(71),a=n(73);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=s(i.length-t,0),r=Array(l);++a<l;)r[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(r),o(e,this,c)}}var o=n(72),s=Math.max;e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var i=n(74),o=n(76),s=o(i);e.exports=s},function(e,t,n){var i=n(75),o=n(57),s=n(70),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:s;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=s(),l=o-(a-n);if(n=a,l>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,s=Date.now;e.exports=n},function(e,t,n){function i(e,t,n){if(!l(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&a(t,n.length):"string"==i&&t in n)&&o(n[t],e)}var o=n(66),s=n(78),a=n(80),l=n(61);e.exports=i},function(e,t,n){function i(e){return null!=e&&s(e.length)&&!o(e)}var o=n(60),s=n(79);e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){function n(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;e.exports=n},function(e,t,n){function i(e){return a(e)?o(e):s(e)}var o=n(83),s=n(94),a=n(78);e.exports=i},function(e,t,n){function i(e,t){var n=a(e),i=!n&&s(e),d=!n&&!i&&l(e),p=!n&&!i&&!d&&c(e),m=n||i||d||p,h=m?o(e.length,String):[],f=h.length;for(var _ in e)!t&&!u.call(e,_)||m&&("length"==_||d&&("offset"==_||"parent"==_)||p&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||r(_,f))||h.push(_);return h}var o=n(84),s=n(85),a=n(49),l=n(87),r=n(80),c=n(90),d=Object.prototype,u=d.hasOwnProperty;e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){var i=n(86),o=n(50),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,r=i(function(){return arguments}())?i:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=r},function(e,t,n){function i(e){return s(e)&&o(e)==a}var o=n(43),s=n(50),a="[object Arguments]";e.exports=i},function(e,t,n){(function(e){var i=n(45),o=n(89),s="object"==typeof t&&t&&!t.nodeType&&t,a=s&&"object"==typeof e&&e&&!e.nodeType&&e,l=a&&a.exports===s,r=l?i.Buffer:void 0,c=r?r.isBuffer:void 0,d=c||o;e.exports=d}).call(t,n(88)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){var i=n(91),o=n(92),s=n(93),a=s&&s.isTypedArray,l=a?o(a):i;e.exports=l},function(e,t,n){function i(e){return a(e)&&s(e.length)&&!!l[o(e)]}var o=n(43),s=n(79),a=n(50),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,e.exports=i},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(46),o="object"==typeof t&&t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o,l=a&&i.process,r=function(){try{return l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=r}).call(t,n(88)(e))},function(e,t,n){function i(e){if(!o(e))return s(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(81),s=n(95),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(53),o=i(Object.keys,Object);e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformBooleanKeyToNumber=t.transformNumberKeyToBoolean=void 0;var i=n(54),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.transformNumberKeyToBoolean=function(e){var t=(0,o.default)({},e);return Object.keys(t).map(function(e){return t[e]=!!t[e],e}),t},t.transformBooleanKeyToNumber=function(e){var t=(0,o.default)({},e);return Object.keys(t).map(function(e){return t[e]=+t[e],e}),t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),c=i(r),d=n(98),u=i(d),p=n(99),m=i(p),h=n(104),f=i(h),_=n(105),g=i(_),v=n(106),b=i(v),w=function(e){function t(){var e,n,i,a;o(this,t);for(var l=arguments.length,r=Array(l),d=0;d<l;d++)r[d]=arguments[d];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={is_open_setting:!1},i.toggleSetting=function(){i.state.is_open_setting===!0?i.props.getUnreadNotice():i.props.getSettingData(),i.setState({is_open_setting:!i.state.is_open_setting})},i.getPanel=function(){var e=i.props,t=!0,n=void 0;return e.list.forEach(function(e){t=t&&1===e.is_hidden}),0!==e.unreadNum||t?e.unreadNum>0?n=c.default.createElement(m.default,{dashboardUrl:e.dashboardUrl,toggleSetting:i.toggleSetting,unreadNum:e.unreadNum,list:e.list}):t&&(n=c.default.createElement(g.default,{dashboardUrl:e.dashboardUrl,toggleSetting:i.toggleSetting})):n=c.default.createElement(f.default,{dashboardUrl:e.dashboardUrl}),n},a=n,s(i,a)}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=(0,u.default)({"pull-left":!0,"link--disabled":0===e.unreadNum});return c.default.createElement("div",{className:"noticePanel"},c.default.createElement("div",{className:"noticePanel__title"},"通知中心"," ",e.unreadNum>0?c.default.createElement("span",null,"(",e.unreadNum>999?"999+":e.unreadNum,"未读)"):null,c.default.createElement("span",{className:"pull-right icon--close",onClick:e.onClose},"×")),this.getPanel(),c.default.createElement("div",{className:"noticePanel__footer"},c.default.createElement("a",{onClick:e.markAllAsRead,className:t},"全部标为已读"),c.default.createElement("a",{className:"pull-right",onClick:this.toggleSetting},c.default.createElement("span",{className:"icon icon--setting"}),"通知设置")),this.state.is_open_setting?c.default.createElement(b.default,{settings:e.settings,updateSetting:e.updateSetting,toggleSetting:this.toggleSetting}):null)}}]),t}(r.Component);t.default=w,e.exports=t.default},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(3),a=i(s),l=n(100),r=i(l),c=function(e){var t=e.list.map(function(t){return a.default.createElement(r.default,o({dashboardUrl:e.dashboardUrl,toggleSetting:e.toggleSetting},t,{key:t.type}))});return a.default.createElement("div",{className:"noticeList"},t)};t.default=c,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=i(o),a=n(101),l=i(a),r=n(102),c=i(r),d=n(103),u=i(d),p=function(e){var t=void 0,n=e.dashboardUrl+"#"+e.type;if(e.count>0&&!e.is_hidden){var i=e.notices.map(function(e,t){var i=n+"?id="+e.id;return s.default.createElement(u.default,{item:e,noticeUrl:i,key:t})});t=s.default.createElement("ul",null,i)}else t=e.is_hidden?s.default.createElement(c.default,{toggleSetting:e.toggleSetting,typeName:e.type_name}):s.default.createElement(l.default,null);return s.default.createElement("div",{className:"noticeItem"},s.default.createElement("h4",{className:"noticeItem__title"},e.type_name,e.count>0?s.default.createElement("span",{className:"noticeItem__badge"},e.count>999?"999+":e.count):"",s.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n,className:"pull-right noticeItem__more"},"更多")),s.default.createElement("div",{className:"noticeItem__container"},t))};t.default=p,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){return o.default.createElement("div",{className:"noticeItem__content--empty"},o.default.createElement("span",{className:"icon icon--empty"}),"暂时没有新通知哦~")};t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){return o.default.createElement("div",{className:"noticeItem__content--closed"},e.typeName,"接收已关闭，",o.default.createElement("a",{onClick:e.toggleSetting},"去开启"))};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=i(o),a=n(98),l=i(a),r=function(e){var t=e.item,n=(0,l.default)({noticeItem__content:!0,"noticeItem__content--read":t.is_read});return s.default.createElement("li",{className:n},s.default.createElement("a",{href:e.noticeUrl},s.default.createElement("b",null,t.detail_title)," ",t.content.substring(0,50)))};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){return o.default.createElement("div",{className:"emptyPanel"},o.default.createElement("div",{className:"icon icon--empty"}),o.default.createElement("p",{className:"panel__tips"},"暂时没有新通知哦~"),o.default.createElement("a",{href:e.dashboardUrl,className:"zent-btn zent-btn-primary-outline"},"查看历史消息"))};t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){return o.default.createElement("div",{className:"closedPanel"},o.default.createElement("div",{className:"icon icon--empty"}),o.default.createElement("p",{className:"panel__tips"},"所有消息接收都已关闭，",o.default.createElement("a",{onClick:e.toggleSetting},"去开启")),o.default.createElement("a",{href:e.dashboardUrl,className:"zent-btn zent-btn-primary-outline"},"查看历史消息"))};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(3),a=i(s),l=n(107),r=i(l),c=n(201),d=i(c),u={is_risk_control_setting_open:"风控消息",is_order_setting_open:"订单维权消息",is_goods_comment_setting_open:"商品评价消息",is_cash_setting_open:"提现消息",is_invoice_setting_open:"发货单提醒"},p=function(e){var t=e.settings,n=[]
;Object.keys(u).forEach(function(e){n.push({setting_name:e,setting_value:t[e],setting_title:u[e]})});var i=n.map(function(t){return a.default.createElement(d.default,o({},t,{updateSetting:e.updateSetting,key:t.setting_title}))});return a.default.createElement("div",{className:"settingPanel"},a.default.createElement("div",{className:"settingPanel__title"},"通知设置"," ",a.default.createElement(r.default,{size:"small",checked:t.is_total_setting_open,onChange:function(){return e.updateSetting("is_total_setting_open")}}),a.default.createElement("span",{onClick:e.toggleSetting,className:"pull-right icon--close"},"×")),a.default.createElement("div",{className:"settingPanel_list"},i))};t.default=p,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(108),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(109),s=i(o),a=n(128),l=i(a),r=n(129),c=i(r),d=n(130),u=i(d),p=n(184),m=i(p),h=n(3),f=i(h),_=n(192),g=i(_),v=n(200),b=i(v),w=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.toggle=function(){var e=i.props;(0,e.onChange)(!e.checked)},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getInnerText",value:function(){return this.props.checked?this.props.checkedText:this.props.uncheckedText}},{key:"renderSwitch",value:function(e){var t=this.props.disabled||this.props.loading,n=this.props.prefix+"-switch-inner";return f.default.createElement("span",{className:e,onClick:t?null:this.toggle},f.default.createElement("span",{className:n},this.getInnerText()))}},{key:"render",value:function(){var e,t=this.props,n=t.className,i=t.size,o=t.disabled,a=t.loading,l=t.prefix,r=t.checked,c=(0,b.default)((e={},(0,s.default)(e,l+"-switch-"+i,"default"!==i),(0,s.default)(e,l+"-switch-disabled",o),(0,s.default)(e,l+"-switch-loading",a),(0,s.default)(e,l+"-switch-checked",r),e),l+"-switch",n);return this.renderSwitch(c)}}]),t}(h.PureComponent||h.Component);w.propTypes={size:g.default.oneOf(["large","default","small"]),prefix:g.default.string,className:g.default.string,disabled:g.default.bool,checked:g.default.bool,loading:g.default.bool,onChange:g.default.func,checkedText:g.default.any,uncheckedText:g.default.any},w.defaultProps={size:"default",prefix:"zent",className:"",disabled:!1,loading:!1,checked:!1,onChange:function(){},checkedText:"开启",uncheckedText:"关闭"},t.default=w},function(e,t,n){"use strict";t.__esModule=!0;var i=n(110),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(111),__esModule:!0}},function(e,t,n){n(112);var i=n(115).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(113);i(i.S+i.F*!n(123),"Object",{defineProperty:n(119).f})},function(e,t,n){var i=n(114),o=n(115),s=n(116),a=n(118),l=function(e,t,n){var r,c,d,u=e&l.F,p=e&l.G,m=e&l.S,h=e&l.P,f=e&l.B,_=e&l.W,g=p?o:o[t]||(o[t]={}),v=g.prototype,b=p?i:m?i[t]:(i[t]||{}).prototype;p&&(n=t);for(r in n)(c=!u&&b&&void 0!==b[r])&&r in g||(d=c?b[r]:n[r],g[r]=p&&"function"!=typeof b[r]?n[r]:f&&c?s(d,i):_&&b[r]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):h&&"function"==typeof d?s(Function.call,d):d,h&&((g.virtual||(g.virtual={}))[r]=d,e&l.R&&v&&!v[r]&&a(v,r,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(117);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(119),o=n(127);e.exports=n(123)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(120),o=n(122),s=n(126),a=Object.defineProperty;t.f=n(123)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(121);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(123)&&!n(124)(function(){return 7!=Object.defineProperty(n(125)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(124)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(121),o=n(114).document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var i=n(121);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(110),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){"use strict";t.__esModule=!0;var i=n(131),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(132),s=i(o),a=n(168),l=i(a),r="function"==typeof l.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":typeof e};t.default="function"==typeof l.default&&"symbol"===r(s.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":void 0===e?"undefined":r(e)}},function(e,t,n){e.exports={default:n(133),__esModule:!0}},function(e,t,n){n(134),n(163),e.exports=n(167).f("iterator")},function(e,t,n){"use strict";var i=n(135)(!0);n(138)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(136),o=n(137);e.exports=function(e){return function(t,n){var s,a,l=String(o(t)),r=i(n),c=l.length;return r<0||r>=c?e?"":void 0:(s=l.charCodeAt(r),s<55296||s>56319||r+1===c||(a=l.charCodeAt(r+1))<56320||a>57343?e?l.charAt(r):s:e?l.slice(r,r+2):a-56320+(s-55296<<10)+65536)}}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var i=n(139),o=n(113),s=n(140),a=n(118),l=n(141),r=n(142),c=n(143),d=n(159),u=n(161),p=n(160)("iterator"),m=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,_,g,v){c(n,t,f);var b,w,y,k=function(e){if(!m&&e in C)return C[e];switch(e){case"keys":return function(){return new n(this,e)};case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",j="values"==_,S=!1,C=e.prototype,T=C[p]||C["@@iterator"]||_&&C[_],O=T||k(_),I=_?j?k("entries"):O:void 0,P="Array"==t?C.entries||T:T;if(P&&(y=u(P.call(new e)))!==Object.prototype&&(d(y,x,!0),i||l(y,p)||a(y,p,h)),j&&T&&"values"!==T.name&&(S=!0,O=function(){return T.call(this)}),i&&!v||!m&&!S&&C[p]||a(C,p,O),r[t]=O,r[x]=h,_)if(b={values:j?O:k("values"),keys:g?O:k("keys"),entries:I},v)for(w in b)w in C||s(C,w,b[w]);else o(o.P+o.F*(m||S),t,b);return b}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(118)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(144),o=n(127),s=n(159),a={};n(118)(a,n(160)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:o(1,n)}),s(e,t+" Iterator")}},function(e,t,n){var i=n(120),o=n(145),s=n(157),a=n(154)("IE_PROTO"),l=function(){},r=function(){var e,t=n(125)("iframe"),i=s.length;for(t.style.display="none",n(158).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),r=e.F;i--;)delete r.prototype[s[i]];return r()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=i(e),n=new l,l.prototype=null,n[a]=e):n=r(),void 0===t?n:o(n,t)}},function(e,t,n){var i=n(119),o=n(120),s=n(146);e.exports=n(123)?Object.defineProperties:function(e,t){o(e);for(var n,a=s(t),l=a.length,r=0;l>r;)i.f(e,n=a[r++],t[n]);return e}},function(e,t,n){var i=n(147),o=n(157);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(141),o=n(148),s=n(151)(!1),a=n(154)("IE_PROTO");e.exports=function(e,t){var n,l=o(e),r=0,c=[];for(n in l)n!=a&&i(l,n)&&c.push(n);for(;t.length>r;)i(l,n=t[r++])&&(~s(c,n)||c.push(n));return c}},function(e,t,n){var i=n(149),o=n(137);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(150);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(148),o=n(152),s=n(153);e.exports=function(e){return function(t,n,a){var l,r=i(t),c=o(r.length),d=s(a,c);if(e&&n!=n){for(;c>d;)if((l=r[d++])!=l)return!0}else for(;c>d;d++)if((e||d in r)&&r[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var i=n(136),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){var i=n(136),o=Math.max,s=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):s(e,t)}},function(e,t,n){var i=n(155)("keys"),o=n(156);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(114),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(114).document&&document.documentElement},function(e,t,n){var i=n(119).f,o=n(141),s=n(160)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i=n(155)("wks"),o=n(156),s=n(114).Symbol,a="function"==typeof s;(e.exports=function(e){return i[e]||(i[e]=a&&s[e]||(a?s:o)("Symbol."+e))}).store=i},function(e,t,n){var i=n(141),o=n(162),s=n(154)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(137);e.exports=function(e){return Object(i(e))}},function(e,t,n){n(164);for(var i=n(114),o=n(118),s=n(142),a=n(160)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],r=0;r<5;r++){var c=l[r],d=i[c],u=d&&d.prototype;u&&!u[a]&&o(u,a,c),s[c]=s.Array}},function(e,t,n){"use strict";var i=n(165),o=n(166),s=n(142),a=n(148);e.exports=n(138)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(160)},function(e,t,n){e.exports={default:n(169),__esModule:!0}},function(e,t,n){n(170),n(181),n(182),n(183),e.exports=n(115).Symbol},function(e,t,n){"use strict";var i=n(114),o=n(141),s=n(123),a=n(113),l=n(140),r=n(171).KEY,c=n(124),d=n(155),u=n(159),p=n(156),m=n(160),h=n(167),f=n(172),_=n(173),g=n(174),v=n(177),b=n(120),w=n(148),y=n(126),k=n(127),x=n(144),j=n(178),S=n(180),C=n(119),T=n(146),O=S.f,I=C.f,P=j.f,z=i.Symbol,E=i.JSON,M=E&&E.stringify,N=m("_hidden"),D=m("toPrimitive"),F={}.propertyIsEnumerable,q=d("symbol-registry"),A=d("symbols"),R=d("op-symbols"),L=Object.prototype,U="function"==typeof z,$=i.QObject,V=!$||!$.prototype||!$.prototype.findChild,B=s&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=O(L,t);i&&delete L[t],I(e,t,n),i&&e!==L&&I(L,t,i)}:I,H=function(e){var t=A[e]=x(z.prototype);return t._k=e,t},W=U&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof z},G=function(e,t,n){return e===L&&G(R,t,n),b(e),t=y(t,!0),b(n),o(A,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,N)||I(e,N,k(1,{})),e[N][t]=!0),B(e,t,n)):I(e,t,n)},Y=function(e,t){b(e);for(var n,i=g(t=w(t)),o=0,s=i.length;s>o;)G(e,n=i[o++],t[n]);return e},K=function(e,t){return void 0===t?x(e):Y(x(e),t)},J=function(e){var t=F.call(this,e=y(e,!0));return!(this===L&&o(A,e)&&!o(R,e))&&(!(t||!o(this,e)||!o(A,e)||o(this,N)&&this[N][e])||t)},X=function(e,t){if(e=w(e),t=y(t,!0),e!==L||!o(A,t)||o(R,t)){var n=O(e,t);return!n||!o(A,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(w(e)),i=[],s=0;n.length>s;)o(A,t=n[s++])||t==N||t==r||i.push(t);return i},Z=function(e){for(var t,n=e===L,i=P(n?R:w(e)),s=[],a=0;i.length>a;)!o(A,t=i[a++])||n&&!o(L,t)||s.push(A[t]);return s};U||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===L&&t.call(R,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),B(this,e,k(1,n))};return s&&V&&B(L,e,{configurable:!0,set:t}),H(e)},l(z.prototype,"toString",function(){return this._k}),S.f=X,C.f=G,n(179).f=j.f=Q,n(176).f=J,n(175).f=Z,s&&!n(139)&&l(L,"propertyIsEnumerable",J,!0),h.f=function(e){return H(m(e))}),a(a.G+a.W+a.F*!U,{Symbol:z});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)m(ee[te++]);for(var ee=T(m.store),te=0;ee.length>te;)f(ee[te++]);a(a.S+a.F*!U,"Symbol",{for:function(e){return o(q,e+="")?q[e]:q[e]=z(e)},keyFor:function(e){if(W(e))return _(q,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!U,"Object",{create:K,defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),E&&a(a.S+a.F*(!U||c(function(){var e=z();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);return t=i[1],"function"==typeof t&&(n=t),!n&&v(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!W(t))return t}),i[1]=t,M.apply(E,i)}}}),z.prototype[D]||n(118)(z.prototype,D,z.prototype.valueOf),u(z,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},function(e,t,n){var i=n(156)("meta"),o=n(121),s=n(141),a=n(119).f,l=0,r=Object.isExtensible||function(){return!0},c=!n(124)(function(){return r(Object.preventExtensions({}))}),d=function(e){a(e,i,{value:{i:"O"+ ++l,w:{}}})},u=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!r(e))return"F";if(!t)return"E";d(e)}return e[i].i},p=function(e,t){if(!s(e,i)){if(!r(e))return!0;if(!t)return!1;d(e)}return e[i].w},m=function(e){return c&&h.NEED&&r(e)&&!s(e,i)&&d(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:u,getWeak:p,onFreeze:m}},function(e,t,n){var i=n(114),o=n(115),s=n(139),a=n(167),l=n(119).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(146),o=n(148);e.exports=function(e,t){for(var n,s=o(e),a=i(s),l=a.length,r=0;l>r;)if(s[n=a[r++]]===t)return n}},function(e,t,n){var i=n(146),o=n(175),s=n(176);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var a,l=n(e),r=s.f,c=0;l.length>c;)r.call(e,a=l[c++])&&t.push(a);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(150);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(148),o=n(179).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==s.call(e)?l(e):o(i(e))}},function(e,t,n){var i=n(147),o=n(157).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(176),o=n(127),s=n(148),a=n(126),l=n(141),r=n(122),c=Object.getOwnPropertyDescriptor;t.f=n(123)?c:function(e,t){if(e=s(e),t=a(t,!0),r)try{return c(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(172)("asyncIterator")},function(e,t,n){n(172)("observable")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(185),s=i(o),a=n(189),l=i(a),r=n(131),c=i(r);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){n(187),e.exports=n(115).Object.setPrototypeOf},function(e,t,n){var i=n(113);i(i.S,"Object",{setPrototypeOf:n(188).set})},function(e,t,n){var i=n(121),o=n(120),s=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(116)(Function.call,n(180).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:s}},function(e,t,n){e.exports={default:n(190),__esModule:!0}},function(e,t,n){n(191);var i=n(115).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(113);i(i.S,"Object",{create:n(144)})},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i};e.exports=n(193)(o,!0)}else e.exports=n(199)()}).call(t,n(16))},function(e,t,n){(function(t){"use strict";var i=n(194),o=n(195),s=n(196),a=n(197),l=n(198);e.exports=function(e,n){function r(e){var t=e&&(S&&e[S]||e[C]);if("function"==typeof t)return t}function c(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function d(e){this.message=e,this.stack=""}function u(e){function i(i,c,u,p,m,h,f){if(p=p||T,h=h||u,f!==a)if(n)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var _=p+":"+u;!l[_]&&r<3&&(s(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",h,p),l[_]=!0,r++)}return null==c[u]?i?new d(null===c[u]?"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `null`.":"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(c,u,p,m,h)}if("production"!==t.env.NODE_ENV)var l={},r=0;var c=i.bind(null,!1);return c.isRequired=i.bind(null,!0),c}function p(e){function t(t,n,i,o,s,a){var l=t[n];if(y(l)!==e)return new d("Invalid "+o+" `"+s+"` of type `"+k(l)+"` supplied to `"+i+"`, expected `"+e+"`.");return null}return u(t)}function m(e){function t(t,n,i,o,s){if("function"!=typeof e)return new d("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var l=t[n];if(!Array.isArray(l)){return new d("Invalid "+o+" `"+s+"` of type `"+y(l)+"` supplied to `"+i+"`, expected an array.")}for(var r=0;r<l.length;r++){var c=e(l,r,i,o,s+"["+r+"]",a);if(c instanceof Error)return c}return null}return u(t)}function h(e){function t(t,n,i,o,s){if(!(t[n]instanceof e)){var a=e.name||T;return new d("Invalid "+o+" `"+s+"` of type `"+j(t[n])+"` supplied to `"+i+"`, expected instance of `"+a+"`.")}return null}return u(t)}function f(e){function n(t,n,i,o,s){for(var a=t[n],l=0;l<e.length;l++)if(c(a,e[l]))return null;return new d("Invalid "+o+" `"+s+"` of value `"+a+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?u(n):("production"!==t.env.NODE_ENV&&s(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull)}function _(e){function t(t,n,i,o,s){if("function"!=typeof e)return new d("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var l=t[n],r=y(l);if("object"!==r)return new d("Invalid "+o+" `"+s+"` of type `"+r+"` supplied to `"+i+"`, expected an object.");for(var c in l)if(l.hasOwnProperty(c)){var u=e(l,c,i,o,s+"."+c,a);if(u instanceof Error)return u}return null}return u(t)}function g(e){function n(t,n,i,o,s){for(var l=0;l<e.length;l++){if(null==(0,e[l])(t,n,i,o,s,a))return null}return new d("Invalid "+o+" `"+s+"` supplied to `"+i+"`.")}if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&s(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var o=0;o<e.length;o++){var l=e[o];if("function"!=typeof l)return s(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",x(l),o),i.thatReturnsNull}return u(n)}function v(e){function t(t,n,i,o,s){var l=t[n],r=y(l);if("object"!==r)return new d("Invalid "+o+" `"+s+"` of type `"+r+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var p=u(l,c,i,o,s+"."+c,a);if(p)return p}}return null}return u(t)}function b(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(b);if(null===t||e(t))return!0;var n=r(t);if(!n)return!1;var i,o=n.call(t);if(n!==t.entries){for(;!(i=o.next()).done;)if(!b(i.value))return!1}else for(;!(i=o.next()).done;){var s=i.value;if(s&&!b(s[1]))return!1}return!0;default:return!1}}function w(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":w(t,e)?"symbol":t}function k(e){if(void 0===e||null===e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=k(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function j(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var S="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",T="<<anonymous>>",O={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return u(i.thatReturnsNull)}(),arrayOf:m,element:function(){function t(t,n,i,o,s){var a=t[n];if(!e(a)){return new d("Invalid "+o+" `"+s+"` of type `"+y(a)+"` supplied to `"+i+"`, expected a single ReactElement.")}return null}return u(t)}(),instanceOf:h,node:function(){function e(e,t,n,i,o){return b(e[t])?null:new d("Invalid "+i+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return u(e)}(),objectOf:_,oneOf:f,oneOfType:g,shape:v};return d.prototype=Error.prototype,O.checkPropTypes=l,O.PropTypes=O,O}}).call(t,n(16))},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){(function(t){"use strict";function n(e,t,n,o,s,a,l,r){if(i(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,s,a,l,r],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(e){};"production"!==t.env.NODE_ENV&&(i=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(16))},function(e,t,n){(function(t){"use strict";var i=n(194),o=i;"production"!==t.env.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=0,s="Warning: "+e.replace(/%s/g,function(){return n[o++]});try{throw new Error(s)}catch(e){}};o=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];e.apply(void 0,[n].concat(o))}}}(),e.exports=o}).call(t,n(16))},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){"use strict";function i(e,n,i,r,c){if("production"!==t.env.NODE_ENV)for(var d in e)if(e.hasOwnProperty(d)){var u;try{o("function"==typeof e[d],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",i,d),u=e[d](n,d,r,i,null,a)}catch(e){u=e}if(s(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",i,d,typeof u),u instanceof Error&&!(u.message in l)){l[u.message]=!0;var p=c?c():"";s(!1,"Failed %s type: %s%s",i,u.message,null!=p?p:"")}}}if("production"!==t.env.NODE_ENV)var o=n(195),s=n(196),a=n(197),l={};e.exports=i}).call(t,n(16))},function(e,t,n){"use strict";var i=n(194),o=n(195),s=n(197);e.exports=function(){function e(e,t,n,i,a,l){l!==s&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=i(o),a=n(107),l=i(a),r=function(e){return s.default.createElement("div",{className:"settingItem"},s.default.createElement("span",{className:"settingItem__title"},e.setting_title),s.default.createElement("span",{className:"pull-right"},s.default.createElement(l.default,{size:"small",checked:e.setting_value,onChange:function(){return e.updateSetting(e.setting_name)}})))};t.default=r,e.exports=t.default}])}),define("components/message/message_bot_lite",["require","components/balance_tip/app","react","react-dom","@youzan/notice/dist/main"],function(e){"use strict";var t=e("components/balance_tip/app"),n=(e("react"),e("react-dom"),e("@youzan/notice/dist/main"));return{init:function(){n.renderNotice({imLink:"http://b-im.youzan.com/"}),setTimeout(function(){"/dashboard/index"!==window._global.query_path&&new t},1e3)}}}),define("core/reqres",["require","backbone","backbone.wreqr"],function(e){"use strict";var t=e("backbone");e("backbone.wreqr");return window.RS?window.RS:(window.RS=new t.Wreqr.RequestResponse,window.RS)}),define("commons/utils",["require","underscore","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i={};return t.extend(i,{fetchSaleProperty:function(e,t){n.ajax({url:window._global.url.www+"/showcase/paipai/saleproperty.json",type:"GET",cache:!1,data:e}).done(function(e,n){t(n)}).fail(function(e){n.errorNotify(e)})},calcProfit:function(e,t){e=Number(e);var i=t.cost||.01,o=e-i;return o=n.twoDecimal(o)},removeSkuKeyValue:function(e,t){for(var n=3;n>t;n--){var i="sku_name_"+n,o=i+"_value";e.unset(i,{silent:!0}),e.unset(o,{silent:!0})}},needConfirm:function(e,t,n){window.confirm(e)?t&&"function"==typeof t&&t.apply():n&&"function"==typeof n&&n.apply()},button:function(e,t,n){if(!e)return!1;e=$(e),e.text(t).prop("disabled",n)},decimalFix:n.decimalFix,originValueFix:function(e){var n,i,o,s=e.match(/([^\d\uffe5]*)[\uffe5]?(\d+\.?\d*)(.*)$/),a=e;return s&&s.length>2&&(i=s[1],n=+s[2],o=s[3],t.isNumber(n)&&(n=n.toFixed(2,10)),o||(o=""),a=i+"￥"+n+o),a},buyUrlValueFix:function(e){return n.urlCheck(e)},booleanConverter:function(e,t,n,i,o){return t=+t},numberValueFix:function(e){var t=Number(e);return isNaN(t)?e:t.toFixed(2)},showLog:function(e){e.toJSON()},getIdxOfCollection:function(e){return e.collection.indexOf(e)}}),i}),define("components/showcase/2.0.0/base/models/base",["require","underscore","backbone"],function(e){"use strict";var t=e("underscore"),n=e("backbone");return n.Model.extend({position:function(){return this.collection.indexOf(this)},index:function(){return this.collection.indexOf(this)},hasChanged:function(){return!!n.Model.prototype.hasChanged.call(this)||(this.has("sub_entry")?this.get("sub_entry").any(function(e){return e.hasChanged()}):void 0)},checkValid:function(){var e=!1
;return t.isFunction(this.validate)&&(e=this.validate()),!!this.validateSubEntry(this,e)||e},validateSubEntry:function(e,n){var i=e.get("sub_entry"),o=!1;return i&&i.each(function(e){if(t.isFunction(e.validate)){var i=!!e.validate();!n&&i&&e.trigger("valid:error",e)}o=this.validateSubEntry(e,i)||i||o},this),o}})}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return ye.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(e){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function s(e,t){var n=!0;return u(function(){return n&&(o(e),n=!1),t.apply(this,arguments)},t)}function a(e,t){ut[e]||(o(t),ut[e]=!0)}function l(e,t){return function(n){return h(e.call(this,n),t)}}function r(){}function c(e,t){t!==!1&&I(e),p(this,e),this._d=new Date(+e._d)}function d(e){var t=x(e),n=t.year||0,i=t.quarter||0,o=t.month||0,s=t.week||0,a=t.day||0,l=t.hour||0,r=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*r+36e5*l,this._days=+a+7*s,this._months=+o+3*i+12*n,this._data={},this._locale=_e.localeData(),this._bubble()}function u(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,i,o;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),Pe.length>0)for(n in Pe)i=Pe[n],void 0!==(o=t[i])&&(e[i]=o);return e}function m(e){return e<0?Math.ceil(e):Math.floor(e)}function h(e,t,n){for(var i=""+Math.abs(e),o=e>=0;i.length<t;)i="0"+i;return(o?n?"+":"":"-")+i}function f(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function _(e,t){var n;return t=N(t,e),e.isBefore(t)?n=f(e,t):(n=f(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function g(e,t){return function(n,i){var o,s;return null===i||isNaN(+i)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,o=_e.duration(n,i),v(this,o,e),this}}function v(e,t,n,i){var o=t._milliseconds,s=t._days,a=t._months;i=null==i||i,o&&e._d.setTime(+e._d+o*n),s&&ue(e,"Date",de(e,"Date")+s*n),a&&ce(e,de(e,"Month")+a*n),i&&_e.updateOffset(e,s||a)}function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function y(e,t,n){var i,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&j(e[i])!==j(t[i]))&&a++;return a+s}function k(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ot[e]||st[t]||t}return e}function x(e){var t,i,o={};for(i in e)n(e,i)&&(t=k(i))&&(o[t]=e[i]);return o}function j(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function C(e,t,n){return se(_e([e,11,31+t-n]),t,n).week}function T(e){return O(e)?366:365}function O(e){return e%4==0&&e%100!=0||e%400==0}function I(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[xe]<0||e._a[xe]>11?xe:e._a[je]<1||e._a[je]>S(e._a[ke],e._a[xe])?je:e._a[Se]<0||e._a[Se]>24||24===e._a[Se]&&(0!==e._a[Ce]||0!==e._a[Te]||0!==e._a[Oe])?Se:e._a[Ce]<0||e._a[Ce]>59?Ce:e._a[Te]<0||e._a[Te]>59?Te:e._a[Oe]<0||e._a[Oe]>999?Oe:-1,e._pf._overflowDayOfYear&&(t<ke||t>je)&&(t=je),e._pf.overflow=t)}function P(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function z(e){return e?e.toLowerCase().replace("_","-"):e}function E(e){for(var t,n,i,o,s=0;s<e.length;){for(o=z(e[s]).split("-"),t=o.length,n=z(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=M(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(o,n,!0)>=t-1)break;t--}s++}return null}function M(e){var t=null;if(!Ie[e]&&ze)try{t=_e.locale(),require("./locale/"+e),_e.locale(t)}catch(e){}return Ie[e]}function N(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(_e.isMoment(e)||w(e)?+e:+_e(e))-+n,n._d.setTime(+n._d+i),_e.updateOffset(n,!1),n):_e(e).local()}function D(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e){var t,n,i=e.match(De);for(t=0,n=i.length;t<n;t++)dt[i[t]]?i[t]=dt[i[t]]:i[t]=D(i[t]);return function(o){var s="";for(t=0;t<n;t++)s+=i[t]instanceof Function?i[t].call(o,e):i[t];return s}}function q(e,t){return e.isValid()?(t=A(t,e.localeData()),at[t]||(at[t]=F(t)),at[t](e)):e.localeData().invalidDate()}function A(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Fe.lastIndex=0;i>=0&&Fe.test(e);)e=e.replace(Fe,n),Fe.lastIndex=0,i-=1;return e}function R(e,t){var n=t._strict;switch(e){case"Q":return Ge;case"DDDD":return Ke;case"YYYY":case"GGGG":case"gggg":return n?Je:Re;case"Y":case"G":case"g":return Qe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Xe:Le;case"S":if(n)return Ge;case"SS":if(n)return Ye;case"SSS":if(n)return Ke;case"DDD":return Ae;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $e;case"a":case"A":return t._locale._meridiemParse;case"x":return He;case"X":return We;case"Z":case"ZZ":return Ve;case"T":return Be;case"SSSS":return Ue;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ye:qe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return qe;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(Y(G(e.replace("\\",""))))}}function L(e){e=e||"";var t=e.match(Ve)||[],n=t[t.length-1]||[],i=(n+"").match(nt)||["-",0,0],o=+(60*i[1])+j(i[2]);return"+"===i[0]?-o:o}function U(e,t,n){var i,o=n._a;switch(e){case"Q":null!=t&&(o[xe]=3*(j(t)-1));break;case"M":case"MM":null!=t&&(o[xe]=j(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?o[xe]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[je]=j(t));break;case"Do":null!=t&&(o[je]=j(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=j(t));break;case"YY":o[ke]=_e.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[ke]=j(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":o[Se]=j(t);break;case"m":case"mm":o[Ce]=j(t);break;case"s":case"ss":o[Te]=j(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Oe]=j(1e3*("0."+t));break;case"x":n._d=new Date(j(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=L(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=j(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=_e.parseTwoDigitYear(t)}}function $(e){var n,i,o,s,a,l,r;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,l=4,i=t(n.GG,e._a[ke],se(_e(),1,4).year),o=t(n.W,1),s=t(n.E,1)):(a=e._locale._week.dow,l=e._locale._week.doy,i=t(n.gg,e._a[ke],se(_e(),a,l).year),o=t(n.w,1),null!=n.d?(s=n.d)<a&&++o:s=null!=n.e?n.e+a:a),r=ae(i,o,s,l,a),e._a[ke]=r.year,e._dayOfYear=r.dayOfYear}function V(e){var n,i,o,s,a=[];if(!e._d){for(o=H(e),e._w&&null==e._a[je]&&null==e._a[xe]&&$(e),e._dayOfYear&&(s=t(e._a[ke],o[ke]),e._dayOfYear>T(s)&&(e._pf._overflowDayOfYear=!0),i=te(s,0,e._dayOfYear),e._a[xe]=i.getUTCMonth(),e._a[je]=i.getUTCDate()),n=0;n<3&&null==e._a[n];++n)e._a[n]=a[n]=o[n];for(;n<7;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Se]&&0===e._a[Ce]&&0===e._a[Te]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[Se]=0),e._d=(e._useUTC?te:ee).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Se]=24)}}function B(e){var t;e._d||(t=x(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],V(e))}function H(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function W(t){if(t._f===_e.ISO_8601)return void J(t);t._a=[],t._pf.empty=!0;var n,i,o,s,a,l=""+t._i,r=l.length,c=0;for(o=A(t._f,t._locale).match(De)||[],n=0;n<o.length;n++)s=o[n],i=(l.match(R(s,t))||[])[0],i&&(a=l.substr(0,l.indexOf(i)),a.length>0&&t._pf.unusedInput.push(a),l=l.slice(l.indexOf(i)+i.length),c+=i.length),dt[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),U(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=r-c,l.length>0&&t._pf.unusedInput.push(l),t._pf.bigHour===!0&&t._a[Se]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Se]<12&&(t._a[Se]+=12),t._isPm===!1&&12===t._a[Se]&&(t._a[Se]=0),V(t),I(t)}function G(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,o){return t||n||i||o})}function Y(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(e){var t,n,o,s,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)a=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[s],W(t),P(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==o||a<o)&&(o=a,n=t));u(e,n||t)}function J(e){var t,n,i=e._i,o=Ze.exec(i);if(o){for(e._pf.iso=!0,t=0,n=et.length;t<n;t++)if(et[t][1].exec(i)){e._f=et[t][0]+(o[6]||" ");break}for(t=0,n=tt.length;t<n;t++)if(tt[t][1].exec(i)){e._f+=tt[t][0];break}i.match(Ve)&&(e._f+="Z"),W(e)}else e._isValid=!1}function X(e){J(e),e._isValid===!1&&(delete e._isValid,_e.createFromInputFallback(e))}function Q(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function Z(t){var n,i=t._i;i===e?t._d=new Date:w(i)?t._d=new Date(+i):null!==(n=Ee.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?X(t):b(i)?(t._a=Q(i.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof i?B(t):"number"==typeof i?t._d=new Date(i):_e.createFromInputFallback(t)}function ee(e,t,n,i,o,s,a){var l=new Date(e,t,n,i,o,s,a);return e<1970&&l.setFullYear(e),l}function te(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ne(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function ie(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function oe(e,t,n){var i=_e.duration(e).abs(),o=we(i.as("s")),s=we(i.as("m")),a=we(i.as("h")),l=we(i.as("d")),r=we(i.as("M")),c=we(i.as("y")),d=o<lt.s&&["s",o]||1===s&&["m"]||s<lt.m&&["mm",s]||1===a&&["h"]||a<lt.h&&["hh",a]||1===l&&["d"]||l<lt.d&&["dd",l]||1===r&&["M"]||r<lt.M&&["MM",r]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,ie.apply({},d)}function se(e,t,n){var i,o=n-t,s=n-e.day();return s>o&&(s-=7),s<o-7&&(s+=7),i=_e(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ae(e,t,n,i,o){var s,a,l=te(e,0,1).getUTCDay();return l=0===l?7:l,n=null!=n?n:o,s=o-l+(l>i?7:0)-(l<o?7:0),a=7*(t-1)+(n-o)+s+1,{year:a>0?e:e-1,dayOfYear:a>0?a:T(e-1)+a}}function le(t){var n,i=t._i,o=t._f;return t._locale=t._locale||_e.localeData(t._l),null===i||o===e&&""===i?_e.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),_e.isMoment(i)?new c(i,!0):(o?b(o)?K(t):W(t):Z(t),n=new c(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function re(e,t){var n,i;if(1===t.length&&b(t[0])&&(t=t[0]),!t.length)return _e();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function ce(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function de(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ue(e,t,n){return"Month"===t?ce(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function pe(e,t){return function(n){return null!=n?(ue(this,e,n),_e.updateOffset(this,t),this):de(this,e)}}function me(e){return 400*e/146097}function he(e){return 146097*e/400}function fe(e){"undefined"==typeof ender&&(ge=be.moment,be.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):_e)}for(var _e,ge,ve,be="undefined"!=typeof global?global:this,we=Math.round,ye=Object.prototype.hasOwnProperty,ke=0,xe=1,je=2,Se=3,Ce=4,Te=5,Oe=6,Ie={},Pe=[],ze="undefined"!=typeof module&&module&&module.exports,Ee=/^\/?Date\((\-?\d+)/i,Me=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ne=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,De=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Fe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qe=/\d\d?/,Ae=/\d{1,3}/,Re=/\d{1,4}/,Le=/[+\-]?\d{1,6}/,Ue=/\d+/,$e=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ve=/Z|[\+\-]\d\d:?\d\d/gi,Be=/T/i,He=/[\+\-]?\d+/,We=/[\+\-]?\d+(\.\d{1,3})?/,Ge=/\d/,Ye=/\d\d/,Ke=/\d{3}/,Je=/\d{4}/,Xe=/[+-]?\d{6}/,Qe=/[+-]?\d+/,Ze=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,et=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],tt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],nt=/([\+\-]|\d\d)/gi,it=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ot={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},st={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},at={},lt={s:45,m:45,h:22,d:26,M:11},rt="DDD w W M D d".split(" "),ct="M D H h m s w W".split(" "),dt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},YYYYY:function(){return h(this.year(),5)},YYYYYY:function(){var e=this.year();return(e>=0?"+":"-")+h(Math.abs(e),6)},gg:function(){return h(this.weekYear()%100,2)},gggg:function(){return h(this.weekYear(),4)},ggggg:function(){return h(this.weekYear(),5)},GG:function(){return h(this.isoWeekYear()%100,2)},GGGG:function(){return h(this.isoWeekYear(),4)},GGGGG:function(){return h(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return j(this.milliseconds()/100)},SS:function(){return h(j(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},SSSS:function(){return h(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+h(j(e/60),2)+":"+h(j(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+h(j(e/60),2)+h(j(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ut={},pt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];rt.length;)ve=rt.pop(),dt[ve+"o"]=function(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}(dt[ve],ve);for(;ct.length;)ve=ct.pop(),dt[ve+ve]=l(dt[ve],2);dt.DDDD=l(dt.DDD,3),u(r.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=_e.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=_e([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(e,t,n,i):o.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return se(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(t,n,o,s){var a;return"boolean"==typeof o&&(s=o,o=e),a={},a._isAMomentObject=!0,a._i=t,a._f=n,a._l=o,a._strict=s,a._isUTC=!1,a._pf=i(),le(a)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),_e.min=function(){return re("isBefore",[].slice.call(arguments,0))},_e.max=function(){return re("isAfter",[].slice.call(arguments,0))},_e.utc=function(t,n,o,s){var a;return"boolean"==typeof o&&(s=o,o=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=o,a._i=t,a._f=n,a._strict=s,a._pf=i(),le(a).utc()},_e.unix=function(e){return _e(1e3*e)},_e.duration=function(e,t){var i,o,s,a,l=e,r=null;return _e.isDuration(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(l={},t?l[t]=e:l.milliseconds=e):(r=Me.exec(e))?(i="-"===r[1]?-1:1,l={y:0,d:j(r[je])*i,h:j(r[Se])*i,m:j(r[Ce])*i,s:j(r[Te])*i,ms:j(r[Oe])*i}):(r=Ne.exec(e))?(i="-"===r[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},l={y:s(r[2]),M:s(r[3]),d:s(r[4]),h:s(r[5]),m:s(r[6]),s:s(r[7]),w:s(r[8])}):"object"==typeof l&&("from"in l||"to"in l)&&(a=_(_e(l.from),_e(l.to)),l={},l.ms=a.milliseconds,l.M=a.months),o=new d(l),_e.isDuration(e)&&n(e,"_locale")&&(o._locale=e._locale),o},_e.version="2.8.4",_e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",_e.ISO_8601=function(){},_e.momentProperties=Pe,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(t,n){return lt[t]!==e&&(n===e?lt[t]:(lt[t]=n,!0))},_e.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return _e.locale(e,t)}),_e.locale=function(e,t){var n;return e&&(n=void 0!==t?_e.defineLocale(e,t):_e.localeData(e))&&(_e.duration._locale=_e._locale=n),_e._locale._abbr},_e.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ie[e]||(Ie[e]=new r),Ie[e].set(t),_e.locale(e),Ie[e]):(delete Ie[e],null)},_e.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return _e.localeData(e)}),_e.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _e._locale;if(!b(e)){if(t=M(e))return t;e=[e]}return E(e)},_e.isMoment=function(e){return e instanceof c||null!=e&&n(e,"_isAMomentObject")},_e.isDuration=function(e){return e instanceof d};for(ve=pt.length-1;ve>=0;--ve)!function(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}_e[t]=function(o,s){var a,l,r=_e._locale[t],c=[];if("number"==typeof o&&(s=o,o=e),l=function(e){var t=_e().utc().set(i,e);return r.call(_e._locale,t,o||"")},null!=s)return l(s);for(a=0;a<n;a++)c.push(l(a));return c}}(pt[ve]);_e.normalizeUnits=function(e){return k(e)},_e.invalid=function(e){var t=_e.utc(NaN);return null!=e?u(t._pf,e):t._pf.userInvalidated=!0,t},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(e){return j(e)+(j(e)>68?1900:2e3)},u(_e.fn=c.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=_e(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():q(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&y(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0)},parsingFlags:function(){return u({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=q(this,e||_e.defaultFormat);return this.localeData().postformat(t)},add:g(1,"add"),subtract:g(-1,"subtract"),diff:function(e,t,n){var i,o,s,a=N(e,this),l=6e4*(this.zone()-a.zone());return t=k(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+a.daysInMonth()),o=12*(this.year()-a.year())+(this.month()-a.month()),s=this-_e(this).startOf("month")-(a-_e(a).startOf("month")),s-=6e4*(this.zone()-_e(this).startOf("month").zone()-(a.zone()-_e(a).startOf("month").zone())),o+=s/i,"year"===t&&(o/=12)):(i=this-a,o="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-l)/864e5:"week"===t?(i-l)/6048e5:i),n?o:m(o)},from:function(e,t){return _e.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(_e(),e)},calendar:function(e){var t=e||_e(),n=N(t,this).startOf("day"),i=this.diff(n,"days",!0),o=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_e(t)))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ne(e,this.localeData()),this.add(e-t,"d")):t},month:pe("Month",!0),startOf:function(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=k(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){return t=k(void 0!==t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this>+e):(_e.isMoment(e)?+e:+_e(e))<+this.clone().startOf(t)},isBefore:function(e,t){var n;return t=k(void 0!==t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this<+e):(n=_e.isMoment(e)?+e:+_e(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=k(t||"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this==+e):(n=+_e(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e<this?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=L(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?v(this,_e.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?_e(e).zone():0,(this.zone()-e)%60==0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=we((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=se(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return C(this.year(),e.dow,e.doy)},get:function(e){return e=k(e),this[e]()},set:function(e,t){return e=k(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=_e.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),_e.fn.millisecond=_e.fn.milliseconds=pe("Milliseconds",!1),_e.fn.second=_e.fn.seconds=pe("Seconds",!1),_e.fn.minute=_e.fn.minutes=pe("Minutes",!1),_e.fn.hour=_e.fn.hours=pe("Hours",!0),_e.fn.date=pe("Date",!0),_e.fn.dates=s("dates accessor is deprecated. Use date instead.",pe("Date",!0)),_e.fn.year=pe("FullYear",!0),_e.fn.years=s("years accessor is deprecated. Use year instead.",pe("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,u(_e.duration.fn=d.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,o=this._days,s=this._months,a=this._data,l=0;a.milliseconds=i%1e3,e=m(i/1e3),a.seconds=e%60,t=m(e/60),a.minutes=t%60,n=m(t/60),a.hours=n%24,o+=m(n/24),l=m(me(o)),o-=m(he(l)),s+=m(o/30),o%=30,l+=m(s/12),s%=12,a.days=o,a.months=s,a.years=l},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*j(this._months/12)},humanize:function(e){var t=oe(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=_e.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=_e.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=k(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=k(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*me(t),"month"===e?n:n/12;switch(t=this._days+Math.round(he(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":
return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||o||s?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),_e.duration.fn.toString=_e.duration.fn.toISOString;for(ve in it)n(it,ve)&&function(e){_e.duration.fn[e]=function(){return this._data[e]}}(ve.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===j(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),ze?module.exports=_e:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(be.moment=ge),_e}),fe(!0)):fe()}.call(this),define("models/config",["require","underscore","jquery","backbone","components/showcase/2.0.0/base/models/base","core/reqres","core/utils","moment"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("components/showcase/2.0.0/base/models/base"),s=e("core/reqres"),a=e("core/utils"),l=e("moment");return o.extend({idAttribute:"goods_id",defaults:function(){return{type:"config",goods_type:"",goods_platform:"",origin_goods_id:"",fx_shipper_type:"",is_new_category:"1",class_type:"0",class_1:"",class_2:"",goods_class:[],cid:"",shop_method:"1",attrs:null,tag:[],shipment:"0",disableShipment:!1,stock:[],hide_stock:"0",total_stock:0,goods_no:"",title:"",picture:[],picture_height:"320",price:"",origin:"",buy_url:"",postage:"",delivery:0,delivery_template_id:"0",delivery_template_type:0,quota:"0",province_id:"0",province:"",city_id:"0",city:"",messages:[],sold_time:"0",start_sold_time:"",take_down_time:"",purchase_right:"0",ump_tags:[],ump_level:[],join_level_discount:"1",is_hotel:"0",need_customs_info:0,invoice:"0",warranty:"0",content:"",sub_title:"",components_extra_id:"-2",pre_sale:0,etd_type:0,etd_start:"",etd_days:"",sku_image_id:0,service_tel_code:"",service_tel:"",valid_period:"0",item_validity_start:"",item_validity_end:"",effective_type:"0",effective_delay_hours:"",holidays_available:"1",hasNewSkuAdded:"0",item_weight:0,sku_weight:[],stock_locked:!1,cost_price:"",have_sku_extend:null,video_id:"",video_model:{}}},calculateImage:function(){var e=this,n=0;t.each(e.get("picture"),function(e){var i=Number(e.width)/320;i=i<1?1:i;var o=t.isUndefined(e.height)||0===Number(e.height)?320:Number(e.height)/i;n=o>n?o:n}),n=n>420?420:n,0===n&&(n=320),e.set("picture_height",n)},initialize:function(e){e&&e.picture&&this.fixPicture(e.picture),e&&e.item_validity_start&&e.item_validity_end&&this.set("valid_period","1"),this.isFx="10"==this.get("goods_type"),this.setupPriceRangeResp(),this.on("change:shipment",this.handleShipmentChange)},handleShipmentChange:function(){var e=this.toJSON(),t=e.messages||[],n=+e.shipment;"2"==n&&(t.length||t.push({name:"手机号",type:"tel",multiple:"0",required:"1"}),this.set("messages",t)),this.set("is_hotel",4===n?"1":"0")},fixPicture:function(e){t.isArray(e)||(e=t.toArray(e)),this.set("picture",e,{silent:!0})},setupPriceRangeResp:function(){var e=this;s.setHandler("price_range:get",function(t){var n=e.getPriceRange(t);return n&&(n.cost=Number(n.cost),n.min=Number(n.min),n.max=Number(n.max)),n})},getPriceRange:function(e){var t={cost:.01,min:.01,max:9999999},n=this.get("fx_goods_retail_price_limitation")||{};return this.isFx&&e&&n&&(t=n[e]),t},validation:{class_1:function(e,t,n){if("0"==n.class_type&&""===e)return"必须选择一个商品类目。"},goods_class:function(e,n,i){if("1"==i.class_type&&!e&&t.isEmpty(e))return"必须选择一个商品类目。"},sku_name_1_value:function(e,t,n){if("1"==n.is_hotel&&e&&e.length>10)return a.errorNotify("房间规格不能超过10个"),"房间规格不能超过10个"},title:{rangeLength:[1,100],msg:"商品名长度不能少于一个字或者多于100个字"},picture:function(e){return t.isArray(e)&&e.length<=0?"商品图至少有一张。":t.isArray(e)&&e.length>15?"商品图片最多支持 15 张。":void 0},postage:function(e){if(!i.Validation.patterns.number.test(+e))return"邮费必须为数字。"},price:function(e,n,o){var a=this,l=+e,r=s.request("price_range:get","total")||{min:.01,max:9999999};if(r.max=t.isObject(r)&&r.max>9999999?9999999:r.max,t.isEmpty(o.stock)){if(!e)return"商品价格不能为空";if(!i.Validation.patterns.number.test(l))return"商品价格必须为数字。";if(l<=0)return"商品价格必须大于0元。";if(a.isFx&&(l<Number(r.min)||l>Number(r.max)))return"分销商品价格只能设置成"+r.min+"元 ~ "+r.max+"元 区间内"}},buy_url:function(e,t,n){if("0"==n.shop_method){if(!e)return"购买地址不能为空。";if(!i.Validation.patterns.url.test(e))return"购买地址必须是一个合法网址。"}},total_stock:function(e,t,n){if("0"!=n.shop_method){var o=+e;if(!i.Validation.patterns.number.test(+e))return"总库存必须是数字。";if(o<0)return"总库存不能小于 0。";if(o>999999999)return"总库存最大不能超过 999999999。";if(0==n.stock.length&&!/^\d+$/.test(o.toString()))return"库存格式不正确"}},sku_value:function(e,n,i){for(var o,e,s=1;s<=5;s++)if(o=i["sku_name_"+s],e=i["sku_name_"+s+"_value"],!t.isEmpty(o)&&t.isEmpty(e))return"请将商品规格“"+o.text+"”的信息填写完整"},quota:function(e){return i.Validation.patterns.number.test(+e)?/\./.test(+e)?"限购数量必须是整数":void 0:"限购数量必须是数字"},sold_time:function(e,t,n){if(1==+e&&""===n.start_sold_time)return"请选择一个开售时间"},take_down_time:function(e,t,n){var i=+new Date,o=+new Date(n.start_sold_time)||0,s=+new Date(e);return""!==e&&s-i<6e4?"下架时间必须大于当前时间至少一分钟":"1"==n.sold_time&&""!==e&&s-o<6e4?"下架时间必须大于定时开售时间至少一分钟":void 0},messages:function(e,t,i){if("1"==i.shop_method){var o=e.length,s={};if(o>10)return"单件商品留言条数最多10条，如有超出留言，请删除。";for(var a=o-1;a>=0;a--){var l=e[a].name;if(""===n.trim(l))return"留言名称不能为空";if(l.length>5)return"留言名称不能多于5个字。";if(s[l])return"留言名称不能重复";s[l]=!0}}},delivery:function(e,t,n){if(1==+e&&0==+n.delivery_template_id)return"请选择运费模版"},etd_start:function(e,t,n){var i=n.etd_start;if(0==+n.etd_type&&0==n.shipment&&n.pre_sale&&!i)return"请选择预计发货时间"},etd_days:function(e,t,n){if(1==+n.etd_type){if(!e)return"请填写付款后发货时间";if(e=Number(e),isNaN(e))return"天数必须为整数";if(e<=0||e>90)return"只允许设置90天内的发货时间";if(parseInt(e,10)!==e)return"天数必须为整数"}},service_tel_code:function(e,t,n){if("1"==n.is_hotel&&"1"==n.shop_method&&""!=e&&!/^\d+$/.test(e))return"区号为数字"},service_tel:function(e,t,n){if("1"==n.is_hotel&&"1"==n.shop_method&&!/^\d+$/.test(e))return"电话为数字"},valid_period:function(e,t,n){var i=n.item_validity_start,o=n.item_validity_end;if("0"!=e)return i&&o?void 0:"请选择商品有效期"},effective_delay_hours:function(e,t,n){if("1"==n.effective_type)return e?/^\d+$/.test(e)?0==e?"生效时间必须大于0":void 0:"生效时间必须是整数":"请输入电子凭证生效时间"}},parse:function(e){return"10"===e.goods_platform&&(this.originData=this.deepCopy(e)),0==+e.delivery_template_id||t.isUndefined(e.delivery_template_id)?e.delivery=0:e.delivery=1,e.title=t.unescape(e.title),e.purchase_right+="",1!=+e.purchase_right&&(e.ump_level=[],e.ump_tags=[]),e.effective_type+="",e.holidays_available+="",e.item_validity_start&&e.item_validity_end&&(e.item_validity_start=l.unix(e.item_validity_start).format("YYYY-MM-DD"),e.item_validity_end=l.unix(e.item_validity_end).add(-1,"days").format("YYYY-MM-DD")),e},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},needToSetFenxiaoPrice:function(){if("10"!==this.get("goods_platform"))return!1;var e=this.toJSON(),n=this.originData;if(0===n.stock.length&&0===e.stock.length)return n.price!==e.price;if(n.stock.length!==e.stock.length)return!0;for(var i=0;i<e.stock.length;i++){var o=e.stock[i];if(!o.id)return!0;var s=t.find(this.originData.stock,function(e){return e.id===o.id});if(!s)return!0;if(o.price!==s.price)return!0}return!1}})}),define("components/showcase/2.0.0/base/storage",["require","underscore"],function(e){"use strict";var t=e("underscore"),n=window.JSON,i=window.localStorage,o=function(e,t){var n=t.id;this.name="mp-"+window._global.kdt_id+"-adm-"+window._global.user_id+"-",this.name+=n?e+"-"+n:e};return t.extend(o.prototype,{set:function(e,t){if(i){t=n.stringify(t);try{i.setItem(e,t)}catch(n){"QuotaExceededError"===n.name&&(i.clear(),i.setItem(e,t))}}},get:function(e){if(i)return n.parse(i.getItem(e))},remove:function(e){i&&i.removeItem(e)},setItem:function(e){this.set(this.name,e)},getItem:function(){return this.get(this.name)},removeItem:function(){this.remove(this.name)}}),o}),define("components/showcase/2.0.0/base/collections/base",["require","backbone","core/utils","jquery","underscore","components/showcase/2.0.0/base/storage","core/utils","components/spider/spider"],function(e){"use strict";var t=e("backbone"),n=e("core/utils"),i=e("jquery"),o=e("underscore"),s=e("components/showcase/2.0.0/base/storage"),n=e("core/utils");return e("components/spider/spider"),t.Collection.extend({url:"",storageName:"",model:function(e,t){if(!(e.type in window.SHOWCASE_CONFIG.models))throw"type error";var n=window.SHOWCASE_CONFIG.models[e.type];return n.initialize?n.initialize(e,t):new n(e,t)},initialize:function(e,t){this.options=t||{},o.isUndefined(this.options.id)||(this.id=this.options.id),this.storage=new s(this.storageName,t),this.changed=!1,this.listenTo(this,"add remove sort reset",this._changed),this.listenTo(this,"sync",this._unchanged)},_changed:function(){this.changed=!0},_unchanged:function(){this.changed=!1},validate:function(){return this.some(function(e){var t=e.checkValid();return t&&e.trigger("valid:error"),t})},customValidate:function(){return!1},parse:function(e){var t=o.reject(e,function(e){return window.SHOWCASE_CONFIG.models?o.isArray(e)||o.isEmpty(e)||!(e.type in window.SHOWCASE_CONFIG.models)&&"config"!==e.type:o.isArray(e)||o.isEmpty(e)}),n=window.SHOWCASE_CONFIG.models.config||{};return o.isEmpty(t)&&!this.noConfig&&(t.push(o.clone(o.result(n.prototype,"defaults"))),o.isFunction(this.parseEmptyData))?this.parseEmptyData(t):o.isFunction(this.onParse)?this.onParse(t):t},localSync:function(){if(!this.length)return void this.clearLocalData();this.hasChanged()&&this.storage.setItem(this.toJSON())},localFetch:function(){return this.storage.getItem()},clearLocalData:function(){this.storage.removeItem()},fetch:function(e){e=e||{};var t=(e.url||this.url)+(this.id?"?id="+this.id:"");return n.ajax(t,e).done(o.bind(this._fetchDone,this)).fail(o.bind(this.error,this))},_fetchDone:function(e){e=JSON.stringify(e),e=e.replace('<iframe class=\\"edui-faked-video\\" src=\\"http://v.qq.com','<iframe class=\\"edui-faked-video\\" src=\\"https://v.qq.com'),e=e.replace('<iframe class=\\"edui-faked-video\\" src=\\"//v.qq.com','<iframe class=\\"edui-faked-video\\" src=\\"https://v.qq.com'),e=JSON.parse(e),e=this.parseResponseData(e),this.set(e.data,{parse:!0,silent:!0}),this.trigger("sync")},sync:function(e){if(e=e||{},this.validate()||this.customValidate())return i(".form-actions .btn").button("reset"),i(".form-actions .zent-btn").btn("reset"),i.Deferred();this.beforeSync();var t=e.id||this.id,s=e.url||this.url,a=e.method||(t?"PUT":"POST"),l=o.extend({data:JSON.stringify(this),is_display:0},o.pick(this,"is_display","alias","title","id","template_id","num","start_sold_item","valid","out_id"),e),r={url:s,type:a,data:this.parseRequestData(l)};return n.ajax(r).done(o.bind(this._syncDone,this)).fail(o.bind(this.error,this))},parseResponseData:function(e){o.extend(this,o.pick(e,"is_display","alias","title","id","template_id","num","start_sold_item","valid","out_id"));var t=e.is_default;return t&&e.data.length>0&&"config"==e.data[0].type&&(e.data[0].is_default=t),e},parseRequestData:function(e){return this.handleData(e)},handleData:function(e){return e},beforeSync:function(){var e=this.at(0);e&&"config"===e.get("type")&&(this.includeFullscreenModel()?e.set("has_fullscreen_component","1"):e.unset("has_fullscreen_component"))},_syncDone:function(e){(o.isUndefined(this.id)||null===this.id)&&(this.id=e.id),this.clearLocalData()},error:function(e){n.errorNotify(e)},hasChanged:function(){return!!this.changed||this.any(function(e){return e.hasChanged()})},includeConfigModel:function(){var e=this.first();return!!e&&"config"===e.attributes.type},includeFullscreenModel:function(){return this.any(function(e){return!!e.get("is_fullscreen_component")})}})}),function(e){"use strict";var t;e.localStorage;try{var n=new Date;try{localStorage.setItem(n,n)}catch(e){if(22===e.code||1014===e.code&&"NS_ERROR_DOM_QUOTA_REACHED"===e.name)throw localStorage.clear&&localStorage.clear(),"localstorage define error"}var i=localStorage.getItem(n)==n;if(localStorage.removeItem(n),!i)throw"localstorage define error";if("FUNCTION"!=(typeof localStorage.clear).toUpperCase())throw"localstorage define error";t=localStorage}catch(e){var o=function(){return null};t={getItem:o,setItem:o,removeItem:o,clear:o}}"function"==typeof define&&define.amd&&define("zenjs/util/local_storage",[],function(){return t}),e.YZLocalStorage=t}(window),define("collections/field",["require","components/showcase/2.0.0/base/collections/base","jquery","underscore","jquery","core/utils","zenjs/util/local_storage","moment"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/collections/base"),n=e("jquery"),i=e("underscore"),n=e("jquery"),o=e("core/utils"),s=e("zenjs/util/local_storage"),a=e("moment");return t.extend({url:window._global.url.www+"/showcase/goods/item.json",storageName:"goods",initialize:function(e,n){this.generateEditConfig(),t.prototype.initialize.call(this,e,n)},parseResponseData:function(e){var s=e.data[0];s.ignore_list=e.ignore_list||{};var a=!1;if(i.isArray(s.stock)){var l=(s.sku_name_1?1:0)*((s.sku_name_1_value||[]).length||1)*((s.sku_name_2_value||[]).length||1)*((s.sku_name_3_value||[]).length||1)*((s.sku_name_4_value||[]).length||1)*((s.sku_name_5_value||[]).length||1);s.stock.length!==l&&(a=!0)}else i.isEmpty(s.stock)||(a=!0);return a&&(s.stock=[],o.errorNotify("非常抱歉，商品库存信息出现错误，请重新设置"),n(".notify-backdrop").remove(),setTimeout(function(){o.clearNotify()},15e3)),this.is_edit_lock=+e.is_edit_lock,this.is_lock=+e.is_lock,this.item_lock_types=e.item_lock_types||[],this.generateEditConfig(e),this.setGlobalStockLock(e),t.prototype.parseResponseData.call(this,e)},setGlobalStockLock:function(e){function t(){window.editConfig=window.editConfig||{sku:{}},window.editConfig.sku.stock_locked=!0}var n,i,o,s=e.data[0],a=/sku_name_\d+_value/,l=0,r=Object.keys(s),c=r.length;if(s.stock_locked)return void t();for(;l<c;l++)if(o=r[l],a.test(o)&&s[o])for(n=0,i=s[o].length;n<i;n++)if(1===s[o][n].stock_locked)return void t()},beforeSync:function(){var e=this.at(0);e.set({item_validity_start:a(e.get("item_validity_start")).unix(),item_validity_end:a(e.get("item_validity_end")).add(1,"days").unix(),need_customs_info:Boolean(e.get("need_customs_info"))}),t.prototype.beforeSync.call(this)},_syncDone:function(e){if(i.isUndefined(this.id)){this.id=e.id;var t=(this.toJSON()||[])[0];t&&s.setItem("showcase-goods-components-extra-id:"+window._global.kdt_id,t.components_extra_id)}this.clearLocalData()},customValidate:function(){var e=this.at(0),t=e.toJSON();return!(!t.sku_name_1_value||i.isEmpty(t.sku_name_1_value)||!i.isEmpty(t.stock))&&(o.errorNotify("请返回第二步完善商品库存信息"),!0)},generateEditConfig:function(e){e=e||{};var t=+e.is_edit_lock,o=e.is_lock,s=e.item_lock_types||[],a=e.data&&e.data[0]&&"10"==e.data[0].goods_type,l={},r={};if(t&&3==+o&&(l={sku:{readonly:!0,message:"该商品已参加多人拼团活动，规格不可修改，你可先使该商品活动失效，再进行编辑"},price:{readonly:!0,message:"该商品已参加多人拼团活动，价格信息不可修改，你可先使该商品活动失效，再进行编辑"},quota:{readonly:!0,message:""},sold_time:{readonly:!0,message:""},join_level_discount:{message:"该商品已参加多人拼团，勾选会员折扣仅在单独购买时生效"}}),t&&4==+o&&(l={sku:{readonly:!0,message:"该商品已参加积分商城活动，为保证活动体验，暂不支持修改商品规格，活动结束后可正常修改。"},price:{readonly:!0,message:"该商品已参加积分商城活动，为保证活动体验，暂不支持修改商品价格，活动结束后可正常修改。"},quota:{readonly:!0,message:""}}),t&&5==+o&&(l={sku:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},pre_sale:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},price:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},quota:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},purchase_right:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},message:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},sold_time:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},shop_method:{readonly:!0,message:"商品正在参加优惠套餐或秒杀活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},unload:{confirm:!0,confirm_message:"该商品正在参加优惠套餐或秒杀活动，下架后相关活动将会失效。确定下架商品吗？"}}),s.indexOf(10)!==-1&&(l={sku:{readonly:!0,message:"商品正在参加周期购活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},pre_sale:{readonly:!0,message:"商品正在参加周期购活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},price:{readonly:!0,message:"商品正在参加周期购活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},join_level_discount:{message:"该商品已参加周期购活动，勾选会员折扣无法在活动中生效"},purchase_right:{readonly:!0,message:"商品正在参加周期购活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},sold_time:{readonly:!0,message:"商品正在参加周期购活动，暂时不能修改。你可先删除相关活动，再进行编辑。"},unload:{confirm:!0,confirm_message:"该商品正在参加周期购活动，下架后相关活动将会失效。确定下架商品吗？"}}),s.indexOf(100)!==-1&&(r={sku:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，暂不可修改，如需修改可取消参加活动"}}),s.indexOf(101)!==-1&&(r={sku:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},price:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},sold_time:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},purchase_right:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},title:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},picture:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"},quota:{readonly:!0,message:"该商品已报名有赞微信公众号推广活动，如需修改请在活动结束后修改"}}),l=n.extend(l,r),a){var c=e.data&&e.data[0]&&e.data[0].pre_sale;l.quota={readonly:!0,message:"该商品为分销商品，暂不支持限购设置。"},l.pre_sale={readonly:!0,message:"该商品为分销商品，暂不支持"+(c?"修改":"预售")}}window.editConfig=i.extend({},this.defaultEditConfig(),l)},defaultEditConfig:function(){return{sku:{readonly:!1,message:""},price:{readonly:!1,message:""},quota:{readonly:!1,message:""},sold_time:{readonly:!1},join_level_discount:{message:""},pre_sale:{readonly:!1},purchase_right:{readonly:!1},message:{readonly:!1},shop_method:{readonly:!1},unload:{confirm:!1,confirm_message:""},title:{readonly:!1},picture:{readonly:!1},sku_pictures_limit:40}}})}),define("models/class_info",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({defaults:{class_1:"",class_2:""},validation:{class_1:function(e){if(""===e)return"必须选择一个商品类目。"}}})}),define("components/goods_klass/models/klass",["require","underscore","jquery","backbone"],function(e){"use strict";var t=e("underscore"),n=e("jquery");return e("backbone").Model.extend({url:window._global.url.www+"/account/team/category.json",defaults:{klass:[]},fetch:function(){var e=n.Deferred(),t=window._global.defaultClass;return t?(this.set("klass",this.parse(t)),this.trigger("sync"),e.resolve(t)):e.reject("没有获取到商品类目"),e},parse:function(e){var n=[];return t.each(e,function(e){e.parent_id=0,e.parent_name="",n.push(e),e.list&&t.each(e.list,function(t){t.parent_id=e.id,t.parent_name=e.name,n.push(t)})}),n},getKlassById:function(e){return e+="",t.find(this.get("klass"),function(t){return t.id+""===e})||{}}})}),define("tpl!components/goods_klass/templates/klass",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget-goods-klass">\n    ',_.each(klass,function(e){__p+="\n        ",0==e.parent_id&&(__p+='\n            <div class="widget-goods-klass-item\n                '+(null==(__t=e.id==currentKlass.id?"current":"")?"":__t)+"\n                "+(null==(__t=e.id==currentKlass.parent_id?"current":"")?"":__t)+"\n                "+(null==(__t=e.list?"has-children":"")?"":__t)+'"\n                data-id="'+(null==(__t=e.id)?"":__t)+'">\n\n                <span class="widget-goods-klass-name">\n                    ',__p+=currentKlass.parent_id==e.id?"\n                        "+(null==(__t=currentKlass.name)?"":__t)+"\n                    ":"\n                        "+(null==(__t=e.name)?"":__t)+"\n                    ",__p+="\n                </span>\n\n                ",e.list&&(__p+='\n                    <ul class="widget-goods-klass-children">\n                        ',_.each(e.list,function(e){__p+='\n                            <li data-id="'+(null==(__t=e.id)?"":__t)+'">\n                                <label class="radio">\n                                    <input type="radio" name="goods-class-2" '+(null==(__t=currentKlass.id==e.id?"checked":"")?"":__t)+">\n                                    "+(null==(__t=e.name)?"":__t)+"\n                                </label>\n                            </li>\n                        "}),__p+="\n                    </ul>\n                "),__p+="\n            </div>\n        "),__p+="\n    "}),__p+="\n</div>\n";return __p}}),define("components/goods_klass/views/klass",["require","marionette","../models/klass","core/utils","jquery","underscore","tpl!../templates/klass"],function(e){"use strict";var t=e("marionette"),n=e("../models/klass"),i=(e("core/utils"),e("jquery")),o=e("underscore");return t.ItemView.extend({template:e("tpl!../templates/klass"),events:{"click .widget-goods-klass-item":"handleKlassSelect","click .widget-goods-klass-children li":"handleKlassSelect"},currentKlass:{},templateHelpers:function(){return{currentKlass:this.currentKlass}},initialize:function(e){this.model=new n,this.listenTo(this.model,"sync",this.onSync),this.model.fetch()},onSync:function(){this.setCurrentKlass(this._id)},onRender:function(){this.openChildSelectbox=!1},setCurrentKlass:function(e){if(o.isObject(e)){var t=e;e=t.class_2&&t.class_2+""!="0"?t.class_2:t.class_1}this._setCurrentKlassById(e),this.render()},setParentNode:function(e){this.$parentNode=e,this.$parentNode.append(this.$el)},_setCurrentKlassById:function(e){this._id=e,this.currentKlass=this.model.getKlassById(e)},handleKlassSelect:function(e){var t=i(e.currentTarget),n=t.data("id");t.hasClass("has-children")||(this._setCurrentKlassById(n),this.trigger("select",this.getTriggerData()),this.render())},getTriggerData:function(){var e=this.currentKlass,t=e.extra&&JSON.parse(e.extra)||{};return+e.parent_id?{class_1:e.parent_id,class_2:e.id,extra:t}:{class_1:e.id,class_2:"0",extra:t}}})}),define("components/goods_klass/app",["require","./views/klass"],function(e){"use strict";return e("./views/klass")}),define("tpl!templates/class_info",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="class-block">\n    <div class="js-class-block control-group">\n        <div class="controls">\n            <div class="js-goods-klass"></div>\n            <input type="hidden" name="class_1">\n            <input type="hidden" name="class_2">\n        </div>\n    </div>\n</div>\n\n';return __p}}),define("views/class_info",["require","backbone","marionette","components/goods_klass/app","tpl!templates/class_info"],function(e){"use strict";var t=e("backbone"),n=e("marionette"),i=e("components/goods_klass/app");return n.ItemView.extend({template:e("tpl!templates/class_info"),ui:{classBlock:".js-class-block"},initialize:function(){t.Validation.bind(this)},onShow:function(){this.goodsKlassView=new i,this.goodsKlassView.setCurrentKlass({class_1:this.model.get("class_1"),class_2:this.model.get("class_2")}),this.goodsKlassView.setParentNode(this.$(".js-goods-klass")),this.listenTo(this.goodsKlassView,"select",function(e){if(e.extra){var t=e.extra;t.addData?this.model.set(t.addData):this.model.set({disableShipment:!1,messages:[]}),delete e.extra}this.model.set(e),this.resetValidate()})},resetValidate:function(){this.ui.classBlock.removeClass("error"),this.ui.classBlock.find(".error-message").remove()}})}),define("tpl!templates/step1",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="clearfix ui-box">\n    <div class="pull-right">\n        <span class="help-icon"></span>\n        商品类目及类目细项，\n        <a href="http://kdt.im/RL72Svr1m" target="_blank" class="new-window">请点此查看详情</a>\n    </div>\n</div>\n<div id="class-info-region" class="goods-info-group"></div>\n<div class="app-actions">\n    <div class="form-actions text-center" style="position: relative;">\n        <button data-next-step="2" class="zent-btn zent-btn-primary js-switch-step">下一步</button>\n        <div style="position: absolute; right: 10px; top: 18px;">\n            天猫京东等商品批量导入，<a href="'+(null==(__t=_global.url.www)?"":__t)+'/showcase/importgoods" target="_blank" class="new-window">点这里</a>\n        </div>\n    </div>\n</div>\n';return __p}}),define("views/step1",["require","marionette","core/reqres","models/class_info","views/class_info","tpl!templates/step1"],function(e){"use strict";var t=e("marionette"),n=e("core/reqres"),i=e("models/class_info"),o=e("views/class_info");return t.Layout.extend({tagName:"form",className:"form-horizontal fm-goods-info",template:e("tpl!templates/step1"),regions:{classInfoRegion:"#class-info-region"},onShow:function(){this.initModules()},initModules:function(){this.initClassInfo(),this.setHandlers()},initClassInfo:function(){this.classInfoModel=new i({class_1:this.model.get("class_1"),class_2:this.model.get("class_2")});var e=this.classInfoView=new o({model:this.classInfoModel});this.classInfoRegion.show(e)},setHandlers:function(){n.setHandler("step1:validate",function(){return this.classInfoModel.validate()},this),n.setHandler("class_info:get",function(){return this.classInfoModel.toJSON()},this),n.setHandler("class_info:has_changed",function(){return!0},this)},validateModel:function(e){e.validate(e.changed)}})}),define("zenjs/util/money",["require"],function(e){"use strict";function t(e){return e=parseFloat(e,10),t._isNaN(e)?NaN:e.toFixed(2)}return t.add=function(e,n){return e=parseFloat(e,10),n=parseFloat(n,10),t(e+n)},t.minus=function(e,n){return e=parseFloat(e,10),n=parseFloat(n,10),t(e-n)},t.multiply=function(e,n){return e=parseFloat(e,10),n=parseFloat(n,10),t(e*n)},t.toCent=function(e){return Math.round(100*parseFloat(e))},t._isNaN=function(e){return t._isNumber(e)&&e!=+e},t._isNumber=function(e){return"[object Number]"==Object.prototype.toString.call(e)},t}),define("tpl!components/popover/price_range/app.template",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-popover-inner">\n    <p>\n        ',__p+=100==+cost_discount?"\n            <i>成本价：</i>\n            <span>￥"+(null==(__t=money(cost))?"":__t)+"</span>\n        ":"\n            <i>成本价：</i>\n            <del> ￥"+(null==(__t=money(origin_cost))?"":__t)+' </del>\n            <em style="color: #f00; padding-left: 20px;">分销折扣价：</em>\n            <span>￥'+(null==(__t=money(cost))?"":__t)+"</span>\n        ",__p+="\n    </p>\n    <p>\n        <i>建议零售价：</i>\n        <span>￥"+(null==(__t=money(min))?"":__t)+" - ￥"+(null==(__t=money(max))?"":__t)+"</span>\n    </p>\n</div>\n";return __p}}),define("components/popover/price_range/app",["require","zenjs/util/money","../_base/app","tpl!./app.template"],function(e){"use strict";var t=e("zenjs/util/money");return e("../_base/app").extend({template:e("tpl!./app.template"),templateHelpers:{money:t}})}),define("tpl!components/popover/content/app.template",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-popover-inner '+(null==(__t=className)?"":__t)+'">\n    '+(null==(__t=html)?"":__t)+"\n</div>\n";return __p}}),define("components/popover/content/app",["require","../_base/app","tpl!./app.template"],function(e){"use strict";return e("../_base/app").extend({serializeData:function(){return _.extend({className:""},this.options.data)},template:e("tpl!./app.template")})}),define("tpl!templates/valid_period_modal",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="zent-dialog-header">\n    <div class="zent-dialog-title">提示：</div>\n</div>\n<div class="zent-dialog-body">\n    <ul class="tips-content">\n        <li>商品发布后，“商品有效期”不允许修改；</li>\n        <li>过了“商品有效期”后买家无法核销、使用该商品；<br><a href="https://bbs.youzan.com/forum.php?mod=viewthread&tid=526487" target="_blank">电子卡券使用说明</a></li>\n    </ul>\n    <label class="tips-label">\n        <input type="checkbox" class="js-not-show-anymore"> 不再提示\n    </label>\n</div>\n<div class="zent-dialog-footer text-center">\n    <a class="zent-btn zent-btn-primary js-save">我知道了</a>\n</div>\n';return __p}}),define("views/valid_period_modal",["require","underscore","core/utils","components/dialog/index","tpl!../templates/valid_period_modal"],function(e){"use strict";var t=e("underscore"),n=(e("core/utils"),e("components/dialog/index"));return n.extend({template:e("tpl!../templates/valid_period_modal"),className:"zent-dialog valid-period-dialog",events:t.extend({},n.prototype.events,{"click .js-save":"handleSave"}),handleSave:function(){this.$(".js-not-show-anymore").prop("checked")&&localStorage.setItem("notShowValidPeriodTips",1),this.hide()}})}),define("tpl!templates/base_info",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="info-group-title vbox">\n    <div class="group-inner">基本信息</div>\n</div>\n<div class="info-group-cont vbox">\n    <div class="group-inner">\n        <div class="control-group">\n            <label class="control-label">商品类目：</label>\n            <div class="controls">\n                <div class="static-value">\n                    ',__p+=goods_class_name?"\n                        "+(null==(__t=goods_class_name)?"":_.escape(__t))+"\n                    ":'\n                        无 <a style="margin-left: 20px;" data-next-step="1" class="js-switch-step" href="javascript:;">去选择商品品类</a>\n                    ',__p+='\n                </div>\n                <input type="hidden" name="class_1">\n                <input type="hidden" name="goods_class">\n            </div>\n        </div>\n        ',"0"!=class_type||"10"==goods_type||"10"==goods_platform||window._global.isSuperStore||(__p+='\n            <div class="control-group">\n                <label class="control-label">购买方式：</label>\n                <div class="controls">\n                    <label class="radio inline">\n                        <input type="radio" name="shop_method" value="1"\n                            ',"1"==shop_method&&(__p+="checked"),__p+="\n                            "+(null==(__t=window.editConfig.shop_method.readonly?"disabled":"")?"":__t)+'\n                        >在有赞购买\n                    </label>\n                    <label class="radio inline">\n                        <input type="radio" name="shop_method" value="0"\n                            ',"0"==shop_method&&(__p+="checked"),__p+="\n                            "+(null==(__t=window.editConfig.shop_method.readonly?"disabled":"")?"":__t)+'\n                        >链接到外部购买\n                        <span class="js-outbuy-tip ',"0"!=shop_method&&(__p+="hide"),__p+='">(每家店铺仅支持50个外部购买商品)</span>\n                    </label>\n                </div>\n            </div>\n        '),
__p+='\n        <div class="control-group">\n            <label class="control-label">商品分组：</label>\n            <div class="controls">\n                <select class="js-tag chosen-select" name="tag" data-selected-id="'+(null==(__t=tag)?"":_.escape(__t))+'" multiple data-placeholder="选择商品分组">\n                </select>\n                <p class="help-inline">\n                    <a class="js-refresh-tag" href="javascript:;">刷新</a>\n                    <span>|</span>\n                    <a class="new-window" target="_blank" href="'+(null==(__t=window._global.url.www)?"":__t)+'/showcase/tag#create">新建分组</a>\n                    <span>|</span>\n                    <a class="new-window" target="_blank" href="https://bbs.youzan.com/forum.php?mod=viewthread&tid=15">帮助</a>\n                </p>\n                <p class="help-desc js-tag-desc hide">\n                    使用“列表中隐藏”分组，商品将不出现在商品列表中\n                </p>\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">商品类型：<br/><span class="gray">(发布后不能修改) </span></label>\n            <div class="controls">\n                ',"1"==is_hotel&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="shipment" value="4" ',"4"==shipment&&(__p+="checked"),__p+=" ",alias&&(__p+="disabled"),__p+=">酒店类商品\n                    </label>\n                "),__p+='\n                <label class="radio inline">\n                    <input type="radio" name="shipment" value="0" ',"0"==shipment&&(__p+="checked"),__p+=" ",(alias||disableShipment)&&(__p+="disabled"),__p+='>实物商品\n                    <span class="gray">（物流发货）</span>\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="shipment" value="2" ',"2"==shipment&&(__p+="checked"),__p+=" ",(alias||disableShipment)&&(__p+="disabled"),__p+='>虚拟商品\n                    <span class="gray">（无需物流）</span>\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="shipment" value="3" ',"3"==shipment&&(__p+="checked"),__p+=" ",(alias||disableShipment)&&(__p+="disabled"),__p+='>电子卡券\n                    <span class="gray">（无需物流）</span>\n                </label>\n\n                <div style="margin-top: 10px;">\n                    你需遵守<a href="http://kdt.im/unxC7r" target="_blank" class="new-window">《有赞低价活动发布规范》</a>\n                    <a href="http://kdt.im/xlr0sm54N" target="_blank" class="js-virtual-goods-rules hide new-window">《有赞微商城虚拟商品管理规范》</a>\n                    <a href="https://bbs.youzan.com/forum.php?mod=viewthread&tid=514655&extra=page%3D1" target="_blank" class="js-virtual-ticket-rules hide new-window">《有赞微商城电子卡券管理规范》</a>\n                </div>\n            </div>\n        </div>\n        <div class="js-electric-card">\n            <div class="control-group">\n                <label class="control-label">商品有效期：<br/><span class="gray">(发布后不能修改) </span></label>\n                <div class="controls">\n                    <label class="radio inline has-input">\n                        <input type="radio" name="valid_period" value="0" '+(null==(__t=0==valid_period?"checked":"")?"":__t)+" ",alias&&(__p+="disabled"),__p+='>长期有效\n                    </label>\n                    <label class="radio inline has-input">\n                        <input type="radio" name="valid_period" value="1" '+(null==(__t=1==valid_period?"checked":"")?"":__t)+" ",alias&&(__p+="disabled"),__p+='>自定义有效期\n                    </label>\n                    <div class="js-valid-period valid-period">\n                        <div class="input-append">\n                            <input type="text" class="input-small" id="item_validity_start" name="item_validity_start" value="'+(null==(__t=item_validity_start)?"":__t)+'" ',alias&&(__p+="disabled"),__p+=' readonly>\n                            <label for="item_validity_start" class="add-on">\n                                <i class="icon-calendar"></i>\n                            </label>\n                        </div>\n                        至\n                        <div class="input-append">\n                            <input type="text" class="input-small" id="item_validity_end" name="item_validity_end" value="'+(null==(__t=item_validity_end)?"":__t)+'" ',alias&&(__p+="disabled"),__p+=' readonly>\n                            <label for="item_validity_end" class="add-on">\n                                <i class="icon-calendar"></i>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="js-pre-sale-wrap">\n            <div class="control-group">\n                <label class="control-label">预售设置：</label>\n                <div class="controls">\n                    <label class="checkbox inline '+(null==(__t=window.editConfig.pre_sale.readonly?"js-help-note":"")?"":__t)+'">\n                        <input type="checkbox" name="pre_sale" value="1" ',pre_sale&&(__p+="checked"),__p+=" "+(null==(__t=window.editConfig.pre_sale.readonly?"disabled":"")?"":__t)+'>预售商品\n                    </label>\n                </div>\n            </div>\n            <div class="control-group js-pre-sale-item" style="margin-left: 86px;">\n                <label class="control-label"><em class="required">*</em>发货时间：</label>\n                <div class="controls">\n                    <label class="radio inline">\n                        <span class="input-append">\n                            <input class="etd-type" type="radio" name="etd_type" value="0" ',0==+etd_type&&(__p+="checked"),__p+='>\n                            <input type="text" class="input-small" id="etd_start" name="etd_start" value="'+(null==(__t=etd_start)?"":_.escape(__t))+'" '+(null==(__t="10"==goods_type?"readonly":"")?"":__t)+' placeholder="请选择时间" /><label for="etd_start" class="add-on">\n                                <i class="icon-calendar"></i>\n                            </label>\n                        </span>\n                        开始发货\n                    </label>\n\n                    <label class="radio inline">\n                        <input class="etd-type" type="radio" name="etd_type" value="1" ',1==+etd_type&&(__p+="checked"),__p+='>\n                        付款成功\n                        <input name="etd_days" class="input-tiny" type="number" min="1" max="90" value="'+(null==(__t=etd_days)?"":_.escape(__t))+'" />\n                        天后发货\n                    </label>\n                </div>\n            </div>\n            <div class="c-gray ui-box js-pre-sale-item" style="margin-left: 114px;">\n                注意：只允许设置90天内的发货时间 ，请务必按照约定时间发货以免引起客户投诉。\n                <a href="https://bbs.youzan.com/forum.php?mod=viewthread&tid=593751" target="_blank" class="new-window">帮助</a>\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}}),define("views/base_info",["require","underscore","jquery","backbone","marionette","core/utils","datetimepicker","components/popover/content/app","views/valid_period_modal","tpl!templates/base_info"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("core/utils");e("datetimepicker");var a=e("components/popover/content/app"),l=e("views/valid_period_modal");return o.Layout.extend({className:"goods-info-group-inner",template:e("tpl!templates/base_info"),updateModel:s.updateModel,ui:{shopMethodRadio:'[name="shop_method"]',etdTypeRadio:'[name="etd_type"]',etdStart:'[name="etd_start"]',etdDays:'[name="etd_days"]',outbuyTip:".js-outbuy-tip",tagSelect:".js-tag",tagDesc:".js-tag-desc"},events:{"change @ui.shopMethodRadio":"onShopMethodRadioChange","change @ui.etdTypeRadio":"onEtdTypeChange","change @ui.etdStart":"updateModel","change @ui.etdDays":"updateModel","focus @ui.etdStart":"onEtdStartFocus","focus @ui.etdDays":"onEtdDaysFocus","mouseover .js-help-note":"onShowNote","mouseout .js-help-note":"onHideNote"},_modelBinder:void 0,initialize:function(e){this._modelBinder=new i.ModelBinder,this.listenTo(this.model,"change:shop_method",this.onShopMethodChanged),this.listenTo(this.model,"change:tag",this.onTagChange),this.listenTo(this.model,"change:shipment",this.onShipmentChange),this.listenTo(this.model,"change:pre_sale",this.onPreSaleChange),this.listenTo(this.model,"change:valid_period",this.onValidPeriodChange)},serializeData:function(){var e=this.model.toJSON();return e.alias=e.alias||"",this.processData(e)},processData:function(e){return e.goods_class_name=this.generateGoodsClass(e),e},generateGoodsClass:function(e){return e||(e=this.model.toJSON()),this.getClassNameArr(e).join(" - ")},getClassNameArr:function(e){var n=window._global.defaultClass,i=[];if(!e.class_1)return i;var o=t(n).findWhere({id:e.class_1});if(!o)return i;i.push(o.name);var s=t(o.list).findWhere({id:e.class_2});return s?(i.push(s.name),i):i},onRender:function(){this.onShipmentChange(),this.onPreSaleChange(),this.onValidPeriodChange()},onShow:function(){this.initTagChosen(),this.initDataBindings(),this.initDateTimePicker(),this.initElectricCardDateTimePicker()},initTagChosen:function(){var e=this,t=this.ui.tagSelect,i=t.chosen({no_results_text:"木有找到这个分类：",width:"200px"});this.$(".js-refresh-tag").on("click",function(o){var s=e.model.get("tag");n.get(window._global.url.www+"/showcase/tag/option",{selected:s},function(n){t.html(n),i.trigger("chosen:updated"),e.model.trigger("change:tag")}),o.preventDefault()}).trigger("click"),t.trigger("chosen:updated")},initDataBindings:function(){var e={tag:{selector:'[name="tag"]',converter:this.tagConverter},shipment:'[name="shipment"]',pre_sale:'[name="pre_sale"]',valid_period:'[name="valid_period"]'};this._modelBinder.bind(this.model,this.el,e)},initDateTimePicker:function(){var e=this;"10"!=this.model.get("goods_type")&&this.$("#etd_start").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,minDate:new Date,maxDate:90,onClose:function(t){e.model.set("etd_start",t)}})},initElectricCardDateTimePicker:function(){var e=this,t=this.$("#item_validity_start"),n=this.$("#item_validity_end");t.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,minDate:new Date,onClose:function(t){n.datepicker("option","minDate",t),e.model.set("item_validity_start",t)}}),n.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,minDate:new Date,onClose:function(n){t.datepicker("option","maxDate",n),e.model.set("item_validity_end",n)}})},onShopMethodRadioChange:function(e){var t=this;e.preventDefault();var i=n(e.target),o=i.val();t.model.set("shop_method",o)},onTagChange:function(){var e=this,t=e._findDefaultOption().toString(),n=e.model.get("tag")||[];this.ui.tagDesc.toggleClass("hide",n.indexOf(t)===-1)},_findDefaultOption:function(){var e=this,t=e.ui.tagSelect.find("option");if(e._defaultTagId)return e._defaultTagId;for(var i="",o=0;o<t.length;o++){var s=t[o];if("列表中隐藏"===n.trim(s.innerText)){i=s.value;break}}return e._defaultTagId=i,i},tagConverter:function(e,t){return null===t?[]:t},onShopMethodChanged:function(e,t){this.ui.outbuyTip.toggleClass("hide",0!=+t)},onShipmentChange:function(){var e=+this.model.get("shipment"),t=0===e,n=2===e,i=3===e,o=4===e;this.model.set("is_hotel",o?"1":"0"),t||this.model.set("pre_sale",0),t?(this.$(".js-pre-sale-wrap").show(),this.$(".js-electric-card").hide(),this.$(".js-virtual-ticket-rules").hide(),this.$(".js-virtual-goods-rules").hide()):n?(this.$(".js-pre-sale-wrap").hide(),this.$(".js-electric-card").hide(),this.$(".js-virtual-ticket-rules").hide(),this.$(".js-virtual-goods-rules").show()):i?(this.$(".js-pre-sale-wrap").hide(),this.$(".js-electric-card").show(),this.$(".js-virtual-ticket-rules").show(),this.$(".js-virtual-goods-rules").hide()):o&&(this.$(".js-pre-sale-wrap").hide(),this.$(".js-electric-card").hide(),this.$(".js-virtual-ticket-rules").hide(),this.$(".js-virtual-goods-rules").hide())},onPreSaleChange:function(){+this.model.get("pre_sale")?this.$(".js-pre-sale-item").show():this.$(".js-pre-sale-item").hide()},onEtdTypeChange:function(e){+e.target.value?this.ui.etdStart.val("").trigger("change"):this.ui.etdDays.val("").trigger("change"),this.model.set("etd_type",e.target.value)},onEtdStartFocus:function(e){this.ui.etdTypeRadio.eq(0).prop("checked",!0).trigger("change"),this.model.set("etd_type",0)},onEtdDaysFocus:function(e){this.ui.etdTypeRadio.eq(1).prop("checked",!0).trigger("change"),this.model.set("etd_type",1)},onValidPeriodChange:function(){var e=this.model.get("valid_period"),t=localStorage.getItem("notShowValidPeriodTips");"1"==e?(this.$(".js-valid-period").show(),this.model.set({item_validity_start:this.$("#item_validity_start").val(),item_validity_end:this.$("#item_validity_end").val()}),this.model.get("goods_id")||1==t||new l):(this.$(".js-valid-period").hide(),this.model.set({item_validity_start:"",item_validity_end:""}))},onClose:function(){this._modelBinder.unbind()},onShowNote:function(e){var t=this;window.editConfig.pre_sale.message&&(this.notePopver||(this.notePopver=new a({of:n(e.target)[0],arrow:"bottom-left",data:{html:'<p class="text-left">'+window.editConfig.pre_sale.message+"</p>"},autoCloseCallback:function(){t.notePopver=null}})))},onHideNote:function(e){this.notePopver&&this.notePopver.close(),this.notePopver=null}})}),define("text!components/pop/templates/link.html",[],function(){return'<div class="arrow"></div>\n<div class="popover-inner popover-link">\n    <div class="popover-content">\n        <div class="form-inline">\n            <input type="text" class="link-placeholder js-link-placeholder" placeholder="<%= content %>">\n            <button type="button" class="btn btn-primary js-btn-confirm" data-loading-text="确定"> 确定</button>\n            <button type="reset" class="btn js-btn-cancel">取消</button>\n        </div>\n    </div>\n</div>\n'}),define("components/pop/link",["backbone","components/pop/base","text!components/pop/templates/link.html","core/utils"],function(e,t,n,i){return t.extend({template:_.template(n),className:"popover popover-link-wrap bottom",events:{"click .js-btn-cancel":"hide","click .js-btn-confirm":"triggerCallback","keydown .js-link-placeholder":function(e){e.keyCode===i.keyCode.ENTER&&this.triggerCallback()}},initialize:function(e){this.content=e.content||"链接地址：http://example.com",this.callback=e.callback,this.target=e.target,this.trigger=e.trigger,e.notAutoHide||this.autoHide()},render:function(e){return this.$el.html(this.template({content:this.content})),this},positioning:function(){this.$el.show().position({of:this.target,my:"center top+5",at:"center bottom",collision:"none"}),this.$(".js-link-placeholder").focus()},reset:function(e){var t=e.callback,n=e.target,i=e.trigger,o=e.content||"链接地址：http://example.com";this.$(".js-link-placeholder").attr("placeholder",o),this.setCallback(t),this.setTarget(n),this.setTrigger(i),this.positioning(),this.clearInput(),this.show()},triggerCallback:function(){var e=i.urlCheck(this.$(".js-link-placeholder").val());this.callback.call(this,e),this.hide()},clearInput:function(){this.$(".js-link-placeholder").val("")}})}),define("components/pop/atom/link",["require","backbone","components/pop/link"],function(e){"use strict";var t=(e("backbone"),e("components/pop/link"));return{initialize:function(e){var n=e.target=$(e.target),i=(e.className,e.type,e.callback),o=e.trigger=$(e.trigger||n),s=(e.data,e.notAutoHide,e.content||""),a=e.appendTarget||"body",l=new t({callback:i,target:n,trigger:o,content:s});return l.render().$el.appendTo(a),l.positioning(),l}}}),define("components/attachment/image/models/image",["require","backbone","core/utils","underscore","zenjs/util/local_storage"],function(e){"use strict";var t=e("backbone"),n=e("core/utils"),i=e("underscore"),o=e("zenjs/util/local_storage");return t.Model.extend({defaults:{defaultCotegoryId:2,currentCategoryId:2,currentCategory:null,categoryList:[],mediaList:[],selectedAttachment:[],selectedAttachmentIds:[],mediaType:"image",p:1,pageSize:15,count:0,keyword:"",fetched:!1},initialize:function(){this.localStorgeKey="widget-attachment-image-"+window._global.kdt_id,this.listenTo(this,"sync",this.setCache.bind(this))},getCategoryList:function(){if(this.categoryListDefer){var e=this.categoryListDefer.xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()}return this.categoryListDefer=n.ajax({url:window._global.url.materials+"/category/categoryList.json",data:{mediaType:this.get("mediaType")},xhrFields:{withCredentials:!0}}).done(function(e){this.set("categoryList",e||[]);var t=this.get("currentCategoryId");this.set({currentCategoryId:t},{silent:!0}),this.trigger("sync")}.bind(this)).fail(function(e,t){t.code!==-1&&this.trigger("error","[获取分组列表失败] "+e)}.bind(this)),this.categoryListDefer},getMediaList:function(){if(this.mediaListDefer){var e=this.mediaListDefer.xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()}return this.trigger("before:fetch"),this.mediaListDefer=n.ajax({url:window._global.url.materials+"/media/mediaList.json",data:{p:this.get("p"),pageSize:this.get("pageSize"),mediaType:this.get("mediaType"),keyword:this.get("keyword"),categoryId:this.get("currentCategoryId")},xhrFields:{withCredentials:!0}}).done(function(e){if(!e)return this.trigger("error","[获取列表失败] 数据错误");this.set({p:e.currPageNo,mediaList:e.dataList||[],count:e.count,fetched:!0}),this.trigger("sync")}.bind(this)).fail(function(e,t){t.code!==-1&&this.trigger("error","[获取列表失败] "+e)}.bind(this)),this.mediaListDefer},toggleSelectedAttachment:function(e,t){t=t||{};var n=this.get("selectedAttachmentIds"),o=this.get("selectedAttachment");if(n.indexOf(e)!=-1)o=i.reject(o,function(t){return t.attachmentId==e}),n=i.map(o,function(e){return e.attachmentId});else{var s=this.getAttachmentById(e);s&&(t.multiChoose?(o.push(s),n.push(e)):(o=[s],n=[e]))}this.set({selectedAttachment:o,selectedAttachmentIds:n},{silent:!0}),this.trigger("change:selectedAttachment")},getAttachmentById:function(e){return i.find(this.get("mediaList"),function(t){return t.attachmentId==e})},getParsedSelectedImageData:function(){var e=this.get("selectedAttachment");return i.map(e,function(e){return{attachment_full_url:n.fullfillImage(e.attachmentUrl),attachment_id:e.attachmentId+"",attachment_size:e.attachmentSize+"",attachment_title:e.attachmentTitle,attachment_url:e.attachmentUrl,bucket:e.bucket,checked:0,created_time:e.createTime,height:e.height+"",media_type:e.mediaType,source:e.source+"",thumb_url:e.thumbUrl,width:e.width+""}})},setCache:function(){this.get("keyword")||o.setItem(this.localStorgeKey,JSON.stringify(this))},getCache:function(){var e=o.getItem(this.localStorgeKey);e&&(e=JSON.parse(e),this.set(e),this.cleanSelectedAttachment())},cleanSelectedAttachment:function(){this.set({selectedAttachment:[],selectedAttachmentIds:[]},{silent:!0}),this.trigger("change:selectedAttachment")}})}),define("tpl!components/pagination/index",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="ui-pagination">\n    <span class="ui-pagination-total">\n        ',useLimitMode||(__p+="\n        共"+(null==(__t=totalItems)?"":__t)+"条，\n        "),__p+="\n        每页"+(null==(__t=pageSize)?"":__t)+"条\n    </span>\n\n    ",previousPage&&(__p+='\n        <a href="javascript:;" class="ui-pagination-prev" data-page-num="'+(null==(__t=previousPage)?"":__t)+'">上一页</a>\n    '),__p+="\n\n    ";for(var i=1;i<=totalPage;i++)__p+="\n        ",i===currentPage?(__p+="\n            ",1!==totalPage&&(__p+='\n                <a href="javascript:;" class="ui-pagination-num active" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n            "),__p+="\n        "):(__p+="\n            ",i>currentPage-1&&i<currentPage+1?__p+='\n                <a href="javascript:;" class="ui-pagination-num" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n            ":i===currentPage-1?(__p+="\n                ",currentPage-1!==firstPage&&currentPage-2>1&&(__p+="\n                    <span>...</span>\n                "),__p+='\n                <a href="javascript:;" class="ui-pagination-num" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n            "):i===currentPage+1?(__p+='\n                <a href="javascript:;" class="ui-pagination-num" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n                ",currentPage+1!==lastPage&&totalPage-2>currentPage&&(__p+="\n                    <span>...</span>\n                "),__p+="\n            "):(__p+="\n                ",currentPage-1>=2&&1===i&&(__p+='\n                    <a href="javascript:;" class="ui-pagination-num" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n                "),__p+="\n                ",currentPage+1<=totalPage&&i===totalPage&&(__p+='\n                    <a href="javascript:;" class="ui-pagination-num" data-page-num='+(null==(__t=i)?"":__t)+">"+(null==(__t=i)?"":__t)+"</a>\n                "),__p+="\n            "),__p+="\n        "),__p+="\n    ";__p+="\n\n    ",totalPage>1&&(__p+='\n    <span class="ui-pagination-goto">\n        <span class="ui-pagination-goto-input js-goto-input" contenteditable="true" data-max-page-num="'+(null==(__t=totalPage)?"":__t)+'">'+(null==(__t=currentPage)?"":__t)+"</span>\n        <span>/ "+(null==(__t=useLimitMode?"显示前":"")?"":__t)+(null==(__t=totalPage)?"":__t)+"页</span>\n    </span>\n    "),__p+="\n\n    ",nextPage&&(__p+='\n        <a href="javascript:;" class="ui-pagination-prev" data-page-num="'+(null==(__t=nextPage)?"":__t)+'">下一页</a>\n    '),__p+="\n</div>\n\n"}return __p}}),define("components/pagination/index",["require","marionette","core/utils","tpl!./index"],function(e){"use strict";var t=e("marionette"),n=e("core/utils");return t.ItemView.extend({template:e("tpl!./index"),events:{"click a":"handlePageNumberClick","keypress .js-goto-input":"handleGotoInputKeypress"},serializeData:function(){var e,t=Math.max(0,this.totalItems),n=Math.max(1,this.pageSize),i=Math.ceil(t/n),o=this.currentPage;return"limit"!==this.mode||t<100*n?e=!1:(e=!0,i<=o&&(i=o)),{totalItems:t,pageSize:n,totalPage:i,currentPage:o,previousPage:o>1&&o-1,nextPage:!!(o<i||e&&o===i)&&o+1,firstPage:1!==o&&1,lastPage:!(o>=i)&&i,useLimitMode:e}},initialize:function(e){this.setOptions(e)},setOptions:function(e){return e=e||{},this.options=e,this.onPageNumberChange=e.onPageNumberChange||function(){},this.currentPage=+e.currentPage||1,this.totalItems=+e.totalItems||0,this.pageSize=+e.pageSize||20,this.mode=e.mode||"default",this},renderToString:function(){return this.template(this.serializeData())},handlePageNumberClick:function(e){var t=+$(e.currentTarget).data("page-num");this.onPageNumberChange(t)},handleGotoInputKeypress:function(e){var t=+$(e.currentTarget).text();n.isNumber(e)||e.preventDefault(),e.keyCode===n.keyCode.ENTER&&(this.onPageNumberChange(t),e.preventDefault())}})}),define("tpl!components/attachment/image/templates/image_list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",fetched?(__p+="\n    ",mediaList&&mediaList.length?(__p+='\n        <ul class="image-list">\n            ',_.each(mediaList,function(e){__p+='\n                <li class="image-item js-image-item" data-id="'+(null==(__t=e.attachmentId)?"":__t)+'">\n                    <div class="image-box" style="background-image: url('+(null==(__t=fullfillImage(e.attachmentUrl,"!240x240.jpg"))?"":__t)+')"></div>\n                    <div class="image-meta">'+(null==(__t=e.width)?"":__t)+"*"+(null==(__t=e.height)?"":__t)+'</div>\n                    <div class="image-title">'+(null==(__t=e.attachmentTitle)?"":__t)+"</div>\n                    ",selectedAttachmentIds.indexOf(e.attachmentId)!=-1&&(__p+='\n                        <div class="attachment-selected">\n                            <i class="icon-ok icon-white"></i>\n                        </div>\n                    '),__p+="\n                </li>\n            "}),__p+='\n        </ul>\n        <div class="attachment-pagination js-attachment-pagination"></div>\n        ',keyword||(__p+='\n            <a href="javascript:;" class="ui-btn ui-btn-success js-show-upload-view" style="position: absolute; left: 180px; bottom: 16px;">上传图片</a>\n        '),__p+="\n    "):(__p+='\n        <div style="color: #999; text-align: center; padding-top: 130px;">\n            ',__p+=keyword?"\n                <div>还没有相关数据</div>\n            ":'\n                <div class="add-local-image-button js-show-upload-view">+</div>\n                <div>暂无数据，点击添加</div>\n            ',__p+="\n        </div>\n    "),__p+="\n"):__p+='\n    <div class="ui-page-loading"></div>\n',__p+="\n";return __p}}),define("tpl!components/attachment/image/templates/image",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    ',keyword?__p+='\n        <a class="title js-back-to-image" href="javascript:;" style="margin-right: 0">&lt; 我的图片</a>\n        <span style="font-size: 14px;"> | </span>\n        <span class="title">搜索结果</span>\n    ':(__p+='\n        <span class="title">我的图片</span>\n        ',options.hideIconList||(__p+='\n            <a href="javascript:;" class="title js-show-icon-view">图标库</a>\n        '),__p+="\n    "),__p+='\n    <div class="search-region">\n        <div class="ui-search-box" style="top: 6px; right: 60px;">\n            <input class="txt js-search-input" type="text" placeholder="搜索" value="'+(null==(__t=keyword)?"":__t)+'">\n        </div>\n    </div>\n</div>\n<div class="modal-body '+(null==(__t=keyword?"attachment-search-result":"")?"":__t)+'">\n    <div class="category-list-region js-category-list-region">\n        <ul class="category-list">\n            ',_.each(categoryList,function(e){__p+='\n                <li class="js-category-item '+(null==(__t=currentCategoryId==e.id?"active":"")?"":__t)+'" data-id="'+(null==(__t=e.id)?"":__t)+'">\n                    '+(null==(__t=e.name)?"":__t)+"\n                    <span>"+(null==(__t=e.count)?"":__t)+"</span>\n                </li>\n            "}),__p+='\n        </ul>\n    </div>\n    <div class="attachment-list-region js-attachment-list-region">\n\n    </div>\n</div>\n<div class="modal-footer clearfix">\n    <div class="selected-count-region js-selected-count-region hide">\n        已选择<span class="js-selected-count">2</span>张图片\n    </div>\n    <div class="text-center">\n        <button class="ui-btn ui-btn-primary js-confirm">确定</button>\n    </div>\n</div>\n';return __p}}),define("components/attachment/image/views/image",["require","underscore","core/utils","marionette","../models/image","components/pagination/index","vendor/nprogress","tpl!../templates/image_list","tpl!../templates/image"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("marionette"),o=e("../models/image"),s=new o,a=e("components/pagination/index"),l=e("vendor/nprogress"),r=e("tpl!../templates/image_list");return i.Layout.extend({template:e("tpl!../templates/image"),templateHelpers:function(){return{fullfillImage:n.fullfillImage}},ui:{attachmentListRegion:".js-attachment-list-region"},events:{"mousewheel .js-category-list-region":n.handleScroll,"click .js-category-item":"handleCategoryClick","click .js-image-item":"handleImageItemClick","click .js-confirm":"handleConfirm","keypress .js-search-input":"handleKeywordChange","click .js-back-to-image":"handleBackToImageClick"},initialize:function(e){this.options=e,this.model=s,this.listenTo(this.model,"before:fetch",this.handleBeforeFetch),this.listenTo(this.model,"sync",this.handleSync),this.listenTo(this.model,"error",this.handleError),this.listenTo(this.model,"change:selectedAttachment",this.handleSelectedAttachmentChange),this.model.getCache(),this.model.getMediaList(),this.model.getCategoryList()},serializeData:function(){return t.extend(this.model.toJSON(),{options:this.options})},onRender:function(){this.renderAttachmentList(),this.handleSelectedAttachmentChange()},renderAttachmentList:function(){this.ui.attachmentListRegion.html(r(t.extend({fullfillImage:n.fullfillImage},this.model.toJSON()))),this.pagination&&this.pagination.close();var e=this.model.get("mediaList");e&&e.length&&(this.pagination=new a({el:this.$(".js-attachment-pagination"),currentPage:this.model.get("p"),totalItems:this.model.get("count"),pageSize:this.model.get("pageSize"),onPageNumberChange:this.handlePageNumberChange.bind(this)}),this.pagination.render())},handlePageNumberChange:function(e){this.model.set("p",e),this.model.getMediaList()},handleCategoryClick:function(e){var t=$(e.currentTarget),n=+t.data("id");n!=this.model.get("currentCategoryId")&&(this.model.set({currentCategoryId:n,p:1}),this.model.getMediaList(),this.$(".js-category-item").removeClass("active"),t.addClass("active"))},handleImageItemClick:function(e){var t=$(e.currentTarget),i=+t.data("id");if(this.model.getAttachmentById(i).attachmentSize>this.options.maxSize)return n.errorNotify("图片不能大于 "+this.options.maxSizeText);this.model.toggleSelectedAttachment(i,this.options),this.renderAttachmentList()},handleSelectedAttachmentChange:function(){var e=this.model.get("selectedAttachment"),t=this.$(".js-confirm"),n=this.$(".js-selected-count-region"),i=this.$(".js-selected-count");e.length?(t.addClass("ui-btn-primary").removeClass("ui-btn-disabled").attr("disabled",!1),n.show(),i.text(e.length)):(t.removeClass("ui-btn-primary").addClass("ui-btn-disabled").attr("disabled",!0),n.hide()),this.options.multiChoose||n.hide()},handleBeforeFetch:function(){l.start()},handleSync:function(){this.options.categoryId=this.model.get("currentCategoryId"),l.done(),this.render()},handleKeywordChange:function(e){if(13==e.keyCode){var t=e.target.value;this.model.set({p:1,pageSize:t?18:15,keyword:t}),this.model.getMediaList()}},handleBackToImageClick:function(){this.model.set({p:1,pageSize:15,keyword:""}),this.model.getMediaList()},handleError:function(e){l.done(),n.errorNotify(e)},handleConfirm:function(){t.isFunction(this.options.callback)&&this.options.callback(this.options.indexView.parseFormat(this.model.get("selectedAttachment"))),this.options.indexView.hide()}})}),define("components/attachment/image/models/icon",["require","backbone","core/utils","underscore","zenjs/util/local_storage"],function(e){"use strict";var t=e("backbone"),n=e("core/utils"),i=e("underscore"),o=e("zenjs/util/local_storage");return t.Model.extend({defaults:{mediaList:[],selectedAttachment:[],selectedImageIds:[],style:"0",color:"0",imageType:"0",p:1,pageSize:27,count:0,fetched:!1},initialize:function(){this.localStorgeKey="widget-image-icon-"+window._global.kdt_id,this.listenTo(this,"sync",this.setCache.bind(this))},getMediaList:function(){if(this.mediaListDefer){var e=this.mediaListDefer.xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()}return this.trigger("before:fetch"),this.mediaListDefer=n.ajax({url:window._global.url.materials+"/icon/list.json",data:{p:this.get("p"),pageSize:this.get("pageSize"),style:this.get("style"),color:this.get("color"),imageType:this.get("imageType")},xhrFields:{withCredentials:!0}}).done(function(e){if(!e)return this.trigger("error","[获取列表失败] 数据错误");e.list&&e.list.length>this.get("pageSize")&&(e.list=e.list.slice(0,this.get("pageSize"))),this.set({mediaList:e.dataList||[],count:e.count,p:e.currPageNo,fetched:!0}),this.trigger("sync")}.bind(this)).fail(function(e,t){t.code!==-1&&this.trigger("error","[获取列表失败] "+e)}.bind(this)),this.mediaListDefer},toggleSelectedImage:function(e,t){t=t||{};var n=this.get("selectedImageIds"),o=this.get("selectedAttachment");if(n.indexOf(e)!=-1)o=i.reject(o,function(t){return t.attachmentId==e}),n=i.map(o,function(e){return e.attachmentId});else{
var s=this.getAttachmentById(e);s&&(t.multiChoose?(o.push(s),n.push(e)):(o=[s],n=[e]))}this.set({selectedAttachment:o,selectedImageIds:n},{silent:!0}),this.trigger("change:selectedAttachment")},getAttachmentById:function(e){return i.find(this.get("mediaList"),function(t){return t.attachmentId==e})},setCache:function(){o.setItem(this.localStorgeKey,JSON.stringify(this))},getCache:function(){var e=o.getItem(this.localStorgeKey);e&&(e=JSON.parse(e),this.set(e),this.cleanSelectedImage())},cleanSelectedImage:function(){this.set({selectedAttachment:[],selectedImageIds:[]},{silent:!0}),this.trigger("change:selectedAttachment")}})}),define("tpl!components/attachment/image/templates/icon_list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",fetched?(__p+="\n    ",mediaList&&mediaList.length?(__p+='\n        <ul class="image-list iconlist">\n            ',_.each(mediaList,function(e){__p+='\n                <li class="image-item js-image-item" data-id="'+(null==(__t=e.attachmentId)?"":__t)+'">\n                    <div class="image-box" style="background-image: url('+(null==(__t=fullfillImage(e.attachmentUrl,"!160x160.jpg"))?"":__t)+')"></div>\n                    <div class="image-meta">'+(null==(__t=e.width)?"":__t)+"*"+(null==(__t=e.height)?"":__t)+"</div>\n                    ",selectedImageIds.indexOf(e.attachmentId)!=-1&&(__p+='\n                        <div class="attachment-selected">\n                            <i class="icon-ok icon-white"></i>\n                        </div>\n                    '),__p+="\n                </li>\n            "}),__p+='\n        </ul>\n        <div class="attachment-pagination js-attachment-pagination"></div>\n    '):__p+='\n        <div style="height: 328px;">\n            <div style="color: #999; text-align: center; padding: 90px 0;">该分类暂无数据，请选择其他图标</div>\n        </div>\n    ',__p+="\n"):__p+='\n    <div class="ui-page-loading"></div>\n',__p+="\n";return __p}}),define("tpl!components/attachment/image/templates/icon",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <a href="javascript:;" class="title js-show-image-view">我的图片</a>\n    <span class="title">图标库</span>\n</div>\n<div class="modal-body" style="height: auto;">\n    <div class="iconfilter-region">\n        <div class="iconfilter">\n            <span class="title">风格:</span>\n            <span class="filter js-filter '+(null==(__t=0==style?"checked":"")?"":__t)+'" data-type="style" data-value="0">全部</span>\n            <span class="filter js-filter '+(null==(__t=1==style?"checked":"")?"":__t)+'" data-type="style" data-value="1">普通</span>\n            <span class="filter js-filter '+(null==(__t=2==style?"checked":"")?"":__t)+'" data-type="style" data-value="2">简约</span>\n        </div>\n        <div class="iconfilter">\n            <span class="title">颜色:</span>\n            <span class="filter js-filter '+(null==(__t=0==color?"checked":"")?"":__t)+'" data-type="color" data-value="0">全部</span>\n            <span class="filter js-filter '+(null==(__t=1==color?"checked":"")?"":__t)+'" data-type="color" data-value="1">白色</span>\n            <span class="filter js-filter '+(null==(__t=2==color?"checked":"")?"":__t)+'" data-type="color" data-value="2">灰色</span>\n        </div>\n        <div class="iconfilter">\n            <span class="title">类型:</span>\n            <span class="filter js-filter '+(null==(__t=0==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="0">全部</span>\n            <span class="filter js-filter '+(null==(__t=1==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="1">常规</span>\n            <span class="filter js-filter '+(null==(__t=2==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="2">购物</span>\n            <span class="filter js-filter '+(null==(__t=3==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="3">交通</span>\n            <span class="filter js-filter '+(null==(__t=4==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="4">商务</span>\n            <span class="filter js-filter '+(null==(__t=5==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="5">食物</span>\n            <span class="filter js-filter '+(null==(__t=6==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="6">娱乐</span>\n            <span class="filter js-filter '+(null==(__t=7==imageType?"checked":"")?"":__t)+'" data-type="imageType" data-value="7">美妆</span>\n        </div>\n    </div>\n    <div class="js-image-list-region iconlist-region"></div>\n</div>\n<div class="modal-footer clearfix">\n    <div class="selected-count-region js-selected-count-region hide">\n        已选择<span class="js-selected-count">2</span>张图片\n    </div>\n    <div class="text-center">\n        <button class="ui-btn ui-btn-primary js-confirm">确定</button>\n    </div>\n</div>\n';return __p}}),define("components/attachment/image/views/icon",["require","underscore","core/utils","marionette","../models/icon","components/pagination/index","vendor/nprogress","tpl!../templates/icon_list","tpl!../templates/icon"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("marionette"),o=e("../models/icon"),s=new o,a=e("components/pagination/index"),l=e("vendor/nprogress"),r=e("tpl!../templates/icon_list");return i.Layout.extend({template:e("tpl!../templates/icon"),templateHelpers:function(){return{fullfillImage:n.fullfillImage}},ui:{imageListRegion:".js-image-list-region"},events:{"click .js-filter":"handleFilterClick","click .js-image-item":"handleImageItemClick","click .js-confirm":"handleConfirm"},initialize:function(e){this.options=e,this.model=s,this.listenTo(this.model,"before:fetch",this.handleBeforeFetch),this.listenTo(this.model,"sync",this.handleSync),this.listenTo(this.model,"error",this.handleError),this.listenTo(this.model,"change:selectedAttachment",this.handleSelectedImageChange),this.model.getCache(),this.model.getMediaList()},serializeData:function(){return t.extend(this.model.toJSON(),{options:this.options})},onRender:function(){this.renderImageList(),this.handleSelectedImageChange()},renderImageList:function(){this.ui.imageListRegion.html(r(t.extend({fullfillImage:n.fullfillImage},this.model.toJSON()))),this.pagination&&this.pagination.close();var e=this.model.get("mediaList");e&&e.length&&(this.pagination=new a({el:this.$(".js-attachment-pagination"),currentPage:this.model.get("p"),totalItems:this.model.get("count"),pageSize:this.model.get("pageSize"),onPageNumberChange:this.handlePageNumberChange.bind(this)}),this.pagination.render())},handlePageNumberChange:function(e){this.model.set("p",e),this.model.getMediaList()},handleFilterClick:function(e){var t=$(e.currentTarget),n=t.data("type"),i=t.data("value");this.$('[data-type="'+n+'"]').removeClass("checked"),t.addClass("checked"),this.model.set(n,i,{silent:!0}),this.model.set("p",1,{silent:!0}),this.model.getMediaList()},handleImageItemClick:function(e){var t=$(e.currentTarget),i=+t.data("id");if(this.model.getAttachmentById(i).attachmentSize>this.options.maxSize)return n.errorNotify("图片不能大于 "+this.options.maxSizeText);this.model.toggleSelectedImage(i,this.options),this.renderImageList()},handleSelectedImageChange:function(){var e=this.model.get("selectedAttachment"),t=this.$(".js-confirm"),n=this.$(".js-selected-count-region"),i=this.$(".js-selected-count");e.length?(t.addClass("ui-btn-primary").removeClass("ui-btn-disabled").attr("disabled",!1),n.show(),i.text(e.length)):(t.removeClass("ui-btn-primary").addClass("ui-btn-disabled").attr("disabled",!0),n.hide()),this.options.multiChoose||n.hide()},handleBeforeFetch:function(){l.start()},handleSync:function(){l.done(),this.render()},handleError:function(e){l.done(),n.errorNotify(e)},handleConfirm:function(){t.isFunction(this.options.callback)&&this.options.callback(this.options.indexView.parseFormat(this.model.get("selectedAttachment"))),this.options.indexView.hide()}})}),define("core/log",["require","core/utils"],function(e){var t=e("core/utils"),n={};_global.spm=_global.spm||{};var i=function(){var e=function(){return _global.spm.logType+_global.spm.logId||"fake"+_global.kdt_id};return function(){var n=t.getParameterByName("spm");if(""!==(n=$.trim(n))){var i=n.split("_");i.length>2&&(n=i[0]+"_"+i[i.length-1]),n+="_"+e()}else n=e();return n}}(),o=function(e,n){var i=new Image,o=Math.floor(2147483648*Math.random()).toString(36),s="log_"+o;window[s]=i,i.onload=i.onerror=i.onabort=function(){i.onload=i.onerror=i.onabort=null,window[s]=null,i=null,n===Object(n)&&$.isFunction(n.resolve)&&n.resolve()},i.src=t.addParameter(e,{time:(new Date).getTime()}),window.setTimeout(function(){n===Object(n)&&$.isFunction(n.resolve)&&n.resolve()},1500)};return n.log=function(e,i){e.spm||(e.spm=n.getSpm()),e.referer_url||(e.referer_url=encodeURIComponent(document.referrer)),e.title||(e.title=_global.title||$.trim(document.title)),o(t.addParameter("//tj.koudaitong.com/fx.gif",e),i)},n.getSpm=function(){return n.spm||(n.spm=i()),n.spm},n}),define("components/attachment/upload",["require","jquery","backbone","core/utils","core/log"],function(e){"use strict";var t=e("jquery"),n=e("backbone"),i=e("core/utils"),o=e("core/log"),s=window._global;return n.Model.extend({initialize:function(e,t){this.options=t||{}},uploadNetworkAttachment:function(e){var t={wsc:window._global.url.materials+"/shop/fetchPubImg.json"},n=window._global.url.materials+"/dock/fetch.json",o=this.options.fetchUrl,a=this.options.fetchTokenType;o?n=o:a&&t[a]&&(n=t[a]);var l={attachment_url:e,categoryId:this.options.categoryId};return a||(l=_.extend(l,{kdt_id:window._global.kdt_id,scope:this.options.private?s.js.qn_private:s.js.qn_public})),i.ajax({url:n,type:"POST",data:l,xhrFields:{withCredentials:!0}})},uploadLocalAttachment:function(e){var n=this,i=t.Deferred();return(this.options.getToken||this.getToken).call(this).done(function(t){function o(t){a[t].on("change:progress",function(n,s){100==s&&t<e.length&&"pending"===i.state()&&o(t)}),n._upload(a[t],s).done(function(){t>=e.length&&i.resolve()}).fail(function(e,t,n){i.reject(e,t,n)}),t++}var s=t.uptoken,a=e.models;o(0)}).fail(function(e,t){i.reject(e,t)}),i},_upload:function(e,n){var s=new FormData;s.append("token",n),s.append("file",e.get("file")),s.append("x:categoryId",this.options.categoryId),e.set("uploading",!0);var a=t.Deferred();return i.ajax({url:"//upload.qbox.me",type:"POST",data:s,processData:!1,contentType:!1,disableCsrfToken:!0,xhr:function(){var n=t.ajaxSettings.xhr();return n.upload.addEventListener("progress",function(t){e.set("progress",Math.ceil(t.loaded/t.total*100))},!1),n}}).done(function(t,n,i){e.set("attachment",t),a.resolve(t,n,i)}).fail(function(t,n,i){var s=i.status,l="",t="上传失败，请重试";i.responseJSON?l=i.responseJSON.error:i.responseText&&(l=i.responseText),200!=s&&(t+=[" [",s,":",i.statusText,"] "].join("")),o.log({spm:"attahcment_upload_error",msg:t+l,filename:(e.get("file")||{}).name,XReqid:i.getResponseHeader("X-Reqid")||"none"}),a.reject(t,n,i)}),a},getToken:function(){var e={imgPri:"/storage/priImgUploadToken.json",imgPub:"/shop/pubImgUploadToken.json",voicePub:"/shop/pubAudioUploadToken.json"},t=this.options.uploadTokenType,n="/dock/token.json";return t&&e[t]&&(n=e[t]),i.ajax({url:window._global.url.materials+n,type:"POST",dataType:this.options.dataType,data:{kdt_id:window._global.kdt_id,scope:this.options.private?s.js.qn_private:s.js.qn_public},xhrFields:{withCredentials:!0}})}})}),define("jsx",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("jsx!components/attachment/limit_dialog",["require","react","zent"],function(e){var t=e("react"),n=e("zent"),i=n.Button,o=n.Dialog;return{open:function(e){function n(){o.closeDialog(s)}var s=Date.now();o.openDialog({dialogId:s,title:"上传失败",children:t.createElement("div",null,e),footer:[t.createElement(i,{key:"1",href:window._global.url.www+"/member#chooseService",type:"primary"},"立即订购"),t.createElement(i,{key:"2",type:"primary",outline:!0,onClick:n},"我再想想")]})}}}),define("components/attachment/image/models/upload_local_image_item",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({defaults:{src:"",file:null,uploading:!1,progress:0}})}),define("components/attachment/image/collections/upload_local_image_list",["require","backbone","../models/upload_local_image_item"],function(e){"use strict";var t=e("backbone"),n=e("../models/upload_local_image_item");return t.Collection.extend({model:n})}),define("tpl!components/attachment/image/templates/upload_local_image_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="image-box" style="background-image: url('+(null==(__t=src)?"":__t)+')"></div>\n<a href="javascript:;" class="close-modal small js-remove-attachment">×</a>\n\n\n<div class="image-progress hide js-progress"></div>\n\n';return __p}}),define("components/attachment/image/views/upload_local_image_item",["require","marionette","tpl!../templates/upload_local_image_item"],function(e){"use strict";return e("marionette").ItemView.extend({tagName:"li",className:"upload-local-image-item",template:e("tpl!../templates/upload_local_image_item"),ui:{progress:".js-progress"},events:{"click .js-remove-attachment":"handleRemoveAttachmentClick"},initialize:function(){this.listenTo(this.model,"change:uploading",this.handleUploadingChange),this.listenTo(this.model,"change:progress",this.handleProgressChange)},handleRemoveAttachmentClick:function(){this.model.destroy()},handleUploadingChange:function(){var e=this.model.get("uploading");this.ui.progress.toggle(e)},handleProgressChange:function(){var e=this.model.get("progress");this.ui.progress.html(e+"%")}})}),define("components/attachment/image/views/upload_local_image_list",["require","marionette","./upload_local_image_item"],function(e){"use strict";var t=e("marionette"),n=e("./upload_local_image_item");return t.CollectionView.extend({tagName:"ul",className:"upload-local-image-list image-list",itemView:n,initialize:function(){},onRender:function(){this.sortable()},sortable:function(){var e=this;this.$el.sortable({cursor:"move",start:function(e,t){t.item.data("start",t.item.index())},stop:function(t,n){var i=n.item.data("start"),o=n.item.index();i!==o&&(e.sort(i,o,e.collection.models),e.collection.trigger("reset"))}})},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n}})}),define("tpl!components/attachment/image/templates/upload",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    ',options.onlyUpload||(__p+='\n        <a href="javascript:;" class="title js-show-image-view" style="margin-right: 4px;">&lt; 选择图片</a>\n        <span style="font-size: 14px;"> | </span>\n    '),__p+='\n    <span class="title">上传图片</span>\n</div>\n<div class="modal-body" style="min-height: 400px; height: auto;">\n    ',options.hideDownload||(__p+='\n    <div class="network-image-region">\n        <div class="title">网络图片：</div>\n        <div class="content">\n            <div class="input-append">\n                <input type="text" placeholder="请添加网络图片地址" class="js-network-image-url span4">\n                <button class="btn js-network-image-confirm" type="button" data-loading-text="提取中...">提取</button>\n            </div>\n            <div class="image-preview">\n                <img src="" class="js-network-image-preview" style="display: none;">\n            </div>\n        </div>\n    </div>\n    '),__p+='\n    <div class="local-image-region">\n        <div class="title">本地图片：</div>\n        <div class="content">\n            <div class="js-image-preview-region">\n\n            </div>\n            <div class="js-add-local-attachment add-local-image-button pull-left">\n                +\n                <input type="file" value="添加 +" class="js-local-file" '+(null==(__t=options.multiUpload?"multiple":"")?"":__t)+' accept="image/gif, image/jpeg, image/png">\n            </div>\n            <div class="c-gray" style="clear: both; padding-top: 20px;">\n                仅支持jpg、gif、png三种格式, 大小不超过'+(null==(__t=options.maxSizeText)?"":__t)+'\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer clearfix">\n    <div class="text-center">\n        <button class="ui-btn ui-btn-disabled js-confirm" disabled data-loading-text="正在上传...">确定</button>\n    </div>\n</div>\n';return __p}}),define("components/attachment/image/views/upload",["require","underscore","jquery","core/utils","marionette","../../upload","jsx!../../limit_dialog","../collections/upload_local_image_list","./upload_local_image_list","tpl!../templates/upload"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("core/utils"),o=e("marionette"),s=e("../../upload"),a=e("jsx!../../limit_dialog"),l=e("../collections/upload_local_image_list"),r=e("./upload_local_image_list");return o.Layout.extend({template:e("tpl!../templates/upload"),regions:{imagePreviewRegion:".js-image-preview-region"},events:{"click .js-network-image-confirm":"handleNetworkImageConfirm","change .js-local-file":"handleLocalFileChange","click .js-confirm":"handleConfirmClick"},initialize:function(e){this.options=e||{},this.model=new s(null,this.options),this.collection=new l,this.listenTo(this.collection,"add remove",this.toggleConfirmButton)},onShow:function(){this.imagePreviewRegion.show(new r({collection:this.collection}))},serializeData:function(){return t.extend(this.model.toJSON(),{options:this.options})},toggleConfirmButton:function(){var e=this.$(".js-confirm");this.collection.size()>0?(e.removeClass("ui-btn-disabled").addClass("ui-btn-primary"),e.attr("disabled",!1),this.options.multiUpload||this.$(".js-add-local-attachment").hide()):(e.addClass("ui-btn-disabled").removeClass("ui-btn-primary"),e.attr("disabled",!0),this.options.multiUpload||this.$(".js-add-local-attachment").show())},handleNetworkImageConfirm:function(e){var o=this,s=n(e.target),l=this.$(".js-network-image-url"),r=n.trim(l.val());if(!r)return l.get(0).focus();this.$(".js-network-image-preview").show().attr("src",r),s.button("loading"),this.model.uploadNetworkAttachment(r).done(function(e){e?(t.isFunction(o.options.callback)&&o.options.callback([e]),o.options.indexView.hide()):(i.errorNotify("提取失败，请确认图片地址是否正确"),s.button("reset"))}).fail(function(e,t){t&&160400204===t.code?a.open(e):i.errorNotify(e),s.button("reset")})},handleLocalFileChange:function(e){var n=e.target.files;t.each(n,function(e){e.size<=this.options.maxSize?this.addFile(e):i.errorNotify("已经自动过滤大于"+this.options.maxSizeText+"的图片文件")},this),e.target.value=null},addFile:function(e){var t=new FileReader,n=this;t.onload=function(t){n.collection.add({src:t.target.result,file:e})},t.readAsDataURL(e)},handleConfirmClick:function(e){var o=n(e.target),s=this;o.btn("loading"),this.model.uploadLocalAttachment(this.collection).always(function(){o.btn("reset")}).done(function(){if(t.isFunction(s.options.callback)){var e=s.collection.map(function(e){return e.get("attachment")});s.options.callback(e)}i.successNotify("图片上传成功"),s.options.indexView.hide()}).fail(function(e,t){t&&160400204===t.code?a.open(e):i.errorNotify(e),s.collection.each(function(e){e.set({uploading:!1,progress:0})})})}})}),define("tpl!components/attachment/image/templates/index",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-main-region"></div>\n';return __p}}),define("components/attachment/image/views/index",["require","underscore","marionette","core/utils","./image","./icon","./upload","tpl!../templates/index"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=(e("core/utils"),e("./image")),o=e("./icon"),s=e("./upload"),a={categoryId:null,multiChoose:!0,multiUpload:!0,onlyUpload:!1,tabActive:"image",maxSize:3072,hideDownload:!1,hideIconList:!1,dataType:void 0,private:!1,callback:function(){}};return n.Layout.extend({className:"widget-attachment modal hide",template:e("tpl!../templates/index"),events:{"click .js-show-image-view":"showImageView","click .js-show-icon-view":"showIconView","click .js-show-upload-view":"showUploadView"},regions:{mainRegion:".js-main-region"},initialize:function(e){this.setOptions(e)},setOptions:function(e){e=e||{},this.options=t.extend({},a,e),this.options.onlyUpload&&(this.options.tabActive="upload"),void 0===e.multiUpload&&(this.options.multiUpload=this.options.multiChoose);var n=+this.options.maxSize;this.options.maxSizeText=n%1024==0?n/1024+" MB":n+" KB",this.options.maxSize=1024*this.options.maxSize,this.options.indexView=this},show:function(){this.render(),"image"==this.options.tabActive&&this.showImageView(),"icon"==this.options.tabActive&&this.showIconView(),"upload"==this.options.tabActive&&this.showUploadView(),this.$el.modal("show")},showImageView:function(){this.mainRegion.show(new i(this.options))},showIconView:function(){this.mainRegion.show(new o(this.options))},showUploadView:function(){this.mainRegion.show(new s(this.options))},parseFormat:function(e){return t.map(e,function(e){return{attachment_file:e.attachmentFile,attachment_full_url:e.attachmentFullUrl,attachment_id:e.attachmentId+"",attachment_size:e.attachmentSize+"",attachment_title:e.attachmentTitle,attachment_url:e.attachmentUrl,bucket:e.bucket,checked:0,created_time:e.createTime,height:e.height+"",media_type:e.mediaType,source:e.source+"",thumb_url:e.thumbUrl,width:e.width+""}})},hide:function(){this.$el.modal("hide")}})}),define("components/attachment/image/app",["require","jqueryui","components/spider/spider","./views/index"],function(e){e("jqueryui"),e("components/spider/spider");var t=e("./views/index");return{initialize:function(e){this._initialized?this._app.setOptions(e):(this._initialized=!0,this._app=new t(e)),this._app.show()}}}),define("text!templates/goods_info.html",[],function(){return'<div class="info-group-title vbox">\n    <div class="group-inner"><%= is_hotel == \'1\' ? \'房间信息\' : \'商品信息\' %></div>\n</div>\n<div class="info-group-cont vbox">\n    <div class="group-inner">\n        <div class="control-group">\n            <label class="control-label">\n                <em class="required">*</em><%= is_hotel == \'1\' ? \'房间名：\' : \'商品名：\' %>\n            </label>\n            <div class="controls">\n                <input type="text" name="title" value="<%- title %>" maxlength="100"\n                    class="input-xxlarge <%= window.editConfig.title.readonly ? "js-lock-help-note" : "" %>"\n                    <%= window.editConfig.title.readonly ? "readonly" : "" %>\n                />\n                <span class="autoread-goods gray">\n                    快速导入淘宝商品信息（该功能暂不可用）\n                </span>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label"><em class="required">*</em>价格：</label>\n            <div class="controls">\n                <div class="input-prepend">\n                    <span class="add-on">￥</span>\n                    <input data-stock-id="total" type="text" maxlength="10" name="price" value="<%= price %>"\n                        class="js-price input-small <%= window.editConfig.price.readonly ? "js-lock-help-note" : "" %>"\n                        <%= window.editConfig.price.readonly ? "readonly" : "" %>\n                    />\n                </div>\n                <% if(isFx) { %>\n                    <input data-stock-id="total" type="text" maxlength="10" name="profit" value="<%= profit %>" class="js-profit input-small" readonly />\n                <% } %>\n                <input type="text" placeholder="原价：¥99.99" name="origin" value="<%= origin %>"\n                    class="input-small <%= window.editConfig.price.readonly ? "js-lock-help-note" : "" %>"\n                    <%= window.editConfig.price.readonly ? "readonly" : "" %>\n                />\n                <input type="text" placeholder="成本价：￥9.9" name="cost_price" value="<%= cost_price %>"\n                    class="input-small <%= window.editConfig.price.readonly ? "js-lock-help-note" : "" %> <%= isFx ? \'hide\' : \'\' %>"\n                    <%= window.editConfig.price.readonly ? "readonly" : "" %>\n                />\n                <% if (window.editConfig.price.message) { %>\n                    <div class="ui-message-warning mt10">\n                        <%= window.editConfig.price.message %>\n                    </div>\n                <% } %>\n                <% if(is_hotel == \'1\') { %>\n                    <p class="help-desc hotel-price-help">该价格为初始标价，实际每日售价请在房态管理里进行设置</p>\n                <% } %>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label"><em class="required">*</em>商品图：</label>\n            <div class="controls">\n                <input type="hidden" name="picture" />\n                <div class="picture-list">\n                    <ul class="js-picture-list app-image-list clearfix">\n                    <% _.each(picture, function(item, index) { %>\n                        <%= picTemplate({\'item\': item, \'fullfillImage\': fullfillImage}) %>\n                    <% }); %>\n                    <li>\n                        <a href="javascript:;" class="add-goods <%= window.editConfig.picture.readonly ? "js-lock-help-note" : "js-add-picture" %>">+加图</a>\n                    </li>\n                    </ul>\n                </div>\n                <p class="help-desc">建议尺寸：640 x 640 像素；你可以拖拽图片调整图片顺序。</p>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label">主图视频：</label>\n            <div class="controls">\n                <div class="js-video-list"></div>\n            </div>\n        </div>\n\n        <div class="js-buy-url-group control-group <% if(shop_method != \'0\') { %>hide<% } %>">\n            <label class="control-label"><em class="required">*</em>外部购买地址：</label>\n            <div class="controls">\n                <input type="text" name="buy_url" value="<%- buy_url %>" class="input-xxlarge js-buy-url">\n                <a style="display: none;" href="javascript:;" class="js-help-notes circle-help">?</a>\n            </div>\n        </div>\n\n        <div class="js-electric-card-info">\n            <div class="control-group">\n                <label class="control-label"><em class="required">*</em>电子凭证<br>生效时间:<br><span class="gray">(买家支付成功后) </span></label>\n                <div class="controls">\n                    <label class="radio inline has-input">\n                        <input type="radio" name="effective_type" value="0" <%= effective_type == \'0\' ? \'checked\' : \'\' %>>\n                        立即生效\n                    </label>\n                    <label class="radio inline has-input">\n                        <input type="radio" name="effective_type" value="1" <%= effective_type == \'1\' ? \'checked\' : \'\' %>>\n                        <input type="number" class="input-tiny" name="effective_delay_hours" value="<%= effective_delay_hours %>">\n                        小时后生效\n                    </label>\n                    <label class="radio inline has-input">\n                        <input type="radio" name="effective_type" value="2" <%= effective_type == \'2\' ? \'checked\' : \'\' %>>\n                        次日生效\n                    </label>\n                </div>\n            </div>\n\n            <div class="control-group">\n                <label class="control-label">节假日是否可用：</label>\n                <div class="controls">\n                    <label class="radio inline">\n                        <input type="radio" name="holidays_available" value="1" <%= holidays_available == \'1\' ? \'checked\' : \'\' %>>\n                        是\n                    </label>\n                    <label class="radio inline">\n                        <input type="radio" name="holidays_available" value="0" <%= holidays_available == \'0\' ? \'checked\' : \'\' %>>\n                        否\n                    </label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!templates/picture.html",[],function(){return'<li class="sort">\n\t<img src="<%= fullfillImage(item.url, \'!100x100.jpg\') %>" data-src="<%= fullfillImage(item.url) %>" class="js-img-preview"/>\n    <% if (!window.editConfig.picture.readonly) { %>\n\t   <a class="js-delete-picture close-modal small hide">×</a>\n    <% } %>\n</li>\n'}),define("text!templates/video.html",[],function(){return'<%\n    var noteText = \'\';\n    var videoLink = \'<a href="javascript:;" class="js-edit-video">编辑视频</a>\';\n    var helpDesc = \'<p class="help-desc">目前仅支持在微信中播放，建议时长9-30秒，建议视频宽高比16:9</p>\';\n\n    if (video.status == 1 || video.status == 2 || video.status == 5) {\n        videoLink = \'<a href="javascript:;" class="js-refresh-video">刷新</a>\';\n        noteText = \'<div class="note"><i></i><span>该视频转码、审核中，转码审核通过后生效，商品可以直接保存</span></div>\';\n    } else if (video.status == 3) {\n        noteText = \'<div class="note"><i></i><span>该视频转码失败，无法正常播放，你可以 <a class="js-add-video">重新选择一个视频</a></span></div>\';\n    } else if (video.status == 6) {\n        var noticeUrl = _global.url.www + \'/notice/dashboard#2\';\n        noteText = \'<div class="note"><i></i><span>该视频审核失败，无法正常播放，你可以 <a class="js-add-video">重新选择一个视频</a> 或 <a href="\' + noticeUrl + \'" target="_blank">登录商家后台通知中心查看</a></span></div>\';\n    }\n\n    // 已删除\n    if (video.is_published == 2) {\n        videoLink = \'\';\n        noteText = \'<div class="note"><i></i><span>该视频已被删除，无法正常播放，你可以 <a class="js-add-video">重新选择一个视频</a></span></div>\';\n    }\n%>\n\n<div class="video-edit-wrap">\n    <% if (video.video_id) { %>\n        <div class="js-video-cover">\n            <div class="video-cover <%= video.cover_url ? \'is-success\' : \'\' %>">\n                <span class="video-close js-delete-video">x</span>\n                <% if (video.cover_url) { %>\n                    <div class="image-cover" style="background-image: url(<%= fullfillImage(video.cover_url, \'!120x120.jpg\') %>)"></div>\n                <% } else { %>\n                    <div class="empty-cover"></div>\n                <% } %>\n            </div>\n            <%= videoLink %>\n\n            <%= helpDesc %>\n            <%= noteText %>\n        </div>\n    <% } else { %>\n        <a href="javascript:;" class="add-video js-add-video">+</a>\n        <%= helpDesc %>\n    <% } %>\n</div>\n'}),define("text!components/recharge_modal/templates/recharge.html",[],function(){return'<div class="modal-content">\n    <div class="balance-info">\n        <h2>\n            <span class="remind-icon">店铺余额不足，请尽快充值</span>\n        </h2>\n        <p class="tips">\n            截至目前，由于您的店铺余额不足，已有<span><%= Math.abs(balance) %>元</span>交易手续费未缴纳。现已暂停提供在线导入/导出、开放接口（API）等服务。请及时充值店铺余额，以免影响服务。\n        </p>\n        <div class="btns-group">\n            <a href="<%= _global.url.www %>/trade/newsettlement#rechargeMoney" class="btn btn-red js-recharge">立即充值</a>\n            <a href="javascript:void(0);" class="btn js-after">稍后充值</a>\n        </div>\n    </div>\n</div>\n'}),define("components/recharge_modal/views/app",["require","underscore","marionette","text!../templates/recharge.html","components/balance_tip/app"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!../templates/recharge.html"),o=e("components/balance_tip/app");return n.ItemView.extend({className:"modal fade hide recharge-modal",events:{"click .js-after":"onAfterClick","click .js-recharge":"closeModal"},
initialize:function(e){this.balance=window._global.balance?parseFloat(window._global.balance/100):e.balance,this.template=t.template(i)({balance:this.balance}),this.render()},onRender:function(){this.$el.modal("show")},onAfterClick:function(){this.$el.modal("hide"),new o},closeModal:function(){this.$el.modal("hide")}})}),define("tpl!components/image_preview/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-centered-image js-image-background">\n    ',_.each(images,function(e,t){__p+='\n        <img class="js-image-'+(null==(__t=t)?"":__t)+'" style="display: none;" />\n    '}),__p+='\n</div>\n\n<div class="preview-close js-close">&times;</div>\n\n',images.length>1&&(__p+='\n    <div class="preview-actions">\n        <span class="preview-action js-before">上一张</span>\n        <span class="preview-action js-after">下一张</span>\n    </div>\n'),__p+="\n";return __p}}),define("components/image_preview/app",["require","underscore","jquery","marionette","core/utils","tpl!./app"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("core/utils");return i.ItemView.extend({template:e("tpl!./app"),className:"widget-image-preview",events:{"click .js-close":"close","click .js-before":"handleBefore","click .js-after":"handleAfter","click .js-image-background":"handleBackground"},ui:{imagebox:".ui-centered-image",images:"img"},initialize:function(e){this.options=e||{},this.images=this.getImageOption(),this.index=this.getIndexOption(),n(window).on("resize.widget.image.preview",this.resize.bind(this)),n(window).on("keydown.widget.image.preview",this.handleWindowKeydown.bind(this)),this.render()},getImageOption:function(){return t.isUndefined(this.options.images)?[]:t.isArray(this.options.images)?this.options.images:[this.options.images]},getIndexOption:function(){return t.isUndefined(this.options.index)?0:parseInt(this.options.index,10)},serializeData:function(){return{images:this.images,index:this.index}},onRender:function(){var e=n(document.body);this.$backdrop=n("<div>").addClass("widget-image-preview-backdrop"),this.resize(),this.$backdrop.appendTo(e),this.$el.appendTo(e),this.showImage()},resize:function(){var e=n("html")[0];this.ui.imagebox.css({width:e.clientWidth,height:e.clientHeight}),this.ui.images.css({maxWidth:e.clientWidth,maxHeight:e.clientHeight})},showImage:function(){this.ui.images.hide();var e,t,n=this.images[this.index];"string"==typeof n?e=n:(e=n.src,t=n.srcset);var i=this.ui.images.eq(this.index);e&&i.attr("src",o.fullfillImage(e)),t&&i.attr("srcset",o.fullfillImage(t)),i.show()},handleBefore:function(){var e=this.images.length;this.index=(this.index-1+e)%e,this.showImage()},handleAfter:function(){var e=this.images.length;this.index=(this.index+1)%e,this.showImage()},handleWindowKeydown:function(e){switch(e.keyCode){case o.keyCode.LEFT:this.handleBefore();break;case o.keyCode.RIGHT:this.handleAfter();break;case o.keyCode.ESCAPE:this.close()}},handleBackground:function(e){if("img"===e.target.tagName.toLowerCase())return!1;this.close()},onClose:function(){n(window).off("resize.widget.image.preview"),n(window).off("keydown.widget.image.preview"),this.$backdrop.remove()}})}),function(e,t){"function"==typeof define&&define.amd?define("@youzan/video-upload/dist/main",["react","react-dom"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"object"==typeof exports?exports["video-upload"]=t(require("react"),require("react-dom")):e["video-upload"]=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(2),a=i(s),l=n(3),r=i(l),c=n(309),d=i(c),u=n(544),p=r.default.openDialog;t.default={initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="video_upload_dialog_"+ +new Date;if(!(0,u.handleShopStatus)())return!1;p({dialogId:t,maskClosable:!1,className:"rc-video-upload__dialog",children:a.default.createElement(d.default,o({},e,{dialogId:t}))})}},e.exports=t.default},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=i(o),a=n(265),l=i(a);s.default.openDialog=l.default,s.default.closeDialog=a.closeDialog,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(92),g=i(_),v=n(95),b=i(v),w=n(261),y=i(w),k=g.default.withNonScrollable,x=g.default.withESCToClose,j=k(g.default),S=x(j),C=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.onClose=function(e){i.props.onClose(e)},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.prefix,i=e.closeBtn,o=e.style,a=(0,s.default)({},o.width?{}:{minWidth:"450px",maxWidth:"75%"},o),l=i?S:j;return f.default.createElement(l,{visible:t,onClose:this.onClose,className:n+"-dialog-r-anchor"},f.default.createElement(y.default,(0,s.default)({},this.props,{onClose:this.onClose,style:a}),this.props.children))}}]),t}(h.PureComponent||h.Component);C.propTypes={prefix:b.default.string,onClose:b.default.func,visible:b.default.bool,className:b.default.string,style:b.default.object,title:b.default.node,closeBtn:b.default.bool,mask:b.default.bool,maskClosable:b.default.bool,footer:b.default.node},C.defaultProps={prefix:"zent",onClose:function(){},visible:!1,className:"",style:{},title:"",closeBtn:!0,mask:!0,maskClosable:!0,footer:null},t.default=C},function(e,t,n){"use strict";t.__esModule=!0;var i=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t,n){e.exports={default:n(7),__esModule:!0}},function(e,t,n){n(8),e.exports=n(11).Object.assign},function(e,t,n){var i=n(9);i(i.S+i.F,"Object",{assign:n(24)})},function(e,t,n){var i=n(10),o=n(11),s=n(12),a=n(14),l=function(e,t,n){var r,c,d,u=e&l.F,p=e&l.G,m=e&l.S,h=e&l.P,f=e&l.B,_=e&l.W,g=p?o:o[t]||(o[t]={}),v=g.prototype,b=p?i:m?i[t]:(i[t]||{}).prototype;p&&(n=t);for(r in n)(c=!u&&b&&void 0!==b[r])&&r in g||(d=c?b[r]:n[r],g[r]=p&&"function"!=typeof b[r]?n[r]:f&&c?s(d,i):_&&b[r]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):h&&"function"==typeof d?s(Function.call,d):d,h&&((g.virtual||(g.virtual={}))[r]=d,e&l.R&&v&&!v[r]&&a(v,r,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(13);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(15),o=n(23);e.exports=n(19)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(16),o=n(18),s=n(22),a=Object.defineProperty;t.f=n(19)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(17);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(19)&&!n(20)(function(){return 7!=Object.defineProperty(n(21)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(17),o=n(10).document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var i=n(17);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var i=n(25),o=n(40),s=n(41),a=n(42),l=n(29),r=Object.assign;e.exports=!r||n(20)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||Object.keys(r({},t)).join("")!=i})?function(e,t){for(var n=a(e),r=arguments.length,c=1,d=o.f,u=s.f;r>c;)for(var p,m=l(arguments[c++]),h=d?i(m).concat(d(m)):i(m),f=h.length,_=0;f>_;)u.call(m,p=h[_++])&&(n[p]=m[p]);return n}:r},function(e,t,n){var i=n(26),o=n(39);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(27),o=n(28),s=n(32)(!1),a=n(36)("IE_PROTO");e.exports=function(e,t){var n,l=o(e),r=0,c=[];for(n in l)n!=a&&i(l,n)&&c.push(n);for(;t.length>r;)i(l,n=t[r++])&&(~s(c,n)||c.push(n));return c}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(29),o=n(31);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(30);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(28),o=n(33),s=n(35);e.exports=function(e){return function(t,n,a){var l,r=i(t),c=o(r.length),d=s(a,c);if(e&&n!=n){for(;c>d;)if((l=r[d++])!=l)return!0}else for(;c>d;d++)if((e||d in r)&&r[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var i=n(34),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(34),o=Math.max,s=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):s(e,t)}},function(e,t,n){var i=n(37)("keys"),o=n(38);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(10),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(31);e.exports=function(e){return Object(i(e))}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(45),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={default:n(46),__esModule:!0}},function(e,t,n){n(47);var i=n(11).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(9);i(i.S+i.F*!n(19),"Object",{defineProperty:n(15).f})},function(e,t,n){"use strict";t.__esModule=!0;var i=n(49),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(50),s=i(o),a=n(70),l=i(a),r="function"==typeof l.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":typeof e};t.default="function"==typeof l.default&&"symbol"===r(s.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":void 0===e?"undefined":r(e)}},function(e,t,n){e.exports={default:n(51),__esModule:!0}},function(e,t,n){n(52),n(65),e.exports=n(69).f("iterator")},function(e,t,n){"use strict";var i=n(53)(!0);n(54)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(34),o=n(31);e.exports=function(e){return function(t,n){var s,a,l=String(o(t)),r=i(n),c=l.length;return r<0||r>=c?e?"":void 0:(s=l.charCodeAt(r),s<55296||s>56319||r+1===c||(a=l.charCodeAt(r+1))<56320||a>57343?e?l.charAt(r):s:e?l.slice(r,r+2):a-56320+(s-55296<<10)+65536)}}},function(e,t,n){"use strict";var i=n(55),o=n(9),s=n(56),a=n(14),l=n(27),r=n(57),c=n(58),d=n(62),u=n(64),p=n(63)("iterator"),m=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,_,g,v){c(n,t,f);var b,w,y,k=function(e){if(!m&&e in C)return C[e];switch(e){case"keys":return function(){return new n(this,e)};case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",j="values"==_,S=!1,C=e.prototype,T=C[p]||C["@@iterator"]||_&&C[_],O=T||k(_),I=_?j?k("entries"):O:void 0,P="Array"==t?C.entries||T:T;if(P&&(y=u(P.call(new e)))!==Object.prototype&&(d(y,x,!0),i||l(y,p)||a(y,p,h)),j&&T&&"values"!==T.name&&(S=!0,O=function(){return T.call(this)}),i&&!v||!m&&!S&&C[p]||a(C,p,O),r[t]=O,r[x]=h,_)if(b={values:j?O:k("values"),keys:g?O:k("keys"),entries:I},v)for(w in b)w in C||s(C,w,b[w]);else o(o.P+o.F*(m||S),t,b);return b}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(14)},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(59),o=n(23),s=n(62),a={};n(14)(a,n(63)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:o(1,n)}),s(e,t+" Iterator")}},function(e,t,n){var i=n(16),o=n(60),s=n(39),a=n(36)("IE_PROTO"),l=function(){},r=function(){var e,t=n(21)("iframe"),i=s.length;for(t.style.display="none",n(61).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),r=e.F;i--;)delete r.prototype[s[i]];return r()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=i(e),n=new l,l.prototype=null,n[a]=e):n=r(),void 0===t?n:o(n,t)}},function(e,t,n){var i=n(15),o=n(16),s=n(25);e.exports=n(19)?Object.defineProperties:function(e,t){o(e);for(var n,a=s(t),l=a.length,r=0;l>r;)i.f(e,n=a[r++],t[n]);return e}},function(e,t,n){e.exports=n(10).document&&document.documentElement},function(e,t,n){var i=n(15).f,o=n(27),s=n(63)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){var i=n(37)("wks"),o=n(38),s=n(10).Symbol,a="function"==typeof s;(e.exports=function(e){return i[e]||(i[e]=a&&s[e]||(a?s:o)("Symbol."+e))}).store=i},function(e,t,n){var i=n(27),o=n(42),s=n(36)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(66);for(var i=n(10),o=n(14),s=n(57),a=n(63)("toStringTag"),l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],r=0;r<5;r++){var c=l[r],d=i[c],u=d&&d.prototype;u&&!u[a]&&o(u,a,c),s[c]=s.Array}},function(e,t,n){"use strict";var i=n(67),o=n(68),s=n(57),a=n(28);e.exports=n(54)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(63)},function(e,t,n){e.exports={default:n(71),__esModule:!0}},function(e,t,n){n(72),n(81),n(82),n(83),e.exports=n(11).Symbol},function(e,t,n){"use strict";var i=n(10),o=n(27),s=n(19),a=n(9),l=n(56),r=n(73).KEY,c=n(20),d=n(37),u=n(62),p=n(38),m=n(63),h=n(69),f=n(74),_=n(75),g=n(76),v=n(77),b=n(16),w=n(28),y=n(22),k=n(23),x=n(59),j=n(78),S=n(80),C=n(15),T=n(25),O=S.f,I=C.f,P=j.f,z=i.Symbol,E=i.JSON,M=E&&E.stringify,N=m("_hidden"),D=m("toPrimitive"),F={}.propertyIsEnumerable,q=d("symbol-registry"),A=d("symbols"),R=d("op-symbols"),L=Object.prototype,U="function"==typeof z,$=i.QObject,V=!$||!$.prototype||!$.prototype.findChild,B=s&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=O(L,t);i&&delete L[t],I(e,t,n),i&&e!==L&&I(L,t,i)}:I,H=function(e){var t=A[e]=x(z.prototype);return t._k=e,t},W=U&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof z},G=function(e,t,n){return e===L&&G(R,t,n),b(e),t=y(t,!0),b(n),o(A,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,N)||I(e,N,k(1,{})),e[N][t]=!0),B(e,t,n)):I(e,t,n)},Y=function(e,t){b(e);for(var n,i=g(t=w(t)),o=0,s=i.length;s>o;)G(e,n=i[o++],t[n]);return e},K=function(e,t){return void 0===t?x(e):Y(x(e),t)},J=function(e){var t=F.call(this,e=y(e,!0));return!(this===L&&o(A,e)&&!o(R,e))&&(!(t||!o(this,e)||!o(A,e)||o(this,N)&&this[N][e])||t)},X=function(e,t){if(e=w(e),t=y(t,!0),e!==L||!o(A,t)||o(R,t)){var n=O(e,t);return!n||!o(A,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(w(e)),i=[],s=0;n.length>s;)o(A,t=n[s++])||t==N||t==r||i.push(t);return i},Z=function(e){for(var t,n=e===L,i=P(n?R:w(e)),s=[],a=0;i.length>a;)!o(A,t=i[a++])||n&&!o(L,t)||s.push(A[t]);return s};U||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===L&&t.call(R,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),B(this,e,k(1,n))};return s&&V&&B(L,e,{configurable:!0,set:t}),H(e)},l(z.prototype,"toString",function(){return this._k}),S.f=X,C.f=G,n(79).f=j.f=Q,n(41).f=J,n(40).f=Z,s&&!n(55)&&l(L,"propertyIsEnumerable",J,!0),h.f=function(e){return H(m(e))}),a(a.G+a.W+a.F*!U,{Symbol:z});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)m(ee[te++]);for(var ee=T(m.store),te=0;ee.length>te;)f(ee[te++]);a(a.S+a.F*!U,"Symbol",{for:function(e){return o(q,e+="")?q[e]:q[e]=z(e)},keyFor:function(e){if(W(e))return _(q,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!U,"Object",{create:K,defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),E&&a(a.S+a.F*(!U||c(function(){var e=z();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);return t=i[1],"function"==typeof t&&(n=t),!n&&v(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!W(t))return t}),i[1]=t,M.apply(E,i)}}}),z.prototype[D]||n(14)(z.prototype,D,z.prototype.valueOf),u(z,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},function(e,t,n){var i=n(38)("meta"),o=n(17),s=n(27),a=n(15).f,l=0,r=Object.isExtensible||function(){return!0},c=!n(20)(function(){return r(Object.preventExtensions({}))}),d=function(e){a(e,i,{value:{i:"O"+ ++l,w:{}}})},u=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!r(e))return"F";if(!t)return"E";d(e)}return e[i].i},p=function(e,t){if(!s(e,i)){if(!r(e))return!0;if(!t)return!1;d(e)}return e[i].w},m=function(e){return c&&h.NEED&&r(e)&&!s(e,i)&&d(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:u,getWeak:p,onFreeze:m}},function(e,t,n){var i=n(10),o=n(11),s=n(55),a=n(69),l=n(15).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(25),o=n(28);e.exports=function(e,t){for(var n,s=o(e),a=i(s),l=a.length,r=0;l>r;)if(s[n=a[r++]]===t)return n}},function(e,t,n){var i=n(25),o=n(40),s=n(41);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var a,l=n(e),r=s.f,c=0;l.length>c;)r.call(e,a=l[c++])&&t.push(a);return t}},function(e,t,n){var i=n(30);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(28),o=n(79).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==s.call(e)?l(e):o(i(e))}},function(e,t,n){var i=n(26),o=n(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(41),o=n(23),s=n(28),a=n(22),l=n(27),r=n(18),c=Object.getOwnPropertyDescriptor;t.f=n(19)?c:function(e,t){if(e=s(e),t=a(t,!0),r)try{return c(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(74)("asyncIterator")},function(e,t,n){n(74)("observable")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(85),s=i(o),a=n(89),l=i(a),r=n(49),c=i(r);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){n(87),e.exports=n(11).Object.setPrototypeOf},function(e,t,n){var i=n(9);i(i.S,"Object",{setPrototypeOf:n(88).set})},function(e,t,n){var i=n(17),o=n(16),s=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(12)(Function.call,n(80).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:s}},function(e,t,n){e.exports={default:n(90),__esModule:!0}},function(e,t,n){n(91);var i=n(11).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(9);i(i.S,"Object",{create:n(59)})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(93),s=i(o),a=n(198),l=i(a),r=n(260),c=i(r);s.default.withESCToClose=l.default,s.default.withNonScrollable=c.default,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(94),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(95),g=i(_),v=n(104),b=i(v),w=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=(0,s.default)(e,["visible"]);return t&&f.default.createElement(b.default,n)}}]),t}(h.PureComponent||h.Component);w.propTypes={visible:g.default.bool},w.defaultProps={visible:!0},t.default=w},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i};e.exports=n(97)(o,!0)}else e.exports=n(103)()}).call(t,n(96))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function s(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){f&&m&&(f=!1,m.length?h=m.concat(h):_=-1,h.length&&l())}function l(){if(!f){var e=o(a);f=!0;for(var t=h.length;t;){for(m=h,h=[];++_<t;)m&&m[_].run();_=-1,t=h.length}m=null,f=!1,s(e)}}function r(e,t){this.fun=e,this.array=t}function c(){}var d,u,p=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var m,h=[],f=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new r(e,t)),1!==h.length||f||o(l)},r.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";var i=n(98),o=n(99),s=n(100),a=n(101),l=n(102);e.exports=function(e,n){function r(e){var t=e&&(S&&e[S]||e[C]);if("function"==typeof t)return t}function c(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function d(e){this.message=e,this.stack=""}function u(e){function i(i,c,u,p,m,h,f){if(p=p||T,h=h||u,f!==a)if(n)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var _=p+":"+u;!l[_]&&r<3&&(s(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",h,p),l[_]=!0,r++)}return null==c[u]?i?new d(null===c[u]?"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `null`.":"The "+m+" `"+h+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(c,u,p,m,h)}if("production"!==t.env.NODE_ENV)var l={},r=0;var c=i.bind(null,!1);return c.isRequired=i.bind(null,!0),c}function p(e){function t(t,n,i,o,s,a){var l=t[n];if(y(l)!==e)return new d("Invalid "+o+" `"+s+"` of type `"+k(l)+"` supplied to `"+i+"`, expected `"+e+"`.");return null}return u(t)}function m(e){function t(t,n,i,o,s){if("function"!=typeof e)return new d("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var l=t[n];if(!Array.isArray(l)){return new d("Invalid "+o+" `"+s+"` of type `"+y(l)+"` supplied to `"+i+"`, expected an array.")}for(var r=0;r<l.length;r++){var c=e(l,r,i,o,s+"["+r+"]",a);if(c instanceof Error)return c}return null}return u(t)}function h(e){function t(t,n,i,o,s){if(!(t[n]instanceof e)){var a=e.name||T;return new d("Invalid "+o+" `"+s+"` of type `"+j(t[n])+"` supplied to `"+i+"`, expected instance of `"+a+"`.")}return null}return u(t)}function f(e){function n(t,n,i,o,s){for(var a=t[n],l=0;l<e.length;l++)if(c(a,e[l]))return null;return new d("Invalid "+o+" `"+s+"` of value `"+a+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?u(n):("production"!==t.env.NODE_ENV&&s(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull)}function _(e){function t(t,n,i,o,s){if("function"!=typeof e)return new d("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var l=t[n],r=y(l);if("object"!==r)return new d("Invalid "+o+" `"+s+"` of type `"+r+"` supplied to `"+i+"`, expected an object.");for(var c in l)if(l.hasOwnProperty(c)){var u=e(l,c,i,o,s+"."+c,a);if(u instanceof Error)return u}return null}return u(t)}function g(e){function n(t,n,i,o,s){for(var l=0;l<e.length;l++){if(null==(0,e[l])(t,n,i,o,s,a))return null}return new d("Invalid "+o+" `"+s+"` supplied to `"+i+"`.")}if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&s(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var o=0;o<e.length;o++){var l=e[o];if("function"!=typeof l)return s(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",x(l),o),i.thatReturnsNull}return u(n)}function v(e){function t(t,n,i,o,s){var l=t[n],r=y(l);if("object"!==r)return new d("Invalid "+o+" `"+s+"` of type `"+r+"` supplied to `"+i+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var p=u(l,c,i,o,s+"."+c,a);if(p)return p}}return null}return u(t)}function b(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(b);if(null===t||e(t))return!0;var n=r(t);if(!n)return!1;var i,o=n.call(t);if(n!==t.entries){for(;!(i=o.next()).done;)if(!b(i.value))return!1}else for(;!(i=o.next()).done;){var s=i.value;if(s&&!b(s[1]))return!1}return!0;default:return!1}}function w(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":w(t,e)?"symbol":t}function k(e){if(void 0===e||null===e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){var t=k(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function j(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var S="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",T="<<anonymous>>",O={array:p("array"),bool:p("boolean"),func:p("function"),
number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return u(i.thatReturnsNull)}(),arrayOf:m,element:function(){function t(t,n,i,o,s){var a=t[n];if(!e(a)){return new d("Invalid "+o+" `"+s+"` of type `"+y(a)+"` supplied to `"+i+"`, expected a single ReactElement.")}return null}return u(t)}(),instanceOf:h,node:function(){function e(e,t,n,i,o){return b(e[t])?null:new d("Invalid "+i+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return u(e)}(),objectOf:_,oneOf:f,oneOfType:g,shape:v};return d.prototype=Error.prototype,O.checkPropTypes=l,O.PropTypes=O,O}}).call(t,n(96))},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){(function(t){"use strict";function n(e,t,n,o,s,a,l,r){if(i(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,o,s,a,l,r],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(e){};"production"!==t.env.NODE_ENV&&(i=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(96))},function(e,t,n){(function(t){"use strict";var i=n(98),o=i;"production"!==t.env.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=0,s="Warning: "+e.replace(/%s/g,function(){return n[o++]});try{throw new Error(s)}catch(e){}};o=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];e.apply(void 0,[n].concat(o))}}}(),e.exports=o}).call(t,n(96))},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){"use strict";function i(e,n,i,r,c){if("production"!==t.env.NODE_ENV)for(var d in e)if(e.hasOwnProperty(d)){var u;try{o("function"==typeof e[d],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",i,d),u=e[d](n,d,r,i,null,a)}catch(e){u=e}if(s(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",i,d,typeof u),u instanceof Error&&!(u.message in l)){l[u.message]=!0;var p=c?c():"";s(!1,"Failed %s type: %s%s",i,u.message,null!=p?p:"")}}}if("production"!==t.env.NODE_ENV)var o=n(99),s=n(100),a=n(101),l={};e.exports=i}).call(t,n(96))},function(e,t,n){"use strict";var i=n(98),o=n(99),s=n(101);e.exports=function(){function e(e,t,n,i,a,l){l!==s&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=n(105),h=i(m),f=n(95),_=i(f),g=n(195),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),b=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){v.openPortal.call(this)}},{key:"componentWillUnmount",value:function(){v.destroyPortal.call(this)}},{key:"componentDidUpdate",value:function(){var e=this;this.pendingDestroy?v.destroyPortal.call(this,function(){e.pendingDestroy=!1,v.openPortal.call(e)}):v.openPortal.call(this)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.selector!==e.selector)return void(this.pendingDestroy=!0);var t=this.props,n=t.className,i=t.prefix,o=t.css;n===e.className&&i===e.prefix&&(0,h.default)(o,e.css)||v.prepareNode(this.node,e.prefix,e.className,e.css)}},{key:"render",value:function(){return null}}]),t}(p.PureComponent||p.Component);b.propTypes={children:_.default.node.isRequired,selector:_.default.oneOfType([_.default.string,_.default.object]).isRequired,className:_.default.string,css:_.default.object,prefix:_.default.string},b.defaultProps={selector:"body",className:"",css:{},prefix:"zent"},t.default=b},function(e,t,n){function i(e,t){return o(e,t)}var o=n(106);e.exports=i},function(e,t,n){function i(e,t,n,a,l){return e===t||(null==e||null==t||!s(e)&&!s(t)?e!==e&&t!==t:o(e,t,n,a,i,l))}var o=n(107),s=n(175);e.exports=i},function(e,t,n){function i(e,t,n,i,_,v){var b=c(e),w=c(t),y=b?h:r(e),k=w?h:r(t);y=y==m?f:y,k=k==m?f:k;var x=y==f,j=k==f,S=y==k;if(S&&d(e)){if(!d(t))return!1;b=!0,x=!1}if(S&&!x)return v||(v=new o),b||u(e)?s(e,t,n,i,_,v):a(e,t,y,n,i,_,v);if(!(n&p)){var C=x&&g.call(e,"__wrapped__"),T=j&&g.call(t,"__wrapped__");if(C||T){var O=C?e.value():e,I=T?t.value():t;return v||(v=new o),_(O,I,n,i,v)}}return!!S&&(v||(v=new o),l(e,t,n,i,_,v))}var o=n(108),s=n(152),a=n(158),l=n(162),r=n(190),c=n(166),d=n(176),u=n(180),p=1,m="[object Arguments]",h="[object Array]",f="[object Object]",_=Object.prototype,g=_.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(109),s=n(117),a=n(118),l=n(119),r=n(120),c=n(121);i.prototype.clear=s,i.prototype.delete=a,i.prototype.get=l,i.prototype.has=r,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(110),s=n(111),a=n(114),l=n(115),r=n(116);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var o=n(112),s=Array.prototype,a=s.splice;e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(113);e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(112);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(112);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}var o=n(112);e.exports=i},function(e,t,n){function i(){this.__data__=new o,this.size=0}var o=n(109);e.exports=i},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;if(n instanceof o){var i=n.__data__;if(!s||i.length<l-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}var o=n(109),s=n(122),a=n(137),l=200;e.exports=i},function(e,t,n){var i=n(123),o=n(128),s=i(o,"Map");e.exports=s},function(e,t,n){function i(e,t){var n=s(e,t);return o(n)?n:void 0}var o=n(124),s=n(136);e.exports=i},function(e,t,n){function i(e){return!(!a(e)||s(e))&&(o(e)?m:r).test(l(e))}var o=n(125),s=n(133),a=n(132),l=n(135),r=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,u=c.toString,p=d.hasOwnProperty,m=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){if(!s(e))return!1;var t=o(e);return t==l||t==r||t==a||t==c}var o=n(126),s=n(132),a="[object AsyncFunction]",l="[object Function]",r="[object GeneratorFunction]",c="[object Proxy]";e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?r:l:c&&c in Object(e)?s(e):a(e)}var o=n(127),s=n(130),a=n(131),l="[object Null]",r="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(128),o=i.Symbol;e.exports=o},function(e,t,n){var i=n(129),o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")();e.exports=s},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=a.call(e,r),n=e[r];try{e[r]=void 0}catch(e){}var i=l.call(e);return t?e[r]=n:delete e[r],i}var o=n(127),s=Object.prototype,a=s.hasOwnProperty,l=s.toString,r=o?o.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function i(e){return!!s&&s in e}var o=n(134),s=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(128),o=i["__core-js_shared__"];e.exports=o},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,o=i.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(138),s=n(146),a=n(149),l=n(150),r=n(151);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t,n){function i(){this.size=0,this.__data__={hash:new o,map:new(a||s),string:new o}}var o=n(139),s=n(109),a=n(122);e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(140),s=n(142),a=n(143),l=n(144),r=n(145);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{},this.size=0}var o=n(141);e.exports=i},function(e,t,n){var i=n(123),o=i(Object,"create");e.exports=o},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===s?void 0:n}return l.call(t,e)?t[e]:void 0}var o=n(141),s="__lodash_hash_undefined__",a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(141),s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?s:t,this}var o=n(141),s="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(147);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(148);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(147);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(147);e.exports=i},function(e,t,n){function i(e,t){var n=o(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}var o=n(147);e.exports=i},function(e,t,n){function i(e,t,n,i,c,d){var u=n&l,p=e.length,m=t.length;if(p!=m&&!(u&&m>p))return!1;var h=d.get(e);if(h&&d.get(t))return h==t;var f=-1,_=!0,g=n&r?new o:void 0;for(d.set(e,t),d.set(t,e);++f<p;){var v=e[f],b=t[f];if(i)var w=u?i(b,v,f,t,e,d):i(v,b,f,e,t,d);if(void 0!==w){if(w)continue;_=!1;break}if(g){if(!s(t,function(e,t){if(!a(g,t)&&(v===e||c(v,e,n,i,d)))return g.push(t)})){_=!1;break}}else if(v!==b&&!c(v,b,n,i,d)){_=!1;break}}return d.delete(e),d.delete(t),_}var o=n(153),s=n(156),a=n(157),l=1,r=2;e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(137),s=n(154),a=n(155);i.prototype.add=i.prototype.push=s,i.prototype.has=a,e.exports=i},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function i(e,t,n,i,o,x,S){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!x(new s(e),new s(t)));case p:case m:case _:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case b:return e==t+"";case f:var C=r;case v:var T=i&d;if(C||(C=c),e.size!=t.size&&!T)return!1;var O=S.get(e);if(O)return O==t;i|=u,S.set(e,t);var I=l(C(e),C(t),i,o,x,S);return S.delete(e),I;case w:if(j)return j.call(e)==j.call(t)}return!1}var o=n(127),s=n(159),a=n(113),l=n(152),r=n(160),c=n(161),d=1,u=2,p="[object Boolean]",m="[object Date]",h="[object Error]",f="[object Map]",_="[object Number]",g="[object RegExp]",v="[object Set]",b="[object String]",w="[object Symbol]",y="[object ArrayBuffer]",k="[object DataView]",x=o?o.prototype:void 0,j=x?x.valueOf:void 0;e.exports=i},function(e,t,n){var i=n(128),o=i.Uint8Array;e.exports=o},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(e,t,n,i,a,r){var c=n&s,d=o(e),u=d.length;if(u!=o(t).length&&!c)return!1;for(var p=u;p--;){var m=d[p];if(!(c?m in t:l.call(t,m)))return!1}var h=r.get(e);if(h&&r.get(t))return h==t;var f=!0;r.set(e,t),r.set(t,e);for(var _=c;++p<u;){m=d[p];var g=e[m],v=t[m];if(i)var b=c?i(v,g,m,t,e,r):i(g,v,m,e,t,r);if(!(void 0===b?g===v||a(g,v,n,i,r):b)){f=!1;break}_||(_="constructor"==m)}if(f&&!_){var w=e.constructor,y=t.constructor;w!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y)&&(f=!1)}return r.delete(e),r.delete(t),f}var o=n(163),s=1,a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e,a,s)}var o=n(164),s=n(167),a=n(170);e.exports=i},function(e,t,n){function i(e,t,n){var i=t(e);return s(e)?i:o(i,n(e))}var o=n(165),s=n(166);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i=n(168),o=n(169),s=Object.prototype,a=s.propertyIsEnumerable,l=Object.getOwnPropertySymbols,r=l?function(e){return null==e?[]:(e=Object(e),i(l(e),function(t){return a.call(e,t)}))}:o;e.exports=r},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,o=0,s=[];++n<i;){var a=e[n];t(a,n,e)&&(s[o++]=a)}return s}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function i(e){return a(e)?o(e):s(e)}var o=n(171),s=n(185),a=n(189);e.exports=i},function(e,t,n){function i(e,t){var n=a(e),i=!n&&s(e),d=!n&&!i&&l(e),p=!n&&!i&&!d&&c(e),m=n||i||d||p,h=m?o(e.length,String):[],f=h.length;for(var _ in e)!t&&!u.call(e,_)||m&&("length"==_||d&&("offset"==_||"parent"==_)||p&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||r(_,f))||h.push(_);return h}var o=n(172),s=n(173),a=n(166),l=n(176),r=n(179),c=n(180),d=Object.prototype,u=d.hasOwnProperty;e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){var i=n(174),o=n(175),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,r=i(function(){return arguments}())?i:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=r},function(e,t,n){function i(e){return s(e)&&o(e)==a}var o=n(126),s=n(175),a="[object Arguments]";e.exports=i},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){(function(e){var i=n(128),o=n(178),s="object"==typeof t&&t&&!t.nodeType&&t,a=s&&"object"==typeof e&&e&&!e.nodeType&&e,l=a&&a.exports===s,r=l?i.Buffer:void 0,c=r?r.isBuffer:void 0,d=c||o;e.exports=d}).call(t,n(177)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var i=n(181),o=n(183),s=n(184),a=s&&s.isTypedArray,l=a?o(a):i;e.exports=l},function(e,t,n){function i(e){return a(e)&&s(e.length)&&!!l[o(e)]}var o=n(126),s=n(182),a=n(175),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(129),o="object"==typeof t&&t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o,l=a&&i.process,r=function(){try{return l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=r}).call(t,n(177)(e))},function(e,t,n){function i(e){if(!o(e))return s(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(186),s=n(187),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;e.exports=n},function(e,t,n){var i=n(188),o=i(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function i(e){return null!=e&&s(e.length)&&!o(e)}var o=n(125),s=n(182);e.exports=i},function(e,t,n){var i=n(191),o=n(122),s=n(192),a=n(193),l=n(194),r=n(126),c=n(135),d=c(i),u=c(o),p=c(s),m=c(a),h=c(l),f=r;(i&&"[object DataView]"!=f(new i(new ArrayBuffer(1)))||o&&"[object Map]"!=f(new o)||s&&"[object Promise]"!=f(s.resolve())||a&&"[object Set]"!=f(new a)||l&&"[object WeakMap]"!=f(new l))&&(f=function(e){var t=r(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case d:return"[object DataView]";case u:return"[object Map]";case p:return"[object Promise]";case m:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=f},function(e,t,n){var i=n(123),o=n(128),s=i(o,"DataView");e.exports=s},function(e,t,n){var i=n(123),o=n(128),s=i(o,"Promise");e.exports=s},function(e,t,n){var i=n(123),o=n(128),s=i(o,"Set");e.exports=s},function(e,t,n){var i=n(123),o=n(128),s=i(o,"WeakMap");e.exports=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.createElement("div");return e.appendChild(t)}function s(e){var t=e.parentNode;t&&t.removeChild(e)}function a(e){return("string"==typeof e?document.querySelector(e):e)||document.body}function l(e,t,n,i){e.className=(0,u.default)(t+"-portal",n),e.style.cssText=Object.keys(i||{}).map(function(e){return e+": "+i[e]}).join("; ")}function r(e){e=e||this.props;var t=this.node;if(!t){var n=e,i=n.selector,s=n.prefix,r=n.className,c=n.css,d=a(i);this.node=t=o(d),l(t,s,r,c)}var u=e,m=u.children;h.default.unstable_renderSubtreeIntoContainer(this,p.Children.only(m),t)}function c(e){var t=this,n=this.node;n&&setTimeout(function(){h.default.unmountComponentAtNode(n),s(n),t.node=void 0,(0,_.default)(e)&&e()},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeFromSelector=a,t.prepareNode=l,t.openPortal=r,t.destroyPortal=c;var d=n(196),u=i(d),p=n(2),m=n(197),h=i(m),f=n(125),_=i(f)},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,n){e.exports=t},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,n;return n=t=function(t){function n(){var e,t,i,o;(0,a.default)(this,n);for(var s=arguments.length,l=Array(s),r=0;r<s;r++)l[r]=arguments[r];return t=i=(0,d.default)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),i.onKeyUp=function(e){27===e.keyCode&&i.props.onClose()},o=t,(0,d.default)(i,o)}return(0,p.default)(n,t),(0,r.default)(n,[{key:"on",value:function(){document.body.addEventListener("keyup",this.onKeyUp,!0)}},{key:"off",value:function(){document.body.removeEventListener("keyup",this.onKeyUp,!0)}},{key:"componentDidMount",value:function(){this.props.visible&&this.on()}},{key:"componentWillUnmount",value:function(){this.props.visible&&this.off()}},{key:"componentWillReceiveProps",value:function(e){e.visible!==this.props.visible&&(e.visible?this.on():this.off())}},{key:"render",value:function(){var t=(0,v.default)(this.props,["onClose"]);return h.default.createElement(e,t)}}]),n}(m.PureComponent||m.Component),t.propTypes={visible:_.default.bool.isRequired,onClose:_.default.func.isRequired},n}Object.defineProperty(t,"__esModule",{value:!0});var s=n(43),a=i(s),l=n(44),r=i(l),c=n(48),d=i(c),u=n(84),p=i(u);t.default=o;var m=n(2),h=i(m),f=n(95),_=i(f),g=n(199),v=i(g)},function(e,t,n){var i=n(200),o=n(201),s=n(233),a=n(234),l=n(207),r=n(247),c=n(249),d=n(218),u=c(function(e,t){var n={};if(null==e)return n;var c=!1;t=i(t,function(t){return t=a(t,e),c||(c=t.length>1),t}),l(e,d(e),n),c&&(n=o(n,7,r));for(var u=t.length;u--;)s(n,t[u]);return n});e.exports=u},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function i(e,t,n,z,E,M){var N,D=t&x,F=t&j,q=t&S;if(n&&(N=E?n(e,z,E,M):n(e)),void 0!==N)return N;if(!y(e))return e;var A=b(e);if(A){if(N=_(e),!D)return d(e,N)}else{var R=f(e),L=R==T||R==O;if(w(e))return c(e,D);if(R==I||R==C||L&&!E){if(N=F||L?{}:v(e),!D)return F?p(e,r(N,e)):u(e,l(N,e))}else{if(!P[R])return E?e:{};N=g(e,R,i,D)}}M||(M=new o);var U=M.get(e);if(U)return U;M.set(e,N);var $=q?F?h:m:F?keysIn:k,V=A?void 0:$(e);return s(V||e,function(o,s){V&&(s=o,o=e[s]),a(N,s,i(o,t,n,s,e,M))}),N}var o=n(108),s=n(202),a=n(203),l=n(206),r=n(208),c=n(212),d=n(213),u=n(214),p=n(215),m=n(163),h=n(218),f=n(190),_=n(219),g=n(220),v=n(231),b=n(166),w=n(176),y=n(132),k=n(170),x=1,j=2,S=4,C="[object Arguments]",T="[object Function]",O="[object GeneratorFunction]",I="[object Object]",P={};P[C]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[I]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[T]=P["[object WeakMap]"]=!1,e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){function i(e,t,n){var i=e[t];l.call(e,t)&&s(i,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(204),s=n(113),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(205);e.exports=i},function(e,t,n){var i=n(123),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function i(e,t){return e&&o(t,s(t),e)}var o=n(207),s=n(170);e.exports=i},function(e,t,n){function i(e,t,n,i){var a=!n;n||(n={});for(var l=-1,r=t.length;++l<r;){var c=t[l],d=i?i(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),a?s(n,c,d):o(n,c,d)}return n}var o=n(203),s=n(204);e.exports=i},function(e,t,n){function i(e,t){return e&&o(t,s(t),e)}var o=n(207),s=n(209);e.exports=i},function(e,t,n){function i(e){return a(e)?o(e,!0):s(e)}var o=n(171),s=n(210),a=n(189);e.exports=i},function(e,t,n){function i(e){if(!o(e))return a(e);var t=s(e),n=[];for(var i in e)("constructor"!=i||!t&&r.call(e,i))&&n.push(i);return n}var o=n(132),s=n(186),a=n(211),l=Object.prototype,r=l.hasOwnProperty;e.exports=i},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){function i(e,t){if(t)return e.slice();var n=e.length,i=c?c(n):new e.constructor(n);return e.copy(i),i}var o=n(128),s="object"==typeof t&&t&&!t.nodeType&&t,a=s&&"object"==typeof e&&e&&!e.nodeType&&e,l=a&&a.exports===s,r=l?o.Buffer:void 0,c=r?r.allocUnsafe:void 0;e.exports=i}).call(t,n(177)(e))},function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function i(e,t){return o(e,s(e),t)}var o=n(207),s=n(167);e.exports=i},function(e,t,n){function i(e,t){return o(e,s(e),t)}var o=n(207),s=n(216);e.exports=i},function(e,t,n){var i=n(165),o=n(217),s=n(167),a=n(169),l=Object.getOwnPropertySymbols,r=l?function(e){for(var t=[];e;)i(t,s(e)),e=o(e);return t}:a;e.exports=r},function(e,t,n){var i=n(188),o=i(Object.getPrototypeOf,Object);e.exports=o},function(e,t,n){function i(e){return o(e,a,s)}var o=n(164),s=n(216),a=n(209);e.exports=i},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,o=i.hasOwnProperty;e.exports=n},function(e,t,n){function i(e,t,n,i){var P=e.constructor;switch(t){case b:return o(e);case u:case p:return new P(+e);case w:return s(e,i);case y:case k:case x:case j:case S:case C:case T:case O:case I:return d(e,i);case m:return a(e,i,n);case h:case g:return new P(e);case f:return l(e);case _:return r(e,i,n);case v:return c(e)}}var o=n(221),s=n(222),a=n(223),l=n(226),r=n(227),c=n(229),d=n(230),u="[object Boolean]",p="[object Date]",m="[object Map]",h="[object Number]",f="[object RegExp]",_="[object Set]",g="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",y="[object Float32Array]",k="[object Float64Array]",x="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",I="[object Uint32Array]";e.exports=i},function(e,t,n){function i(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(159);e.exports=i},function(e,t,n){function i(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(221);e.exports=i},function(e,t,n){function i(e,t,n){return s(t?n(a(e),l):a(e),o,new e.constructor)}var o=n(224),s=n(225),a=n(160),l=1;e.exports=i},function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e,t,n,i){var o=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;e.exports=n},function(e,t,n){function i(e,t,n){return s(t?n(a(e),l):a(e),o,new e.constructor)}var o=n(228),s=n(225),a=n(161),l=1;e.exports=i},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t,n){function i(e){return a?Object(a.call(e)):{}}var o=n(127),s=o?o.prototype:void 0,a=s?s.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(221);e.exports=i},function(e,t,n){function i(e){return"function"!=typeof e.constructor||a(e)?{}:o(s(e))}var o=n(232),s=n(217),a=n(186);e.exports=i},function(e,t,n){var i=n(132),o=Object.create,s=function(){function e(){}return function(t){if(!i(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=s},function(e,t,n){function i(e,t){return t=o(t,e),null==(e=a(e,t))||delete e[l(s(t))]}var o=n(234),s=n(242),a=n(243),l=n(245);e.exports=i},function(e,t,n){function i(e,t){return o(e)?e:s(e,t)?[e]:a(l(e))}var o=n(166),s=n(235),a=n(237),l=n(240);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||(l.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(166),s=n(236),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;e.exports=i},function(e,t,n){function i(e){return"symbol"==typeof e||s(e)&&o(e)==a}var o=n(126),s=n(175),a="[object Symbol]";e.exports=i},function(e,t,n){var i=n(238),o=/^\./,s=i(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,i,o){t.push(i?o.replace(/\\(\\)?/g,"$1"):n||e)}),t});e.exports=s},function(e,t,n){function i(e){var t=o(e,function(e){return n.size===s&&n.clear(),e}),n=t.cache;return t}var o=n(239),s=500;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(s);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var a=e.apply(this,i);return n.cache=s.set(o,a)||s,a};return n.cache=new(i.Cache||o),n}var o=n(137),s="Expected a function";i.Cache=o,e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(241);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e)return e;if(a(e))return s(e,i)+"";if(l(e))return d?d.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(127),s=n(200),a=n(166),l=n(236),r=1/0,c=o?o.prototype:void 0,d=c?c.toString:void 0;e.exports=i},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){function i(e,t){return t.length<2?e:o(e,s(t,0,-1))}var o=n(244),s=n(246);e.exports=i},function(e,t,n){function i(e,t){t=o(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(234),s=n(245);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(236),s=1/0;e.exports=i},function(e,t){function n(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(o);++i<o;)s[i]=e[i+t];return s}e.exports=n},function(e,t,n){function i(e){return o(e)?void 0:e}var o=n(248);e.exports=i},function(e,t,n){function i(e){if(!a(e)||o(e)!=l)return!1
;var t=s(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==p}var o=n(126),s=n(217),a=n(175),l="[object Object]",r=Function.prototype,c=Object.prototype,d=r.toString,u=c.hasOwnProperty,p=d.call(Object);e.exports=i},function(e,t,n){function i(e){return a(s(e,void 0,o),e+"")}var o=n(250),s=n(253),a=n(255);e.exports=i},function(e,t,n){function i(e){return(null==e?0:e.length)?o(e,1):[]}var o=n(251);e.exports=i},function(e,t,n){function i(e,t,n,a,l){var r=-1,c=e.length;for(n||(n=s),l||(l=[]);++r<c;){var d=e[r];t>0&&n(d)?t>1?i(d,t-1,n,a,l):o(l,d):a||(l[l.length]=d)}return l}var o=n(165),s=n(252);e.exports=i},function(e,t,n){function i(e){return a(e)||s(e)||!!(l&&e&&e[l])}var o=n(127),s=n(173),a=n(166),l=o?o.isConcatSpreadable:void 0;e.exports=i},function(e,t,n){function i(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=s(i.length-t,0),r=Array(l);++a<l;)r[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(r),o(e,this,c)}}var o=n(254),s=Math.max;e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var i=n(256),o=n(259),s=o(i);e.exports=s},function(e,t,n){var i=n(257),o=n(205),s=n(258),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:s;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=s(),l=o-(a-n);if(n=a,l>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,s=Date.now;e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,n,i=0,o=void 0;return n=t=function(t){function n(){return(0,a.default)(this,n),(0,d.default)(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return(0,p.default)(n,t),(0,r.default)(n,[{key:"restoreStyle",value:function(){if(--i<=0){(0,g.getNodeFromSelector)(this.props.selector).style.overflow=o}}},{key:"saveStyle",value:function(){if(1===++i){var e=(0,g.getNodeFromSelector)(this.props.selector),t=e.style;o=t.overflow,t.overflow="hidden"}}},{key:"componentDidMount",value:function(){this.props.visible&&this.saveStyle()}},{key:"componentWillUnmount",value:function(){this.props.visible&&this.restoreStyle()}},{key:"componentWillReceiveProps",value:function(e){this.props.visible!==e.visible&&(e.visible===!1?this.restoreStyle():this.saveStyle())}},{key:"render",value:function(){return h.default.createElement(e,this.props)}}]),n}(m.PureComponent||m.Component),t.propTypes={selector:_.default.string},t.defaultProps={selector:"body"},n}Object.defineProperty(t,"__esModule",{value:!0});var s=n(43),a=i(s),l=n(44),r=i(l),c=n(48),d=i(c),u=n(84),p=i(u);t.default=o;var m=n(2),h=i(m),f=n(95),_=i(f),g=n(195)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(197),g=n(196),v=i(g),b=n(263),w=i(b),y=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.onMaskClick=function(e){e.target===e.currentTarget&&i.props.mask&&i.props.maskClosable&&i.props.onClose(e)},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"renderHeader",value:function(){var e=this.props,t=e.prefix,n=e.title;return n?(n="number"==typeof n||"string"==typeof n?f.default.createElement("span",{className:t+"-dialog-r-title-text"},n):n,f.default.createElement("div",{className:t+"-dialog-r-header"},f.default.createElement("div",{className:t+"-dialog-r-title"},n))):null}},{key:"componentDidMount",value:function(){var e=document.activeElement,t=(0,_.findDOMNode)(this);t!==e&&t&&!t.contains(e)&&(0,w.default)(t)}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.className,i=e.prefix,o=e.closeBtn,a=e.footer,l=e.mask,r=e.style,c=e.children,d=this.renderHeader(),u=(0,v.default)(i+"-dialog-r-close",(0,s.default)({},i+"-dialog-r-has-title",!!d)),p=o&&f.default.createElement("button",{type:"button",className:u,onClick:t},"×"),m=a&&f.default.createElement("div",{className:i+"-dialog-r-footer"},a);return f.default.createElement("div",{tabIndex:-1,className:i+"-dialog-r-root"},l&&f.default.createElement("div",{className:i+"-dialog-r-backdrop"}),f.default.createElement("div",{className:i+"-dialog-r-wrap",onClick:this.onMaskClick},f.default.createElement("div",{className:i+"-dialog-r "+n,style:r},p,d,f.default.createElement("div",{className:i+"-dialog-r-body"},c),m)))}}]),t}(h.PureComponent||h.Component);t.default=y},function(e,t,n){"use strict";t.__esModule=!0;var i=n(45),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";function i(e){if(e){var t=(0,s.default)();e.focus(),window.scroll(t.x,t.y)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(264),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t){"use strict";function n(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(j[e])throw new Error("Duplicate dialog id found: "+e)}function s(e,t){j[e]=t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=j[e];if(n){delete j[e];var i=n.onClose,o=n.container,s=t.triggerOnClose;(void 0===s||s)&&i&&i(),m.default.unmountComponentAtNode(o)}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!b.default)return f.default;var t=e.onClose,n=e.ref,i=e.dialogId,l=void 0===i?(0,y.default)("__zent-dialog__"):i,r=e.parentComponent;o(l);var d=document.createElement("div"),p=function(e){a(l,{triggerOnClose:e!==!1})},h=(0,c.default)({},e,{visible:!0,onClose:p});return n&&"function"!=typeof n&&delete h.ref,(r?(0,g.default)(m.default.unstable_renderSubtreeIntoContainer,r):m.default.render)(u.default.createElement(x.default,h),d),s(l,{onClose:t,container:d}),p}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),c=i(r);t.closeDialog=a,t.default=l;var d=n(2),u=i(d),p=n(197),m=i(p),h=n(266),f=i(h),_=n(267),g=i(_),v=n(307),b=i(v),w=n(308),y=i(w),k=n(4),x=i(k),j={}},function(e,t){function n(){}e.exports=n},function(e,t,n){var i=n(268),o=n(269),s=n(299),a=n(301),l=i(function(e,t){return o(e,32,void 0,t,a(t,s(l)))});l.placeholder={},e.exports=l},function(e,t,n){function i(e,t){return a(s(e,t,o),e+"")}var o=n(258),s=n(253),a=n(255);e.exports=i},function(e,t,n){function i(e,t,n,i,k,x,j,S){var C=t&_;if(!C&&"function"!=typeof e)throw new TypeError(h);var T=i?i.length:0;if(T||(t&=~(b|w),i=k=void 0),j=void 0===j?j:y(m(j),0),S=void 0===S?S:m(S),T-=k?k.length:0,t&w){var O=i,I=k;i=k=void 0}var P=C?void 0:c(e),z=[e,t,n,i,k,O,I,x,j,S];if(P&&d(z,P),e=z[0],t=z[1],n=z[2],i=z[3],k=z[4],S=z[9]=void 0===z[9]?C?0:e.length:y(z[9]-T,0),!S&&t&(g|v)&&(t&=~(g|v)),t&&t!=f)E=t==g||t==v?a(e,t,S):t!=b&&t!=(f|b)||k.length?l.apply(void 0,z):r(e,t,n,i);else var E=s(e,t,n);return p((P?o:u)(E,z),e,t)}var o=n(270),s=n(272),a=n(274),l=n(275),r=n(302),c=n(283),d=n(303),u=n(289),p=n(290),m=n(304),h="Expected a function",f=1,_=2,g=8,v=16,b=32,w=64,y=Math.max;e.exports=i},function(e,t,n){var i=n(258),o=n(271),s=o?function(e,t){return o.set(e,t),e}:i;e.exports=s},function(e,t,n){var i=n(194),o=i&&new i;e.exports=o},function(e,t,n){function i(e,t,n){function i(){return(this&&this!==s&&this instanceof i?r:e).apply(l?n:this,arguments)}var l=t&a,r=o(e);return i}var o=n(273),s=n(128),a=1;e.exports=i},function(e,t,n){function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=o(e.prototype),i=e.apply(n,t);return s(i)?i:n}}var o=n(232),s=n(132);e.exports=i},function(e,t,n){function i(e,t,n){function i(){for(var s=arguments.length,p=Array(s),m=s,h=r(i);m--;)p[m]=arguments[m];var f=s<3&&p[0]!==h&&p[s-1]!==h?[]:c(p,h);return(s-=f.length)<n?l(e,t,a,i.placeholder,void 0,p,f,void 0,void 0,n-s):o(this&&this!==d&&this instanceof i?u:e,this,p)}var u=s(e);return i}var o=n(254),s=n(273),a=n(275),l=n(279),r=n(299),c=n(301),d=n(128);e.exports=i},function(e,t,n){function i(e,t,n,b,w,y,k,x,j,S){function C(){for(var m=arguments.length,h=Array(m),f=m;f--;)h[f]=arguments[f];if(P)var _=c(C),g=a(h,_);if(b&&(h=o(h,b,w,P)),y&&(h=s(h,y,k,P)),m-=g,P&&m<S){var v=u(h,_);return r(e,t,i,C.placeholder,n,h,v,x,j,S-m)}var M=O?n:this,N=I?M[e]:e;return m=h.length,x?h=d(h,x):z&&m>1&&h.reverse(),T&&j<m&&(h.length=j),this&&this!==p&&this instanceof C&&(N=E||l(N)),N.apply(M,h)}var T=t&g,O=t&m,I=t&h,P=t&(f|_),z=t&v,E=I?void 0:l(e);return C}var o=n(276),s=n(277),a=n(278),l=n(273),r=n(279),c=n(299),d=n(300),u=n(301),p=n(128),m=1,h=2,f=8,_=16,g=128,v=512;e.exports=i},function(e,t){function n(e,t,n,o){for(var s=-1,a=e.length,l=n.length,r=-1,c=t.length,d=i(a-l,0),u=Array(c+d),p=!o;++r<c;)u[r]=t[r];for(;++s<l;)(p||s<a)&&(u[n[s]]=e[s]);for(;d--;)u[r++]=e[s++];return u}var i=Math.max;e.exports=n},function(e,t){function n(e,t,n,o){for(var s=-1,a=e.length,l=-1,r=n.length,c=-1,d=t.length,u=i(a-r,0),p=Array(u+d),m=!o;++s<u;)p[s]=e[s];for(var h=s;++c<d;)p[h+c]=t[c];for(;++l<r;)(m||s<a)&&(p[h+n[l]]=e[s++]);return p}var i=Math.max;e.exports=n},function(e,t){function n(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}e.exports=n},function(e,t,n){function i(e,t,n,i,m,h,f,_,g,v){var b=t&d,w=b?f:void 0,y=b?void 0:f,k=b?h:void 0,x=b?void 0:h;t|=b?u:p,(t&=~(b?p:u))&c||(t&=~(l|r));var j=[e,t,m,k,w,x,y,_,g,v],S=n.apply(void 0,j);return o(e)&&s(S,j),S.placeholder=i,a(S,e,t)}var o=n(280),s=n(289),a=n(290),l=1,r=2,c=4,d=8,u=32,p=64;e.exports=i},function(e,t,n){function i(e){var t=a(e),n=l[t];if("function"!=typeof n||!(t in o.prototype))return!1;if(e===n)return!0;var i=s(n);return!!i&&e===i[0]}var o=n(281),s=n(283),a=n(284),l=n(286);e.exports=i},function(e,t,n){function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var o=n(232),s=n(282),a=4294967295;i.prototype=o(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t){function n(){}e.exports=n},function(e,t,n){var i=n(271),o=n(266),s=i?function(e){return i.get(e)}:o;e.exports=s},function(e,t,n){function i(e){for(var t=e.name+"",n=o[t],i=a.call(o,t)?n.length:0;i--;){var s=n[i],l=s.func;if(null==l||l==e)return s.name}return t}var o=n(285),s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t){var n={};e.exports=n},function(e,t,n){function i(e){if(r(e)&&!l(e)&&!(e instanceof o)){if(e instanceof s)return e;if(u.call(e,"__wrapped__"))return c(e)}return new s(e)}var o=n(281),s=n(287),a=n(282),l=n(166),r=n(175),c=n(288),d=Object.prototype,u=d.hasOwnProperty;i.prototype=a.prototype,i.prototype.constructor=i,e.exports=i},function(e,t,n){function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var o=n(232),s=n(282);i.prototype=o(s.prototype),i.prototype.constructor=i,e.exports=i},function(e,t,n){function i(e){if(e instanceof o)return e.clone();var t=new s(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var o=n(281),s=n(287),a=n(213);e.exports=i},function(e,t,n){var i=n(270),o=n(259),s=o(i);e.exports=s},function(e,t,n){function i(e,t,n){var i=t+"";return a(e,s(i,l(o(i),n)))}var o=n(291),s=n(292),a=n(255),l=n(293);e.exports=i},function(e,t){function n(e){var t=e.match(i);return t?t[1].split(o):[]}var i=/\{\n\/\* \[wrapped with (.+)\] \*/,o=/,? & /;e.exports=n},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(i,"{\n/* [wrapped with "+t+"] */\n")}var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function i(e,t){return o(a,function(n){var i="_."+n[0];t&n[1]&&!s(e,i)&&e.push(i)}),e.sort()}var o=n(202),s=n(294),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=i},function(e,t,n){function i(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=n(295);e.exports=i},function(e,t,n){function i(e,t,n){return t===t?a(e,t,n):o(e,s,n)}var o=n(296),s=n(297),a=n(298);e.exports=i},function(e,t){function n(e,t,n,i){for(var o=e.length,s=n+(i?1:-1);i?s--:++s<o;)if(t(e[s],s,e))return s;return-1}e.exports=n},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t){function n(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}e.exports=n},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){function i(e,t){for(var n=e.length,i=a(t.length,n),l=o(e);i--;){var r=t[i];e[i]=s(r,n)?l[r]:void 0}return e}var o=n(213),s=n(179),a=Math.min;e.exports=i},function(e,t){function n(e,t){for(var n=-1,o=e.length,s=0,a=[];++n<o;){var l=e[n];l!==t&&l!==i||(e[n]=i,a[s++]=n)}return a}var i="__lodash_placeholder__";e.exports=n},function(e,t,n){function i(e,t,n,i){function r(){for(var t=-1,s=arguments.length,l=-1,u=i.length,p=Array(u+s),m=this&&this!==a&&this instanceof r?d:e;++l<u;)p[l]=i[l];for(;s--;)p[l++]=arguments[++t];return o(m,c?n:this,p)}var c=t&l,d=s(e);return r}var o=n(254),s=n(273),a=n(128),l=1;e.exports=i},function(e,t,n){function i(e,t){var n=e[1],i=t[1],f=n|i,_=f<(r|c|p),g=i==p&&n==u||i==p&&n==m&&e[7].length<=t[8]||i==(p|m)&&t[7].length<=t[8]&&n==u;if(!_&&!g)return e;i&r&&(e[2]=t[2],f|=n&r?0:d);var v=t[3];if(v){var b=e[3];e[3]=b?o(b,v,t[4]):v,e[4]=b?a(e[3],l):t[4]}return v=t[5],v&&(b=e[5],e[5]=b?s(b,v,t[6]):v,e[6]=b?a(e[5],l):t[6]),v=t[7],v&&(e[7]=v),i&p&&(e[8]=null==e[8]?t[8]:h(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}var o=n(276),s=n(277),a=n(301),l="__lodash_placeholder__",r=1,c=2,d=4,u=8,p=128,m=256,h=Math.min;e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(305);e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if((e=o(e))===s||e===-s){return(e<0?-1:1)*a}return e===e?e:0}var o=n(306),s=1/0,a=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=c.test(e);return n||d.test(e)?u(e.slice(2),n?2:8):r.test(e)?a:+e}var o=n(132),s=n(236),a=NaN,l=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt;e.exports=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window)},function(e,t,n){function i(e){var t=++s;return o(e)+t}var o=n(240),s=0;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(2),d=i(c),u=n(95),p=i(u),m=n(310),h=i(m),f=n(321),_=i(f),g=n(322),v=i(g),b=n(323),w=i(b),y=n(618),k=i(y),x=n(544),j=h.default.TabPanel,S=function(e){function t(){var e,n,i,a;o(this,t);for(var l=arguments.length,r=Array(l),c=0;c<l;c++)r[c]=arguments[c];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={activeId:"1",categoryList:[]},i.fetchCategoryList=function(){(0,x.commonAjax)(i.props.categoryListUrl).then(function(e){i.setState({categoryList:e.list})})},i.onTabChange=function(e){i.setState({activeId:e})},a=n,s(i,a)}return a(t,e),r(t,[{key:"componentDidMount",value:function(){this.fetchCategoryList()}},{key:"render",value:function(){var e=this.props,t=e.materials,n=e.value,i=this.state,o=i.activeId,s=i.categoryList,a=n&&n.video_id,r=(0,v.default)({"rc-video-upload__tabs":!0,"rc-video-upload__tabs--onlyone":a||!t}),c=[];t&&!a&&c.push(d.default.createElement(j,{tab:"我的视频",id:"1",key:"video_upload_1"},d.default.createElement(k.default,l({},this.props,{categoryList:s,onTabChange:this.onTabChange}))));var u=t?"本地上传":"上传视频";return c.push(d.default.createElement(j,{tab:a?"编辑视频信息":u,id:t&&!a?"2":"1",key:"video_upload_2"},d.default.createElement(w.default,l({},this.props,{categoryList:s,isEdit:a})))),d.default.createElement(h.default,{type:"slider",activeId:o,className:r,onTabChange:this.onTabChange},c)}}]),t}(c.Component);S.propTypes={value:p.default.object,accept:p.default.string,materials:p.default.bool,silent:p.default.bool,maxSize:p.default.number,sliceSize:p.default.number,categoryListUrl:p.default.string,materialsListUrl:p.default.string,tokenUrl:p.default.string,confirmUrl:p.default.string,publishUrl:p.default.string,updateUrl:p.default.string,imageTokenUrl:p.default.string,protocolUrl:p.default.string,videoHelpDesc:p.default.string,onSuccess:p.default.func},S.defaultProps={value:{},accept:".mp4, .mov, .m4v, .flv, .x-flv, .mkv, .wmv, .avi, .rmvb, .3gp, video/*",materials:!1,silent:!1,maxSize:31457280,sliceSize:10485760,categoryListUrl:"//materials.youzan.com/video/getCategoryList.json",materialsListUrl:"//materials.youzan.com/video/videoList.json",tokenUrl:"//materials.youzan.com/video/videoUploadToken.json",confirmUrl:"//materials.youzan.com/video/confirmUpload.json",publishUrl:"//materials.youzan.com/video/publishVideo.json",updateUrl:"//materials.youzan.com/video/updateVideo.json",imageTokenUrl:"//materials.youzan.com/shop/pubImgUploadToken.json",protocolUrl:"https://bbs.youzan.com/thread-665143-1-1.html",videoHelpDesc:"",onSuccess:_.default},t.default=S,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(311),f=i(h),_=n(95),g=i(_),v=n(266),b=i(v),w=n(314),y=i(w),k=n(315),x=i(k),j=n(316),S=i(j),C=n(319),T=i(C),O=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return t.uniqueId++,n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"onTabChange",value:function e(t){var e=this.props.onTabChange;e&&e(t)}},{key:"onTabDel",value:function e(t){var e=this.props.onTabDel;e&&e(t)}},{key:"onTabAdd",value:function e(){var e=this.props.onTabAdd;e&&e()}},{key:"renderNav",value:function(e){var n=this.props,i=n.type,o=n.align,s=n.canadd,a=n.candel,l=n.prefix,r=n.size;if(e&&e.length)return m.default.createElement(S.default,{onChange:this.onTabChange.bind(this),tabListData:e,type:i,align:o,size:r,onDelete:this.onTabDel.bind(this),onTabAdd:this.onTabAdd.bind(this),canadd:s,candel:a,prefix:l,uniqueId:t.uniqueId})}},{key:"renderTabPanel",value:function(e){var n=this.props.prefix,i=[];return e&&e.length?(e.forEach(function(e){i.push(m.default.createElement(x.default,{mountTrigger:e.actived,key:e.key},m.default.createElement(y.default,{tab:e.title,actived:e.actived,onTabReady:e.onTabReady,prefix:n,className:e.panelClassName,id:e.key,uniqueId:t.uniqueId},e.content)))}),i):null}},{key:"renderWithPanel",value:function(){var e=this.props,t=e.prefix,n=e.className,i=e.children,o=e.activeKey,s=e.activeId;s=s||o;var a=T.default.getTabListData(i,s);return m.default.createElement("div",{className:t+"-tabs "+n},this.renderNav(a),m.default.createElement("div",{className:t+"-tabs-panewrap"},this.renderTabPanel(a)))}},{key:"renderWithoutPanel",value:function(){var e=this.props,t=e.tabs,n=e.prefix,i=e.className,o=e.activeId;return m.default.createElement("div",{className:n+"-tabs "+i},this.renderNav(t.map(function(e){return(0,f.default)({},e,{actived:e.key===o})})))}},{key:"render",value:function(){return this.props.tabs?this.renderWithoutPanel():this.renderWithPanel()}}]),t}(p.PureComponent||p.Component);O.propTypes={className:g.default.string,prefix:g.default.string,type:g.default.oneOf(["normal","card","slider"]),activeKey:g.default.oneOfType([g.default.string,g.default.number]),activeId:g.default.oneOfType([g.default.string,g.default.number]),size:g.default.oneOf(["huge","normal"]),align:g.default.oneOf(["left","right","center"]),onTabChange:g.default.func,onTabDel:g.default.func,onTabAdd:g.default.func,candel:g.default.bool,canadd:g.default.bool,tabs:g.default.arrayOf(g.default.shape({key:g.default.oneOfType([g.default.string,g.default.number]).isRequired,title:g.default.node.isRequired,disabled:g.default.bool}))},O.defaultProps={prefix:"zent",className:"",type:"normal",activeKey:"",activeId:"",size:"normal",align:"left",onTabChange:b.default,onTabDel:b.default,onTabAdd:b.default,candel:!1,canadd:!1},O.uniqueId=0,O.TabPanel=y.default,t.default=O},function(e,t,n){var i=n(203),o=n(207),s=n(312),a=n(189),l=n(186),r=n(170),c=Object.prototype,d=c.hasOwnProperty,u=s(function(e,t){if(l(t)||a(t))return void o(t,r(t),e);for(var n in t)d.call(t,n)&&i(e,n,t[n])});e.exports=u},function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&s(n[0],n[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++i<o;){var r=n[i];r&&e(t,r,i,a)}return t})}var o=n(268),s=n(313);e.exports=i},function(e,t,n){function i(e,t,n){if(!l(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&a(t,n.length):"string"==i&&t in n)&&o(n[t],e)}var o=n(113),s=n(189),a=n(179),l=n(132);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=n(266),g=i(_),v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=this.props;(0,e.onPanelReady)(e.id)}},{key:"render",value:function(){var e=this.props,t=e.actived,n={};return t||(n.display="none"),f.default.createElement("div",{style:n,role:"tabpanel",id:e.prefix+"-tabpanel-"+e.uniqueId+"-"+e.id,className:e.prefix+"-tab-tabpanel "+e.className},e.children)}}]),t}(h.PureComponent||h.Component);v.propTypes={className:m.default.string,prefix:m.default.string,actived:m.default.bool,tab:m.default.any.isRequired,id:m.default.oneOfType([m.default.string,m.default.number]),onPanelReady:m.default.func,uniqueId:m.default.number},v.defaultProps={prefix:"zent",className:"",actived:!1,onPanelReady:g.default,uniqueId:0},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mounted:e.mountTrigger},n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.mountTrigger,n=this.state.mounted;t&&!n&&this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props.children;return this.state.mounted?e:null}}]),t}(h.PureComponent||h.Component);f.propTypes={mountTrigger:m.default.bool},f.defaultProps={mountTrigger:!1},t.default=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(197),g=i(_),v=n(95),b=i(v),w=n(266),y=i(w),k=n(317),x=i(k),j=n(318),S=i(j),C=f.default.createElement("span",null,"+"),T=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){this.positionInkBar()}},{key:"positionInkBar",value:function(){if("slider"===this.props.type){var e=g.default.findDOMNode(this.activeTab);if(e){var t=e.children[0],n=t.children[0],i=n||t,o=S.default.getOffsetWH(i),s=S.default.getOffsetLT(i),a=S.default.getOffsetLT(this.tabwrapDom);if(!n){var l=window.getComputedStyle(t),r=window.parseInt(l.paddingLeft);o=o-r-window.parseInt(l.paddingRight),a-=r}this.inkBarDom.style.width=o+"px",this.inkBarDom.style.left=s-a+"px"}}}},{key:"renderTabs",value:function(){var e=this,t=S.default.modifyTabListData(this.props),n=[];return t.forEach(function(t){var i={};t.actived&&(i.ref=function(t){e.activeTab=t}),n.push(f.default.createElement(x.default,(0,s.default)({prefix:e.props.prefix,onSelected:e.onTabSelected.bind(e),onDelete:e.onTabDel.bind(e),uniqueId:e.props.uniqueId},t,{id:t.key},i),t.title))}),n}},{key:"onTabSelected",value:function(e){(0,this.props.onChange)(e)}},{key:"onTabDel",value:function(e){(0,this.props.onDelete)(e)}},{key:"onTabAdd",value:function(){(0,this.props.onTabAdd)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefix,i=t.align,o=t.canadd,s=t.size,a=t.type,l=n+"-tabs-size-"+s+" "+n+"-tabs-type-"+a+" "+n+"-tabs-align-"+i;"slider"===a&&"normal"===s&&(l+=" "+n+"-tabs-third-level");var r="";return o&&"center"!==i&&(r=f.default.createElement("div",{className:n+"-tabs-nav-add",onClick:this.onTabAdd.bind(this)},C)),f.default.createElement("div",{className:n+"-tabs-nav "+l},f.default.createElement("div",{className:n+"-tabs-nav-content",ref:function(t){e.navContentDom=g.default.findDOMNode(t)}},r,f.default.createElement("div",{className:n+"-tabs-scroll"},f.default.createElement("div",{className:n+"-tabs-tabwrap",role:"tablist",ref:function(t){e.tabwrapDom=t}},f.default.createElement("span",{className:n+"-tabs-nav-ink-bar",ref:function(t){e.inkBarDom=t}}),f.default.createElement("div",null,this.renderTabs())))))}}]),t}(h.PureComponent||h.Component);T.propTypes={prefix:b.default.string,tabListData:b.default.array,onChange:b.default.func,type:b.default.string,align:b.default.string,size:b.default.string,onDelete:b.default.func,onTabAdd:b.default.func,candel:b.default.bool,canadd:b.default.bool,uniqueId:b.default.number},T.defaultProps={prefix:"zent",onChange:y.default,tabListData:[],type:"normal",align:"left",size:"normal",onDelete:y.default,candel:!1,canadd:!1,onTabAdd:y.default,uniqueId:0},t.default=T},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=n(266),g=i(_),v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"onDel",value:function(e){e.stopPropagation();var t=this.props;(0,t.onDelete)(t.id)}},{key:"onClick",value:function(){var e=this.props,t=e.onSelected,n=e.id,i=e.actived,o=e.disabled;i||o||t(n)}},{key:"renderDelOperater",value:function(){var e=this.props,t=e.candel,n=e.prefix;return t?f.default.createElement("span",{className:n+"-tabs-tab-inner-del",onClick:this.onDel.bind(this)},"✕"):""}},{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.minWidth,i=t+"-tabs-tab";e.actived&&(i+=" "+t+"-tabs-actived"),e.disabled&&(i+=" "+t+"-tabs-disabled");var o={};return n&&(o.minWidth=n),f.default.createElement("div",{role:"tab","aria-labelledby":e.prefix+"-tabpanel-"+e.uniqueId+"-"+e.id,className:i,"aria-disabled":e.disabled,"aria-selected":e.actived,onClick:this.onClick.bind(this),style:o},f.default.createElement("div",{className:t+"-tabs-tab-inner"},this.renderDelOperater(),e.children))}}]),t}(h.PureComponent||h.Component);v.propTypes={prefix:m.default.string,actived:m.default.bool,disabled:m.default.bool,id:m.default.oneOfType([m.default.string,m.default.number]),minWidth:m.default.string,onSelected:m.default.func,onDelete:m.default.func,candel:m.default.bool,uniqueId:m.default.number},v.defaultProps={prefix:"zent",actived:!1,disabled:!1,id:"",minWidth:"",onSelected:g.default,onDelete:g.default,candel:!1},t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={getOffsetWH:function(e){return e.offsetWidth},getOffsetLT:function(e){return e.getBoundingClientRect().left},modifyTabListData:function(e){var t=this.getWidth(e)||{},n=e.tabListData,i=e.candel,o=[],s=void 0;return n.forEach(function(e,a){s={key:e.key,actived:e.actived,disabled:e.disabled,title:e.title,prefix:e.prefix,className:e.tabClassName,minWidth:a===n.length-1?t.lastWidth||"":t.width||"",candel:i&&!e.disabled},o.push(s)}),o},getWidth:function(e){var t=e.align,n=e.tabListData;if("center"===t){var i="",o="",s=n.length;return i=1/s*100+"%",o=100*(1-1/s*(s-1))+"%",{width:i,lastWidth:o}}}};t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=i(o),a=n(320),l=i(a),r=n(314),c=i(r),d={getTabListData:function(e,t){var n=this,i=s.default.Children.toArray(e),o=[];return s.default.Children.forEach(i,function(e){if(n.checkIfTabPanel(e)){var i=e.props,s=i.id,a=i.disabled,l=i.tab,r=i.children,c=i.onTabReady,d=i.panelClassName,u=i.tabClassName;o.push({title:l||"",disabled:!!a,key:s,actived:t===s,content:r,panelClassName:d,tabClassName:u,onTabReady:c})}}),this.listData=o,o},checkIfTabPanel:function(e){var t=e&&e.type;return(0,l.default)(t,c.default)}};t.default=d},function(e,t){"use strict";function n(e,t){return e===t||e&&e.prototype instanceof t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){function n(){}e.exports=n},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,t,n){"use strict";function i(e){
return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,r,c,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),p=i(u),m=n(324),h=i(m),f=n(441),_=i(f),g=n(365),v=i(g),b=n(443),w=i(b),y=n(3),k=i(y),x=n(446),j=i(x),S=n(496),C=i(S),T=n(545),O=i(T),I=n(544),P=h.default.Field,z=h.default.InputField,E=h.default.SelectField,M=h.default.createForm,N=k.default.closeDialog,D=(r=l=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.call(n);var i=e.value,a=e.isEdit,l={video:i,name:a?i.video_name:"",categoryId:a?i.category_id:"",isAgree:!0};return a&&(l.cover={cover_url:i.cover_url,cover_width:i.cover_width,cover_height:i.cover_height}),n.state=l,n}return a(t,e),d(t,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.isAgree,i=e.categoryId,o=e.video,s=e.cover,a=this.props,l=a.handleSubmit,r=a.zentForm,c=a.categoryList,d=a.dialogId,u=a.protocolUrl,m=a.videoHelpDesc,f=a.maxSize,g=a.isEdit,b=r.isSubmitting(),w=r.isValid(),y=p.default.createElement("span",null,"点击“+”选择视频，视频大小不超过 ",(0,I.formatFileSize)(f,0),"，建议时长9-30秒，建议宽高比16:9",p.default.createElement("br",null),"支持的视频文件类型包括：mp4,mov,m4v,flv,x-flv,mkv,wmv,avi,rmvb,3gp");return p.default.createElement(h.default,{horizontal:!0,className:"rc-video-upload__form",onSubmit:l(this.onSave)},g?null:p.default.createElement(P,{name:"video",value:o,label:"本地视频：",component:C.default,helpDesc:m?p.default.createElement("span",null,m):y,onChange:this.onVideoChange,options:this.props,validations:{validVideo:function(e,t){if(t&&t.video_path)return!0}},validationErrors:{validVideo:"视频不能为空"}}),p.default.createElement(P,{name:"video_name",value:t,type:"text",className:"rc-video-upload__form-input",label:"名称：",placeholder:"最长不超过20个字",component:z,required:!0,validations:{required:!0,maxLength:20},validationErrors:{required:"请输入不超过20个字的视频名称",maxLength:"请输入不超过20个字的视频名称"}}),p.default.createElement(P,{name:"category_id",value:i,data:c,className:"rc-video-upload__form-input",label:"分组：",placeholder:"选择视频分组",component:E,optionText:"category_name",optionValue:"category_id"}),g?p.default.createElement(P,{name:"cover",value:s,label:"封面：",helpDesc:"建议尺寸：640 x 640 像素，支持jpg、gif、png三种格式，大小不超过1 MB",component:O.default,options:this.props,validations:{validData:function(e,t){if(t&&t.cover_url)return!0}},validationErrors:{validData:"封面图片不能为空"}}):null,p.default.createElement("div",{className:"rc-video-upload__publish"},g?p.default.createElement("div",null,p.default.createElement(_.default,{type:"primary",htmlType:"submit",loading:b},"确定"),p.default.createElement(_.default,{type:"primary",onClick:function(){return N(d)},outline:!0},"取消")):p.default.createElement("div",null,p.default.createElement(v.default,{checked:n,onChange:this.handleChange},"同意《",p.default.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},"视频上传服务协议"),"》"),p.default.createElement(_.default,{type:"primary",htmlType:"submit",disabled:!n||!w,loading:b},"确定"))))}}]),t}(u.Component),c=function(){var e=this;this.onVideoChange=function(t){e.setState(t)},this.handleChange=function(t){e.setState({isAgree:t.target.checked})},this.onSave=function(t){var n=e.props,i=n.publishUrl,o=n.updateUrl,s=n.dialogId,a=n.onSuccess,l=n.isEdit,r=e.state.video,c=i,d={},u=t.video;return l?(c=o,d=(0,j.default)({video_id:r.video_id},t,t.cover),delete d.cover):(d=(0,j.default)({},t,{video_path:u.video_path}),delete d.video),(0,I.commonAjax)(c,d).then(function(e){w.default.success(l?"更新成功":"上传成功"),N(s),a(l?(0,j.default)({},r,d):(0,j.default)(u,d,{status:1,video_id:e.video_id,cover_url:"",cover_width:"",cover_height:""}))}).catch(function(e){w.default.error(e||"网络错误")})}},r);t.default=M()(D),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(311),s=i(o),a=n(325),l=i(a),r=n(326),c=i(r),d=n(357),u=i(d),p=n(359),m=i(p),h=n(360),f=i(h),_=n(358),g=i(_),v=n(355),b=i(v),w=n(361),y=i(w),k=n(364),x=i(k),j=n(368),S=i(j),C=n(369),T=i(C),O=n(373),I=i(O);t.default=(0,s.default)(l.default,{Form:l.default,createForm:c.default,Field:u.default,Fieldset:m.default,getControlGroup:f.default,unknownProps:g.default,InputField:y.default,CheckboxField:x.default,CheckboxGroupField:S.default,RadioGroupField:T.default,SelectField:I.default,SubmissionError:b.default})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(196),g=i(_),v=n(95),b=i(v),w=n(266),y=i(w),k=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.prefix,i=t.className,o=t.style,a=t.horizontal,l=t.inline,r=t.onSubmit,c=(0,g.default)((e={},(0,s.default)(e,n+"-form",!0),(0,s.default)(e,n+"-form--horizontal",a),(0,s.default)(e,n+"-form--inline",l),(0,s.default)(e,n+"-form--vertical",!a&&!l),(0,s.default)(e,i,!!i),e));return f.default.createElement("form",{className:c,style:o,onSubmit:r},this.props.children)}}]),t}(h.PureComponent||h.Component);k.propTypes={prefix:b.default.string,className:b.default.string,horizontal:b.default.bool,inline:b.default.bool,vertical:b.default.bool,onSubmit:b.default.func,children:b.default.any,style:b.default.object},k.defaultProps={prefix:"zent",onSubmit:y.default},t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(49),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=n(199),v=i(g),b=n(327),w=i(b),y=n(266),k=i(y),x=n(311),j=i(x),S=n(105),C=i(S),T=n(344),O=i(T),I=n(351),P=i(I),z=n(95),E=i(z),M=n(352),N=n(353),D=i(N),F=n(354),q=i(F),A=[],R=function(e){if(!e||"function"!=typeof e)throw new Error("You must either pass handleSubmit() an onSubmit function or pass onSubmit as a prop");return e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formValidations,n=(0,j.default)({},D.default,t);return function(e){var t,i;return i=t=function(t){function i(e){(0,c.default)(this,i);var t=(0,m.default)(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.submitCompleted=function(e){return delete t.submitPromise,e},t.submitFailed=function(e){throw delete t.submitPromise,e},t.listenToSubmit=function(e){return(0,P.default)(e)?(t.submitPromise=e,e.then(t.submitCompleted,t.submitFailed)):e},t.submit=function(e){var n=t.props.onSubmit;return e&&!(0,M.silenceEvent)(e)?(0,M.silenceEvents)(function(){return!t.submitPromise&&t.listenToSubmit((0,q.default)(R(e),t))}):t.submitPromise?void 0:t.listenToSubmit((0,q.default)(R(n),t))},t.isSubmitting=function(){return t.state.isSubmitting},t.isValid=function(){return t.state.isFormValid},t.setFieldValidationErrors=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.fields.forEach(function(t){var i=t.props.name,o={_isValid:!(i in e),_validationError:"string"==typeof e[i]?[e[i]]:e[i]};n&&(o._isPristine=!1),t.setState(o)})},t.setFieldExternalErrors=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object.keys(e).forEach(function(i){var o=(0,w.default)(t.fields,function(e){return e.props.name===i});if(!o)throw new Error("field "+i+" does not exits");var s={_isValid:!1,_externalError:"string"==typeof e[i]?[e[i]]:e[i]};n&&(s._isPristine=!1),o.setState(s)})},t.setFormPristine=function(e){t.fields.forEach(function(t){t.setState({_isPristine:e})})},t.resetFieldsValue=function(e){t.fields.forEach(function(t){var n=t.props.name;e&&e.hasOwnProperty(n)?t.setValue(e[n]):t.resetValue()})},t.reset=function(e){t.setFormPristine(!0),t.resetFieldsValue(e)},t.isFieldTouched=function(e){var n=(0,w.default)(t.fields,function(t){return t.props.name===e});return!!n&&!n.isPristine()},t.isFieldValidating=function(e){var n=(0,w.default)(t.fields,function(t){return t.props.name===e});return!!n&&n.isValidating()},t.getFieldError=function(e){var n=(0,w.default)(t.fields,function(t){return t.props.name===e});return n?n.getErrorMessage():""},t.getFormValues=function(){return t.fields.reduce(function(e,t){return e[t.props.name]=t.getValue(),e},{})},t.getValidationErrors=function(){return t.fields.reduce(function(e,t){return e[t.props.name]=t.getErrorMessage(),e},{})},t.getPristineValues=function(){return t.fields.reduce(function(e,t){return e[t.props.name]=t.getPristineValue(),e},{})},t.isChanged=function(){return!(0,C.default)(t.getPristineValues(),t.getFormValues())},t.isValidating=function(){return(0,O.default)(t.fields,function(e){return e.isValidating()})},t.isValidValue=function(e,n){return t.runValidation(e,n).isValid},t.runValidation=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getValue(),i=t.props.validationErrors,o=e.props,s=o.name,a=o.validationError,l=o.validationErrors,r=t.getFormValues(),c=t.runRules(n,r,e._validations),d=!(c.failed.length||i&&i[e.props.name]);return{isValid:d,error:function(){return d?A:c.errors.length?c.errors:i&&i[s]?"string"==typeof i[s]?[i[s]]:i[s]:c.failed.length?c.failed.map(function(e){return l[e]?l[e]:a}).filter(function(e,t,n){return n.indexOf(e)===t}):void 0}()}},t.runRules=function(e,t){function i(e,t){"string"==typeof e?(s.errors.push(e),s.failed.push(t)):e||s.failed.push(t)}var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={errors:[],failed:[]};return Object.keys(o).forEach(function(s){if(!n[s]&&"function"!=typeof o[s])throw new Error("does not have the validation rule: "+s);if("function"==typeof o[s]){i(o[s](t,e),s)}else{i(n[s](t,e,o[s]),s)}}),s},t.validate=function(e){t._isMounted&&t.props.onChange(t.getFormValues(),t.isChanged());var n=t.runValidation(e);e.setState({_isValid:n.isValid,_validationError:n.error,_externalError:null},t.validateForm)},t.asyncValidate=function(e,n){var i=e.props.asyncValidation,o=t.getFormValues();if(!e.state._validationError.length){e.setState({_isValidating:!0});var s=i(o,n);if(!(0,P.default)(s))throw new Error("asyncValidation function must return a promise");var a=function(n){return function(i){e.setState({_isValidating:!1,_isValid:!n,_externalError:i?[i]:null}),n&&t.setState({isFormValid:!1})}};return s.then(a(!1),a(!0))}},t.validateForm=function(){var e=function(){var e=t.fields.every(function(e){return e.isValid()});t.setState({isFormValid:e}),e?t.props.onValid():t.props.onInvalid()};t.fields.forEach(function(n,i){var o=n.state._externalError,s=t.runValidation(n);s.isValid&&o&&(s.isValid=!1),n.setState({_isValid:s.isValid,_validationError:s.error,_externalError:!s.isValid&&o?o:null},i===t.fields.length-1?e:null)})},t.attachToForm=function(e){t.fields.indexOf(e)<0&&t.fields.push(e),t._isMounted&&t.validate(e)},t.detachFromForm=function(e){var n=t.fields.indexOf(e);n>=0&&t.fields.splice(n,1),t.validateForm()},t.getWrappedForm=function(){return t.wrappedForm},t.state={isFormValid:!0,isSubmitting:!1},t.fields=[],t._isMounted=!1,t}return(0,f.default)(i,t),(0,u.default)(i,[{key:"getChildContext",value:function(){return{zentForm:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,asyncValidate:this.asyncValidate,getFormValues:this.getFormValues,getFieldError:this.getFieldError,isValidValue:this.isValidValue,setFieldExternalErrors:this.setFieldExternalErrors,resetFieldsValue:this.resetFieldsValue,setFormPristine:this.setFormPristine,isValid:this.isValid,isSubmitting:this.isSubmitting}}}},{key:"componentDidMount",value:function(){this.validateForm(),this._isMounted=!0}},{key:"componentWillUpdate",value:function(){this.prevFieldNames=this.fields.map(function(e){return e.props.name})}},{key:"componentDidUpdate",value:function(){var e=this.props.validationErrors;e&&"object"===(void 0===e?"undefined":(0,l.default)(e))&&Object.keys(e).length>0&&this.setFieldValidationErrors(e);var t=this.fields.map(function(e){return e.props.name});(0,C.default)(this.prevFieldNames,t)||this.validateForm()}},{key:"render",value:function(){var t=this,n=(0,v.default)(this.props,["validationErrors","handleSubmit","onChange"]);return(0,_.createElement)(e,(0,s.default)({},n,{ref:function(e){t.wrappedForm=e},handleSubmit:this.submit,zentForm:{getFormValues:this.getFormValues,getFieldError:this.getFieldError,setFieldExternalErrors:this.setFieldExternalErrors,resetFieldsValue:this.resetFieldsValue,setFormPristine:this.setFormPristine,isFieldTouched:this.isFieldTouched,isFieldValidating:this.isFieldValidating,isValid:this.isValid,isValidating:this.isValidating,isSubmitting:this.isSubmitting}}))}}]),i}(_.PureComponent||_.Component),t.displayName="Form("+(0,M.getDisplayName)(e)+")",t.WrappedForm=e,t.propTypes={onSubmit:E.default.func,onSubmitSuccess:E.default.func,onSubmitFail:E.default.func,onValid:E.default.func,onInvalid:E.default.func,onChange:E.default.func,validationErrors:E.default.object},t.defaultProps={onSubmit:k.default,onSubmitSuccess:k.default,onSubmitFail:k.default,onValid:k.default,onInvalid:k.default,onChange:k.default,validationErrors:null},t.childContextTypes={zentForm:E.default.object},i}};t.default=L},function(e,t,n){var i=n(328),o=n(343),s=i(o);e.exports=s},function(e,t,n){function i(e){return function(t,n,i){var l=Object(t);if(!s(t)){var r=o(n,3);t=a(t),n=function(e){return r(l[e],e,l)}}var c=e(t,n,i);return c>-1?l[r?t[c]:c]:void 0}}var o=n(329),s=n(189),a=n(170);e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?l(e)?s(e[0],e[1]):o(e):r(e)}var o=n(330),s=n(335),a=n(258),l=n(166),r=n(340);e.exports=i},function(e,t,n){function i(e){var t=s(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(331),s=n(332),a=n(334);e.exports=i},function(e,t,n){function i(e,t,n,i){var r=n.length,c=r,d=!i;if(null==e)return!c;for(e=Object(e);r--;){var u=n[r];if(d&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<c;){u=n[r];var p=u[0],m=e[p],h=u[1];if(d&&u[2]){if(void 0===m&&!(p in e))return!1}else{var f=new o;if(i)var _=i(m,h,p,e,t,f);if(!(void 0===_?s(h,m,a|l,i,f):_))return!1}}return!0}var o=n(108),s=n(106),a=1,l=2;e.exports=i},function(e,t,n){function i(e){for(var t=s(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,o(a)]}return t}var o=n(333),s=n(170);e.exports=i},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(132);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function i(e,t){return l(e)&&r(t)?c(d(e),t):function(n){var i=s(n,e);return void 0===i&&i===t?a(n,e):o(t,i,u|p)}}var o=n(106),s=n(336),a=n(337),l=n(235),r=n(333),c=n(334),d=n(245),u=1,p=2;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(244);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&s(e,t,o)}var o=n(338),s=n(339);e.exports=i},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n){t=o(t,e);for(var i=-1,d=t.length,u=!1;++i<d;){var p=c(t[i]);if(!(u=null!=e&&n(e,p)))break;e=e[p]}return u||++i!=d?u:!!(d=null==e?0:e.length)&&r(d)&&l(p,d)&&(a(e)||s(e))}var o=n(234),s=n(173),a=n(166),l=n(179),r=n(182),c=n(245);e.exports=i},function(e,t,n){function i(e){return a(e)?o(l(e)):s(e)}var o=n(341),s=n(342),a=n(235),l=n(245);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(244);e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:a(n);return r<0&&(r=l(i+r,0)),o(e,s(t,3),r)}var o=n(296),s=n(329),a=n(304),l=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=l(e)?o:a;return n&&r(e,t,n)&&(t=void 0),i(e,s(t,3))}var o=n(156),s=n(329),a=n(345),l=n(166),r=n(313);e.exports=i},function(e,t,n){function i(e,t){var n;return o(e,function(e,i,o){return!(n=t(e,i,o))}),!!n}var o=n(346);e.exports=i},function(e,t,n){var i=n(347),o=n(350),s=o(i);e.exports=s},function(e,t,n){function i(e,t){return e&&o(e,t,s)}var o=n(348),s=n(170);e.exports=i},function(e,t,n){var i=n(349),o=i();e.exports=o},function(e,t){function n(e){return function(t,n,i){for(var o=-1,s=Object(t),a=i(t),l=a.length;l--;){var r=a[e?l:++o];if(n(s[r],r,s)===!1)break}return t}}e.exports=n},function(e,t,n){function i(e,t){return function(n,i){if(null==n)return n;if(!o(n))return e(n,i);for(var s=n.length,a=t?s:-1,l=Object(n);(t?a--:++a<s)&&i(l[a],a,l)!==!1;);return n}}var o=n(189);e.exports=i},function(e,t,n){"use strict";function i(e){return!!e&&("object"===(void 0===e?"undefined":(0,s.default)(e))||"function"==typeof e)&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(h(e)){var t=e.target,n=t.type,i=t.value,o=t.checked,s=t.files,a=e.dataTransfer;return"checkbox"===n?o:"file"===n?s||a&&a.files:"select-multiple"===n?m(e.target.options):""===i||"number"!==n&&"range"!==n?i:parseFloat(i)}return e&&void 0!==e.value?e.value:e}function s(e,t){return t&&(0,d.default)(t)?(0,p.default)({},t,e):e}function a(e){return e.displayName||e.name||"Component"}function l(e){var t=h(e);return t&&e.preventDefault(),t}function r(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];l(t)?e.apply(void 0,i):e.apply(void 0,[t].concat(i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=o,t.getCurrentValue=s,t.getDisplayName=a,t.silenceEvent=l,t.silenceEvents=r;var c=n(248),d=i(c),u=n(311),p=i(u),m=function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var i=e[n];i.selected&&t.push(i.value)}return t},h=function(e){return!!(e&&e.stopPropagation&&e.preventDefault)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return null!==e&&void 0!==e},i=function(e){return""===e},o={required:function(e,t){return void 0!==t&&""!==t},isExisty:function(e,t){return n(t)},matchRegex:function(e,t,o){return!n(t)||i(t)||o.test(t)},isUndefined:function(e,t){return void 0===t},isEmptyString:function(e,t){return i(t)},isEmail:function(e,t){return o.matchRegex(e,t,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return o.matchRegex(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e,t){return t===!0},isFalse:function(e,t){return t===!1},isNumeric:function(e,t){return"number"==typeof t||o.matchRegex(e,t,/^[-+]?(?:\d*[.])?\d+$/)},isInt:function(e,t){return o.matchRegex(e,t,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(e,t){return o.matchRegex(e,t,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isLength:function(e,t,o){return!n(t)||i(t)||t.length===o},equals:function(e,t,o){return!n(t)||i(t)||t==o},equalsField:function(e,t,n){return t==e[n]},maxLength:function(e,t,i){return!n(t)||t.length<=i},minLength:function(e,t,o){return!n(t)||i(t)||t.length>=o}};t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(351),s=i(o),a=n(355),l=i(a),r=function(e,t){var n=t.props,i=t.getFormValues(),o=n.onSubmitSuccess,a=n.onSubmitFail,r=void 0;if(t.setFormPristine(!1),t.isValidating())return void(a&&a(new l.default({isValidating:!0})));if(t.isValid()){var c=function(e){var t=e instanceof l.default?e.errors:void 0;return a&&a(t),t};return function(){var n=void 0;try{n=e(i,t)}catch(e){var l=c(e);if(l||a)return l;throw e}return(0,s.default)(n)?(t.setState({isSubmitting:!0}),n.then(function(e){return t.setState({isSubmitting:!1}),o&&o(e),e},function(e){t.setState({isSubmitting:!1});var n=c(e);if(n||a)return n;throw e})):(o&&o(n),n)}()}r=t.getValidationErrors(),a&&a(new l.default(r))};t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(48),l=i(a),r=n(84),c=i(r),d=n(356),u=i(d),p=function(e){function t(e){(0,s.default)(this,t);var n=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Submit Validation Failed"));return n.errors=e,n}return(0,c.default)(t,e),t}(u.default);t.default=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(o,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(o,"name",{configurable:!0,enumerable:!1,value:o.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(o,o.constructor),i(o)):(Object.defineProperty(o,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),o)}return o(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(5),l=i(a),r=n(94),c=i(r),d=n(43),u=i(d),p=n(44),m=i(p),h=n(48),f=i(h),_=n(84),g=i(_),v=n(2),b=n(105),w=i(b),y=n(199),k=i(y),x=n(311),j=i(x),S=n(95),C=i(S),T=n(352),O=n(358),I=i(O),P=function(e){function t(e,n){(0,u.default)(this,t);var i=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(z.call(i),!n.zentForm)throw new Error("Field must be in zent-form");return i.state={_value:e.value,_isValid:!0,_isPristine:!0,_isValidating:!1,_pristineValue:e.value,_validationError:[],_externalError:null},i._validations=e.validations||{},i}return(0,g.default)(t,e),(0,m.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(0,w.default)(t,this.state)||!(0,w.default)(e,this.props)}},{key:"componentWillMount",value:function(){if(!this.props.name)throw new Error("Form Field requires a name property when used");this.context.zentForm.attachToForm(this)}},{key:"componentWillReceiveProps",value:function(e){"validations"in e&&(this._validations=e.validations)}},{key:"componentDidUpdate",value:function(e){(0,w.default)(this.props.value,e.value)||this.setValue(this.props.value)}},{key:"componentWillUnmount",value:function(){this.context.zentForm.detachFromForm(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.component,i=(0,c.default)(t,["component"]),o=this.processProps((0,l.default)({},i,{ref:function(t){e.wrappedComponent=t},isTouched:!this.isPristine(),isPristine:this.isPristine(),isValid:this.isValid(),isActive:this.isActive(),value:this.format(this.getValue()),error:this.getErrorMessage(),errors:this.getErrorMessages(),onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus}));return"string"==typeof n?(0,v.createElement)(n,(0,l.default)({},(0,k.default)(o,I.default))):(0,v.createElement)(n,o)}}]),t}(v.PureComponent||v.Component);P.propTypes={name:C.default.string.isRequired,component:C.default.oneOfType([C.default.func,C.default.string]).isRequired,normalize:C.default.func,format:C.default.func,validationError:C.default.string,validationErrors:C.default.object,validateOnBlur:C.default.bool,validateOnChange:C.default.bool,clearErrorOnFocus:C.default.bool},P.defaultProps={value:"",validationError:"",validationErrors:{},validateOnBlur:!0,validateOnChange:!0,clearErrorOnFocus:!0},P.contextTypes={zentForm:C.default.object};var z=function(){var e=this;this.isPristine=function(){return e.state._isPristine},this.isValid=function(){return e.state._isValid},this.isValidating=function(){return e.state._isValidating},this.isActive=function(){return e.state._active},this.getPristineValue=function(){return e.state._pristineValue},this.getValue=function(){return e.state._value},this.setValue=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.setState({_value:t,_isPristine:!1},function(){n&&e.context.zentForm.validate(e)})},this.resetValue=function(){e.setState({_value:e.state._pristineValue,_isPristine:!0},function(){e.context.zentForm.validate(e)})},this.getWrappedComponent=function(){return e.wrappedComponent},this.getErrorMessage=function(){var t=e.getErrorMessages();return t.length?t[0]:null},this.getErrorMessages=function(){var t=e.state,n=t._externalError,i=t._validationError;return e.isValid()?[]:n||i||[]},this.normalize=function(t){var n=e.props.normalize;if(!n)return t;var i=e.context.zentForm.getFormValues();return n(t,e.getValue(),(0,l.default)({},i,(0,s.default)({},e.props.name,t)),i)},this.format=function(t){var n=e.props.format;return n?n(t):t},this.handleChange=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{merge:!1},i=e.props,o=i.onChange,s=i.validateOnChange,a=e.getValue(),l=n.merge?(0,T.getCurrentValue)((0,T.getValue)(t),a):(0,T.getValue)(t),r=e.normalize(l),c=!1;o&&o(t,r,a,function(){return c=!0}),c||e.setValue(r,s)},this.handleFocus=function(t){var n=e.props,i=n.onFocus,o=n.clearErrorOnFocus,s={_active:!0};i&&i(t),o&&(0,j.default)(s,{_isValid:!0,_validationError:[],_externalError:null}),e.setState(s)},this.handleBlur=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{merge:!1},i=e.props,o=i.onBlur,s=i.asyncValidation,a=i.validateOnBlur,l=e.getValue(),r=n.merge?(0,T.getCurrentValue)((0,T.getValue)(t),l):(0,T.getValue)(t),c=e.normalize(r),d=!1;o&&o(t,c,l,function(){return d=!0}),e.setState({_active:!1}),d||(e.setValue(c,a),s&&e.context.zentForm.asyncValidate(e,c))},this.processProps=function(e){var t=e.type,n=e.value,i=(0,c.default)(e,["type","value"]);return"checkbox"===t?(0,l.default)({},i,{checked:!!n,type:t}):"file"===t?(0,l.default)({},i,{type:t}):e}};t.default=P},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["isTouched","isPristine","isValid","isActive","error","errors","validationError","validationErrors","validations","validateOnChange","validateOnBlur","clearErrorOnFocus","asyncValidation","normalize","format"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){return o.default.createElement("fieldset",{className:"zent-form__fieldset"},o.default.createElement("legend",{className:"zent-form__legend"},e.legend),e.children)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(262),l=i(a),r=n(94),c=i(r),d=n(43),u=i(d),p=n(44),m=i(p),h=n(48),f=i(h),_=n(84),g=i(_),v=n(2),b=i(v),w=n(196),y=i(w),k=b.default.createElement("em",{className:"zent-form__required"},"*");t.default=function(e){return function(t){function n(){var e,t,i,o;(0,u.default)(this,n);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return t=i=(0,f.default)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),i.getControlInstance=function(){return i.control},o=t,(0,f.default)(i,o)}return(0,g.default)(n,t),(0,m.default)(n,[{key:"render",value:function(){var t=this,n=this.props,i=n.required,o=void 0!==i&&i,a=n.helpDesc,r=void 0===a?"":a,d=n.label,u=void 0===d?"":d,p=n.className,m=void 0===p?"":p,h=(0,c.default)(n,["required","helpDesc","label","className"]),f=h.isTouched&&null!==h.error,_=(0,y.default)((0,l.default)({"zent-form__control-group":!0,"zent-form__control-group--active":h.isActive,"has-error":f},m,!0));return b.default.createElement("div",{className:_},b.default.createElement("label",{className:"zent-form__control-label"},o?k:null,u),b.default.createElement("div",{className:"zent-form__controls"},b.default.createElement(e,(0,s.default)({},h,{ref:function(e){return t.control=e}})),f&&b.default.createElement("p",{className:"zent-form__error-desc"},h.error),r&&b.default.createElement("p",{className:"zent-form__help-desc"},r)))}}]),n}(v.PureComponent||v.Component)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(94),l=i(a),r=n(2),c=i(r),d=n(362),u=i(d),p=n(199),m=i(p),h=n(360),f=i(h),_=n(358),g=i(_),v=function(e){var t=e.type,n=void 0===t?"text":t,i=(0,
l.default)(e,["type"]),o=(0,m.default)(i,g.default);return c.default.createElement(u.default,(0,s.default)({},o,{type:n}))},b=(0,f.default)(v);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(363),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(262),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(196),b=i(v),w=n(95),y=i(w),k=n(199),x=i(k),j=function(e){function t(){var e,n,i,o;(0,c.default)(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return n=i=(0,m.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.handleKeyDown=function(e){var t=i.props,n=t.onKeyDown,o=t.onPressEnter;o&&13===e.keyCode&&o(e),n&&n(e)},o=n,(0,m.default)(i,o)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.input.focus()}},{key:"focus",value:function(){this.input.focus()}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.addonBefore,o=n.addonAfter,a=n.prefix,r=n.className,c=n.type,d="textarea"===c.toLowerCase(),u=(0,b.default)((e={},(0,l.default)(e,a+"-input-wrapper",!0),(0,l.default)(e,a+"-textarea-wrapper",d),(0,l.default)(e,a+"-input-addons",!d&&(o||i)),e),r),p=(0,x.default)(this.props,["className","prefix","addonBefore","addonAfter","onPressEnter"]);return d?(p=(0,x.default)(p,["type"]),g.default.createElement("div",{className:u},g.default.createElement("textarea",(0,s.default)({ref:function(e){t.input=e},className:a+"-textarea"},p,{onKeyDown:this.handleKeyDown})))):g.default.createElement("div",{className:u},i&&g.default.createElement("span",{className:a+"-input-addon-before"},i),g.default.createElement("input",(0,s.default)({ref:function(e){t.input=e},className:a+"-input"},p,{onKeyDown:this.handleKeyDown})),o&&g.default.createElement("span",{className:a+"-input-addon-after"},o))}}]),t}(_.PureComponent||_.Component);j.propTypes={className:y.default.string,prefix:y.default.string,type:y.default.string,placeholder:y.default.string,disabled:y.default.bool,readOnly:y.default.bool,value:y.default.any,defaultValue:y.default.any,addonBefore:y.default.node,addonAfter:y.default.node,onPressEnter:y.default.func,onChange:y.default.func,autoFocus:y.default.bool},j.defaultProps={disabled:!1,readOnly:!1,prefix:"zent",type:"text",autoFocus:!1},t.default=j},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(2),l=i(a),r=n(365),c=i(r),d=n(199),u=i(d),p=n(360),m=i(p),h=n(358),f=i(h),_=function(e){var t=(0,u.default)(e,f.default);return l.default.createElement(c.default,(0,s.default)({className:"zent-form__checkbox",checked:e.value===!0},t))},g=(0,m.default)(_);t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(366),s=i(o),a=n(367),l=i(a);s.default.Group=l.default,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(94),l=i(a),r=n(5),c=i(r),d=n(43),u=i(d),p=n(44),m=i(p),h=n(48),f=i(h),_=n(84),g=i(_),v=n(2),b=i(v),w=n(95),y=i(w),k=n(196),x=i(k),j=function(e){function t(){var e,n,i,o;(0,u.default)(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return n=i=(0,f.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.onChange=function(e){var t=i.props;t.onChange({target:(0,c.default)({},t,{type:"checkbox",checked:e.target.checked}),preventDefault:function(){e.preventDefault()},stopPropagation:function(){e.stopPropagation()}})},o=n,(0,f.default)(i,o)}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.checked,i=t.className,o=t.style,a=t.prefix,r=t.disabled,d=t.readOnly,u=t.children,p=t.indeterminate,m=(t.value,(0,l.default)(t,["checked","className","style","prefix","disabled","readOnly","children","indeterminate","value"])),h=(0,x.default)((e={},(0,s.default)(e,i,!!i),(0,s.default)(e,a+"-checkbox-wrap",!0),(0,s.default)(e,a+"-checkbox-checked",!!n),(0,s.default)(e,a+"-checkbox-disabled",r||d),(0,s.default)(e,a+"-checkbox-indeterminate",p),e));return b.default.createElement("label",{className:h,style:o},b.default.createElement("span",{className:a+"-checkbox"},b.default.createElement("span",{className:a+"-checkbox-inner"}),b.default.createElement("input",(0,c.default)({},m,{type:"checkbox",checked:n&&!p,disabled:r,readOnly:d,onChange:this.onChange}))),void 0!==u?b.default.createElement("span",null,u):null)}}]),t}(v.PureComponent||v.Component);j.propTypes={checked:y.default.oneOfType([y.default.number,y.default.bool]),disabled:y.default.bool,readOnly:y.default.bool,indeterminate:y.default.bool,onChange:y.default.func,className:y.default.string,style:y.default.object,prefix:y.default.string},j.defaultProps={prefix:"zent",className:"",style:{},onChange:function(){}},t.default=j},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}Object.defineProperty(t,"__esModule",{value:!0});var s=n(262),a=i(s),l=n(5),r=i(l),c=n(43),d=i(c),u=n(44),p=i(u),m=n(48),h=i(m),f=n(84),_=i(f),g=n(2),v=i(g),b=n(95),w=i(b),y=n(196),k=i(y),x=function(e){function t(){var e,n,i,s;(0,d.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,h.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.onCheckboxChange=function(e){var t=e.target.value,n=i.props.value.slice(),s=i.props.isValueEqual,a=o(n,function(e){return s(e,t)});a!==-1?n.splice(a,1):n.push(t),i.props.onChange(n)},s=n,(0,h.default)(i,s)}return(0,_.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e,t=this,n=this.props,i=n.className,s=n.prefix,l=n.style,c=n.isValueEqual,d=n.value,u=v.default.Children.map(this.props.children,function(e){if(e&&e.props)return v.default.cloneElement(e,(0,r.default)({},e.props,{onChange:t.onCheckboxChange,checked:o(d,function(t){return c(t,e.props.value)})!==-1,disabled:void 0!==e.props.disabled?e.props.disabled:t.props.disabled,readOnly:void 0!==e.props.readOnly?e.props.readOnly:t.props.readOnly}))}),p=(0,k.default)((e={},(0,a.default)(e,s+"-checkbox-group",!0),(0,a.default)(e,i,!!i),e));return v.default.createElement("div",{className:p,style:l},u)}}]),t}(g.PureComponent||g.Component);x.propTypes={value:w.default.array,isValueEqual:w.default.func,onChange:w.default.func,className:w.default.string,style:w.default.object,prefix:w.default.string},x.defaultProps={value:[],prefix:"zent",className:"",style:{},onChange:function(){},isValueEqual:function(e,t){return e===t}},t.default=x},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(2),l=i(a),r=n(365),c=i(r),d=n(199),u=i(d),p=n(360),m=i(p),h=n(358),f=i(h),_=c.default.Group,g=function(e){var t=(0,u.default)(e,f.default);return l.default.createElement(_,(0,s.default)({className:"zent-form__checkbox-group"},t))},v=(0,m.default)(g);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(2),l=i(a),r=n(370),c=i(r),d=n(199),u=i(d),p=n(360),m=i(p),h=n(358),f=i(h),_=c.default.Group,g=function(e){var t=(0,u.default)(e,f.default);return l.default.createElement(_,(0,s.default)({className:"zent-form__radio-group"},t))},v=(0,m.default)(g);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(371),s=i(o),a=n(372),l=i(a);s.default.Group=l.default,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(94),l=i(a),r=n(5),c=i(r),d=n(43),u=i(d),p=n(44),m=i(p),h=n(48),f=i(h),_=n(84),g=i(_),v=n(2),b=i(v),w=n(95),y=i(w),k=n(196),x=i(k),j=function(e){function t(){var e,n,i,o;(0,u.default)(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return n=i=(0,f.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.handleChange=function(e){var t=i.props;t.onChange({target:(0,c.default)({},t,{type:"radio",checked:e.target.checked}),preventDefault:function(){e.preventDefault()},stopPropagation:function(){e.stopPropagation()}})},o=n,(0,f.default)(i,o)}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.checked,i=t.className,o=t.style,a=t.prefix,r=t.disabled,d=t.readOnly,u=t.children,p=(t.value,(0,l.default)(t,["checked","className","style","prefix","disabled","readOnly","children","value"])),m=(0,x.default)((e={},(0,s.default)(e,i,!!i),(0,s.default)(e,a+"-radio-wrap",!0),(0,s.default)(e,a+"-radio-checked",!!n),(0,s.default)(e,a+"-radio-disabled",r||d),e));return b.default.createElement("label",{className:m,style:o},b.default.createElement("span",{className:a+"-radio"},b.default.createElement("span",{className:a+"-radio-inner"}),b.default.createElement("input",(0,c.default)({},p,{type:"radio",checked:!!n,disabled:r,readOnly:d,onChange:this.handleChange}))),void 0!==u?b.default.createElement("span",null,u):null)}}]),t}(v.PureComponent||v.Component);j.propTypes={checked:y.default.oneOfType([y.default.number,y.default.bool]),value:y.default.any,disabled:y.default.bool,readOnly:y.default.bool,onChange:y.default.func,className:y.default.string,style:y.default.object,prefix:y.default.string},j.defaultProps={prefix:"zent",className:"",style:{},onChange:function(){}},t.default=j},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(5),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(95),b=i(v),w=n(196),y=i(w),k=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"onRadioChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.className,o=n.prefix,a=n.style,r=n.isValueEqual,c=g.default.Children.map(this.props.children,function(e){if(e&&e.props)return g.default.cloneElement(e,(0,l.default)({},e.props,{onChange:t.onRadioChange.bind(t),checked:r(t.props.value,e.props.value),disabled:void 0!==e.props.disabled?e.props.disabled:t.props.disabled,readOnly:void 0!==e.props.readOnly?e.props.readOnly:t.props.readOnly}))}),d=(0,y.default)((e={},(0,s.default)(e,o+"-radio-group",!0),(0,s.default)(e,i,!!i),e));return g.default.createElement("div",{className:d,style:a},c)}}]),t}(_.PureComponent||_.Component);k.propTypes={value:b.default.any,isValueEqual:b.default.func,onChange:b.default.func,className:b.default.string,style:b.default.object,prefix:b.default.string},k.defaultProps={prefix:"zent",className:"",style:{},isValueEqual:function(e,t){return e===t},onChange:function(){}},t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(94),l=i(a),r=n(2),c=i(r),d=n(374),u=i(d),p=n(199),m=i(p),h=n(360),f=i(h),_=n(358),g=i(_),v=function(e){var t=e.trigger,n=void 0===t?d.SelectTrigger:t,i=(0,l.default)(e,["trigger"]),o=(0,m.default)(i,g.default),a=function(e,t){i.onChange(t.value)};return c.default.createElement(u.default,(0,s.default)({},o,{onChange:a,trigger:n}))},b=(0,f.default)(v);t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TagsTrigger=t.InputTrigger=t.SelectTrigger=t.Option=void 0;var o=n(375),s=i(o),a=n(434),l=i(a),r=n(437),c=i(r),d=n(438),u=i(d),p=n(439),m=i(p);s.default.Option=l.default,s.default.SelectTrigger=c.default,s.default.InputTrigger=u.default,s.default.TagsTrigger=m.default,t.Option=l.default,t.SelectTrigger=c.default,t.InputTrigger=u.default,t.TagsTrigger=m.default,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),s=i(o),a=n(5),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(311),b=i(v),w=n(199),y=i(w),k=n(376),x=i(k),j=n(105),S=i(j),C=n(166),T=i(C),O=n(266),I=i(O),P=n(95),z=i(P),E=n(377),M=i(E),N=n(427),D=i(N),F=n(428),q=i(F),A=n(436),R=i(A),L=n(437),U=i(L),$=n(438),V=i($),B=n(439),H=i(B),W=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getTriggerProps",value:function(e){var t=this;return{onClick:function(n){n.preventDefault(),t.props.contentVisible?t.props.close():e.props.disabled||(t.props.open(),t.triggerEvent(e,"onClick",n))}}}}]),t}(M.default.Trigger.Click),G=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.triggerChangeHandler=function(e){n.setState(e)},n.triggerDeleteHandler=function(e){var t=n.state.selectedItems;t=t.filter(function(t){return t.cid!==e.cid}),n.setState({selectedItems:t},function(){n.props.onDelete(e)})},n.optionChangedHandler=function(e,t){var i={};e=e||{preventDefault:I.default,stopPropagation:I.default};var o=n.props,s=o.onEmptySelected,a=o.optionValue,r=o.optionText,c=o.tags,d=o.onChange,u=n.state.selectedItems;if(!t)return void s(e);var p=(0,y.default)(t,["cid"]);i[a]=t.value,i[r]=t.text;var m=(0,l.default)({},p,i);c&&(u.some(function(e){return e.cid===t.cid})||u.push(t)),n.setState({keyword:null,selectedItems:u,selectedItem:t},function(){d({target:(0,l.default)({},n.props,{type:c?"select-multiple":"select-one",value:t.value}),preventDefault:function(){e.preventDefault()},stopPropagation:function(){e.stopPropagation()}},m)})},n.handlePopoverVisibleChange=function(e){e&&n.props.onOpen(),n.setState({open:e})},e.simple?n.trigger=R.default:e.search?n.trigger=V.default:e.tags?n.trigger=H.default:n.trigger=e.trigger,n.state=(0,b.default)({selectedItems:[],selectedItem:{value:"",text:""}},e),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=this.uniformData(this.props);this.formateData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.uniformData(e);this.formateData(t,e)}},{key:"uniformData",value:function(e){var t=[];return e.children&&(t=_.Children.map(e.children,function(e){var t=e.props.value;return t=void 0===t?e:t,(0,b.default)({},e.props,{value:t,text:e.props.children})})),e.data&&(t=e.data),t}},{key:"getOptions",value:function(e,t,n,i){var o=t.value,a=t.index;return(0,T.default)(o)&&o.indexOf(n.value)>-1?e.sItems.find(function(e){return e.value===n.value})||e.sItems.push(n):(0,T.default)(o)&&0===o.length?(e.sItem={},e.sItems=[]):"object"===(void 0===o?"undefined":(0,s.default)(o))&&(0,S.default)(o,n.value)?e.sItem=n:void 0!==o&&"object"!==(void 0===o?"undefined":(0,s.default)(o))&&""+n.value==""+o||"undefined"!==a&&""+i==""+a?e.sItem=n:o||a||0===o||(e.sItem={},e.sItems=[]),e}},{key:"formateData",value:function(e,t){var n=this;e=e||this.sourceData,t=t||this.props;var i=this.state,o=i.selectedItem,a=i.selectedItems,r=t,c=r.value,d=r.index,u=r.initialIndex,p=r.initialValue,m=r.optionValue,h=r.optionText,f={sItem:o,sItems:[]};return this.sourceData=(0,x.default)(e).map(function(e){var t={};return"object"===(void 0===e?"undefined":(0,s.default)(e))?(t.value=e[m],t.text=e[h],t=(0,l.default)({},e,t)):(t.value=e,t.text=e),t}).map(function(e,t){return e.cid=""+t,0!==a.length||o.cid||null===p&&null===u||n.getOptions(f,{value:p,index:u},e,t),null===c&&null===d||n.getOptions(f,{value:c,index:d},e,t),e}),this.setState({selectedItem:f.sItem,selectedItems:f.sItems}),this.sourceData}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,i=t.maxToShow,o=t.className,s=t.popupClassName,a=t.disabled,r=t.emptyText,c=t.filter,d=void 0===c?this.props.onFilter:c,u=t.onAsyncFilter,p=t.searchPlaceholder,m=t.autoWidth,h=this.state,f=h.open,_=h.selectedItems,v=h.selectedItem,b=void 0===v?{}:v,w=h.extraFilter,y=h.keyword,k=void 0===y?null:y,x=b.cid,j=void 0===x?"":x,S=a?"disabled":"",C=this.props.prefix+"-select";return g.default.createElement(M.default,{display:"inline-block",position:M.default.Position.AutoBottomLeft,visible:f,className:C+" "+s,wrapperClassName:C+" "+o+" "+S,onVisibleChange:this.handlePopoverVisibleChange},g.default.createElement(W,null,g.default.createElement(D.default,(0,l.default)({disabled:a,prefixCls:C,trigger:this.trigger,placeholder:n,selectedItems:_,keyword:k},b,{onChange:this.triggerChangeHandler,onDelete:this.triggerDeleteHandler}))),g.default.createElement(M.default.Content,null,g.default.createElement(q.default,{ref:function(t){return e.popup=t},cid:j,prefixCls:C,data:this.sourceData,selectedItems:_,extraFilter:w,searchPlaceholder:p,emptyText:r,keyword:k,filter:d,onAsyncFilter:u,maxToShow:i,onChange:this.optionChangedHandler,onFocus:this.popupFocusHandler,onBlur:this.popupBlurHandler,autoWidth:m})))}}]),t}(_.PureComponent||_.Component);G.propTypes={data:z.default.array,prefix:z.default.string,className:z.default.string,open:z.default.bool,popupClassName:z.default.string,disabled:z.default.bool,placeholder:z.default.string,maxToShow:z.default.number,searchPlaceholder:z.default.string,emptyText:z.default.node,selectedItem:z.default.shape({value:z.default.any,text:z.default.string}),trigger:z.default.func,optionValue:z.default.string,optionText:z.default.string,onChange:z.default.func,onDelete:z.default.func,filter:z.default.func,onAsyncFilter:z.default.func,onEmptySelected:z.default.func,onOpen:z.default.func,autoWidth:z.default.bool},G.defaultProps={prefix:"zent",disabled:!1,className:"",open:!1,popupClassName:"",trigger:U.default,placeholder:"请选择",searchPlaceholder:"",emptyText:"没有找到匹配项",selectedItem:{value:"",text:""},selectedItems:[],optionValue:"value",optionText:"text",onChange:I.default,onDelete:I.default,onEmptySelected:I.default,onOpen:I.default,autoWidth:!1,value:null,index:null,initialValue:null,initialIndex:null},t.default=G},function(e,t,n){function i(e){return o(e,s|a)}var o=n(201),s=1,a=4;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(378),s=i(o),a=n(391),l=i(a),r=n(392),c=i(r),d=n(380),u=i(d),p=n(408),m=i(p);s.default.Content=u.default,s.default.Trigger=c.default,s.default.Position=m.default,s.default.withPopover=l.default,t.default=s.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(t>=1)return e(n);var i=e();if(!(0,O.default)(i)&&i!==q)return n();i.then(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverContextType=void 0;var s=n(43),a=i(s),l=n(48),r=i(l),c=n(44),d=i(c),u=n(84),p=i(u),m=n(2),h=i(m),f=n(197),_=i(f),g=n(196),v=i(g),b=n(266),w=i(b),y=n(308),k=i(y),x=n(125),j=i(x),S=n(379),C=i(S),T=n(351),O=i(T),I=n(95),P=i(I),z=n(320),E=i(z),M=n(380),N=i(M),D=n(390),F=i(D),q=function(){},A=t.PopoverContextType={_zentPopover:P.default.shape({close:P.default.func.isRequired,open:P.default.func.isRequired,getContentNode:P.default.func.isRequired,getTriggerNode:P.default.func.isRequired,registerDescendant:P.default.func,unregisterDescendant:P.default.func})},R=function(e){function t(e){(0,a.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return L.call(n),n.id=(0,k.default)(e.prefix+"-popover-internal-id-"),n.descendants=[],n.isVisibilityControlled(e)||(n.state={visible:!1}),n.isUnmounted=!1,n}return(0,p.default)(t,e),(0,d.default)(t,[{key:"getChildContext",value:function(){return{_zentPopover:{close:this.close,open:this.open,getContentNode:this.getPopoverNode,getTriggerNode:this.getTriggerNode,registerDescendant:this.registerDescendant,unregisterDescendant:this.unregisterDescendant}}}}]),(0,d.default)(t,[{key:"isVisibilityControlled",value:function(e){var t=e||this.props,n=t.visible,i=t.onVisibleChange,o=(0,j.default)(i),s=(0,C.default)(n);if(s&&!o||o&&!s)throw new Error("visible and onVisibleChange must be used together");return s&&o}},{key:"validateChildren",value:function(){var e=this.props.children,t=m.Children.toArray(e);if(2!==t.length)throw new Error("There must be one and only one trigger and content in Popover");var n=t.reduce(function(e,t){var n=t.type;return(0,E.default)(n,F.default)?e.trigger=t:(0,E.default)(n,N.default)&&(e.content=t),e},{trigger:null,content:null}),i=n.trigger,o=n.content;if(!i)throw new Error("Missing trigger in Popover");if(!o)throw new Error("Missing content in Popover");return{trigger:i,content:o}}},{key:"safeSetState",value:function(e,t){if(!this.isUnmounted)return this.setState(e,t)}},{key:"componentDidMount",value:function(){var e=this.context||{},t=e._zentPopover;t&&t.registerDescendant&&t.registerDescendant(this),this.isVisibilityControlled()&&this.props.visible&&this.props.onShow()}},{key:"componentDidUpdate",value:function(e,t){var n=this.getVisible();if(n!==this.getVisible(e,t)){(n?this.props.onShow:this.props.onClose)()}}},{key:"componentWillUnmount",value:function(){var e=this.context||{},t=e._zentPopover;t&&t.unregisterDescendant&&t.unregisterDescendant(this),this.isUnmounted=!0}},{key:"render",value:function(){var e=this.validateChildren(),t=e.trigger,n=e.content,i=this.props,o=i.display,s=i.prefix,a=i.className,l=i.wrapperClassName,r=i.containerSelector,c=i.position,d=i.cushion,u=this.getVisible();return h.default.createElement("div",{style:{display:o},className:(0,v.default)(s+"-popover-wrapper",l)},h.default.cloneElement(t,{prefix:s,contentVisible:u,onTriggerRefChange:this.onTriggerRefChange,getTriggerNode:this.getTriggerNode,getContentNode:this.getPopoverNode,open:this.open,close:this.close,isOutsideStacked:this.isOutsideStacked,injectIsOutsideSelf:this.injectIsOutsideSelf}),h.default.cloneElement(n,{prefix:s,className:a,id:this.id,getContentNode:this.getPopoverNode,getAnchor:this.getTriggerNode,visible:u,cushion:d,containerSelector:r,placement:c}))}}]),t}(m.PureComponent||m.Component);R.propTypes={prefix:P.default.string,className:P.default.string,wrapperClassName:P.default.string,display:P.default.string,position:P.default.func.isRequired,cushion:P.default.number,onBeforeClose:P.default.func,onBeforeShow:P.default.func,onClose:P.default.func,onShow:P.default.func,containerSelector:P.default.string,children:P.default.node.isRequired,visible:P.default.bool,onVisibleChange:P.default.func},R.defaultProps={prefix:"zent",className:"",wrapperClassName:"",display:"block",onBeforeClose:w.default,onBeforeShow:w.default,onClose:w.default,onShow:w.default,cushion:0,containerSelector:"body"},R.contextTypes=A,R.childContextTypes=A;var L=function(){var e=this;this.registerDescendant=function(t){e.descendants.push(t)},this.unregisterDescendant=function(t){var n=e.descendants.indexOf(t);e.descendants.splice(n,1)},this.getVisible=function(t,n){return e.isVisibilityControlled(t)?(t=t||e.props,t.visible):(n=n||e.state,n.visible)},this.setVisible=function(t,n,i){n=n||e.props,i=i||e.state;var s=t?n.onBeforeShow:n.onBeforeClose,a=function(){return e.pendingOnBeforeHook?q:(e.pendingOnBeforeHook=!0,s.apply(void 0,arguments))};if(e.isVisibilityControlled(n)){if(e.pendingOnBeforeHook||n.visible===t)return;o(a,s.length,function(){n.onVisibleChange(t),e.pendingOnBeforeHook=!1})}else{if(e.pendingOnBeforeHook||i.visible===t)return;o(a,s.length,function(){e.safeSetState({visible:t}),e.pendingOnBeforeHook=!1})}},this.getPopoverNode=function(){return document.querySelector("."+e.id)},this.onTriggerRefChange=function(t){e.triggerNode=_.default.findDOMNode(t)},this.getTriggerNode=function(){return e.triggerNode},this.open=function(){e.setVisible(!0)},this.close=function(){e.setVisible(!1)},this.injectIsOutsideSelf=function(t){e.isOutsideSelf=t},this.isOutsideStacked=function(t){return!(e.isOutsideSelf&&!e.isOutsideSelf(t))&&!e.descendants.some(function(e){return!e.isOutsideStacked(t)})}};t.default=R},function(e,t,n){function i(e){return e===!0||e===!1||s(e)&&o(e)==a}var o=n(126),s=n(175),a="[object Boolean]";e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.left,i=e.top;return{width:t.width,height:t.height,top:t.top-i,left:t.left-n,bottom:t.bottom-i,right:t.right-n}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(43),a=i(s),l=n(44),r=i(l),c=n(48),d=i(c),u=n(84),p=i(u),m=n(2),h=i(m),f=n(196),_=i(f),g=n(92),v=i(g),b=n(381),w=i(b),y=n(384),k=i(y),x=n(385),j=i(x),S=n(95),C=i(S),T=n(388),O=i(T),I=function(e){function t(){var e,n,i,s;(0,a.default)(this,t);for(var l=arguments.length,r=Array(l),c=0;c<l;c++)r[c]=arguments[c];return n=i=(0,d.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={position:null},i.adjustPosition=function(){var e=i.props.getContentNode();if(!e)return i.setState({position:(0,O.default)(i.props.prefix)}),void setTimeout(i.adjustPosition,0);var t=i.getAnchor(),n=t.getBoundingClientRect(),s=i.getPositionedParent(),a=s.getBoundingClientRect(),l=e.getBoundingClientRect(),r=o(a,n),c=o(a,a),d=i.props.placement(i.props.prefix,r,c,{width:l.width,height:l.height},{cushion:i.props.cushion,anchor:t,container:s,anchorBoundingBoxViewport:n,containerBoundingBoxViewport:a});i.setState({position:d})},i.onWindowResize=(0,j.default)(function(e,t){!i.props.visible||0===t.deltaX&&0===t.deltaY||i.adjustPosition()},16),s=n,(0,d.default)(i,s)}return(0,p.default)(t,e),(0,r.default)(t,[{key:"getAnchor",value:function(){return this.props.getAnchor()}},{key:"getPositionedParent",value:function(){if(void 0!==this.positionedParent)return this.positionedParent;var e=this.props.containerSelector,t=document.querySelector(e),n=(0,k.default)(t,!0);return this.positionedParent=n,n}},{key:"componentDidMount",value:function(){this.props.visible&&this.adjustPosition()}},{key:"componentWillReceiveProps",value:function(e){e.visible&&e.visible!==this.props.visible&&this.adjustPosition()}},{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.className,i=e.id,o=e.visible,s=e.children,a=e.containerSelector,l=this.state.position;if(!l)return null;var r=(0,_.default)(n,t+"-popover",i,l.toString());return h.default.createElement(v.default,{prefix:t,visible:o,selector:a,className:r,css:l.getCSSStyle()},h.default.createElement("div",{className:t+"-popover-content"},s,h.default.createElement(w.default,{onResize:this.onWindowResize})))}}]),t}(m.PureComponent||m.Component);I.propTypes={children:C.default.node,prefix:C.default.string,id:C.default.string,getContentNode:C.default.func,visible:C.default.bool,placement:C.default.func,cushion:C.default.number,getAnchor:C.default.func,containerSelector:C.default.string},t.default=I},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(95),f=i(h),_=n(382),g=i(_),v=n(383),b=i(v),w=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.onResize=function(e){var t=(0,g.default)(),n=i._prevViewportSize,o={deltaX:t.width-n.width,deltaY:t.height-n.height};0===o.deltaX&&0===o.deltaY||(i.props.onResize(e,o),i._prevViewportSize=t)},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this._prevViewportSize=(0,g.default)()}},{key:"render",value:function(){return m.default.createElement(b.default,{eventName:"resize",callback:this.onResize})}}]),t}(p.PureComponent||p.Component);w.propTypes={onResize:f.default.func.isRequired},t.default=w},function(e,t){"use strict";function n(){var e=document.documentElement;return{width:Math.max(e.clientWidth,window.innerWidth||0),height:Math.max(e.clientHeight,window.innerHeight||0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.eventName,n=e.callback,i=e.useCapture;window.addEventListener(t,n,i)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.eventName,n=e.callback,i=e.useCapture;window.removeEventListener(t,n,i)}},{key:"render",value:function(){return null}}]),t}(h.PureComponent||h.Component);f.propTypes={eventName:m.default.string.isRequired,callback:m.default.func.isRequired,useCapture:m.default.bool},f.defaultProps={useCapture:!1},t.default=f},function(e,t){"use strict";function n(e){function t(e){var t=getComputedStyle(e),n=t.getPropertyValue("position");return n&&"static"!==n}var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(n&&t(e))return e;for(var i=e.parentElement;null!==i;i=i.parentElement)if(t(i))return i;return document.documentElement}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){function i(e,t,n){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return s(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),o(e,t,{leading:i,maxWait:t,trailing:l})}var o=n(386),s=n(132),a="Expected a function";e.exports=i},function(e,t,n){function i(e,t,n){function i(t){var n=v,i=b;return v=b=void 0,j=t,y=e.apply(i,n)}function d(e){return j=e,k=setTimeout(m,t),S?i(e):y}function u(e){var n=e-x,i=e-j,o=t-n;return C?c(o,w-i):o}function p(e){var n=e-x,i=e-j;return void 0===x||n>=t||n<0||C&&i>=w}function m(){var e=s();if(p(e))return h(e);k=setTimeout(m,u(e))}function h(e){return k=void 0,T&&v?i(e):(v=b=void 0,y)}function f(){void 0!==k&&clearTimeout(k),j=0,v=x=b=k=void 0}function _(){return void 0===k?y:h(s())}function g(){var e=s(),n=p(e);if(v=arguments,b=this,x=e,n){if(void 0===k)return d(x);if(C)return k=setTimeout(m,t),i(x)}return void 0===k&&(k=setTimeout(m,t)),y}var v,b,w,y,k,x,j=0,S=!1,C=!1,T=!0;if("function"!=typeof e)throw new TypeError(l);return t=a(t)||0,o(n)&&(S=!!n.leading,C="maxWait"in n,w=C?r(a(n.maxWait)||0,t):w,T="trailing"in n?!!n.trailing:T),g.cancel=f,g.flush=_,g}var o=n(132),s=n(387),a=n(306),l="Expected a function",r=Math.max,c=Math.min;e.exports=i},function(e,t,n){var i=n(128),o=function(){return i.Date.now()};e.exports=o},function(e,t,n){"use strict";function i(){return{getCSSStyle:function(){return{position:"fixed",left:-1e5+"px",top:-1e5+"px",zIndex:-10,opacity:0}},name:"position-invisible"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e){var t=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=e.apply(void 0,i);if(!a||!a.name||!a.getCSSStyle)throw new Error("name and getCSSStyle is required for a placement");var l=t+"-popover-"+a.name;return(0,s.default)({},a,{toString:function(){return l}})};return t.locate=e,t}Object.defineProperty(t,"__esModule",{value:!0})
;var o=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverTriggerPropTypes=void 0;var o=n(5),s=i(o),a=n(49),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(95),g=i(_),v=n(2),b=i(v),w=t.PopoverTriggerPropTypes={children:g.default.node,onTriggerRefChange:g.default.func,getTriggerNode:g.default.func,getContentNode:g.default.func,contentVisible:g.default.bool,open:g.default.func,close:g.default.func,isOutsideStacked:g.default.func,injectIsOutsideSelf:g.default.func},y=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isOutsideSelf=function(e){var t=n.props,i=t.isOutside,o=t.getContentNode,s=t.getTriggerNode,a=o(),l=s();return i?i(e,{contentNode:a,triggerNode:l}):(!l||!l.contains(e))&&(!a||!a.contains(e))},e.injectIsOutsideSelf(n.isOutsideSelf),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getTriggerProps",value:function(){return{}}},{key:"triggerEvent",value:function(e,t,n){var i=e.props[t];i&&i(n)}},{key:"validateChildren",value:function(){var e=this.props.children,t=v.Children.count(e);if(0===t)throw new Error("Popover trigger requires a child");var n=void 0===e?"undefined":(0,l.default)(e);if(1===t&&"string"===n||"number"===n)return b.default.createElement("span",null,e);if(t>1)throw new Error("Popover trigger requires only one child, but found "+t);var i=v.Children.only(this.props.children);if(i.ref)throw new Error("ref is not allowed on Popover trigger");return i}},{key:"render",value:function(){var e=this.validateChildren();return b.default.cloneElement(e,(0,s.default)({ref:this.props.onTriggerRefChange},this.getTriggerProps(e)))}}]),t}(v.PureComponent||v.Component);y.propTypes=(0,s.default)({},w),t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.exposePopover=void 0;var o=n(5),s=i(o),a=n(262),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(199),b=i(v),w=n(378),y=t.exposePopover=function(e){return function(t){var n,i;return i=n=function(n){function i(){return(0,c.default)(this,i),(0,m.default)(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return(0,f.default)(i,n),(0,u.default)(i,[{key:"render",value:function(){var n=this.context||{},i=n._zentPopover,o=(0,l.default)({},e,(0,b.default)(i,["registerDescendant","unregisterDescendant"]));return g.default.createElement(t,(0,s.default)({},this.props,o))}}]),i}(_.PureComponent||_.Component),n.contextTypes=w.PopoverContextType,i}};t.default=y("popover")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(393),s=i(o),a=n(394),l=i(a),r=n(407),c=i(r),d=n(390),u=i(d);t.default={Click:s.default,Hover:l.default,Focus:c.default,Base:u.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p);n(2);var h=n(95),f=i(h),_=n(390),g=i(_),v=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.onClickOutside=function(e){if(i.props.contentVisible){var t=e.target;i.props.isOutsideStacked(t)&&i.props.close()}},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getTriggerProps",value:function(e){var t=this;return{onClick:function(n){t.props.open(),t.triggerEvent(e,"onClick",n)}}}},{key:"bindEventHandler",value:function(e){var t=e||this.props,n=t.contentVisible;return t.autoClose&&n?window.addEventListener("click",this.onClickOutside,!0):n?void 0:window.removeEventListener("click",this.onClickOutside,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.onClickOutside,!0)}},{key:"componentDidMount",value:function(){this.bindEventHandler()}},{key:"componentWillReceiveProps",value:function(e){e.contentVisible!==this.props.contentVisible&&this.bindEventHandler(e)}}]),t}(g.default);v.propTypes=(0,s.default)({},_.PopoverTriggerPropTypes,{autoClose:f.default.bool,isOutside:f.default.func}),v.defaultProps={autoClose:!0},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return M.indexOf(e)!==-1}function s(e,t){if(e&&O.default){Object.keys(e).forEach(function(n){var i=o(n)?"mouse"+n:n;"install"===t?window.addEventListener(i,e[n],!0):"uninstall"===t&&window.removeEventListener(i,e[n],!0)})}}function a(e,t){var n=(0,w.default)({},t,{destroy:function(){e.is(N.Finish)||s(n.global,"uninstall")}});return s(n.global,"install"),n}function l(e){var t=e.enterDelay,n=e.onEnter,i=D("enter",n),o=void 0,l=a(i,{local:{enter:function(){i.transit(N.Pending),o=setTimeout(function(){i.transit(N.Finish),s(l.global,"uninstall")},t)},leave:function(){o&&(clearTimeout(o),o=void 0,i.transit(N.Init))}}});return l}function r(e){var t=e.leaveDelay,n=e.onLeave,i=e.isOutSide,o=e.quirk,l=D("leave",n),r=void 0,c=void 0,d=function(){l.transit(N.Finish),s(r.global,"uninstall")};return r=a(l,{global:{move:(0,j.default)(function(e){if(i(e.target)){if(!o&&!l.is(N.Started))return;l.transit(N.Pending),c=setTimeout(d,t)}else{if(l.is(N.Init))return void l.transit(N.Started);if(!l.is(N.Pending))return;c&&(clearTimeout(c),c=void 0,l.transit(N.Started))}},16),blur:function(e){(e.target||e.srcElement)===window&&(c&&(clearTimeout(c),c=void 0),d())}}})}function c(e,t,n){for(var i=e&&e[t],o=arguments.length,s=Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];i&&i[n]&&i[n].apply(i,s)}function d(e){e&&e.destroy()}Object.defineProperty(t,"__esModule",{value:!0});var u=n(43),p=i(u),m=n(44),h=i(m),f=n(48),_=i(f),g=n(84),v=i(g),b=n(5),w=i(b);n(2);var y=n(395),k=i(y),x=n(385),j=i(x),S=n(403),C=i(S),T=n(307),O=i(T),I=n(95),P=i(I),z=n(390),E=i(z),M=["down","up","move","over","out","enter","leave"],N={Init:1,Started:2,Pending:3,Finish:255},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.Init,i=n;return{transit:function(e){(i=e)===N.Finish&&t()},is:function(e){return e===i},name:e}},F=function(e){function t(){var e,n,i,o;(0,p.default)(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return n=i=(0,_.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.open=function(){i.props.open()},i.close=function(){i.props.close()},i.state={enterRecognizer:null,leaveRecognizer:null},o=n,(0,_.default)(i,o)}return(0,v.default)(t,e),(0,h.default)(t,[{key:"makeEnterRecognizer",value:function(){var e=this.props,t=e.showDelay,n=e.quirk;return l({enterDelay:t,onEnter:this.open,quirk:n})}},{key:"makeLeaveRecognizer",value:function(){var e=this.props,t=e.quirk,n=e.hideDelay,i=e.isOutsideStacked;return r({leaveDelay:n,onLeave:this.close,isOutSide:i,quirk:t})}},{key:"getTriggerProps",value:function(e){var t=this,n=this.state,i=n.enterRecognizer,o=n.leaveRecognizer,s=i&&i.local||{},a=o&&o.local||{},l=function(e){return e.slice("onMouse".length).toLowerCase()};return(0,C.default)([].concat(Object.keys(s),Object.keys(a))).map(function(e){return"onMouse"+(0,k.default)(e)}).reduce(function(n,s){var a=l(s);return n[s]=function(n){c(i,"local",a),c(o,"local",a),t.triggerEvent(e,s,n)},n},{})}},{key:"cleanup",value:function(){d(this.state.enterRecognizer),d(this.state.leaveRecognizer)}},{key:"initRecognizers",value:function(e){e=e||this.props;var t=e,n=t.contentVisible;this.cleanup(),this.setState({enterRecognizer:n?null:this.makeEnterRecognizer(),leaveRecognizer:n?this.makeLeaveRecognizer():null})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"componentDidMount",value:function(){this.initRecognizers()}},{key:"componentWillReceiveProps",value:function(e){e.contentVisible!==this.props.contentVisible&&this.initRecognizers(e)}}]),t}(E.default);F.propTypes=(0,w.default)({},z.PopoverTriggerPropTypes,{showDelay:P.default.number,hideDelay:P.default.number,isOutside:P.default.func,quirk:P.default.bool}),F.defaultProps={showDelay:150,hideDelay:150,quirk:!1},t.default=F},function(e,t,n){function i(e){return s(o(e).toLowerCase())}var o=n(240),s=n(396);e.exports=i},function(e,t,n){var i=n(397),o=i("toUpperCase");e.exports=o},function(e,t,n){function i(e){return function(t){t=l(t);var n=s(t)?a(t):void 0,i=n?n[0]:t.charAt(0),r=n?o(n,1).join(""):t.slice(1);return i[e]()+r}}var o=n(398),s=n(399),a=n(400),l=n(240);e.exports=i},function(e,t,n){function i(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:o(e,t,n)}var o=n(246);e.exports=i},function(e,t){function n(e){return i.test(e)}var i=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=n},function(e,t,n){function i(e){return s(e)?a(e):o(e)}var o=n(401),s=n(399),a=n(402);e.exports=i},function(e,t){function n(e){return e.split("")}e.exports=n},function(e,t){function n(e){return e.match(u)||[]}var i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+i+"|"+o+")?",r="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,a].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*",c="[\\ufe0e\\ufe0f]?"+l+r,d="(?:"+["[^\\ud800-\\udfff]"+i+"?",i,s,a,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(o+"(?="+o+")|"+d+c,"g");e.exports=n},function(e,t,n){function i(e){return e&&e.length?o(e):[]}var o=n(404);e.exports=i},function(e,t,n){function i(e,t,n){var i=-1,u=s,p=e.length,m=!0,h=[],f=h;if(n)m=!1,u=a;else if(p>=d){var _=t?null:r(e);if(_)return c(_);m=!1,u=l,f=new o}else f=t?[]:h;e:for(;++i<p;){var g=e[i],v=t?t(g):g;if(g=n||0!==g?g:0,m&&v===v){for(var b=f.length;b--;)if(f[b]===v)continue e;t&&f.push(v),h.push(g)}else u(f,v,n)||(f!==h&&f.push(v),h.push(g))}return h}var o=n(153),s=n(294),a=n(405),l=n(157),r=n(406),c=n(161),d=200;e.exports=i},function(e,t){function n(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}e.exports=n},function(e,t,n){var i=n(193),o=n(266),s=n(161),a=i&&1/s(new i([,-0]))[1]==1/0?function(e){return new i(e)}:o;e.exports=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(390),m=i(p),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"getTriggerProps",value:function(e){var t=this;return{onFocus:function(n){t.props.open(),t.triggerEvent(e,"onFocus",n)},onBlur:function(n){t.props.close(),t.triggerEvent(e,"onBlur",n)}}}}]),t}(m.default);t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=i(o),a=n(409),l=i(a),r=n(410),c=i(r),d=n(411),u=i(d),p=n(412),m=i(p),h=n(413),f=i(h),_=n(414),g=i(_),v=n(415),b=i(v),w=n(416),y=i(w),k=n(417),x=i(k),j=n(418),S=i(j),C=n(419),T=i(C),O=n(420),I=i(O),P=n(421),z=i(P),E=n(422),M=i(E),N=n(423),D=i(N),F=n(424),q=i(F),A=n(425),R=i(A),L=n(426),U=i(L);t.default={create:s.default,BottomLeft:l.default,BottomCenter:c.default,BottomRight:u.default,LeftTop:m.default,LeftCenter:f.default,LeftBottom:g.default,RightTop:b.default,RightCenter:y.default,RightBottom:x.default,TopLeft:S.default,TopCenter:T.default,TopRight:I.default,AutoBottomLeft:z.default,AutoBottomRight:M.default,AutoBottomCenter:D.default,AutoTopLeft:q.default,AutoTopRight:R.default,AutoTopCenter:U.default}},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left,s=e.bottom,a=o,l=s+i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-bottom-left"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left,s=e.right,a=e.bottom,l=(o+s)/2,r=l-n.width/2,c=a+i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(c)+"px"}},name:"position-bottom-center"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.bottom,a=o-n.width,l=s+i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-bottom-right"}}Object.defineProperty(t,"__esModule",{value:!0}),t.locate=i;var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left-n.width-i.cushion,s=e.top;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(o)+"px",top:Math.round(s)+"px"}},name:"position-left-top"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left-n.width-i.cushion,s=(e.top+e.bottom)/2,a=s-n.height/2;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(o)+"px",top:Math.round(a)+"px"}},name:"position-left-center"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left-n.width-i.cushion,s=e.bottom-n.height;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(o)+"px",top:Math.round(s)+"px"}},name:"position-left-bottom"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.top,a=o+i.cushion,l=s;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-right-top"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.top,a=e.bottom,l=o+i.cushion,r=(s+a)/2,c=r-n.height/2;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(l)+"px",top:Math.round(c)+"px"}},name:"position-right-center"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.bottom,a=o+i.cushion,l=s-n.height;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-right-bottom"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.left,s=e.top,a=o,l=s-n.height-i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-top-left"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.left,a=e.top,l=(s+o)/2,r=l-n.width/2,c=a-n.height-i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(r)+"px",top:Math.round(c)+"px"}},name:"position-top-center"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e,t,n,i){var o=e.right,s=e.top,a=o-n.width,l=s-n.height-i.cushion;return{getCSSStyle:function(){return{position:"absolute",left:Math.round(a)+"px",top:Math.round(l)+"px"}},name:"position-top-right"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(389),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=(0,s.default)(i);t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0;return r=s.left+n.width>o.width&&s.right-n.width>0?"Right":"Left",c=s.bottom+l+n.height>o.height&&s.top-l-n.height>0?"Top":"Bottom",g[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(418),h=i(m),f=n(420),_=i(f),g={BottomLeft:d.default,BottomRight:p.default,TopLeft:h.default,TopRight:_.default},v=(0,r.default)(o);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0;return r=s.right-n.width<0&&s.left+n.width<o.width?"Left":"Right",c=s.bottom+l+n.height>o.height&&s.top-l-n.height>0?"Top":"Bottom",g[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(418),h=i(m),f=n(420),_=i(f),g={BottomLeft:d.default,BottomRight:p.default,TopLeft:h.default,TopRight:_.default},v=(0,r.default)(o);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0,d=(s.left+s.right)/2,u=n.width/2;return r=d+u>o.width&&s.right-n.width>0?"Right":d-u<0&&s.left+n.width<o.width?"Left":"Center",c=s.bottom+l+n.height>o.height&&s.top-l-n.height>0?"Top":"Bottom",y[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(410),h=i(m),f=n(418),_=i(f),g=n(420),v=i(g),b=n(419),w=i(b),y={BottomLeft:d.default,BottomRight:p.default,BottomCenter:h.default,TopLeft:_.default,TopRight:v.default,TopCenter:w.default},k=(0,r.default)(o);t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0;return r=s.left+n.width>o.width&&s.right-n.width>0?"Right":"Left",c=s.top-l-n.height<0&&s.bottom+l+n.height<o.height?"Bottom":"Top",g[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(418),h=i(m),f=n(420),_=i(f),g={BottomLeft:d.default,BottomRight:p.default,TopLeft:h.default,TopRight:_.default},v=(0,r.default)(o);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0;return r=s.right-n.width<0&&s.left+n.width<o.width?"Left":"Right",c=s.top-l-n.height<0&&s.bottom+l+n.height<o.height?"Bottom":"Top",g[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(418),h=i(m),f=n(420),_=i(f),g={BottomLeft:d.default,BottomRight:p.default,TopLeft:h.default,TopRight:_.default},v=(0,r.default)(o);t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i){var o=(0,a.default)(),s=i.anchorBoundingBoxViewport,l=i.cushion,r=void 0,c=void 0,d=(s.left+s.right)/2,u=n.width/2;return r=d+u>o.width&&s.right-n.width>0?"Right":d-u<0&&s.left+n.width<o.width?"Left":"Center",c=s.top-l-n.height<0&&s.bottom+l+n.height<o.height?"Bottom":"Top",y[""+c+r].locate(e,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(382),a=i(s),l=n(389),r=i(l),c=n(409),d=i(c),u=n(411),p=i(u),m=n(410),h=i(m),f=n(418),_=i(f),g=n(420),v=i(g),b=n(419),w=i(b),y={BottomLeft:d.default,BottomRight:p.default,BottomCenter:h.default,TopLeft:_.default,TopRight:v.default,TopCenter:w.default},k=(0,r.default)(o);t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(95),f=i(h),_=n(2),g=i(_),v=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.props.trigger;return g.default.createElement(e,(0,s.default)({},this.props,{onKeyDown:this.props.onKeyDown}))}}]),t}(_.PureComponent||_.Component);v.propTypes={trigger:f.default.any},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(95),g=i(_),v=n(429),b=i(v),w=n(430),y=i(w),k=n(377),x=i(k),j=n(433),S=i(j),C=n(434),T=i(C),O=n(435),I=function(e){function t(e){(0,l.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleScroll=function(e){(0===n.popup.scrollTop&&e.deltaY<0||n.popup.scrollTop+n.popup.clientHeight===n.popup.scrollHeight&&e.deltaY>0)&&e.preventDefault()},n.optionChangedHandler=function(e,t){var i=n.props,o=i.filter,s=i.data,a=n.state.keyword;n.setState({keyword:""}),n.props.popover.close(),n.props.onChange(e,s.filter(function(e){return(!a||!o||o(e,""+a))&&e.cid===t})[0])},n.searchFilterHandler=function(e){var t=n.props.onAsyncFilter;e=(0,y.default)(e),n.setState({keyword:e,currentId:""}),"function"==typeof t&&t(""+e)},n.keydownHandler=function(e){var t=e.keyCode,i=n.itemIds,o=n.state,s=o.currentId,a=o.keyword,l=i.indexOf(s),r=n.popup.clientHeight,c=n.popup.scrollHeight,d=n.popup.getElementsByClassName("current")[0];switch(t){case O.KEY_ESC:n.props.popover.close();break;case O.KEY_DOWN:e.preventDefault(),n.itemIds[l+1]?(s=n.itemIds[l+1],n.currentIdUpdated=!0,d&&d.offsetTop+28>=n.popup.scrollTop+r&&(n.popup.scrollTop=d.offsetTop+56-r)):(s=n.itemIds[0],n.popup.scrollTop=0);break;case O.KEY_UP:e.preventDefault(),l>0?(s=n.itemIds[l-1],n.currentIdUpdated=!0,d&&d.offsetTop<=n.popup.scrollTop&&(n.popup.scrollTop=d.offsetTop-28)):(s=n.itemIds[n.itemIds.length-1],n.popup.scrollTop=c);break;case O.KEY_EN:e.preventDefault(),n.optionChangedHandler(a,s),n.currentIdUpdated=!1}n.setState({currentId:s})},n.state={data:e.data,currentId:e.data[0]?e.data[0].cid:0,keyword:e.keyword||"",style:{}},n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.autoWidth,n=e.popover;t&&this.setState({style:{width:n.getTriggerNode().clientWidth+2+"px"}})}},{key:"componentDidMount",value:function(){this.props.filter||this.props.onAsyncFilter||this.popup.focus(),this.popup.addEventListener("mousewheel",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(e){var t=e.keyword;this.setState({data:e.data,currentId:e.data[0]?e.data[0].cid:0}),(this.props.extraFilter||null!==t)&&this.searchFilterHandler(t)}},{key:"componentWillUpdate",value:function(e,t){var n=this,i=e.filter,o=t.data,s=t.keyword,a=t.currentId;o.filter(function(e){return!s||!i||i(e,""+s)}).forEach(function(e,t){(s&&e.text===s||!a&&0===t)&&n.setState({currentId:e.cid})})}},{key:"updateCurrentId",value:function(e){this.setState({currentId:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cid,i=t.selectedItems,o=t.emptyText,a=t.prefixCls,l=t.extraFilter,r=t.searchPlaceholder,c=t.filter,d=t.onAsyncFilter,u=t.maxToShow,p=t.autoWidth,m=this.state,h=m.keyword,_=m.data,g=m.currentId,v=_.filter(function(e){return!h||!c||c(e,""+h)}),w=0===_.length||0===v.length;return this.itemIds=v.map(function(e){return e.cid}),u&&!l&&c&&(v=(0,b.default)(v,u)),f.default.createElement("div",{ref:function(t){return e.popup=t},className:a+"-popup",onKeyDown:this.keydownHandler,tabIndex:"0",style:p?this.state.style:null},l||!c&&!d?"":f.default.createElement(S.default,{keyword:h,prefixCls:a,placeholder:r,onChange:this.searchFilterHandler}),v.map(function(t,o){var l=t.cid===g?"current":"",r=i.filter(function(e){return e.cid===t.cid}).length>0||t.cid===n?"active":"";return f.default.createElement(T.default,(0,s.default)({key:o,className:a+"-option "+r+" "+l},t,{onClick:e.optionChangedHandler,onMouseEnter:e.updateCurrentId.bind(e,t.cid)}))}),w&&f.default.createElement(T.default,{className:a+"-empty",text:o,onClick:this.optionChangedHandler}))}}]),t}(h.PureComponent||h.Component);I.propTypes={cid:g.default.string,keyword:g.default.any,selectedItems:g.default.array,searchPlaceholder:g.default.string,emptyText:g.default.any,prefixCls:g.default.string,extraFilter:g.default.bool,filter:g.default.func,onAsyncFilter:g.default.func},I.defaultProps={cid:-1,keyword:"",selectedItems:[],emptyText:"",prefixCls:"",extraFilter:!1,searchPlaceholder:""},t.default=x.default.withPopover(I)},function(e,t,n){function i(e,t,n){return e&&e.length?(t=n||void 0===t?1:s(t),o(e,0,t<0?0:t)):[]}var o=n(246),s=n(304);e.exports=i},function(e,t,n){function i(e,t,n){if((e=c(e))&&(n||void 0===t))return e.replace(d,"");if(!e||!(t=o(t)))return e;var i=r(e),u=r(t);return s(i,l(i,u),a(i,u)+1).join("")}var o=n(241),s=n(398),a=n(431),l=n(432),r=n(400),c=n(240),d=/^\s+|\s+$/g;e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--&&o(t,e[n],0)>-1;);return n}var o=n(295);e.exports=i},function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i&&o(t,e[n],0)>-1;);return n}var o=n(295);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.changeHandler=n.changeHandler.bind(n),n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.input.focus()}},{key:"changeHandler",value:function(e){this.props.onChange(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,i=t.placeholder,o=t.keyword;return f.default.createElement("div",{className:n+"-search"},f.default.createElement("input",{type:"text",ref:function(t){return e.input=t},placeholder:i,className:n+"-filter",value:o,onChange:this.changeHandler}))}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,value:m.default.any,placeholder:m.default.string},t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.optionClickHandler=n.optionClickHandler.bind(n),n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"optionClickHandler",value:function(e){this.props.onClick(e,this.props.cid)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.text,i=e.value;return f.default.createElement("span",{value:i,className:t,onClick:this.optionClickHandler,onMouseEnter:this.props.onMouseEnter},n)}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,cid:m.default.string,value:m.default.any,text:m.default.any,placeholder:m.default.string,onMouseEnter:m.default.func},t.default=_},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KEY_EN=13,t.KEY_ESC=27,t.KEY_LET=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.onClick;return f.default.createElement("div",{className:t+"-simple",onClick:n},this.props.text||this.props.placeholder)}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,value:m.default.any,text:m.default.any,placeholder:m.default.string},t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.onClick;return f.default.createElement("div",{className:t+"-text",onClick:n},this.props.text||this.props.placeholder)}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,value:m.default.any,text:m.default.any,placeholder:m.default.string},t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={value:""},i.inputChangeHandler=function(e){i.props.onChange({keyword:e.target.value})},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.onChange({extraFilter:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return t.value!==this.state.value}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:null===e.keyword?e.value:e.keyword})}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,i=t.placeholder,o=t.keyword,s=t.text;return f.default.createElement("input",{ref:function(t){return e.input=t},className:n+"-input",placeholder:i,type:"text",value:null===o?s:o,onChange:this.inputChangeHandler,onClick:this.props.onClick})}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,value:m.default.any,placeholder:m.default.string},t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(95),g=i(_),v=n(266),b=i(v),w=n(440),y=i(w),k=function(e){function t(e){(0,l.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteTagHandler=n.deleteTagHandler.bind(n),n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedItems,n=e.cid,i=e.text,o=e.value;if(this.isDelete||this.isAdded)return this.isDelete=!1,void(this.isAdded=!1);var s=t.filter(function(e){return e.cid===n}).length>0;void 0===n||s?s&&(this.isAdded=!0,this.props.onChange({selectedItem:{value:""}})):(t.push({cid:n,text:i,value:o}),this.props.onChange({selectedItems:t,selectedItem:{value:""},open:!1}))}},{key:"deleteTagHandler",
value:function(e){var t=this.props.selectedItems,n=t.filter(function(t){return t.cid===e})[0];this.isDelete=!0,this.props.onDelete(n),this.props.onChange({selectedItems:t.filter(function(t){return t.cid!==e}),selectedItem:{},open:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,i=t.placeholder,o=t.onClick,a=t.selectedItems;return f.default.createElement("div",{className:n+"-tags",onClick:o},a.length>0?a.map(function(t,n){return f.default.createElement(y.default,(0,s.default)({},e.props,{key:n,cid:t.cid},t,{onDelete:e.deleteTagHandler}))}):i)}}]),t}(h.PureComponent||h.Component);k.propTypes={prefixCls:g.default.string,selectedItems:g.default.array,selectedItem:g.default.object,placeholder:g.default.string,value:g.default.any,onDelete:g.default.func},k.defaultProps={selectedItems:[],onDelete:b.default},t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(95),m=i(p),h=n(2),f=i(h),_=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deleteTagHandler=n.deleteTagHandler.bind(n),n}return(0,u.default)(t,e),(0,l.default)(t,[{key:"deleteTagHandler",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDelete(this.props.cid)}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.text;return f.default.createElement("span",null,n?f.default.createElement("span",{className:t+"-tag"},n,f.default.createElement("i",{className:t+"-delete",onClick:this.deleteTagHandler})):"")}}]),t}(h.PureComponent||h.Component);_.propTypes={prefixCls:m.default.string,cid:m.default.string,value:m.default.any,text:m.default.any,onFocus:m.default.func},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(442),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(262),s=i(o),a=n(5),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(196),b=i(v),w=n(95),y=i(w),k=n(199),x=i(k),j=["type","size","htmlType","block","component","disabled","loading","outline","bordered","className","prefix"],S=["href","target"].concat(j),C=["href","target"].concat(j),T=function(e){function t(e){(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleClick",value:function(e){this.props.disabled||this.props.loading||this.props.onClick&&this.props.onClick(e)}},{key:"renderLink",value:function(e){var t=this.props.component||"a",n=this.props.disabled||this.props.loading,i=this.props,o=i.href,s=void 0===o?"":o,a=i.target,r=(0,x.default)(this.props,C);return g.default.createElement(t,(0,l.default)({},n?{}:{href:s,target:a},r,{className:e,onClick:this.handleClick}),this.props.children)}},{key:"renderButton",value:function(e){var t=this.props.component||"button",n=this.props.disabled||this.props.loading,i=this.props.htmlType,o=(0,x.default)(this.props,S);return g.default.createElement(t,(0,l.default)({},o,i?{type:i}:{},{className:e,disabled:n,onClick:this.handleClick}),this.props.children)}},{key:"render",value:function(){var e,t=this.props.href||this.props.target?"renderLink":"renderButton",n=this.props,i=n.className,o=n.type,a=n.size,l=n.block,r=n.disabled,c=n.loading,d=n.outline,u=n.bordered,p=n.prefix,m=(0,b.default)((e={},(0,s.default)(e,p+"-btn-"+o+(d?"-outline":""),"default"!==o),(0,s.default)(e,p+"-btn-"+a,"medium"!==a),(0,s.default)(e,p+"-btn-block",l),(0,s.default)(e,p+"-btn-loading",c),(0,s.default)(e,p+"-btn-disabled",r),(0,s.default)(e,p+"-btn-border-transparent",!u),e),p+"-btn",i);return this[t](m)}}]),t}(_.PureComponent||_.Component);T.propTypes={type:y.default.oneOf(["default","primary","success","danger","link"]),size:y.default.oneOf(["large","medium","small"]),htmlType:y.default.oneOf(["button","submit","reset"]),className:y.default.string,block:y.default.bool,component:y.default.oneOfType([y.default.string,y.default.func]),disabled:y.default.bool,loading:y.default.bool,outline:y.default.bool,bordered:y.default.bool,prefix:y.default.string},T.defaultProps={type:"default",size:"medium",htmlType:"button",className:"",block:!1,disabled:!1,loading:!1,outline:!1,bordered:!0,prefix:"zent"},t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(444);t.default={success:i.success,error:i.error,clear:i.clear}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){return++g}function s(e,t,n){return k(e,t,"success",n)}function a(e,t,n){return k(e,t,"error",n)}function l(e){e?b(e):w()}Object.defineProperty(t,"__esModule",{value:!0}),t.success=s,t.error=a,t.clear=l;var r=n(2),c=i(r),d=n(197),u=i(d),p=n(307),m=i(p),h=n(445),f=i(h),_={},g=0,v=function(e){"function"==typeof e&&e()},b=function(e){var t=_[e];if(t){var n=t.container,i=t.callback,o=t.timeOutId;clearTimeout(o),u.default.unmountComponentAtNode(n),delete _[e],v(i)}},w=function(){Object.keys(_).forEach(function(e){b(e)})},y=function(e,t,n){u.default.render(c.default.createElement(f.default,t),e);var i=o(),s=setTimeout(function(){b(i)},t.duration||2e3);return _[i]={container:e,callback:n,timeOutId:s},i},k=function(e,t,n,i){if(m.default){return y(document.createElement("div"),{visible:!0,text:e,duration:t,status:n},i)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(95),f=i(h),_=n(92),g=i(_),v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.text,i=e.status;return m.default.createElement(g.default,{visible:t,className:"zent-image-p-anchor"},m.default.createElement("div",{className:"zent-notify zent-notify-"+i},n))}}]),t}(p.PureComponent||p.Component);v.propTypes={text:f.default.any,status:f.default.string,visible:f.default.bool},v.defaultProps={text:"",visible:!1,status:""},t.default=v},function(e,t,n){var i=n(447),o=n(465),s=n(466),a=n(476),l=n(479),r=n(480),c=Object.prototype,d=c.hasOwnProperty,u=s(function(e,t){if(l(t)||a(t))return void o(t,r(t),e);for(var n in t)d.call(t,n)&&i(e,n,t[n])});e.exports=u},function(e,t,n){function i(e,t,n){var i=e[t];l.call(e,t)&&s(i,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(448),s=n(464),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(449);e.exports=i},function(e,t,n){var i=n(450),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function i(e,t){var n=s(e,t);return o(n)?n:void 0}var o=n(451),s=n(463);e.exports=i},function(e,t,n){function i(e){return!(!a(e)||s(e))&&(o(e)?m:r).test(l(e))}var o=n(452),s=n(460),a=n(459),l=n(462),r=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,u=c.toString,p=d.hasOwnProperty,m=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){if(!s(e))return!1;var t=o(e);return t==l||t==r||t==a||t==c}var o=n(453),s=n(459),a="[object AsyncFunction]",l="[object Function]",r="[object GeneratorFunction]",c="[object Proxy]";e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?r:l:c&&c in Object(e)?s(e):a(e)}var o=n(454),s=n(457),a=n(458),l="[object Null]",r="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(455),o=i.Symbol;e.exports=o},function(e,t,n){var i=n(456),o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")();e.exports=s},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=a.call(e,r),n=e[r];try{e[r]=void 0}catch(e){}var i=l.call(e);return t?e[r]=n:delete e[r],i}var o=n(454),s=Object.prototype,a=s.hasOwnProperty,l=s.toString,r=o?o.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function i(e){return!!s&&s in e}var o=n(461),s=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(455),o=i["__core-js_shared__"];e.exports=o},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,o=i.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n,i){var a=!n;n||(n={});for(var l=-1,r=t.length;++l<r;){var c=t[l],d=i?i(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),a?s(n,c,d):o(n,c,d)}return n}var o=n(447),s=n(448);e.exports=i},function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&s(n[0],n[1],l)&&(a=o<3?void 0:a,o=1),t=Object(t);++i<o;){var r=n[i];r&&e(t,r,i,a)}return t})}var o=n(467),s=n(475);e.exports=i},function(e,t,n){function i(e,t){return a(s(e,t,o),e+"")}var o=n(468),s=n(469),a=n(471);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,l=s(i.length-t,0),r=Array(l);++a<l;)r[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(r),o(e,this,c)}}var o=n(470),s=Math.max;e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var i=n(472),o=n(474),s=o(i);e.exports=s},function(e,t,n){var i=n(473),o=n(449),s=n(468),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:s;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=s(),l=o-(a-n);if(n=a,l>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,s=Date.now;e.exports=n},function(e,t,n){function i(e,t,n){if(!l(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&a(t,n.length):"string"==i&&t in n)&&o(n[t],e)}var o=n(464),s=n(476),a=n(478),l=n(459);e.exports=i},function(e,t,n){function i(e){return null!=e&&s(e.length)&&!o(e)}var o=n(452),s=n(477);e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){function n(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;e.exports=n},function(e,t,n){function i(e){return a(e)?o(e):s(e)}var o=n(481),s=n(493),a=n(476);e.exports=i},function(e,t,n){function i(e,t){var n=a(e),i=!n&&s(e),d=!n&&!i&&l(e),p=!n&&!i&&!d&&c(e),m=n||i||d||p,h=m?o(e.length,String):[],f=h.length;for(var _ in e)!t&&!u.call(e,_)||m&&("length"==_||d&&("offset"==_||"parent"==_)||p&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||r(_,f))||h.push(_);return h}var o=n(482),s=n(483),a=n(486),l=n(487),r=n(478),c=n(489),d=Object.prototype,u=d.hasOwnProperty;e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){var i=n(484),o=n(485),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,r=i(function(){return arguments}())?i:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=r},function(e,t,n){function i(e){return s(e)&&o(e)==a}var o=n(453),s=n(485),a="[object Arguments]";e.exports=i},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var i=n(455),o=n(488),s="object"==typeof t&&t&&!t.nodeType&&t,a=s&&"object"==typeof e&&e&&!e.nodeType&&e,l=a&&a.exports===s,r=l?i.Buffer:void 0,c=r?r.isBuffer:void 0,d=c||o;e.exports=d}).call(t,n(177)(e))},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){var i=n(490),o=n(491),s=n(492),a=s&&s.isTypedArray,l=a?o(a):i;e.exports=l},function(e,t,n){function i(e){return a(e)&&s(e.length)&&!!l[o(e)]}var o=n(453),s=n(477),a=n(485),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,e.exports=i},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(456),o="object"==typeof t&&t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o,l=a&&i.process,r=function(){try{return l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=r}).call(t,n(177)(e))},function(e,t,n){function i(e){if(!o(e))return s(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(479),s=n(494),a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(495),o=i(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(2),d=i(c),u=n(497),p=i(u),m=n(505),h=i(m),f=n(544),_={file:null,loaded:0,total:0,progress:0,speed:0,hasFinish:!1,hasCancel:!1},g=function(e){function t(){var e,n,i,a;o(this,t);for(var r=arguments.length,c=Array(r),d=0;d<r;d++)c[d]=arguments[d];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),i.state=l({},_),i.onFileChecked=function(e,t){i.cancelUploadPromise=[],i.setState(l({},_)),(0,h.default)(l({},e,{onProgress:i.onProgress,onEmit:i.onEmit}),t).then(i.handleSuccess).catch(i.handleError)},i.onProgress=function(e,t,n){var o=100*e/t;i.setState({loaded:e,total:t,progress:o,speed:n})},i.handleSuccess=function(e){i.cancelUploadPromise=[],i.props.onChange(e),i.setState({hasFinish:!0})},i.handleError=function(){i.setState(l({},_,{hasCancel:!0}))},i.onEmit=function(e,t){"file"===t?(i.setState({file:e}),i.props.onChange({name:e.name})):i.cancelUploadPromise.push(e)},i.cancelUpload=function(){i.setState(l({},_,{hasCancel:!0,hasFinish:!1})),i.props.onChange({name:""}),i.handleCancelPromise()},i.handleCancelPromise=function(){var e=i.cancelUploadPromise;e&&e.length>0&&(0,p.default)(e,function(e){e("op_cancel")})},a=n,s(i,a)}return a(t,e),r(t,[{key:"renderProgressPanel",value:function(){var e=this.state,t=e.file,n=e.loaded,i=e.total,o=e.progress,s=e.speed,a=e.hasFinish;return o>=100&&!a&&(s=10.24,o=99.8),d.default.createElement("div",{className:"rc-video-upload__progress"},d.default.createElement("div",{className:"rc-video-upload__progress-item"},d.default.createElement("span",{className:"rc-video-upload__progress-item-close",onClick:this.cancelUpload},"×"),d.default.createElement("div",{className:"rc-video-upload__progress-item-progress",style:{width:o+"%"}}),d.default.createElement("div",{className:"rc-video-upload__progress-item-detail"},d.default.createElement("span",{className:"rc-video-upload__progress-item-detail-name"},t.name),d.default.createElement("span",{className:"rc-video-upload__progress-item-detail-speed"},100===o?null:"速度："+(0,f.formatFileSize)(s,2,"MB")+"/S"),d.default.createElement("span",{className:"rc-video-upload__progress-item-detail-total"},"已上传：",(0,f.formatFileSize)(n,2,"MB"),"/共",(0,f.formatFileSize)(i,2,"MB")),d.default.createElement("span",{className:"rc-video-upload__progress-item-detail-percent"},100==o?o:o.toFixed(1),"%"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,i=t.helpDesc,o=t.options,s=this.state,a=s.file;return s.hasCancel||null===a?d.default.createElement("div",{className:"zent-form__control-group"},d.default.createElement("div",{className:"zent-form__control-label"},n),d.default.createElement("div",{className:"zent-form__controls"},d.default.createElement("div",{className:"rc-video-upload__choose"},"+",d.default.createElement("input",{type:"file",placeholder:"添加 +",accept:o.accept,onChange:function(t){return e.onFileChecked(o,t)}})),d.default.createElement("p",{className:"zent-form__help-desc"},i))):d.default.createElement("div",null,this.renderProgressPanel())}}]),t}(c.Component);t.default=g,e.exports=t.default},function(e,t,n){function i(e,t){return(l(e)?o:s)(e,a(t))}var o=n(498),s=n(499),a=n(504),l=n(486);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){var i=n(500),o=n(503),s=o(i);e.exports=s},function(e,t,n){function i(e,t){return e&&o(e,t,s)}var o=n(501),s=n(480);e.exports=i},function(e,t,n){var i=n(502),o=i();e.exports=o},function(e,t){function n(e){return function(t,n,i){for(var o=-1,s=Object(t),a=i(t),l=a.length;l--;){var r=a[e?l:++o];if(n(s[r],r,s)===!1)break}return t}}e.exports=n},function(e,t,n){function i(e,t){return function(n,i){if(null==n)return n;if(!o(n))return e(n,i);for(var s=n.length,a=t?s:-1,l=Object(n);(t?a--:++a<s)&&i(l[a],a,l)!==!1;);return n}}var o=n(476);e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:o}var o=n(468);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return new Promise(function(n,i){var o=f.call(t.target.files);"function"==typeof e.onGetToken&&(x=e.onGetToken),t.target.value=null,C(e,o).then(function(t){if(t&&t.length>0){var s=o[0],l=null,r=null;e.onEmit(s,"file"),x(e,s).then(function(t){return r=t,s.size<20971520?y(e,s,r):k(e,s,r)}).then(function(t){return l=t,j(e,r)}).then(function(){n((0,d.default)({video_path:r.video_path},l))}).catch(function(t){"op_cancel"!==t&&(i(t),!e.silent&&a.default.error(t||"上传失败"))})}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(443),a=i(s),l=n(506),r=i(l),c=n(446),d=i(c),u=n(497),p=i(u),m=n(544),h=Array.prototype.forEach,f=Array.prototype.slice,_=function(e){return e},g=r.default.CancelToken,v=null,b=function(e,t,n){var i=e.formData,o=e.onUploadProgress;o=o||_;var s=(0,r.default)({url:n.api_url+n.video_path,method:"post",disableCsrfToken:!0,data:i,contentType:"multipart/form-data; charset=UTF-8",timeout:864e5,headers:{Authorization:n.token},cancelToken:new g(function(e){v=e}),onUploadProgress:o});return t.onEmit(v,"cancel"),s},w=function(e){var t=new FormData;return(0,p.default)(e,function(e,n){t.append(n,e)}),t},y=function(e,t,n){var i=+new Date,o=0;return b({formData:w({op:"upload",filecontent:t}),onUploadProgress:function(t){var n=+new Date,s=(n-i)/1e3,a=t.loaded,l=a-o,r=l/s;s>2&&(i=n,o=a),e.onProgress(a,t.total,r)}},e,n)},k=function(e,t,n){return new Promise(function(i,o){var s=t.size,a=e.sliceSize,l=null,r=[];b({formData:w({op:"upload_slice_init",filesize:s,slice_size:a})},e,n).then(function(i){l=i.session;for(var o=0,c=+new Date,d={},u=0;o<s;)!function(i){d[i]=0;var o=b({formData:w({op:"upload_slice_data",filecontent:t.slice(i,i+a),session:l,offset:i}),onUploadProgress:function(t){var n=0;d[i]=t.loaded,(0,p.default)(d,function(e){n+=e});var o=+new Date,a=(o-c)/1e3,l=n-u,r=l/a;a>5&&(c=o,u=n),e.onProgress(n,s,r)}},e,n);r.push(o)}(o),o+=a;return Promise.all(r)}).then(function(){return b({formData:w({op:"upload_slice_finish",filesize:s,session:l})},e,n)}).then(function(t){e.onProgress(s,s,0),i(t)}).catch(function(e){o(e)})})},x=function(e,t){return(0,m.commonAjax)(e.tokenUrl,{file_name:t.name})},j=function(e,t){return(0,m.commonAjax)(e.confirmUrl,{video_path:t.video_path})},S=function(e){return new Promise(function(t,n){var i=new FileReader;i.onload=function(){t(e)},i.onerror=function(){n(new Error("读取文件失败"))},i.readAsDataURL(e)})},C=function(e,t){var n=e.maxSize,i=[];return h.call(t,function(e){!n||e.size<=n?i.push(S(e)):a.default.error("视频文件最大不能超过"+(0,m.formatFileSize)(n))}),Promise.all(i)};e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if((0,d.default)(e)){if(t=t||{},t.url=e,(0,d.default)(t.url))return t}else if((0,p.default)(e)&&(0,d.default)(e.url))return e;throw new TypeError("ajax expects a url or an options object")}function s(e){return e.isJSONP||e.config&&"json"===e.config.responseType}function a(e,t){var n=o(e,t);void 0===n.timeout&&(n.timeout=1e4);var i=(0,r.default)(n,h),a=!!n.rawResponse;return i.then(function(e){var t=e.data;return s(e)?(void 0!==t.errcode&&(t.code=t.errcode,t.msg=t.errmsg),0==+t.code||void 0===t.code||t.success&&200==+t.code?Promise.resolve({json:!0,resp:t}):Promise.reject({json:!0,resp:t})):Promise.resolve({json:!1,resp:t})},function(e){var t=e.response;if(s(e)){if(t&&t.data)return Promise.reject({json:!0,resp:t.data});var n=e.message||"网络请求错误";return Promise.reject({json:!0,resp:{msg:n,code:99999}})}return Promise.reject({json:!1,resp:t||e.message})}).then(function(e){return a||!e.json?e.resp:e.resp.data},function(e){return a||!e.json?Promise.reject(e.resp):Promise.reject(e.resp.msg)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(507),r=i(l),c=n(541),d=i(c),u=n(542),p=i(u),m=function(){return"undefined"!=typeof window?window:void 0!==m?m:"undefined"!=typeof self?self:{}}(),h={transformRequest:function(e){var t=e.disableCsrfToken,n=(m._global||{}).csrf_token;if(n&&!t){if(e.data=e.data||{},!(0,p.default)(e.data))throw new TypeError("expects `data` to be a plain object when csrf token is enabled, but got "+JSON.stringify(e.data));e.data.csrf_token=n}return e.xhrFields&&e.xhrFields.withCredentials&&(e.withCredentials=!0,delete e.xhrFields),e}};a.CancelToken=r.default.CancelToken,a.isCancel=r.default.isCancel,t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(508);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(o).default}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return"jsonp"===e.dataType}function s(e){var t=e.jsonp,n=e.jsonpCallback,i={};return v.addEntry(i,"url",e.data?v.addQueryString(e.url,v.stringifyQueryString(e.data)):e.url),v.isString(t)&&v.addEntry(i,"param",t),v.isString(n)?v.addEntry(i,"name",n):v.isFunction(n)&&v.addEntry(i,"name",n()),v.addEntry(i,"timeout",e.timeout),v.addEntry(i,"cache",e.cache),v.addEntry(i,"prefix",e.prefix),i}function a(e){var t={};v.addEntry(t,"url",e.url),v.addEntry(t,"method",(e.method||e.type||"GET").toLowerCase()),v.addEntry(t,"timeout",0===e.timeout?void 0:e.timeout),v.addEntry(t,"auth.username",e.username),v.addEntry(t,"auth.password",e.password),v.addEntry(t,"responseType",e.dataType||"json"),v.addEntry(t,"withCredentials",e.withCredentials),v.addEntry(t,"headers",e.noXRequestedWithHeader?e.headers:v.assign({"X-Requested-With":"XMLHttpRequest"},e.headers)),v.addEntry(t,"onUploadProgress",e.onUploadProgress),v.addEntry(t,"onDownloadProgress",e.onDownloadProgress),v.addEntry(t,"cancelToken",e.cancelToken);var n=t.method,i=v.getHeaderContentType(e.contentType,e.headers);return"get"!==n&&"head"!==n||(v.addEntry(t,"paramsSerializer",v.stringifyQueryString),v.addEntry(t,"params",e.data),v.addEntry(t,"headers.Content-Type",i)),["post","put","patch","delete"].indexOf(n)!==-1&&(v.addEntry(t,"data",e.data),v.addEntry(t,"headers.Content-Type",i||"application/x-www-form-urlencoded; charset=UTF-8"),t.headers["Content-Type"].toLowerCase().indexOf("application/x-www-form-urlencoded")!==-1&&v.addEntry(t,"transformRequest",v.stringifyQueryString)),e.allowBigNumberInJSON&&v.addEntry(t,"transformResponse",[function(e){if("string"==typeof e)try{e=(0,h.default)(e)}catch(e){}return e}]),t}function l(e){var t=s(e);return new Promise(function(e,n){(0,_.default)(t.url,t,function(i,o){if(i)return n(v.assign(i,{message:"网络请求错误",headers:{},config:t,isJSONP:!0}));e({data:o,status:200,statusText:"OK",headers:{},config:t,isJSONP:!0})})})}function r(e){var t=a(e);return(0,p.default)(t)}function c(e){v.isUndefined(e.noXRequestedWithHeader)&&(e.noXRequestedWithHeader=!0)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transformRequest;return v.isFunction(n)&&(e=n(e)),c(e),o(e)?l(e):r(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(509),p=i(u),m=n(535),h=i(m),f=n(537),_=i(f),g=n(538),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g);d.CancelToken=p.default.CancelToken,d.isCancel=p.default.isCancel,t.default=d},function(e,t,n){e.exports=n(510)},function(e,t,n){"use strict";function i(e){var t=new a(e),n=s(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(511),s=n(512),a=n(514),l=n(515),r=i(l);r.Axios=a,r.create=function(e){return i(o.merge(l,e))},r.Cancel=n(532),r.CancelToken=n(533),r.isCancel=n(529),r.all=function(e){return Promise.all(e)},r.spread=n(534),e.exports=r,e.exports.default=r},function(e,t,n){"use strict";function i(e){return"[object Array]"===j.call(e)}function o(e){return"[object ArrayBuffer]"===j.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function l(e){return"string"==typeof e}function r(e){return"number"==typeof e}function c(e){return void 0===e}function d(e){return null!==e&&"object"==typeof e}function u(e){return"[object Date]"===j.call(e)}function p(e){return"[object File]"===j.call(e)}function m(e){return"[object Blob]"===j.call(e)}function h(e){return"[object Function]"===j.call(e)}function f(e){return d(e)&&h(e.pipe)}function _(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||i(e)||(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,i=arguments.length;n<i;n++)b(arguments[n],e);return t}function y(e,t,n){return b(t,function(t,i){e[i]=n&&"function"==typeof t?k(t,n):t}),e}var k=n(512),x=n(513),j=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:o,isBuffer:x,isFormData:s,isArrayBufferView:a,isString:l,isNumber:r,isObject:d,isUndefined:c,isDate:u,isFile:p,isBlob:m,isFunction:h,isStream:f,isURLSearchParams:_,isStandardBrowserEnv:v,forEach:b,merge:w,extend:y,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function i(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(515),s=n(511),a=n(526),l=n(527),r=n(530),c=n(531);i.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),e=s.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!r(e.url)&&(e.url=c(e.baseURL,e.url));var t=[l,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},s.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,n){return this.request(s.merge(n||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,n,i){return this.request(s.merge(i||{},{method:e,url:t,data:n}))}}),e.exports=i},function(e,t,n){(function(t){"use strict";function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(511),s=n(516),a={"Content-Type":"application/x-www-form-urlencoded"},l={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(517):void 0!==t&&(e=n(517)),e}(),transformRequest:[function(e,t){return s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){l.headers[e]={}}),o.forEach(["post","put","patch"],function(e){l.headers[e]=o.merge(a)}),e.exports=l}).call(t,n(96))},function(e,t,n){"use strict";var i=n(511);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},function(e,t,n){(function(t){"use strict";var i=n(511),o=n(518),s=n(521),a=n(522),l=n(523),r=n(519),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(524);e.exports=function(e){return new Promise(function(d,u){var p=e.data,m=e.headers
;i.isFormData(p)&&delete m["Content-Type"];var h=new XMLHttpRequest,f="onreadystatechange",_=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||l(e.url)||(h=new window.XDomainRequest,f="onload",_=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";m.Authorization="Basic "+c(g+":"+v)}if(h.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[f]=function(){if(h&&(4===h.readyState||_)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null;o(d,u,{data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:t,config:e,request:h}),h=null}},h.onerror=function(){u(r("Network Error",e,null,h)),h=null},h.ontimeout=function(){u(r("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var b=n(525),w=(e.withCredentials||l(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in h&&i.forEach(m,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),u(e),h=null)}),void 0===p&&(p=null),h.send(p)})}}).call(t,n(96))},function(e,t,n){"use strict";var i=n(519);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var i=n(520);e.exports=function(e,t,n,o,s){return i(new Error(e),t,n,o,s)}},function(e,t){"use strict";e.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e}},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(511);e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),s=a.join("&")}return s&&(e+=(e.indexOf("?")===-1?"?":"&")+s),e}},function(e,t,n){"use strict";var i=n(511);e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t&&(s[t]=s[t]?s[t]+", "+n:n)}),s):s}},function(e,t,n){"use strict";var i=n(511);e.exports=i.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=i.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function i(e){for(var t,i,s=String(e),a="",l=0,r=o;s.charAt(0|l)||(r="=",l%1);a+=r.charAt(63&t>>8-l%1*8)){if((i=s.charCodeAt(l+=.75))>255)throw new n;t=t<<8|i}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var i=n(511);e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,s,a){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(o)&&l.push("path="+o),i.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function i(){this.handlers=[]}var o=n(511);i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(511),s=n(528),a=n(529),l=n(515);e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||l.adapter)(e).then(function(t){return i(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(i(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var i=n(511);e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){"use strict";function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(532);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(536),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function e(e){return e.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):r[n]})}var t,n,o,a,l,r={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},c={go:function(){t="ok"},firstokey:function(){a=l,t="colon"},okey:function(){a=l,t="colon"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},d={go:function(){t="ok"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},u={"{":{go:function(){n.push({state:"ok"}),o={},t="firstokey"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o={},t="firstokey"},firstavalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"},avalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"}},"}":{firstokey:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},ocomma:function(){var e=n.pop();o[a]=l,l=o,o=e.container,a=e.key,t=e.state}},"[":{go:function(){n.push({state:"ok"}),o=[],t="firstavalue"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o=[],t="firstavalue"},firstavalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"},avalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"}},"]":{firstavalue:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},acomma:function(){var e=n.pop();o.push(l),l=o,o=e.container,a=e.key,t=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(o,a))throw new SyntaxError("Duplicate key '"+a+'"');t="ovalue"}},",":{ocomma:function(){o[a]=l,t="okey"},acomma:function(){o.push(l),t="avalue"}},true:{go:function(){l=!0,t="ok"},ovalue:function(){l=!0,t="ocomma"},firstavalue:function(){l=!0,t="acomma"},avalue:function(){l=!0,t="acomma"}},false:{go:function(){l=!1,t="ok"},ovalue:function(){l=!1,t="ocomma"},firstavalue:function(){l=!1,t="acomma"},avalue:function(){l=!1,t="acomma"}},null:{go:function(){l=null,t="ok"},ovalue:function(){l=null,t="ocomma"},firstavalue:function(){l=null,t="acomma"},avalue:function(){l=null,t="acomma"}}};return function(o,a){var r,p=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;t="go",n=[];try{for(;;){if(!(r=p.exec(o)))break;r[1]?u[r[1]][t]():r[2]?(l=(0,s.default)(r[2])?r[2]:+r[2],d[t]()):(l=e(r[3]),c[t]()),o=o.slice(r[0].length)}}catch(e){t=e}if("ok"!==t||/[^\u0020\t\n\r]/.test(o))throw t instanceof SyntaxError?t:new SyntaxError("JSON");return"function"==typeof a?function e(t,n){var o,s,r=t[n];if(r&&"object"===(void 0===r?"undefined":i(r)))for(o in l)Object.prototype.hasOwnProperty.call(r,o)&&(s=e(r,o),void 0!==s?r[o]=s:delete r[o]);return a.call(t,n,r)}({"":l},""):l}}();t.default=a},function(e,t){"use strict";function n(e){var t=void 0,n=void 0,o=void 0,s=e.trim();for("-"!==s[0]&&"+"!==s[0]||(s=s.slice(1)),(t=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(t<0&&(t=n),t+=+s.slice(n+1),s=s.substring(0,n)):t<0&&(t=s.length),n=0;48===s.charCodeAt(n);n++);for(o=s.length;48===s.charCodeAt(--o););return!!(s=s.slice(n,o+1))&&(t=t-n-1,s.length>15&&(e>i||e!==+e+"")||t<-308||t>308)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=9007199254740991},function(e,t,n){"use strict";function i(){}function o(e,t,n){function o(){f.parentNode&&f.parentNode.removeChild(f),window[d]=i,_&&(clearTimeout(_),_=void 0)}function s(){window[d]&&o()}a.isFunction(t)&&(n=t,t={}),t||(t={});var l=t.prefix||"__jp",c=t.cache||!1,d=t.name||l+(0,r.default)(),u=t.param||"callback",p=a.isNil(t.timeout)?6e4:t.timeout,m=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head,f=void 0,_=void 0;p&&(_=setTimeout(function(){o(),n&&n({status:408,statusText:"Request Time-out"})},p)),window[d]=function(e){o(),n&&n(null,e)};var g=c?"":"_="+Date.now();return e=a.addQueryString(e,m(u)+"="+m(d)+"&"+g),f=document.createElement("script"),h.parentNode.insertBefore(f,h),f.onerror=function(){o(),n&&n({status:400,statusText:"Bad Request"})},f.src=e,s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(538),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),l=n(540),r=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function i(e){return"[object Object]"===v.call(e)}function o(e){if(!e||"[object Object]"!==v.call(e))return!1;var t=Object.getPrototypeOf(e);if(!t)return!0;var n=b.call(t,"constructor")&&t.constructor;return"function"==typeof n&&w.call(n)===y}function s(e){return"[object String]"===v.call(e)}function a(e){return"[object Function]"===v.call(e)}function l(e){return void 0===e}function r(e){return null===e}function c(e){return void 0===e||null===e}function d(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var s=0;s<i.length;s++){var a=i[s];if(null!=a)for(var l in a)b.call(a,l)&&(t[l]=a[l])}return t}function u(e){return(0,g.default)(e)}function p(e,t){return e+=(~e.indexOf("?")?"&":"?")+t,e=e.replace("?&","?")}function m(e,t,n){if(!l(n)){for(var o=t.split("."),s=e,a=0;a<o.length-1;a++){var r=o[a];i(s[r])||(s[r]={}),s=s[r]}s[o[o.length-1]]=n}return e}function h(e,t){return e&&t?Object.keys(e).reduce(function(e,n,i){return t.indexOf(n)===-1&&(e[n]=i),e},{}):e}function f(e,t){if(e)return e;for(var n=Object.keys(t||{}),i=n.length,o=1;o<i;o++){var s=n[o];if("content-type"===s.toLowerCase())return t[s]}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=void 0,t.isObject=i,t.isPlainObject=o,t.isString=s,t.isFunction=a,t.isUndefined=l,t.isNull=r,t.isNil=c,t.assign=d,t.stringifyQueryString=u,t.addQueryString=p,t.addEntry=m,t.omit=h,t.getHeaderContentType=f;var _=n(539),g=function(e){return e&&e.__esModule?e:{default:e}}(_),v=Object.prototype.toString,b=t.hasOwn=Object.prototype.hasOwnProperty,w=b.toString,y=w.call(Object)},function(e,t,n){"use strict";function i(e,t,n){var o=void 0;if(Array.isArray(t))t.forEach(function(t,o){r.test(e)?n(e,t):i(e+"["+("object"===(void 0===t?"undefined":s(t))&&null!=t?o:"")+"]",t,n)});else if(l.isObject(t))for(o in t)l.hasOwn.call(t,o)&&i(e+"["+o+"]",t[o],n);else n(e,t)}function o(e){var t=void 0,n=[],o=function(e,t){var i=l.isFunction(t)?t():t;n[n.length]=c(e)+"="+c(null==i?"":i)};if(Array.isArray(e))e.forEach(function(e){o(e.name,e.value)});else for(t in e)l.hasOwn.call(e,t)&&i(t,e[t],o);return n.join("&")}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var a=n(538),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),r=/\[\]$/,c=encodeURIComponent},function(e,t){"use strict";function n(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+i[255&t]+i[t>>8&255]+i[t>>16&15|64]+i[t>>24&255]+i[63&n|128]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]+i[255&o]+i[o>>8&255]+i[o>>16&255]+i[o>>24&255]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;for(var i=[],o=0;o<256;o++)i[o]=(o<16?"0":"")+o.toString(16)},function(e,t,n){function i(e){return"string"==typeof e||!s(e)&&a(e)&&o(e)==l}var o=n(453),s=n(486),a=n(485),l="[object String]";e.exports=i},function(e,t,n){function i(e){if(!a(e)||o(e)!=l)return!1;var t=s(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==p}var o=n(453),s=n(543),a=n(485),l="[object Object]",r=Function.prototype,c=Object.prototype,d=r.toString,u=c.hasOwnProperty,p=d.call(Object);e.exports=i},function(e,t,n){var i=n(495),o=i(Object.getPrototypeOf,Object);e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){function e(){u.default.closeDialog(n)}var t=v(),n="shop_status";return _.indexOf(t)===-1||(u.default.openDialog({dialogId:n,title:"上传失败",children:c.default.createElement("div",null,"您的店铺",g[t],"，无法上传文件。想要更多存储空间，快来订购吧！"),footer:[c.default.createElement(m.default,{key:"1",href:window._global.url.www+"/member#chooseService",type:"primary"},"立即订购"),c.default.createElement(m.default,{key:"2",type:"primary",outline:!0,onClick:e},"我再想想")]}),!1)}function s(e,t,n){return e=+e||0,void 0===t&&(t=1),"GB"===n||e>=1073741824?(e/1073741824).toFixed(t)+" GB":"MB"===n||e>=1048576?(e/1048576).toFixed(t)+" MB":"KB"===n||e>=1024?(e/1024).toFixed(t)+" KB":e.toFixed(t)+" B"}function a(e){e=Math.max(0,(+e||0).toFixed(0));var t=e%60,n=(e-t)/60%60,i=(e-60*n-t)/3600,o=function(e){return e<10?"0"+e:e},s=[o(n),o(t)];return i>0&&s.unshift(o(i)),s.join(":")}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return(0,f.default)({url:e,method:n,xhrFields:{withCredentials:!0},data:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.handleShopStatus=o,t.formatFileSize=s,t.formatDuration=a,t.commonAjax=l;var r=n(2),c=i(r),d=n(3),u=i(d),p=n(441),m=i(p),h=n(506),f=i(h),_=["protect","close","pause"],g={protect:"已到期",close:"已打烊",pause:"已歇业"},v=function(){var e=void 0;try{e=window._global.isSuperStore?window._global.lifecycle.product_lifecycle.retail.current_status:window._global.lifecycle.product_lifecycle.wsc.current_status}catch(e){}return e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),c=i(r),d=n(324),u=i(d),p=n(546),m=i(p),h=n(322),f=i(h),_=n(615),g=i(_),v=n(544),b=u.default.getControlGroup,w=function(e){function t(){var e,n,i,a;o(this,t);for(var l=arguments.length,r=Array(l),c=0;c<l;c++)r[c]=arguments[c];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.onChange=function(e){if(e&&e[0]){var t=e[0];i.props.onChange({cover_width:t.width,cover_height:t.height,cover_url:t.attachment_url})}},a=n,s(i,a)}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,i=(0,f.default)({"rc-video-upload__cover-trigger":!0,"has-cover":!!n.cover_url});return c.default.createElement("div",{className:"rc-video-upload__cover"},n.cover_url?c.default.createElement("div",{className:"rc-video-upload__cover-img",style:{backgroundImage:"url("+(0,g.default)(n.cover_url,"!120x120.jpg")+")"}}):null,c.default.createElement(m.default,{materials:!0,className:"rc-video-upload__cover-upload",triggerClassName:i,maxAmount:1,kdtId:window._global.kdt_id,accept:"image/jpeg, image/png",onSuccess:this.onChange,onGetToken:function(){return(0,v.commonAjax)(t.imageTokenUrl)}}))}}]),t}(r.Component);t.default=b(w),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(547),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(2),u=i(d),p=n(548),m=i(p),h=n(310),f=i(h),_=n(3),g=i(_),v=n(549),b=i(v),w=n(612),y=i(w),k=n(613),x=i(k),j=f.default.TabPanel,S=function(e){return e},C=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showUpload=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.props,i=t.localOnly,o=t.maxAmount;i&&1===o||n.setState({visible:e})},n.state={visible:!1,activeId:"materials"},n.typeName="voice"===e.type?"语音":"图片",n.showUpload=n.showUpload.bind(n),n.onTabChange=n.onTabChange.bind(n),n.closePopup=n.closePopup.bind(n),n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.auto&&this.showUpload()}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0}},{key:"onTabChange",value:function(e){this.setState({activeId:e})}},{key:"closePopup",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.prefix,i=e.className,s=e.triggerClassName,a=e.tips,l=e.children,r=e.inline,c=e.materials,d=o(e,["trigger","prefix","className","triggerClassName","tips","children","inline","materials"]),p=this.state,h=p.visible,_=p.activeId,v=t;i===n+"-upload"&&(i="");var b=(0,m.default)([n+"-upload",i]);return i=(0,m.default)([b,{inline:r}]),u.default.createElement("div",{className:i},u.default.createElement("div",{className:s,onClick:this.showUpload.bind(this,!0)},l||v&&u.default.createElement(v,null)||u.default.createElement("span",null,"+"),d.localOnly&&1===d.maxAmount?u.default.createElement(x.default,d):""),u.default.createElement("p",{className:n+"-upload-tips"},a),u.default.createElement(g.default,{title:this.typeName+"选择",visible:h,className:b,onClose:this.closePopup},c?u.default.createElement(f.default,{activeId:_,onTabChange:this.onTabChange},this.renderMaterialsPopup(d),this.renderUploadPopup(d)):this.renderUploadPopup(d)))}},{key:"renderMaterialsPopup",value:function(e){var t=this.props,n=t.prefix,i=t.className;return t.materials?u.default.createElement(j,{tab:"我的"+this.typeName,id:"materials"},u.default.createElement(b.default,{prefix:n+"-upload",options:e,className:i,showUploadPopup:this.showUpload})):""}},{key:"renderUploadPopup",value:function(e){var t=this.props,n=t.prefix,i=t.accept,o=t.className,s=t.materials;return"voice"===e.type&&(i="audio/mpeg, audio/amr"),s?u.default.createElement(j,{tab:"本地上传",id:"upload"},u.default.createElement(y.default,{prefix:n+"-upload",options:e,accept:i,className:o,showUploadPopup:this.showUpload})):u.default.createElement(y.default,{prefix:n+"-upload",options:e,accept:i,className:o,showUploadPopup:this.showUpload})}}]),t}(d.Component);C.defaultProps={prefix:"rc",className:"",triggerClassName:"rc-upload-trigger",disabled:!1,url:"",maxSize:1048576,maxAmount:0,accept:"image/gif, image/jpeg, image/png",tips:"",localOnly:!1,materials:!1,type:"image",auto:!1,mediaListUrl:"//materials.youzan.com/media/mediaList.json",categoryListUrl:"//materials.youzan.com/category/categoryList.json",fetchUrl:"//materials.youzan.com/dock/fetch.json",tokenUrl:"//materials.youzan.com/dock/token.json",uploadUrl:"//upload.qbox.me",filterFiles:S,onSuccess:S,onError:S,onProgress:S,imgcdn:"",scope:"kdt_img",inline:!1,silent:!1,timeout:6e4,kdtId:(window._global||{}).kdt_id||0},t.default=C,e.exports=t.default},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)s.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var s={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(2),d=i(c),u=n(441),p=i(u),m=n(550),h=i(m),f=n(374),_=i(f),g=n(556),v=i(g),b=n(603),w=i(b),y=n(609),k=i(y),x=n(610),j=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mediaList:[],categoryList:[],count:0,currPageNo:1,categoryId:e.options.categoryId||"voice"===e.options.type?3:2},n.confirm=n.confirm.bind(n),n.getMediaList=n.getMediaList.bind(n),n.selectMedia=n.selectMedia.bind(n),n.inited=!1,n}return a(t,e),r(t,[{key:"componentWillMount",value:function(){this.getMediaList(),this.getCategoryList()}},{key:"getMediaList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.props.options,i=this.state.categoryId,o="voice"===n.type?10:21;return(0,v.default)({url:n.mediaListUrl,withCredentials:!0,noXRequestedWithHeader:!0,data:{p:t,pageSize:o,mediaType:n.type,categoryId:i}}).then(function(t){e.setState({count:t.count,currPageNo:t.currPageNo,mediaList:t.dataList||[]})})}},{key:"getCategoryList",value:function(){var e=this,t=this.props.options;return(0,v.default)({url:t.categoryListUrl,withCredentials:!0,noXRequestedWithHeader:!0,data:{mediaType:t.type}}).then(function(t){e.setState({categoryList:t||[]})})}},{key:"setCategoryId",value:function(e,t){this.state.categoryId=t.id,this.getMediaList()}},{key:"renderCategoryRegion",value:function(){var e=this.state,t=e.categoryList,n=e.categoryId;return d.default.createElement("div",{className:"category-list-region"},d.default.createElement(_.default,{data:t,value:n,optionValue:"id",optionText:"name",onChange:this.setCategoryId.bind(this)}))}},{key:"renderMediaRegion",value:function(){var e=this.props.options,t=this.state,n=t.mediaList,i=t.count,o=t.currPageNo,s="voice"===e.type?10:21;return d.default.createElement("div",{className:"attachment-list-region"},"voice"===e.type?d.default.createElement(k.default,{data:n,options:e,onSelectMedia:this.selectMedia,onPlayVoice:this.playVoice}):d.default.createElement(w.default,{data:n,options:e,onSelectMedia:this.selectMedia}),n.length>0?d.default.createElement("div",{className:"attachment-pagination"},d.default.createElement(h.default,{current:o,pageSize:s,totalItem:i,onChange:this.getMediaList})):"")}},{key:"renderFooterRegion",value:function(){var e=this.state.mediaList;return d.default.createElement("div",{className:"center"},d.default.createElement(p.default,{type:"primary",size:"large",disabled:0===e.filter(function(e){return e.selected}).length,onClick:this.confirm},"确定"))}},{key:"selectMedia",value:function(e){var t=this.props.options,n=this.state.mediaList,i=t.maxAmount,o=n.filter(function(e){return e.selected}).length;n.forEach(function(t){t.attachmentId===e.attachmentId?t.selected=!t.selected:t.selected&&i&&i<=o&&(t.selected=!1,o--)}),this.setState({mediaList:n})}},{key:"confirm",value:function(){var e=this.state.mediaList.filter(function(e){return e.selected}),t=this.props,n=t.options,i=t.showUploadPopup;"function"==typeof n.onSuccess&&(n.onSuccess(e.map(function(e){return(0,x.responseParse)(e)})),i(!1))}},{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.options;return d.default.createElement("div",null,d.default.createElement("div",{className:t+"-materials"},!n.categoryId&&this.renderCategoryRegion(),this.renderMediaRegion()),this.renderFooterRegion())}}]),t}(c.Component);j.defaultProps={options:{},className:""},t.default=j,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(95),g=i(_),v=n(105),b=i(v),w=n(551),y=i(w),k=n(555),x=i(k),j=g.default.number,S=g.default.func,C=g.default.string,T=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.state={currentPageSize:i.getCurrentPageSize(i.parsePageSize(i.props.pageSize))},i.setPageSize=function(e){i.setState({currentPageSize:parseInt(e,10)})},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getCurrentPageSize",value:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].isCurrent)return e[t].value;throw new Error("pageSize 数据有错误 "+e)}},{key:"parsePageSize",value:function(e){var t=void 0;if("number"==typeof e)t=[{value:e,isCurrent:!0}];else{var n=void 0;t=e.map(function(e){var t=void 0;return"number"==typeof e?t={value:e}:(t=e,t.isCurrent&&(n=!0)),t}),n||(t[0].isCurrent=!0)}return t}},{key:"componentWillReceiveProps",value:function(e){if(!(0,b.default)(this.props.pageSize,e.pageSize)){var t=this.parsePageSize(e.pageSize),n=this.getCurrentPageSize(t);this.setState({currentPageSize:n})}}},{key:"render",value:function(){var e=this.props,t=e.totalItem,n=e.current,i=e.pageSize,o=e.maxPageToShow;i=this.parsePageSize(i);var s=this.state.currentPageSize,a=Math.ceil(t/s);return n=n>1?n:1,n=n>a?a:n,f.default.createElement("div",{className:this.props.prefix+"-pagination "+this.props.className},f.default.createElement(x.default,{pageSize:i,currentPageSize:s,totalItem:t,setPageSize:this.setPageSize}),a>1&&f.default.createElement(y.default,{maxPageToShow:o,current:n,total:a,onChange:this.props.onChange||function(){}}))}}]),t}(h.PureComponent||h.Component);T.propTypes={className:C,prefix:C,current:j,totalItem:j,maxPageToShow:j,pageSize:function e(t){var e=t.pageSize;if("number"==typeof e){if(e<0)return new Error("pageSize必须大等于0")}else{if(!Array.isArray(e))return new Error("pageSize只能是数字或数组");if(0===e.length)return new Error("pageSize的长度必须大于0");if(!e.every(function(e){return"number"==typeof e||"object"===(void 0===e?"undefined":(0,s.default)(e))}))return new Error("pageSize每一项必须是数字或对象")}},onChange:S},T.defaultProps={prefix:"zent",pageSize:10,className:""},t.default=T},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(95),f=i(h),_=n(552),g=i(_),v=n(553),b=i(v),w=n(554),y=i(w),k=f.default.number,x=f.default.func,j=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,
c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.renderPager=function(e,t){return e?"input"===e.type?m.default.createElement(y.default,{key:t,content:e.content,total:e.total,onChange:i.props.onChange}):m.default.createElement(b.default,{key:t,content:e.content,current:e.current,target:e.target,type:e.type,onChange:i.props.onChange}):null},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.current,i=t.total,o=t.maxPageToShow;o&&o>0&&(i=Math.min(i,o));var s=g.default.getPages({current:n,total:i});return m.default.createElement("div",{className:"pagination-list"},s.map(function(t,n){return e.renderPager(t,n)}))}}]),t}(p.PureComponent||p.Component);j.propTypes={current:k,total:k,onChange:x},t.default=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={getPrev:function(e){return{content:"❮",target:1===e.current?null:e.current-1}},getNext:function(e){return{content:"❯",target:e.current===e.total?null:e.current+1}},getOmni:function(e,t){var n=!1,i=Math.floor(1.5);return e.total>5&&(n="prev"===t?e.current-i>2:e.current+i<e.total-1),n?{content:"...",type:"omni"}:null},getNumber:function(e,t){var n=void 0;return n={content:t+" ",target:t},e.current===t&&(n.current=!0),n},getJump:function(e){return e.total>5?{content:e.current+" ",total:e.total,type:"input"}:null},getPages:function(e){var t=[],n=Math.floor(1.5),i=void 0,o=void 0,s=0,a=void 0;for(t.push(this.getPrev(e)),t.push(this.getNumber(e,1)),t.push(this.getOmni(e,"prev")),e.total<=5?(i=1,o=e.total):(i=Math.max(1,e.current-n),o=Math.min(e.current+n,e.total),e.current<=n?(i=1,o=3):e.current>e.total-n&&(i=e.total-3+1,o=e.total)),s=i,a=o;s<=a;)s>1&&s<e.total&&t.push(this.getNumber(e,s)),s++;return t.push(this.getOmni(e,"post")),e.total>1&&t.push(this.getNumber(e,e.total)),t.push(this.getNext(e)),t.push(this.getJump(e)),t}};t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(95),f=i(h),_=n(196),g=i(_),v=f.default.string,b=f.default.number,w=f.default.func,y=f.default.bool,k=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={pageLabel:i.props.content},i.onClick=function(){var e=i.props,t=e.target,n=e.current,o=e.onChange;t&&!n&&o(t)},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({pageLabel:e.content})}},{key:"render",value:function(){var e=this.props,t=e.current,n=e.type,i=e.target,o=(0,g.default)({pager:!0,"pager--current":t,"pager--omni":"omni"===n,"pager--disabled":"omni"!==n&&!i});return m.default.createElement("div",{className:o,onClick:this.onClick},this.props.content)}}]),t}(p.PureComponent||p.Component);k.propTypes={content:v,current:y,onClick:w,target:b},t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={pageLabel:i.props.content.trim()},i.onKeyUp=function(e){if("Enter"===e.key){var t=e.target.value.trim();/^\d+$/g.test(t)&&(t<=0&&(t=0),t>i.props.total&&(t=i.props.total),i.props.onChange(parseInt(t,10)))}},i.onChange=function(e){i.setState({pageLabel:e.target.value.trim()})},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({pageLabel:e.content.trim()})}},{key:"render",value:function(){return m.default.createElement("div",{className:"pager pager--jump"},m.default.createElement("input",{className:"pager__input",value:this.state.pageLabel,onKeyUp:this.onKeyUp,onChange:this.onChange}),m.default.createElement("span",{className:"pager__suffix"},"/共",this.props.total,"页"))}}]),t}(p.PureComponent||p.Component);t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=i(o),a=n(44),l=i(a),r=n(48),c=i(r),d=n(84),u=i(d),p=n(2),m=i(p),h=n(95),f=i(h),_=n(374),g=i(_),v=f.default.number,b=f.default.array,w=f.default.oneOfType,y=f.default.func,k=g.default.Option,x=function(e){function t(){var e,n,i,o;(0,s.default)(this,t);for(var a=arguments.length,l=Array(a),r=0;r<a;r++)l[r]=arguments[r];return n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.changePageSize=function(e,t){i.props.setPageSize(t.text)},o=n,(0,c.default)(i,o)}return(0,u.default)(t,e),(0,l.default)(t,[{key:"renderSelect",value:function(){var e=this.props,t=e.pageSize,n=e.currentPageSize;return t=t.map(function(e){return""+e.value}),m.default.createElement("span",{className:"each"},"，每页",m.default.createElement(g.default,{value:n,onChange:this.changePageSize},t.map(function(e,t){return m.default.createElement(k,{key:t,value:e},e)})),"条")}},{key:"render",value:function(){var e=this.props,t=e.pageSize,n=e.totalItem,i=e.currentPageSize,o=Array.isArray(t)&&t.length>1;return m.default.createElement("span",{className:"zent-pagination__info"},m.default.createElement("span",{className:"total"},"共",n,"条"),!o&&m.default.createElement("span",{className:"each"},"，每页",i,"条"),o&&this.renderSelect())}}]),t}(p.PureComponent||p.Component);x.propTypes={totalItem:v,pageSize:w([v,b]),setPageSize:y},t.default=x},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if((0,d.default)(e)){if(t=t||{},t.url=e,(0,d.default)(t.url))return t}else if((0,p.default)(e)&&(0,d.default)(e.url))return e;throw new TypeError("ajax expects a url or an options object")}function s(e){return e.isJSONP||e.config&&"json"===e.config.responseType}function a(e,t){var n=o(e,t);void 0===n.timeout&&(n.timeout=1e4);var i=(0,r.default)(n,h),a=!!n.rawResponse;return i.then(function(e){var t=e.data;return s(e)?(void 0!==t.errcode&&(t.code=t.errcode,t.msg=t.errmsg),0==+t.code||void 0===t.code||t.success&&200==+t.code?Promise.resolve({json:!0,resp:t}):Promise.reject({json:!0,resp:t})):Promise.resolve({json:!1,resp:t})},function(e){var t=e.response;if(s(e)){if(t&&t.data)return Promise.reject({json:!0,resp:t.data});var n=e.message||"网络请求错误";return Promise.reject({json:!0,resp:{msg:n,code:99999}})}return Promise.reject({json:!1,resp:t||e.message})}).then(function(e){return a||!e.json?e.resp:e.resp.data},function(e){return a||!e.json?Promise.reject(e.resp):Promise.reject(e.resp.msg)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(557),r=i(l),c=n(591),d=i(c),u=n(600),p=i(u),m=function(){return"undefined"!=typeof window?window:void 0!==m?m:"undefined"!=typeof self?self:{}}(),h={transformRequest:function(e){var t=e.disableCsrfToken,n=(m._global||{}).csrf_token;if(n&&!t){if(e.data=e.data||{},!(0,p.default)(e.data))throw new TypeError("expects `data` to be a plain object when csrf token is enabled, but got "+JSON.stringify(e.data));e.data.csrf_token=n}return e.xhrFields&&e.xhrFields.withCredentials&&(e.withCredentials=!0,delete e.xhrFields),e}};a.CancelToken=r.default.CancelToken,a.isCancel=r.default.isCancel,t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(558);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(o).default}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return"jsonp"===e.dataType}function s(e){var t=e.jsonp,n=e.jsonpCallback,i={};return v.addEntry(i,"url",e.data?v.addQueryString(e.url,v.stringifyQueryString(e.data)):e.url),v.isString(t)&&v.addEntry(i,"param",t),v.isString(n)?v.addEntry(i,"name",n):v.isFunction(n)&&v.addEntry(i,"name",n()),v.addEntry(i,"timeout",e.timeout),v.addEntry(i,"cache",e.cache),v.addEntry(i,"prefix",e.prefix),i}function a(e){var t={};v.addEntry(t,"url",e.url),v.addEntry(t,"method",(e.method||e.type||"GET").toLowerCase()),v.addEntry(t,"timeout",0===e.timeout?void 0:e.timeout),v.addEntry(t,"auth.username",e.username),v.addEntry(t,"auth.password",e.password),v.addEntry(t,"responseType",e.dataType||"json"),v.addEntry(t,"withCredentials",e.withCredentials),v.addEntry(t,"headers",e.noXRequestedWithHeader?e.headers:v.assign({"X-Requested-With":"XMLHttpRequest"},e.headers)),v.addEntry(t,"onUploadProgress",e.onUploadProgress),v.addEntry(t,"onDownloadProgress",e.onDownloadProgress),v.addEntry(t,"cancelToken",e.cancelToken);var n=t.method,i=v.getHeaderContentType(e.contentType,e.headers);return"get"!==n&&"head"!==n||(v.addEntry(t,"paramsSerializer",v.stringifyQueryString),v.addEntry(t,"params",e.data),v.addEntry(t,"headers.Content-Type",i)),["post","put","patch","delete"].indexOf(n)!==-1&&(v.addEntry(t,"data",e.data),v.addEntry(t,"headers.Content-Type",i||"application/x-www-form-urlencoded; charset=UTF-8"),t.headers["Content-Type"].toLowerCase().indexOf("application/x-www-form-urlencoded")!==-1&&v.addEntry(t,"transformRequest",v.stringifyQueryString)),e.allowBigNumberInJSON&&v.addEntry(t,"transformResponse",[function(e){if("string"==typeof e)try{e=(0,h.default)(e)}catch(e){}return e}]),t}function l(e){var t=s(e);return new Promise(function(e,n){(0,_.default)(t.url,t,function(i,o){if(i)return n(v.assign(i,{message:"网络请求错误",headers:{},config:t,isJSONP:!0}));e({data:o,status:200,statusText:"OK",headers:{},config:t,isJSONP:!0})})})}function r(e){var t=a(e);return(0,p.default)(t)}function c(e){v.isUndefined(e.noXRequestedWithHeader)&&(e.noXRequestedWithHeader=!0)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transformRequest;return v.isFunction(n)&&(e=n(e)),c(e),o(e)?l(e):r(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(559),p=i(u),m=n(585),h=i(m),f=n(587),_=i(f),g=n(588),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g);d.CancelToken=p.default.CancelToken,d.isCancel=p.default.isCancel,t.default=d},function(e,t,n){e.exports=n(560)},function(e,t,n){"use strict";function i(e){var t=new a(e),n=s(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(561),s=n(562),a=n(564),l=n(565),r=i(l);r.Axios=a,r.create=function(e){return i(o.merge(l,e))},r.Cancel=n(582),r.CancelToken=n(583),r.isCancel=n(579),r.all=function(e){return Promise.all(e)},r.spread=n(584),e.exports=r,e.exports.default=r},function(e,t,n){"use strict";function i(e){return"[object Array]"===j.call(e)}function o(e){return"[object ArrayBuffer]"===j.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function l(e){return"string"==typeof e}function r(e){return"number"==typeof e}function c(e){return void 0===e}function d(e){return null!==e&&"object"==typeof e}function u(e){return"[object Date]"===j.call(e)}function p(e){return"[object File]"===j.call(e)}function m(e){return"[object Blob]"===j.call(e)}function h(e){return"[object Function]"===j.call(e)}function f(e){return d(e)&&h(e.pipe)}function _(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||i(e)||(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]=e}for(var t={},n=0,i=arguments.length;n<i;n++)b(arguments[n],e);return t}function y(e,t,n){return b(t,function(t,i){e[i]=n&&"function"==typeof t?k(t,n):t}),e}var k=n(562),x=n(563),j=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:o,isBuffer:x,isFormData:s,isArrayBufferView:a,isString:l,isNumber:r,isObject:d,isUndefined:c,isDate:u,isFile:p,isBlob:m,isFunction:h,isStream:f,isURLSearchParams:_,isStandardBrowserEnv:v,forEach:b,merge:w,extend:y,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function i(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(565),s=n(561),a=n(576),l=n(577),r=n(580),c=n(581);i.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),e=s.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!r(e.url)&&(e.url=c(e.baseURL,e.url));var t=[l,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},s.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,n){return this.request(s.merge(n||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,n,i){return this.request(s.merge(i||{},{method:e,url:t,data:n}))}}),e.exports=i},function(e,t,n){(function(t){"use strict";function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(561),s=n(566),a={"Content-Type":"application/x-www-form-urlencoded"},l={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(567):void 0!==t&&(e=n(567)),e}(),transformRequest:[function(e,t){return s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){l.headers[e]={}}),o.forEach(["post","put","patch"],function(e){l.headers[e]=o.merge(a)}),e.exports=l}).call(t,n(96))},function(e,t,n){"use strict";var i=n(561);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},function(e,t,n){(function(t){"use strict";var i=n(561),o=n(568),s=n(571),a=n(572),l=n(573),r=n(569),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(574);e.exports=function(e){return new Promise(function(d,u){var p=e.data,m=e.headers;i.isFormData(p)&&delete m["Content-Type"];var h=new XMLHttpRequest,f="onreadystatechange",_=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||l(e.url)||(h=new window.XDomainRequest,f="onload",_=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";m.Authorization="Basic "+c(g+":"+v)}if(h.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[f]=function(){if(h&&(4===h.readyState||_)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null;o(d,u,{data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:t,config:e,request:h}),h=null}},h.onerror=function(){u(r("Network Error",e,null,h)),h=null},h.ontimeout=function(){u(r("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var b=n(575),w=(e.withCredentials||l(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in h&&i.forEach(m,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),u(e),h=null)}),void 0===p&&(p=null),h.send(p)})}}).call(t,n(96))},function(e,t,n){"use strict";var i=n(569);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var i=n(570);e.exports=function(e,t,n,o,s){return i(new Error(e),t,n,o,s)}},function(e,t){"use strict";e.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e}},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(561);e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),s=a.join("&")}return s&&(e+=(e.indexOf("?")===-1?"?":"&")+s),e}},function(e,t,n){"use strict";var i=n(561);e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t&&(s[t]=s[t]?s[t]+", "+n:n)}),s):s}},function(e,t,n){"use strict";var i=n(561);e.exports=i.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=i.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function i(e){for(var t,i,s=String(e),a="",l=0,r=o;s.charAt(0|l)||(r="=",l%1);a+=r.charAt(63&t>>8-l%1*8)){if((i=s.charCodeAt(l+=.75))>255)throw new n;t=t<<8|i}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var i=n(561);e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,s,a){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(o)&&l.push("path="+o),i.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function i(){this.handlers=[]}var o=n(561);i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(561),s=n(578),a=n(579),l=n(565);e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||l.adapter)(e).then(function(t){return i(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(i(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var i=n(561);e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){"use strict";function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(582);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(586),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function e(e){return e.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):r[n]})}var t,n,o,a,l,r={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},c={go:function(){t="ok"},firstokey:function(){a=l,t="colon"},okey:function(){a=l,t="colon"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},d={go:function(){t="ok"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},u={"{":{go:function(){n.push({state:"ok"}),o={},t="firstokey"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o={},t="firstokey"},firstavalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"},avalue:function(){n.push({container:o,state:"acomma"}),o={},t="firstokey"}},"}":{firstokey:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},ocomma:function(){var e=n.pop();o[a]=l,l=o,o=e.container,a=e.key,t=e.state}},"[":{go:function(){n.push({state:"ok"}),o=[],t="firstavalue"},ovalue:function(){n.push({container:o,state:"ocomma",key:a}),o=[],t="firstavalue"},firstavalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"},avalue:function(){n.push({container:o,state:"acomma"}),o=[],t="firstavalue"}},"]":{firstavalue:function(){var e=n.pop();l=o,o=e.container,a=e.key,t=e.state},acomma:function(){var e=n.pop();o.push(l),l=o,o=e.container,a=e.key,t=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(o,a))throw new SyntaxError("Duplicate key '"+a+'"');t="ovalue"}},",":{ocomma:function(){o[a]=l,t="okey"},acomma:function(){o.push(l),t="avalue"}},true:{go:function(){l=!0,t="ok"},ovalue:function(){l=!0,t="ocomma"},firstavalue:function(){l=!0,t="acomma"},avalue:function(){l=!0,t="acomma"}},false:{go:function(){l=!1,t="ok"},ovalue:function(){l=!1,t="ocomma"},firstavalue:function(){l=!1,t="acomma"},avalue:function(){l=!1,t="acomma"}},null:{go:function(){l=null,t="ok"},ovalue:function(){l=null,t="ocomma"},firstavalue:function(){l=null,t="acomma"},avalue:function(){l=null,t="acomma"}}};return function(o,a){var r,p=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;t="go",n=[];try{for(;;){if(!(r=p.exec(o)))break;r[1]?u[r[1]][t]():r[2]?(l=(0,s.default)(r[2])?r[2]:+r[2],d[t]()):(l=e(r[3]),c[t]()),o=o.slice(r[0].length)}}catch(e){t=e}if("ok"!==t||/[^\u0020\t\n\r]/.test(o))throw t instanceof SyntaxError?t:new SyntaxError("JSON");return"function"==typeof a?function e(t,n){var o,s,r=t[n];if(r&&"object"===(void 0===r?"undefined":i(r)))for(o in l)Object.prototype.hasOwnProperty.call(r,o)&&(s=e(r,o),void 0!==s?r[o]=s:delete r[o]);return a.call(t,n,r)}({"":l},""):l}}();t.default=a},function(e,t){"use strict";function n(e){var t=void 0,n=void 0,o=void 0,s=e.trim();for("-"!==s[0]&&"+"!==s[0]||(s=s.slice(1)),(t=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(t<0&&(t=n),t+=+s.slice(n+1),s=s.substring(0,n)):t<0&&(t=s.length),n=0;48===s.charCodeAt(n);n++);for(o=s.length;48===s.charCodeAt(--o););return!!(s=s.slice(n,o+1))&&(t=t-n-1,s.length>15&&(e>i||e!==+e+"")||t<-308||t>308)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=9007199254740991},function(e,t,n){"use strict";function i(){}function o(e,t,n){function o(){f.parentNode&&f.parentNode.removeChild(f),window[d]=i,_&&(clearTimeout(_),_=void 0)}function s(){window[d]&&o()}a.isFunction(t)&&(n=t,t={}),t||(t={});var l=t.prefix||"__jp",c=t.cache||!1,d=t.name||l+(0,r.default)(),u=t.param||"callback",p=a.isNil(t.timeout)?6e4:t.timeout,m=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head,f=void 0,_=void 0;p&&(_=setTimeout(function(){o(),n&&n({status:408,statusText:"Request Time-out"})},p)),window[d]=function(e){o(),n&&n(null,e)};var g=c?"":"_="+Date.now();return e=a.addQueryString(e,m(u)+"="+m(d)+"&"+g),f=document.createElement("script"),h.parentNode.insertBefore(f,h),f.onerror=function(){o(),n&&n({status:400,statusText:"Bad Request"})},f.src=e,s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(588),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),l=n(590),r=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function i(e){return"[object Object]"===v.call(e)}function o(e){if(!e||"[object Object]"!==v.call(e))return!1;var t=Object.getPrototypeOf(e);if(!t)return!0;var n=b.call(t,"constructor")&&t.constructor;return"function"==typeof n&&w.call(n)===y}function s(e){return"[object String]"===v.call(e)}function a(e){return"[object Function]"===v.call(e)}function l(e){return void 0===e}function r(e){return null===e}function c(e){return void 0===e||null===e}function d(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var s=0;s<i.length;s++){var a=i[s];if(null!=a)for(var l in a)b.call(a,l)&&(t[l]=a[l])}return t}function u(e){return(0,g.default)(e)}function p(e,t){return e+=(~e.indexOf("?")?"&":"?")+t,e=e.replace("?&","?")}function m(e,t,n){if(!l(n)){for(var o=t.split("."),s=e,a=0;a<o.length-1;a++){var r=o[a];i(s[r])||(s[r]={}),s=s[r]}s[o[o.length-1]]=n}return e}function h(e,t){return e&&t?Object.keys(e).reduce(function(e,n,i){return t.indexOf(n)===-1&&(e[n]=i),e},{}):e}function f(e,t){if(e)return e;for(var n=Object.keys(t||{}),i=n.length,o=1;o<i;o++){var s=n[o];if("content-type"===s.toLowerCase())return t[s]}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=void 0,t.isObject=i,t.isPlainObject=o,t.isString=s,t.isFunction=a,t.isUndefined=l,t.isNull=r,t.isNil=c,t.assign=d,t.stringifyQueryString=u,t.addQueryString=p,t.addEntry=m,t.omit=h,t.getHeaderContentType=f;var _=n(589),g=function(e){return e&&e.__esModule?e:{default:e}}(_),v=Object.prototype.toString,b=t.hasOwn=Object.prototype.hasOwnProperty,w=b.toString,y=w.call(Object)},function(e,t,n){"use strict";function i(e,t,n){var o=void 0;if(Array.isArray(t))t.forEach(function(t,o){r.test(e)?n(e,t):i(e+"["+("object"===(void 0===t?"undefined":s(t))&&null!=t?o:"")+"]",t,n)});else if(l.isObject(t))for(o in t)l.hasOwn.call(t,o)&&i(e+"["+o+"]",t[o],n);else n(e,t)}function o(e){var t=void 0,n=[],o=function(e,t){var i=l.isFunction(t)?t():t;n[n.length]=c(e)+"="+c(null==i?"":i)};if(Array.isArray(e))e.forEach(function(e){o(e.name,e.value)});else for(t in e)l.hasOwn.call(e,t)&&i(t,e[t],o);return n.join("&")}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var a=n(588),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),r=/\[\]$/,c=encodeURIComponent},function(e,t){"use strict";function n(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+i[255&t]+i[t>>8&255]+i[t>>16&15|64]+i[t>>24&255]+i[63&n|128]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]+i[255&o]+i[o>>8&255]+i[o>>16&255]+i[o>>24&255]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;for(var i=[],o=0;o<256;o++)i[o]=(o<16?"0":"")+o.toString(16)},function(e,t,n){function i(e){return"string"==typeof e||!s(e)&&a(e)&&o(e)==l}var o=n(592),s=n(598),a=n(599),l="[object String]";e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?r:l:c&&c in Object(e)?s(e):a(e)}var o=n(593),s=n(596),a=n(597),l="[object Null]",r="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(594),o=i.Symbol;e.exports=o},function(e,t,n){var i=n(595),o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")();e.exports=s},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=a.call(e,r),n=e[r];try{e[r]=void 0}catch(e){}var i=l.call(e);return t?e[r]=n:delete e[r],i}var o=n(593),s=Object.prototype,a=s.hasOwnProperty,l=s.toString,r=o?o.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){if(!a(e)||o(e)!=l)return!1;var t=s(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==p}var o=n(592),s=n(601),a=n(599),l="[object Object]",r=Function.prototype,c=Object.prototype,d=r.toString,u=c.hasOwnProperty,p=d.call(Object);e.exports=i},function(e,t,n){
var i=n(602),o=i(Object.getPrototypeOf,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=i(o),a=n(604),l=i(a),r=n(606),c=i(r);t.default=function(e){return s.default.createElement("ul",{className:"image-list"},e.data.length>0?e.data.map(function(t,n){return s.default.createElement("li",{key:n,className:"image-item",onClick:e.onSelectMedia.bind(void 0,t)},s.default.createElement("div",{className:"image-box",style:{backgroundImage:"url("+(0,c.default)(t.attachmentFullUrl,"!240x240.jpg",{imgcdn:e.options.imgcdn})+")"}}),s.default.createElement("div",{className:"image-meta"},t.width,"*",t.height),s.default.createElement("div",{className:"image-title-wrap"},s.default.createElement("p",{className:"image-title"},t.attachmentTitle.substr(0,t.attachmentTitle.length-6)),s.default.createElement("p",{className:"image-title-ext"},t.attachmentTitle.substr(-6))),t.selected?s.default.createElement("div",{className:"attachment-selected"},s.default.createElement(l.default,{type:"check"})):"")}):s.default.createElement("div",{style:{color:"#999",textAlign:"center",paddingTop:"130px",fontSize:"12px"}},"当前暂无图片"))},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(605),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(94),l=i(a),r=n(43),c=i(r),d=n(44),u=i(d),p=n(48),m=i(p),h=n(84),f=i(h),_=n(2),g=i(_),v=n(95),b=i(v),w=n(196),y=i(w),k=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,i=e.spin,o=(0,l.default)(e,["type","className","spin"]),a=(0,y.default)("zenticon","zenticon-"+t,n,{"zenticon-spin":i});return g.default.createElement("i",(0,s.default)({className:a},o))}}]),t}(_.PureComponent||_.Component);k.propTypes={type:b.default.string.isRequired,className:b.default.string,spin:b.default.bool},k.defaultProps={className:"",spin:!1},t.default=k},function(e,t,n){var i,o,s;!function(a,l){o=[e,t,n(607)],i=l,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){if(e.match(/^data:/i))return e;n.imgcdn||n.imgqn||(n.imgcdn=window._global.url.imgqn||window._global.url.imgcdn);var i=n.imgcdn||n.imgqn||"https://img.yzcdn.cn",s=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/];t=t||"";for(var a=0;a<s.length;a++)e=e.replace(s[a],i);if(e=e.replace("imgqntest.koudaitong.com","dn-kdt-img-test.qbox.me"),e.match(/^(https?:)?\/\//i)){if(!e.match(i)&&!e.match("dn-kdt-img-test.qbox.me"))return e;e.match("!")||(e=""+e+t)}else e=i+"/"+e+t;return n.toWebp!==!1&&(e=o.default.toWebp(e)),e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i,e.exports=t.default})},function(e,t,n){var i,o,s;!function(a,l){o=[e,t,n(608)],i=l,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t,n){"use strict";function i(e,t){var n=/(\?imageView2\/\d\/w\/\d+\/h\/\d+\/q\/\d+\/format\/)(\w+)/,i=void 0;if(i=e,n.test(e)){var o=e.match(n)[2];t?"gif"!==o&&"webp"!==o&&(i=e.replace(n,"$1webp")):"webp"===o&&(i=e.replace(n,"$1jpg"))}return i}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={};a.toWebp=function(){var e=/\.([^.!]+)!([0-9]{1,4})x([0-9]{1,4})q?([0-9]{0,2}|100)?(\+2x)?\..+/,t=!1;try{t="ok"===window.localStorage.getItem("canwebp")}catch(e){}return function(n){var o=n,s=1,a=o.match(e);return t?a&&a.length>=4?("+2x"===a[5]&&(s=2),o=o.replace(e,".")+a[1]+"?imageView2/2/w/"+parseInt(a[2],10)*s+"/h/"+parseInt(a[3],10)*s+"/q/"+(a[4]||75)+"/format/"+("gif"===a[1]?"gif":"webp")):o=i(o,!0):a&&a.length>=4?("+2x"===a[5]&&(s=2),o=o.replace(e,".")+a[1]+"?imageView2/2/w/"+parseInt(a[2],10)*s+"/h/"+parseInt(a[3],10)*s+"/q/"+(a[4]||75)+"/format/"+("webp"===a[1]?"jpg":a[1])):o=i(o,!1),o}}(),a.checkCanWebp=function(){var e=function(e){var t=new Image;t.onload=t.onerror=function(){e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"};return function(){if("object"===s(window.localStorage))try{var t=localStorage.getItem("canwebp");"ok"===t?(0,o.default)("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650}):"no"!==t&&e(function(e){localStorage.setItem("canwebp",e?"ok":"no"),e&&(0,o.default)("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650})})}catch(e){}}}(),t.default=a,e.exports=t.default})},function(e,t,n){var i,o,s;!function(n,a){o=[e,t],i=a,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=new Date,t=+e,n=function(e){var t=document.cookie,n="\\b"+e+"=",i=t.search(n);if(i<0)return"";i+=n.length-2;var o=t.indexOf(";",i);return o<0&&(o=t.length),t.substring(i,o)||""},i=function(e,t,n){if(!e)return"";var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(encodeURIComponent(o)+"="+(n?encodeURIComponent(e[o]):e[o]));return i.join(t||",")};return function(o,s){if(void 0===s)return n(o);if("string"==typeof s||s instanceof String){if(s)return document.cookie=o+"="+s+";",s;s={expires:-100}}s=s||{};var a=o+"="+(s.value||"")+";";delete s.value,void 0!==s.expires&&(e.setTime(t+864e5*s.expires),s.expires=e.toGMTString()),a+=i(s,";"),document.cookie=a}}();t.default=n,e.exports=t.default})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(2),d=i(c),u=n(548),p=i(u),m=n(604),h=i(m),f=n(606),_=i(f),g=n(610),v=n(611),b=i(v),w=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,playing:!1,src:"",currentId:0},n.loadingHandler=n.loadingHandler.bind(n),n.playingHandler=n.playingHandler.bind(n),n.stopHandler=n.stopHandler.bind(n),n}return a(t,e),r(t,[{key:"stopPlayer",value:function(){this.player&&this.player.stop()}},{key:"loadingHandler",value:function(){this.setState({loading:!0,playing:!1})}},{key:"playingHandler",value:function(){this.setState({loading:!1,playing:!0})}},{key:"stopHandler",value:function(){this.setState({loading:!1,playing:!1})}},{key:"playVoice",value:function(e,t){var n=this;if(t.stopPropagation(),e.playing)return e.playing=!1,void this.stopPlayer();this.stopPlayer(),e.playing=!0,this.setState({src:(0,_.default)(e.attachmentUrl,"!64k.mp3",{imgcdn:this.props.options.imgcdn}),currentId:e.attachmentId},function(){n.player.play()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.onSelectMedia,o=this.state,s=o.src,a=o.loading,l=o.playing,r=o.currentId;return d.default.createElement("div",null,d.default.createElement("ul",{className:"voice-list"},n.length>0?n.map(function(t,n){var o=t.meta,s=void 0,c=(0,p.default)(["voice-icon",{loading:a&&t.attachmentId===r,playing:l&&t.attachmentId===r}]);return o&&o.format&&o.format.duration&&(s=o.format.duration),d.default.createElement("li",{key:n,className:"voice-item",onClick:i.bind(e,t)},d.default.createElement("div",{className:c,onClick:e.playVoice.bind(e,t)},t.selected?d.default.createElement("div",{className:"attachment-selected"},d.default.createElement(h.default,{type:"check"})):""),d.default.createElement("div",{className:"voice-name"},t.attachmentTitle),d.default.createElement("div",{className:"voice-createtime"},t.createTime),d.default.createElement("div",{className:"voice-size"},(0,g.formatFileSize)(t.attachmentSize)),d.default.createElement("div",{className:"voice-duration"},s?(0,g.formatDuration)(s):""))}):d.default.createElement("div",{style:{color:"#999",textAlign:"center",paddingTop:"130px",fontSize:"12px"}},"当前暂无语音")),d.default.createElement(b.default,{src:s,ref:function(t){return e.player=t},onLoading:this.loadingHandler,onPlaying:this.playingHandler,onStop:this.stopHandler}))}}]),t}(c.Component);t.default=w,e.exports=t.default},function(e,t){"use strict";function n(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function i(e,t){return e=+e||0,void 0===t&&(t=1),e>=1073741824?(e/1073741824).toFixed(t)+" GB":e>=1048576?(e/1048576).toFixed(t)+" MB":e>=1024?(e/1024).toFixed(t)+" KB":e.toFixed(t)+" B"}function o(e){e=Math.max(0,(+e||0).toFixed(0));var t=e%60,n=(e-t)/60%60,i=(e-60*n-t)/3600,o=function(e){return e<10?"0"+e:e},s=[o(n),o(t)];return i>0&&s.unshift(o(i)),s.join(":")}function s(e){var t=e.attachmentFullUrl,i=e.attachmentId,o=e.attachmentSize,s=e.attachmentTitle,a=e.attachmentUrl,r=e.categoryId,c=e.createTime,d=e.fileExt,u=e.isDelete,p=e.kdtId,m=e.mediaExpireTime,h=e.mediaId,f=e.mediaType,_=e.thumbUrl,g=n(e,["attachmentFullUrl","attachmentId","attachmentSize","attachmentTitle","attachmentUrl","categoryId","createTime","fileExt","isDelete","kdtId","mediaExpireTime","mediaId","mediaType","thumbUrl"]);return l({attachment_file:a||e.attachment_file,attachment_full_url:t||e.attachment_full_url,attachment_id:""+i||e.attachment_id,attachment_size:""+o||e.attachment_size,attachment_title:s||e.attachment_title,attachment_url:t||e.attachment_url,category_id:r||e.category_id,create_time:c||e.create_time,file_ext:d||e.file_ext,is_delete:""+u||e.is_delete,kdt_id:""+p||e.kdt_id,media_expire_time:m||e.media_expire_time,media_id:""+h||e.media_id,media_type:f||e.media_type,thumb_file:a||e.thumb_file,thumb_url:_||e.thumb_url},g)}function a(e){return!!e&&"function"==typeof(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).then}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.formatFileSize=i,t.formatDuration=o,t.responseParse=s,t.isPromiseLike=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(r),d=function(e){return e},u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"play",value:function(){var e=this.props,t=e.src,n=e.onLoading;this.stop(),this.audio.pause(),this.audio.src=t,n()}},{key:"stop",value:function(){this.audio.pause(),this.props.onStop()}},{key:"componentDidMount",value:function(){var e=this;this.audio.oncanplay=function(){e.props.onPlaying(),e.audio.play()},this.audio.onended=function(){e.props.onStop()},this.audio.onerror=function(){e.props.onStop()}}},{key:"render",value:function(){var e=this;return c.default.createElement("audio",{ref:function(t){return e.audio=t},id:"__audio_player",preload:"",type:"audio/mpeg",src:""})}}]),t}(r.Component);u.defaultProps={onLoading:d,onPlaying:d,onStop:d},t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(2),u=i(d),p=n(441),m=i(p),h=n(362),f=i(h),_=n(443),g=i(_),v=n(613),b=i(v),w=n(614),y=i(w),k=n(610),x=n(556),j=i(x),S=Array.prototype.forEach,C=Array.prototype.slice,T=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={networkImage:e.networkImage,networkUploading:e.networkUploading,localUploading:e.localUploading,buttonText:e.buttonText,localFiles:[]},n.networkUrl="",n.confirmNetworkUrl=n.confirmNetworkUrl.bind(n),n.networkUrlChanged=n.networkUrlChanged.bind(n),n.processFiles=n.processFiles.bind(n),n.uploadLocalImages=n.uploadLocalImages.bind(n),n.fileProgressHandler=n.fileProgressHandler.bind(n),n}return a(t,e),c(t,[{key:"renderNetworkRegion",value:function(e){var t=e.prefix,n=this.state,i=n.networkImage,o=n.networkUploading,s=n.buttonText;return u.default.createElement("div",{className:t+"-network-image-region"},u.default.createElement("div",{className:t+"-title"},"网络图片："),u.default.createElement("div",{className:t+"-content"},u.default.createElement("div",{className:t+"-input-append"},u.default.createElement(f.default,{type:"text",placeholder:"请添加网络图片地址",onChange:this.networkUrlChanged})),u.default.createElement(m.default,{type:"primary",outline:!0,loading:o,onClick:this.confirmNetworkUrl},s),u.default.createElement("div",{className:t+"-image-preview"},u.default.createElement("img",{src:i.attachment_url,alt:"",role:"presentation"}))))}},{key:"renderLocalUploadRegion",value:function(e){var t=this,n=e.prefix,i=e.accept,o=e.options,s=this.state.localFiles;return u.default.createElement("div",{className:n+"-local-image-region"},u.default.createElement("div",{className:n+"-title"},"本地","voice"===o.type?"音频":"图片","："),u.default.createElement("div",{className:n+"-content"},u.default.createElement("div",null,u.default.createElement("ul",{className:"image-list upload-local-image-list ui-sortable"},s.map(function(e,n){return u.default.createElement("li",{key:n,className:"upload-local-image-item"},u.default.createElement("div",{className:"image-box",style:{backgroundImage:"url("+e.src+")"}}),u.default.createElement("span",{className:"close-modal small",onClick:t.removeLocalImage.bind(t,e)},"×"),e.progress?u.default.createElement("div",{className:"image-progress"},e.progress.toFixed(1)+"%"):"")}))),!o.maxAmount||s.length<o.maxAmount?u.default.createElement("div",{className:n+"-add-local-image-button pull-left"},"+",u.default.createElement(b.default,r({},e.options,{accept:i,onChange:this.processFiles}))):"",u.default.createElement("div",{className:n+"-local-tips c-gray"},"仅支持",i.replace(/image\/?|audio\/?/g,"").replace(/, ?/g,"、")+" "+i.split(",").length,"种格式, 大小不超过",(0,k.formatFileSize)(o.maxSize))))}},{key:"renderFooterRegion",value:function(){var e=this.state,t=e.localUploading,n=e.localFiles;return u.default.createElement("div",{className:"text-center"},u.default.createElement(m.default,{type:"primary",size:"large",disabled:0===n.length,loading:t,onClick:this.uploadLocalImages},"确定"))}},{key:"removeLocalImage",value:function(e){var t=this.state.localFiles;t.splice(e,1),this.setState({localFiles:t})}},{key:"uploadLocalImages",value:function(){var e=this,t=this.props,n=t.options,i=t.showUploadPopup,o=this.state.localFiles,s=o.map(function(e){return e.file});this.setState({localUploading:!0}),(0,y.default)(n,{target:{files:s},onProgress:this.fileProgressHandler}).then(function(){e.setState({localFiles:[],localUploading:!1}),i(!1)}).catch(function(){e.setState({localUploading:!1})})}},{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.options;return u.default.createElement("div",null,u.default.createElement("div",{className:t+"-container"},!n.localOnly&&"voice"!==n.type&&this.renderNetworkRegion(this.props),this.renderLocalUploadRegion(this.props)),this.renderFooterRegion())}},{key:"networkUrlChanged",value:function(e){this.networkUrl=e.target.value}},{key:"iteratorFiles",value:function(e){var t=this,n=this.props.options,i=n.maxSize,o=n.silent,s=n.maxAmount;S.call(e,function(e,a){if(s&&a>=s)return!o&&g.default.error("已经自动过滤超过"+n.maxAmount+"张的图片文件"),!1;!i||e.size<=i?t.addFile(e):!o&&g.default.error("已经自动过滤大于"+(0,k.formatFileSize)(i)+"的图片文件")})}},{key:"processFiles",value:function(e){var t=this.props.options,n=C.call(e.target.files);this.uploadFiles=n;var i=t.filterFiles(n);(0,k.isPromiseLike)(i)?i.then(this.iteratorFiles,t.onError):(n=i,this.iteratorFiles(n))}},{key:"fileProgressHandler",value:function(e,t){var n=this.state.localFiles;n[e].progress=t,this.setState(n)}},{key:"addFile",value:function(e){var t=this,n=new FileReader,i=this.state.localFiles;n.onload=function(n){i.push({src:n.target.result,file:e}),t.setState({localFiles:i})},n.readAsDataURL(e)}},{key:"confirmNetworkUrl",value:function(){var e=this,t=this.props,n=t.options,i=t.showUploadPopup;if(!this.networkUrl)return!1;this.setState({networkUploading:!0,buttonText:"提取中..."}),(0,j.default)({url:n.fetchUrl,method:"post",withCredentials:!0,noXRequestedWithHeader:!0,data:{attachment_url:this.networkUrl,kdt_id:n.kdtId,categoryId:2,scope:n.scope}}).then(function(t){e.setState({networkImage:{},networkUploading:!1,buttonText:"提取"}),n.onSuccess([t]),i(!1)},function(){!n.silent&&g.default.error("提取失败，请确认图片地址是否正确"),e.setState({networkUploading:!1,buttonText:"提取"}),n.onError()})}}]),t}(d.Component);T.defaultProps={networkImage:{},networkUploading:!1,buttonText:"提取",options:{},className:""},t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement("input",{type:"file",placeholder:"添加 +",multiple:1!==e.maxAmount,accept:e.accept,onChange:e.onChange||r.default.bind(this,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(2),a=i(s),l=n(614),r=i(l);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=this;return new Promise(function(i,o){var a=g.call(t.target.files),r=e.filterFiles(a);u=[],t.target.value=null,(0,d.isPromiseLike)(r)?r.then(_.bind(null,e),e.onError):(a=r,_(e,a)),"function"==typeof e.onGetToken&&(m=e.onGetToken),m(e).then(function(r){var c=r.uptoken||r,m=[];a=u;!function r(u){a[u]?p(s({},e,{onProgress:function(i){return function(o){"function"==typeof t.onProgress&&t.onProgress.call(n,i,o),"function"==typeof e.onProgress&&e.onProgress(o,i)}}(u)}),a[u],c).then(function(e){e=(0,d.responseParse)(e),m.push(e),r(u)}).catch(function(t){o(t),!e.silent&&l.default.error("上传失败"),e.onError(t)}):m.length>0&&(i(m),!e.silent&&l.default.success("上传成功"),e.onSuccess(m)),u++}(0)}).catch(function(t){o(t),!e.silent&&l.default.error("上传失败"),e.onError(t)})})}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=o;var a=n(443),l=i(a),r=n(556),c=i(r),d=n(610),u=[],p=function(e,t,n){var i=new FormData;return t=t.file,i.append("token",n),i.append("file",t),(0,c.default)({url:e.uploadUrl,method:"post",disableCsrfToken:!0,data:i,contentType:"multipart/form-data; charset=UTF-8",timeout:e.timeout,onUploadProgress:function(t){e.onProgress(100*t.loaded/t.total)}})},m=function(e){return(0,c.default)({url:e.tokenUrl,method:"post",xhrFields:{withCredentials:!0},noXRequestedWithHeader:!0,data:{kdt_id:e.kdtId,scope:e.scope}})},h=function(e){var t=new FileReader;t.onload=function(t){u.push({src:t.target.result,file:e})},t.readAsDataURL(e)},f=Array.prototype.forEach,_=function(e,t){var n=e.maxSize;f.call(t,function(t){!n||t.size<=n?h(t):!e.silent&&l.default.error("已经自动过滤大于"+(0,d.formatFileSize)(n)+"的图片文件")})},g=Array.prototype.slice;e.exports=t.default},function(e,t,n){var i,o,s;!function(a,l){o=[e,t,n(616)],i=l,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){if(e.match(/^data:/i))return e;n.imgcdn||n.imgqn||(n.imgcdn=window._global.url.imgqn||window._global.url.imgcdn);var i=n.imgcdn||n.imgqn||"https://img.yzcdn.cn",s=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/];t=t||"";for(var a=0;a<s.length;a++)e=e.replace(s[a],i);if(e=e.replace("imgqntest.koudaitong.com","dn-kdt-img-test.qbox.me"),e.match(/^(https?:)?\/\//i)){if(!e.match(i)&&!e.match("dn-kdt-img-test.qbox.me"))return e;e.match("!")||(e=""+e+t)}else e=i+"/"+e+t;return n.toWebp!==!1&&(e=o.default.toWebp(e)),e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i,e.exports=t.default})},function(e,t,n){var i,o,s;!function(a,l){o=[e,t,n(617)],i=l,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t,n){"use strict";function i(e,t){var n=/(\?imageView2\/\d\/w\/\d+\/h\/\d+\/q\/\d+\/format\/)(\w+)/,i=void 0;if(i=e,n.test(e)){var o=e.match(n)[2];t?"gif"!==o&&"webp"!==o&&(i=e.replace(n,"$1webp")):"webp"===o&&(i=e.replace(n,"$1jpg"))}return i}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={};a.toWebp=function(){var e=/\.([^.!]+)!([0-9]{1,4})x([0-9]{1,4})q?([0-9]{0,2}|100)?(\+2x)?\..+/,t=!1;try{t="ok"===window.localStorage.getItem("canwebp")}catch(e){}return function(n){var o=n,s=1,a=o.match(e);return t?a&&a.length>=4?("+2x"===a[5]&&(s=2),o=o.replace(e,".")+a[1]+"?imageView2/2/w/"+parseInt(a[2],10)*s+"/h/"+parseInt(a[3],10)*s+"/q/"+(a[4]||75)+"/format/"+("gif"===a[1]?"gif":"webp")):o=i(o,!0):a&&a.length>=4?("+2x"===a[5]&&(s=2),o=o.replace(e,".")+a[1]+"?imageView2/2/w/"+parseInt(a[2],10)*s+"/h/"+parseInt(a[3],10)*s+"/q/"+(a[4]||75)+"/format/"+("webp"===a[1]?"jpg":a[1])):o=i(o,!1),o}}(),a.checkCanWebp=function(){var e=function(e){var t=new Image;t.onload=t.onerror=function(){e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"};return function(){if("object"===s(window.localStorage))try{var t=localStorage.getItem("canwebp");"ok"===t?(0,o.default)("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650}):"no"!==t&&e(function(e){localStorage.setItem("canwebp",e?"ok":"no"),e&&(0,o.default)("_canwebp",{value:"1",path:"/",domain:location.hostname,expires:3650})})}catch(e){}}}(),t.default=a,e.exports=t.default})},function(e,t,n){var i,o,s;!function(n,a){o=[e,t],i=a,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(0,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=new Date,t=+e,n=function(e){var t=document.cookie,n="\\b"+e+"=",i=t.search(n);if(i<0)return"";i+=n.length-2;var o=t.indexOf(";",i);return o<0&&(o=t.length),t.substring(i,o)||""},i=function(e,t,n){if(!e)return"";var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(encodeURIComponent(o)+"="+(n?encodeURIComponent(e[o]):e[o]));return i.join(t||",")};return function(o,s){if(void 0===s)return n(o);if("string"==typeof s||s instanceof String){if(s)return document.cookie=o+"="+s+";",s;s={expires:-100}}s=s||{};var a=o+"="+(s.value||"")+";";delete s.value,void 0!==s.expires&&(e.setTime(t+864e5*s.expires),s.expires=e.toGMTString()),a+=i(s,";"),document.cookie=a}}();t.default=n,e.exports=t.default})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),c=i(r),d=n(441),u=i(d),p=n(619),m=i(p),h=n(374),f=i(h),_=n(550),g=i(_),v=n(370),b=i(v),w=n(3),y=i(w),k=n(443),x=i(k),j=n(615),S=i(j),C=n(446),T=i(C),O=n(620),I=i(O),P=n(544),z=y.default.closeDialog,E=b.default.Group,M=function(e){function t(){var e,n,i,a;o(this,t);for(var l=arguments.length,r=Array(l),c=0;c<l;c++)r[c]=arguments[c];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={videoId:"",datasets:[],p:1,total:0,pageSize:10,keyword:"",categoryId:""},i.onPaginationChange=function(e){i.fetch({page:e})},i.onVideoChange=function(e){i.setState({videoId:e.target.value})},i.onSearchChange=function(e){i.setState({keyword:e.target.value})},i.onPressEnter=function(){i.fetch({page:1})},i.onConfirmClick=function(){var e=i.state,t=e.datasets,n=e.videoId,o=i.props,s=o.dialogId;(0,o.onSuccess)((0,I.default)(t,{video_id:n})),z(s)},i.onCategoryChange=function(e,t){i.fetch({page:1,category_id:t.category_id}),i.setState({categoryId:t.category_id})},i.toUpload=function(){i.props.onTabChange("2")},a=n,s(i,a)}return a(t,e),l(t,[{key:"componentWillMount",value:function(){this.fetch()}},{key:"getFetchParams",value:function(){var e=this.state;return{page:e.p,page_size:e.pageSize,keyword:e.keyword,category_id:e.categoryId,sort:"create_time",is_asc:!1,hidden_failed_status:1}}},{key:"fetch",value:function(e){var t=this;e=(0,T.default)(this.getFetchParams(),e);""===e.category_id&&delete e.category_id,(0,P.commonAjax)(this.props.materialsListUrl,e,"get").then(function(n){t.setState({p:e.page,datasets:n.list,total:n.count})}).catch(function(e){x.default.error(e||"网络错误")})}},{key:"renderMaterialsList",value:function(){var e=this.state,t=e.datasets,n=e.p,i=e.total,o=e.pageSize;return c.default.createElement("div",null,c.default.createElement(E,{className:"rc-video-upload__materials-list",value:this.state.videoId,onChange:this.onVideoChange},t.map(function(e){return c.default.createElement(b.default,{value:e.video_id,key:e.video_id},c.default.createElement("div",{className:"rc-video-upload__materials-item"},c.default.createElement("div",{className:"rc-video-upload__materials-item-cover"},e.cover_url?c.default.createElement("div",{className:"rc-video-upload__materials-item-image-cover",style:{backgroundImage:"url("+(0,S.default)(e.cover_url,"!120x120.jpg")+")"}}):c.default.createElement("div",{className:"rc-video-upload__materials-item-empty-cover"})),c.default.createElement("div",{className:"rc-video-upload__materials-item-details"},c.default.createElement("div",{className:"rc-video-upload__item-top"},c.default.createElement("span",{className:"rc-video-upload__item-top-name"},e.video_name),c.default.createElement("span",null,(0,P.formatDuration)(e.video_duration))),c.default.createElement("div",{className:"rc-video-upload__item-sub"},c.default.createElement("span",null,e.create_time),c.default.createElement("span",null,(0,P.formatFileSize)(e.video_size))))))})),c.default.createElement(g.default,{current:n,totalItem:i,pageSize:o,onChange:this.onPaginationChange}))}},{key:"render",value:function(){var e=this.state,t=e.datasets,n=e.videoId,i=e.keyword,o=e.categoryId,s=this.props.categoryList,a=t&&t.length>0,l=i||""!==o,r=l?c.default.createElement("div",{className:"rc-video-upload__materials-empty"},"还没有相关数据"):c.default.createElement("div",{className:"rc-video-upload__materials-empty"},"还没有上传任何视频, ",c.default.createElement("a",{onClick:this.toUpload},"去上传"));return c.default.createElement("div",{className:"rc-video-upload__materials"},a||l?c.default.createElement("div",{className:"rc-video-upload__materials-filter"},c.default.createElement(f.default,{data:s,placeholder:"所有分组",optionText:"category_name",optionValue:"category_id",onChange:this.onCategoryChange,filter:function(e,t){return e.category_name.indexOf(t)>-1}}),c.default.createElement(m.default,{placeholder:"搜索视频",onChange:this.onSearchChange,onPressEnter:this.onPressEnter})):null,a?this.renderMaterialsList():r,c.default.createElement("div",{className:"rc-video-upload__publish"},c.default.createElement(u.default,{type:"primary",disabled:!n,htmlType:"button",onClick:this.onConfirmClick},"确定")))}}]),t}(r.Component);t.default=M,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}
Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(o),a=n(43),l=i(a),r=n(44),c=i(r),d=n(48),u=i(d),p=n(84),m=i(p),h=n(2),f=i(h),_=n(604),g=i(_),v=n(362),b=i(v),w=n(196),y=i(w),k=n(199),x=i(k),j=n(311),S=i(j),C=n(125),T=i(C),O=n(95),I=i(O),P=f.default.createElement(g.default,{type:"search"}),z=function(e){function t(){var e,n,i,o;(0,l.default)(this,t);for(var s=arguments.length,a=Array(s),r=0;r<s;r++)a[r]=arguments[r];return n=i=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.onChange=function(e){i.triggerCustomChangeEvent(e.target.value,e)},i.clearInput=function(e){i.triggerCustomChangeEvent("",e)},i.retainInputFocus=function(e){e.preventDefault()},o=n,(0,u.default)(i,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.className,i=e.value,o=(0,x.default)(this.props,"className","type","onChange");return f.default.createElement("div",{className:(0,y.default)(t+"-search-input",n)},P,f.default.createElement(b.default,(0,s.default)({},o,{onChange:this.onChange})),i&&f.default.createElement(g.default,{type:"close-circle",onClick:this.clearInput,onMouseDown:this.retainInputFocus}))}},{key:"triggerCustomChangeEvent",value:function(e,t){var n=this.props.onChange;(0,T.default)(n)&&n({target:(0,S.default)({},this.props,{value:e,type:"search"}),preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}})}}]),t}(h.PureComponent||h.Component);z.propTypes={className:I.default.string,prefix:I.default.string},z.defaultProps={className:"",prefix:"zent"},t.default=z},function(e,t,n){var i=n(621),o=n(700),s=i(o);e.exports=s},function(e,t,n){function i(e){return function(t,n,i){var l=Object(t);if(!s(t)){var r=o(n,3);t=a(t),n=function(e){return r(l[e],e,l)}}var c=e(t,n,i);return c>-1?l[r?t[c]:c]:void 0}}var o=n(622),s=n(476),a=n(480);e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?l(e)?s(e[0],e[1]):o(e):r(e)}var o=n(623),s=n(681),a=n(468),l=n(486),r=n(697);e.exports=i},function(e,t,n){function i(e){var t=s(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(624),s=n(678),a=n(680);e.exports=i},function(e,t,n){function i(e,t,n,i){var r=n.length,c=r,d=!i;if(null==e)return!c;for(e=Object(e);r--;){var u=n[r];if(d&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<c;){u=n[r];var p=u[0],m=e[p],h=u[1];if(d&&u[2]){if(void 0===m&&!(p in e))return!1}else{var f=new o;if(i)var _=i(m,h,p,e,t,f);if(!(void 0===_?s(h,m,a|l,i,f):_))return!1}}return!0}var o=n(625),s=n(654),a=1,l=2;e.exports=i},function(e,t,n){function i(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(626),s=n(633),a=n(634),l=n(635),r=n(636),c=n(637);i.prototype.clear=s,i.prototype.delete=a,i.prototype.get=l,i.prototype.has=r,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(627),s=n(628),a=n(630),l=n(631),r=n(632);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var o=n(629),s=Array.prototype,a=s.splice;e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(464);e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(629);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(629);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}var o=n(629);e.exports=i},function(e,t,n){function i(){this.__data__=new o,this.size=0}var o=n(626);e.exports=i},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;if(n instanceof o){var i=n.__data__;if(!s||i.length<l-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}var o=n(626),s=n(638),a=n(639),l=200;e.exports=i},function(e,t,n){var i=n(450),o=n(455),s=i(o,"Map");e.exports=s},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(640),s=n(648),a=n(651),l=n(652),r=n(653);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t,n){function i(){this.size=0,this.__data__={hash:new o,map:new(a||s),string:new o}}var o=n(641),s=n(626),a=n(638);e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(642),s=n(644),a=n(645),l=n(646),r=n(647);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=l,i.prototype.set=r,e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{},this.size=0}var o=n(643);e.exports=i},function(e,t,n){var i=n(450),o=i(Object,"create");e.exports=o},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===s?void 0:n}return l.call(t,e)?t[e]:void 0}var o=n(643),s="__lodash_hash_undefined__",a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(643),s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?s:t,this}var o=n(643),s="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(649);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(650);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(649);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(649);e.exports=i},function(e,t,n){function i(e,t){var n=o(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}var o=n(649);e.exports=i},function(e,t,n){function i(e,t,n,a,l){return e===t||(null==e||null==t||!s(e)&&!s(t)?e!==e&&t!==t:o(e,t,n,a,i,l))}var o=n(655),s=n(485);e.exports=i},function(e,t,n){function i(e,t,n,i,_,v){var b=c(e),w=c(t),y=b?h:r(e),k=w?h:r(t);y=y==m?f:y,k=k==m?f:k;var x=y==f,j=k==f,S=y==k;if(S&&d(e)){if(!d(t))return!1;b=!0,x=!1}if(S&&!x)return v||(v=new o),b||u(e)?s(e,t,n,i,_,v):a(e,t,y,n,i,_,v);if(!(n&p)){var C=x&&g.call(e,"__wrapped__"),T=j&&g.call(t,"__wrapped__");if(C||T){var O=C?e.value():e,I=T?t.value():t;return v||(v=new o),_(O,I,n,i,v)}}return!!S&&(v||(v=new o),l(e,t,n,i,_,v))}var o=n(625),s=n(656),a=n(662),l=n(666),r=n(673),c=n(486),d=n(487),u=n(489),p=1,m="[object Arguments]",h="[object Array]",f="[object Object]",_=Object.prototype,g=_.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i,c,d){var u=n&l,p=e.length,m=t.length;if(p!=m&&!(u&&m>p))return!1;var h=d.get(e);if(h&&d.get(t))return h==t;var f=-1,_=!0,g=n&r?new o:void 0;for(d.set(e,t),d.set(t,e);++f<p;){var v=e[f],b=t[f];if(i)var w=u?i(b,v,f,t,e,d):i(v,b,f,e,t,d);if(void 0!==w){if(w)continue;_=!1;break}if(g){if(!s(t,function(e,t){if(!a(g,t)&&(v===e||c(v,e,n,i,d)))return g.push(t)})){_=!1;break}}else if(v!==b&&!c(v,b,n,i,d)){_=!1;break}}return d.delete(e),d.delete(t),_}var o=n(657),s=n(660),a=n(661),l=1,r=2;e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(639),s=n(658),a=n(659);i.prototype.add=i.prototype.push=s,i.prototype.has=a,e.exports=i},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function i(e,t,n,i,o,x,S){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!x(new s(e),new s(t)));case p:case m:case _:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case b:return e==t+"";case f:var C=r;case v:var T=i&d;if(C||(C=c),e.size!=t.size&&!T)return!1;var O=S.get(e);if(O)return O==t;i|=u,S.set(e,t);var I=l(C(e),C(t),i,o,x,S);return S.delete(e),I;case w:if(j)return j.call(e)==j.call(t)}return!1}var o=n(454),s=n(663),a=n(464),l=n(656),r=n(664),c=n(665),d=1,u=2,p="[object Boolean]",m="[object Date]",h="[object Error]",f="[object Map]",_="[object Number]",g="[object RegExp]",v="[object Set]",b="[object String]",w="[object Symbol]",y="[object ArrayBuffer]",k="[object DataView]",x=o?o.prototype:void 0,j=x?x.valueOf:void 0;e.exports=i},function(e,t,n){var i=n(455),o=i.Uint8Array;e.exports=o},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(e,t,n,i,a,r){var c=n&s,d=o(e),u=d.length;if(u!=o(t).length&&!c)return!1;for(var p=u;p--;){var m=d[p];if(!(c?m in t:l.call(t,m)))return!1}var h=r.get(e);if(h&&r.get(t))return h==t;var f=!0;r.set(e,t),r.set(t,e);for(var _=c;++p<u;){m=d[p];var g=e[m],v=t[m];if(i)var b=c?i(v,g,m,t,e,r):i(g,v,m,e,t,r);if(!(void 0===b?g===v||a(g,v,n,i,r):b)){f=!1;break}_||(_="constructor"==m)}if(f&&!_){var w=e.constructor,y=t.constructor;w!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y)&&(f=!1)}return r.delete(e),r.delete(t),f}var o=n(667),s=1,a=Object.prototype,l=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e,a,s)}var o=n(668),s=n(670),a=n(480);e.exports=i},function(e,t,n){function i(e,t,n){var i=t(e);return s(e)?i:o(i,n(e))}var o=n(669),s=n(486);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){var i=n(671),o=n(672),s=Object.prototype,a=s.propertyIsEnumerable,l=Object.getOwnPropertySymbols,r=l?function(e){return null==e?[]:(e=Object(e),i(l(e),function(t){return a.call(e,t)}))}:o;e.exports=r},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,o=0,s=[];++n<i;){var a=e[n];t(a,n,e)&&(s[o++]=a)}return s}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var i=n(674),o=n(638),s=n(675),a=n(676),l=n(677),r=n(453),c=n(462),d=c(i),u=c(o),p=c(s),m=c(a),h=c(l),f=r;(i&&"[object DataView]"!=f(new i(new ArrayBuffer(1)))||o&&"[object Map]"!=f(new o)||s&&"[object Promise]"!=f(s.resolve())||a&&"[object Set]"!=f(new a)||l&&"[object WeakMap]"!=f(new l))&&(f=function(e){var t=r(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case d:return"[object DataView]";case u:return"[object Map]";case p:return"[object Promise]";case m:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=f},function(e,t,n){var i=n(450),o=n(455),s=i(o,"DataView");e.exports=s},function(e,t,n){var i=n(450),o=n(455),s=i(o,"Promise");e.exports=s},function(e,t,n){var i=n(450),o=n(455),s=i(o,"Set");e.exports=s},function(e,t,n){var i=n(450),o=n(455),s=i(o,"WeakMap");e.exports=s},function(e,t,n){function i(e){for(var t=s(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,o(a)]}return t}var o=n(679),s=n(480);e.exports=i},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(459);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function i(e,t){return l(e)&&r(t)?c(d(e),t):function(n){var i=s(n,e);return void 0===i&&i===t?a(n,e):o(t,i,u|p)}}var o=n(654),s=n(682),a=n(694),l=n(685),r=n(679),c=n(680),d=n(693),u=1,p=2;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(683);e.exports=i},function(e,t,n){function i(e,t){t=o(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(684),s=n(693);e.exports=i},function(e,t,n){function i(e,t){return o(e)?e:s(e,t)?[e]:a(l(e))}var o=n(486),s=n(685),a=n(687),l=n(690);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||(l.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(486),s=n(686),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;e.exports=i},function(e,t,n){function i(e){return"symbol"==typeof e||s(e)&&o(e)==a}var o=n(453),s=n(485),a="[object Symbol]";e.exports=i},function(e,t,n){var i=n(688),o=/^\./,s=i(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,n,i,o){t.push(i?o.replace(/\\(\\)?/g,"$1"):n||e)}),t});e.exports=s},function(e,t,n){function i(e){var t=o(e,function(e){return n.size===s&&n.clear(),e}),n=t.cache;return t}var o=n(689),s=500;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(s);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var a=e.apply(this,i);return n.cache=s.set(o,a)||s,a};return n.cache=new(i.Cache||o),n}var o=n(639),s="Expected a function";i.Cache=o,e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(691);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e)return e;if(a(e))return s(e,i)+"";if(l(e))return d?d.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(454),s=n(692),a=n(486),l=n(686),r=1/0,c=o?o.prototype:void 0,d=c?c.toString:void 0;e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(686),s=1/0;e.exports=i},function(e,t,n){function i(e,t){return null!=e&&s(e,t,o)}var o=n(695),s=n(696);e.exports=i},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n){t=o(t,e);for(var i=-1,d=t.length,u=!1;++i<d;){var p=c(t[i]);if(!(u=null!=e&&n(e,p)))break;e=e[p]}return u||++i!=d?u:!!(d=null==e?0:e.length)&&r(d)&&l(p,d)&&(a(e)||s(e))}var o=n(684),s=n(483),a=n(486),l=n(478),r=n(477),c=n(693);e.exports=i},function(e,t,n){function i(e){return a(e)?o(l(e)):s(e)}var o=n(698),s=n(699),a=n(685),l=n(693);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(683);e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:a(n);return r<0&&(r=l(i+r,0)),o(e,s(t,3),r)}var o=n(701),s=n(622),a=n(702),l=Math.max;e.exports=i},function(e,t){function n(e,t,n,i){for(var o=e.length,s=n+(i?1:-1);i?s--:++s<o;)if(t(e[s],s,e))return s;return-1}e.exports=n},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(703);e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if((e=o(e))===s||e===-s){return(e<0?-1:1)*a}return e===e?e:0}var o=n(704),s=1/0,a=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=c.test(e);return n||d.test(e)?u(e.slice(2),n?2:8):r.test(e)?a:+e}var o=n(459),s=n(686),a=NaN,l=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,u=parseInt;e.exports=i}])}),define("views/goods_info",["require","underscore","backbone","marionette","components/pop/atom/link","components/attachment/image/app","core/event","core/reqres","core/log","core/utils","commons/utils","text!templates/goods_info.html","text!templates/picture.html","text!templates/video.html","components/recharge_modal/views/app","components/image_preview/app","components/popover/content/app","@youzan/video-upload/dist/main"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("marionette"),o=e("components/pop/atom/link"),s=e("components/attachment/image/app"),a=e("core/event"),l=e("core/reqres"),r=e("core/log"),c=e("core/utils"),d=e("commons/utils"),u=e("text!templates/goods_info.html"),p=e("text!templates/picture.html"),m=e("text!templates/video.html"),h=e("components/recharge_modal/views/app"),f=e("components/image_preview/app"),_=e("components/popover/content/app"),g=e("@youzan/video-upload/dist/main");return i.Layout.extend({tagName:"div",className:"goods-info-group-inner",template:t.template(u),templateHelpers:{picTemplate:t.template(p),fullfillImage:c.fullfillImage},videoTemplate:t.template(m),ui:{autoread:".js-autoread-goods",priceTxt:'[name="price"]',costPrice:'[name="cost_price"]',profitTxt:".js-profit",originPriceTxt:'[name="origin"]',pictureContainer:".js-picture-list",addPicture:".js-add-picture",buyUrlGroup:".js-buy-url-group",buyUrlRequired:".js-buy-url-required",goodsImage:".js-img-preview"},events:{"click @ui.autoread":"autoreadGoods","click @ui.addPicture":"addPicture","click .js-delete-picture":"deletePicture","blur .js-buy-url":"checkUrl","click @ui.goodsImage":"imagePreview","mouseover .js-lock-help-note":"onLockHelpNote","mouseout .js-lock-help-note":"onHideLockHelpNote","click .js-add-video":"addVideo","click .js-delete-video":"deleteVideo","click .js-edit-video":"editVideo","click .js-refresh-video":"refreshVideo"},_modelBinder:void 0,pictureMaxSize:15,initialize:function(e){this.setConfig(e),this._modelBinder=new n.ModelBinder({modelSetOptions:{validate:!0}}),this.listenTo(this.model,"change",d.showLog),this.model.isFx&&this.listenTo(this.model,"change:price",this.updateTotalProfit),this.listenTo(this.model,"change:shop_method",this.onShopMethodChanged),this.listenTo(this.model,"change:shipment",this.onShipmentChange),this.listenTo(this.model,"picture:reset",this.renderAllPicture),this.listenTo(this.model,"change:video_model",this.renderVideo),this.listenTo(a,"stock_module:hide",this.hideStockModule),this.listenTo(a,"stock_module:show",this.showStockModule)},onClose:function(){this._modelBinder.unbind()},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON(),e=this.processData(e)),e},processData:function(e){var t=e.isFx=this.model.isFx;return e.price=c.twoDecimal(e.price),e.profit=this.calcTotalProfit(e.price,t),e},updateTotalProfit:function(e,t){var n=this.calcTotalProfit(t,e.isFx);this.ui.profitTxt.val(n)},calcTotalProfit:function(e,t){var n={},i=0;return t&&(n=l.request("price_range:get","total")||{},i=d.calcProfit(e,n)),i="利润："+i},onRender:function(){var e=this.model.get("stock");t.size(e)>0&&(this.ui.priceTxt.prop("readonly",!0),this.ui.costPrice.hide()),this.onShipmentChange(),this.renderVideo()},onShow:function(){this.initSortable(),this.initDataBindings()},setConfig:function(e){this.settings={},t(this.settings).extend(e)},initDataBindings:function(){var e={title:'[name="title"]',buy_url:{selector:'[name="buy_url"]',converter:this.buyUrlConverter},effective_type:'[name="effective_type"]',effective_delay_hours:'[name="effective_delay_hours"]',holidays_available:'[name="holidays_available"]'};t(e).extend({price:{selector:'[name="price"]',converter:this.priceConverter},origin:{selector:'[name="origin"]'},cost_price:{selector:'[name="cost_price"]'}}),this._modelBinder.bind(this.model,this.el,e)},originConverter:function(e,t){return t=d.originValueFix(t)},priceConverter:function(e,t){return d.decimalFix(t,2)},buyUrlConverter:function(e,t){return t=d.buyUrlValueFix(t)},onShipmentChange:function(){var e=+this.model.get("shipment"),t=3===e,n=4===e;t?this.$(".js-electric-card-info").show():this.$(".js-electric-card-info").hide(),n?($("#goods-info-region .info-group-title .group-inner").text("房间信息"),this.$(".product-name-label").text("房间名："),this.$(".hotel-price-help").show()):($("#goods-info-region .info-group-title .group-inner").text("商品信息"),this.$(".product-name-label").text("商品名："),this.$(".hotel-price-help").hide())},onOriginBlur:function(){var e=this.ui.originPriceTxt,t=e.val(),n=d.originValueFix(t);if(t===n)return!1;e.val(n)},checkPictureMaxSize:function(e){return e.length<this.pictureMaxSize},addPicture:function(){var e=this;s.initialize({hideIconList:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(n){try{t.isArray(n)?t.each(n,function(t){e._addSinglePicture(t)}):e._addSinglePicture(n),e.model.calculateImage()}catch(e){r.log({spm:"showcase_goods_edit_add_single_picture_error",data:JSON.stringify(n),e:e,kdtId:window._global.kdt_id,userAccount:window._global.account})}}})},renderAllPicture:function(){var e=this;this.ui.pictureContainer.find("li.sort").remove(),t(this.model.get("picture")).each(function(t){e.renderPicture(t)})},renderPicture:function(e){var t=this.templateHelpers.picTemplate({item:e,fullfillImage:c.fullfillImage});this.ui.pictureContainer.find("li:not(.sort)").before(t)},_addSinglePicture:function(e){var t=this.model.get("picture");if(!this.checkPictureMaxSize(t))return c.errorNotify("商品图片最多支持 "+this.pictureMaxSize+" 张"),!1;var n={url:e.attachment_url,id:e.attachment_id,width:e.width,height:e.height};t.push(n),this.model.set("picture",t),this.renderPicture(n)},initSortable:function(){var e=this;this.$(".picture-list").sortable({items:".sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(n,i){var o=i.item.data("startPos"),s=i.item.index();if(o!==s){var a=[];t.each(e.model.get("picture"),function(e,t,n){o>s?t===s?a.push(n[o]):t>s&&t<=o?a.push(n[t-1]):a.push(e):t===s?a.push(n[o]):t<s&&t>=o?a.push(n[t+1]):a.push(e)}),e.model.set("picture",a)}}})},deletePicture:function(e){var t=$(e.target),n=t.parent("li").index();this.model.get("picture").splice(n,1),t.parents("li.sort").first().remove(),this.model.calculateImage()},addVideo:function(){var e=this;g.initialize({materials:!0,onSuccess:function(t){e.model.set({video_model:t,video_id:t.video_id})}})},deleteVideo:function(){this.model.set({video_model:{},video_id:""})},editVideo:function(){var e=this;g.initialize({materials:!0,value:e.model.get("video_model"),onSuccess:function(t){e.model.set({video_model:t,video_id:t.video_id})}})},refreshVideo:function(){var e=this,t=e.model.get("video_model");c.ajax({url:window._global.url.materials+"/video/videoInfo.json",type:"GET",data:{video_id:t.video_id},xhrFields:{withCredentials:!0}}).done(function(t){e.model.set("video_model",t)}).fail(function(e){c.errorNotify(e)})},renderVideo:function(){var e=this.videoTemplate({fullfillImage:c.fullfillImage,video:this.model.get("video_model")||{}});this.$(".js-video-list").html(e)},checkUrl:function(e){var t=$(e.target);e.stopPropagation(),e.stopImmediatePropagation();var n=$.trim(t.val());n=d.buyUrlValueFix(n),t.val(n)},autoreadGoods:function(e){var t=this,n=$(e.target);c.ajax({url:window._global.url.www+"/pay/recharge/teambalance.json"}).done(function(e,i){e.balance<0?new h(e):o.initialize({target:n,content:"请粘贴 淘宝/天猫 的单品地址",callback:function(e){c.successNotify("正在读取商品，请稍等。",void 0,{fade:!1});var n=$.trim(e);t.grabGoodsData(n)}})}).fail(function(e){c.errorNotify(e)})},grabGoodsData:function(e){var t=this,n=window._global.url.img+"/tao/detail",i={url:encodeURI(e),mp_id:window._global.kdt_id};$.ajax({url:n,type:"GET",dataType:"jsonp",timeout:6e4,cache:!1,data:i,success:function(n){"success"==n.status?(t.updateGoodsModel(e,n),c.clearNotify()):c.errorNotify("抓取商品信息出错啦:(")},error:function(){c.errorNotify("抓取商品信息出错啦:(")}})},updateGoodsModel:function(e,n){var i={title:n.title,buy_url:e};if(0!==n.price&&(i.price=n.price),this.model.set(i),t.isEmpty(n.attachment))return!1;var o=[];t.each(n.attachment,function(e){o.push({url:e.attachment_url,id:e.attachment_id})}),this.model.set({picture:o}),this.model.trigger("picture:reset")},getData:function(){return this.model.toJSON()},showSelf:function(){this.$el.show()},hideSelf:function(){this.$el.hide()},hideStockModule:function(){if("0"==this.model.get("shop_method"))return!1;this.ui.priceTxt.prop("readonly",!1),this.ui.costPrice.show()},showStockModule:function(){this.ui.priceTxt.prop("readonly",!0),this.ui.costPrice.hide()},onShopMethodChanged:function(e,t){"0"==t?(this.ui.buyUrlGroup.removeClass("hide"),this.ui.buyUrlRequired.removeClass("hide"),this.ui.priceTxt.prop("readonly",!1),this.ui.costPrice.prop("readonly",!1)):(this.ui.buyUrlGroup.addClass("hide"),this.ui.buyUrlRequired.addClass("hide"),this.resetPrice())},resetPrice:function(){if(!l.request("stock_module:is_show"))return!1;this.ui.priceTxt.prop("readonly",!0);var e=l.request("min_price:get");this.ui.priceTxt.val(e),this.ui.costPrice.val(e)},imagePreview:function(e){new f({images:$(e.target).data("src")})},onLockHelpNote:function(e){var t=this;window.editConfig.price.message&&(this.notePopver||(this.notePopver=new _({of:$(e.target)[0],arrow:"bottom-left",data:{html:'<p class="text-left">'+window.editConfig.price.message+"</p>"},autoCloseCallback:function(){t.notePopver=null}})))},onHideLockHelpNote:function(){this.notePopver&&this.notePopver.close(),this.notePopver=null}})}),define("models/sku_item",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({idAttribute:"_id",defaults:{index:0,is_show:!1,text:"",list:[]},index:function(){return this.collection.indexOf(this)}})}),define("collections/sku_list",["require","backbone","models/sku_item"],function(e){"use strict";var t=e("backbone"),n=e("models/sku_item");return t.Collection.extend({url:function(){},model:n,checkIsExist:function(e){return this.where({text:e}).length>0}})}),define("components/popover/sku/app.model",["require","underscore","jquery","backbone","core/utils","zenjs/util/session_storage"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("core/utils"),s=e("zenjs/util/session_storage");return i.Model.extend({initialize:function(e){this.sku_list=null,this.selected_sku=[],this.sessionStorageKey="sku-tree-"+window._global.kdt_id+"-"+this.id},getSkuList:function(){var e=n.Deferred(),i=this.getSessionStorage();return i?e.resolve(i):o.ajax({url:window._global.url.www+"/showcase/WCGoodsSkuTree/skuChild.json",data:{id:this.id}}).done(function(n){n=t.map(n||[],function(e){return{id:e.id||e._id,text:e.text}}),e.resolve(n)}).fail(function(){e.resolve([])}),e.done(function(e){this.sku_list=e,this.setSessionStorage()}.bind(this)),e.promise()},addSku:function(e){this.selected_sku.push(e)},removeSku:function(e){var t=this.selected_sku.indexOf(e);t!==-1&&this.selected_sku.splice(t,1)},createSku:function(e){return o.ajax({url:window._global.url.www+"/showcase/WCGoodsSkuTree/skuLeaf.json",type:"POST",data:{_id:this.id,text:e}}).done(function(t){var n={id:t,text:e};this.sku_list.push(n),this.selected_sku.push(n),this.setSessionStorage()}.bind(this))},setSessionStorage:function(){s.setItem(this.sessionStorageKey,JSON.stringify(this.sku_list))},getSessionStorage:function(){var e=s.getItem(this.sessionStorageKey);return e&&(e=JSON.parse(e)),e}})}),define("models/sku_atom",["require","underscore","jquery","backbone","core/utils","components/popover/sku/app.model"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("core/utils"),s=e("components/popover/sku/app.model");return i.Model.extend({idAttribute:"id",defaults:{text:"",showImg:!1,img_url:"",stock_locked:!1},addSkuLeaf:function(e){return o.ajax({url:window._global.url.www+"/showcase/WCGoodsSkuTree/skuLeaf.json",type:"POST",data:e})},getSkuLeaf:function(e,i){var o=n.Deferred();return new s({id:e}).getSkuList().done(function(e){var n=t.find(e,function(e){return e.text==i});o.resolve(n)}).fail(function(){o.reject()}),o.promise()}})}),define("collections/sku_atom_list",["require","backbone","models/sku_atom"],function(e){"use strict";var t=e("backbone"),n=e("models/sku_atom");return t.Collection.extend({url:function(){},model:n,checkChooseable:function(e){return!this.checkIsExist(e)},checkIsExist:function(e){return!!this.find(function(t){return t.get("id")==+e.id})}})}),define("tpl!components/popover/sku/app.template",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-popover-inner" style="width: 350px;">\n    ',__p+=loading?'\n        <div style="position: relative; height: 30px;">\n            <div class="loading" style="position: absolute; height: 30px; width: 350px;"></div>\n            <button class="ui-btn js-cancel" style="position: absolute; right: 0;">取消</button>\n        </div>\n    ':'\n        <input type="hidden" class="js-select2 select2-offscreen" style="width: 242px;" tabindex="-1">\n        <button class="ui-btn ui-btn-primary js-save" style="vertical-align: top">确定</button>\n        <button class="ui-btn js-cancel" style="vertical-align: top">取消</button>\n    ',__p+="\n</div>\n";return __p}}),define("components/popover/sku/app",["require","underscore","jquery","../_base/app","./app.model","core/utils","select2","tpl!./app.template"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("../_base/app"),o=e("./app.model"),s=e("core/utils");return e("select2"),i.extend({template:e("tpl!./app.template"),ui:{select:".js-select2",save:".js-save",cancel:".js-cancel"},events:{"click @ui.cancel":"close","click @ui.save":"save"},onBeforeInitialize:function(e){this.model=new o({id:e.data.id})},onInitialize:function(e){this.limitNum=1/0,"number"==typeof e.limitNum&&(this.limitNum=e.limitNum)},serializeData:function(){return{loading:null===this.model.sku_list}},onPosition:function(){this.model.getSkuList().done(this.showSelect.bind(this))},showSelect:function(){this.render(),this.addArrow(),this.ui.select.select2({allowClear:!0,multiple:!0,placeholder:"添加规格值",tags:this.model.sku_list,maximumInputLength:20}).on("change",this.onSelect2Change.bind(this)),t.isEmpty(this.model.sku_list)||this.ui.select.select2("open")},onSelect2Change:function(e){var i=e.added||e.removed;e.added?i.id===-1||t.isString(i.id)&&i.id===i.text?this.model.createSku(i.text).done(function(){n(this.ui.select).select2("data",this.model.selected_sku),n(this.ui.select).select2("close")}.bind(this)).fail(function(e){s.errorNotify(e)}):this.model.addSku(i):e.removed&&this.model.removeSku(i)},save:function(){var e=this.model.selected_sku;if(e.length>this.limitNum)return void s.errorNotify("选择的数量超过了"+this.limitNum+"个，请编辑后再次保存");t.isFunction(this.options.callback)&&this.options.callback(e),this.ui.select.select2("data","").select2("destroy"),this.close()},autoClose:function(){return!1}})}),define("tpl!templates/sku_atom",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span data-atom-id="'+(null==(__t=id)?"":__t)+'">'+(null==(__t=text)?"":__t)+"</span>\n",window.editConfig.sku.readonly||stock_locked||(__p+='\n<div class="atom-close close-modal small js-remove-sku-atom">×</div>\n'),__p+="\n",index&&index<=window.editConfig.sku_pictures_limit&&(__p+='\n<div class="upload-img-wrap '+(null==(__t=1==showImg?"":"hide")?"":__t)+'">\n    <div class="arrow"></div>\n    <div class="js-upload-container" style="position:relative;">\n        ',
__p+=""==img_url?'\n            <div class="add-image js-btn-add">+</div>\n        ':'\n            <div class="js-enter-wrap">\n                <a href="javascript:;" class="close-modal small js-btn-close" title="删除">×</a>\n                <img src="'+(null==(__t=fullfillImage(img_url,"!100x100.jpg"))?"":__t)+'" class="js-img-preview" data-src="'+(null==(__t=img_url)?"":__t)+'">\n                <div class="img-edit js-btn-edit">替换</div>\n            </div>\n        ',__p+="\n    </div>\n</div>\n"),__p+="\n";return __p}}),define("views/sku_atom",["require","underscore","jquery","marionette","core/utils","components/popover/rename/app","components/popover/content/app","components/image_preview/app","components/attachment/image/app","tpl!templates/sku_atom"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("core/utils"),s=e("components/popover/rename/app"),a=e("components/popover/content/app"),l=e("components/image_preview/app"),r=e("components/attachment/image/app");return i.ItemView.extend({className:"sku-atom",templateHelpers:{fullfillImage:o.fullfillImage},template:e("tpl!templates/sku_atom"),events:{"click .js-btn-add":"onBtnImgClick","click .js-btn-edit":"onBtnImgClick","click .js-btn-close":"onBtnCloseClick","click .js-img-preview":"onPreviewImg","mouseenter .js-enter-wrap":"onEnterImg","mouseleave .js-enter-wrap":"onLeaveImg","click .js-remove-sku-atom":"removeSkuAtom","click ":"onClick"},modelEvents:{change:"render"},initialize:function(e){this.options=e||{},this.parentModel=this.options.parentModel,this.skuTreeId=this.parentModel.get("id"),this.listenTo(this.model,"change:showImg",this.render),this.isEnable=!window.editConfig.sku.readonly&&!this.model.get("stock_locked")},onRender:function(){this.$edit=this.$(".js-btn-edit"),this.$close=this.$(".js-btn-close"),this.model.get("showImg")?this.$el.addClass("active"):this.$el.removeClass("active"),this.model.get("stock_locked")&&this.$el.addClass("sku-atom--disabled"),this.isEnable||this.model.get("stock_locked")&&this.$el.data("info","当前商品启用了门店网店库存同步，需要关闭同步才能修改和删除规格项。")},onPreviewImg:function(e){e.preventDefault(),e.stopPropagation(),new l({images:n(e.target).data("src")})},onLeaveImg:function(e){e.preventDefault(),e.stopPropagation(),this.$close.hide(),this.$edit.hide()},onEnterImg:function(e){e.preventDefault(),e.stopPropagation(),this.$close.show(),this.$edit.show()},onBtnImgClick:function(e){e.preventDefault(),e.stopPropagation();var t=this;r.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(e){var n=e[0].attachment_url;t.model.set({img_url:n})}})},onBtnCloseClick:function(e){e.preventDefault(),e.stopPropagation(),this.model.set({img_url:""})},removeSkuAtom:function(e){e.preventDefault(),e.stopPropagation();var t=this.model.collection;t.remove(this.model),t.map(function(e,t){e.set({index:t+1},{silent:!0})})},onClick:function(e){this.isEnable?this.renameSkuAtom(e):this.popInfo(e)},popInfo:function(e){var t=n(e.target).parents(".sku-atom"),i=t.data("info");i&&(this.popover=new a({of:this.el,arrow:"top-center",data:{html:i,className:"info-popover"}}))},renameSkuAtom:function(){window.editConfig.sku.readonly||this.model.get("stock_locked")||(this.renamePopover=new s({of:this.el,arrow:"top-center",data:{name:this.model.get("text"),max_input_length:20},callback:t.bind(function(e){e!==this.model.get("text")&&this.model.getSkuLeaf(this.skuTreeId,e).done(t.bind(function(n){n?(n._id=n.id,this.model.collection.checkChooseable(n)?this.renameSkuLeaf(n):o.errorNotify("已经添加了相同的规格值。")):this.model.addSkuLeaf({_id:this.skuTreeId,text:e}).done(t.bind(function(t){var n={_id:+t,id:+t,text:e};this.addSkuLeafToGlobalValue(n),this.renameSkuLeaf(n)},this)).fail(function(e){o.errorNotify(e)})},this)).fail(function(){o.errorNotify("规格重命名失败")})},this)}))},renameSkuLeaf:function(e){var t=this.model.toJSON(),n=e,i=this.skuTreeId,o=this.parentModel.index()+1;this.model.set({id:e.id,text:e.text},{silent:!0}),this.render(),this.parentModel.trigger("sku:leaf:rename",o,i,t,n)},addSkuLeafToGlobalValue:function(e){var n=this,i=t.find(window._global.skuTree,function(e){return e._id===n.skuTreeId})||{};i.list||(i.list=[]),i.list.push(e)},onClose:function(){this.renamePopover&&this.renamePopover.close&&this.renamePopover.close()}})}),define("tpl!templates/sku_atom_list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-sku-atom-list sku-atom-list"></div>\n',window.editConfig.sku.readonly||(__p+='\n<a href="javascript:;" class="js-add-sku-atom add-sku">+添加</a>\n'),__p+="\n\n";return __p}}),define("views/sku_atom_list",["require","underscore","marionette","components/popover/sku/app","views/sku_atom","core/utils","tpl!templates/sku_atom_list"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("components/popover/sku/app"),o=e("views/sku_atom"),s=e("core/utils");return n.CompositeView.extend({template:e("tpl!templates/sku_atom_list"),itemView:o,itemViewContainer:".js-sku-atom-list",itemViewOptions:function(){return{parentModel:this.parentModel}},ui:{addSkuAtom:".js-add-sku-atom"},events:{"click @ui.addSkuAtom":"onAddSkuAtomClick"},collectionEvents:{reset:"render",add:"toggleAddSKUChange",remove:"toggleAddSKUChange"},initialize:function(e){this.parentModel=e.parentModel,this.goodsModel=e.goodsModel,this.isHotel=e.isHotel,this.listenTo(this.collection,"reset",this.onCollectionReset)},onRender:function(){this.toggleAddSKUChange()},onAddSkuAtomClick:function(e){e.preventDefault();var n=this.getSelectLimitNum(),o=this.parentModel.get("id");this.skupopover=new i({of:e.target,arrow:"top-center",data:{id:o},callback:t.bind(this.onChooseSkuAtom,this),limitNum:n})},getLimitNum:function(){var e=1/0;return this.isHotel&&(e=10),e},getSelectLimitNum:function(){var e=this.collection.length;return this.getLimitNum()-e},onChooseSkuAtom:function(e){if(t.isEmpty(e))return!1;var n=this.collection,i=this.parentModel.get("is_show"),o=this;t.each(e,function(e){if(!n.checkChooseable(e))return s.errorNotify("已经添加了相同的规格值。"),!1;e.showImg=i;var t=o.collection.length+1,a=window.editConfig.sku_pictures_limit;e.index=t,i&&t>a&&s.errorNotify("商品规格图片不能超过"+a+"张。"),n.add(e),o.goodsModel.set("hasNewSkuAdded","1")})},onCollectionReset:function(){this.skupopover&&(this.skupopover.close(),this.skupopover=null)},toggleAddSKUChange:function(){var e=this.getLimitNum();this.collection.length>=e?this.ui.addSkuAtom.hide():this.ui.addSkuAtom.css({display:"inline-block"})},onClose:function(){this.onCollectionReset()}})}),define("tpl!templates/sku_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h3 class="sku-group-title">\n    <input type="hidden" name="sku_name" value="'+(null==(__t=id)?"":__t)+'" '+(null==(__t=window.editConfig.sku.readonly||window.editConfig.sku.stock_locked?"disabled":"")?"":__t)+' class="js-sku-name">\n    ',window.editConfig.sku.readonly||window.editConfig.sku.stock_locked||(__p+="\n        ",1==index&&(__p+='\n            <label for="js-addImg-function" class="addImg-radio">\n                <input type="checkbox" id="js-addImg-function"  ',is_show&&(__p+=" checked "),__p+=" >\n                添加规格图片\n            </label>\n        "),__p+='\n        <a class="js-remove-sku-group remove-sku-group">&times;</a>\n\t'),__p+='\n</h3>\n<div class="js-sku-atom-container sku-group-cont"></div>\n',1==index&&(__p+='\n<div class="sku-group-cont" id=\'js-tip-instruction\' style="padding: 0px 10px;">\n    <p class="help-desc">目前只支持为第一个规格设置不同的规格图片</p>\n    <p class="help-desc">设置后，用户选择不同规格会显示不同图片</p>\n    <p class="help-desc">建议尺寸：640 x 640像素</p>\n</div>\n'),__p+="\n";return __p}}),define("views/sku_item",["require","underscore","marionette","core/event","core/reqres","core/utils","collections/sku_atom_list","views/sku_atom_list","tpl!templates/sku_item"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("core/event"),o=e("core/reqres"),s=e("core/utils"),a=e("collections/sku_atom_list"),l=e("views/sku_atom_list");return n.Layout.extend({className:"sku-sub-group",template:e("tpl!templates/sku_item"),ui:{skuNameEle:".js-sku-name",skuGroupRemove:".js-remove-sku-group"},regions:{skuAtomRegion:".js-sku-atom-container"},events:{"click @ui.skuGroupRemove":"removeSkuGroup","change #js-addImg-function":"toggleUploadImg"},initialize:function(e){var t=this;this.isHotel=e.isHotel,this.goodsModel=e.goodsModel,this.choosable={},this.skuNameList=o.request("sku_name_list:get")||[],this.listenTo(this.model,"sku:leaf:rename",function(e,n,i,o){t.reverseUpdate({silent:!0}),this.model.collection.trigger("stock:sku:leaf:rename",e,n,i,o)}),this.listenTo(this.model,"change:is_show",this.skuAtomListSetBtn)},toggleUploadImg:function(){var e=!!this.$("#js-addImg-function").prop("checked");this.model.set({is_show:e}),this.model.collection.trigger("item:list:toggle"),this.toggleTip()},skuAtomListSetBtn:function(){var e=this.model.get("is_show");this.skuAtomList&&t(this.skuAtomList.models).each(function(t,n){t.set({showImg:e})})},skuAtomSetIndex:function(){this.skuAtomList&&t(this.skuAtomList.models).each(function(e,t){e.set({index:t+1})})},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON(),e=this.processData(e)),e},processData:function(e){return e.id||(e.id=-1),e},onShow:function(){this.initSkuNameSelect2(),this.initSkuAtomListView(),this.toggleTip()},toggleTip:function(){this.model.get("is_show")?this.$("#js-tip-instruction").css("display","block"):this.$("#js-tip-instruction").css("display","none")},initSkuNameSelect2:function(){var e=this,n=o.request("select2_config:get")||{};t(n).extend({data:e.skuNameList}),e.ui.skuNameEle.select2(n).on("select2-opening",function(){i.trigger("chosen:hide")}).on("select2-selecting",function(t){var n=t.object;e.selectSkuName(n,e,t)})},initSkuAtomListView:function(){var e=this.model,t=e.get("id");if(!t||t==-1)return!1;var n=this.model.get("list")||[];this.skuAtomList=new a(n),this.skuAtomSetIndex(),this.listenTo(this.skuAtomList,"all",this.reverseUpdate),this.skuAtomListView=new l({parentModel:this.model,goodsModel:this.goodsModel,collection:this.skuAtomList,isHotel:this.isHotel}),this.skuAtomRegion.show(this.skuAtomListView)},reverseUpdate:function(e){var t=this.skuAtomList.toJSON();this.model.set({list:t},e),this.model.collection.trigger("item:list:change")},selectSkuName:function(e,t,n){if(this.model.collection.checkIsExist(e.text))return s.errorNotify("规格名不能相同。"),n.preventDefault(),n.stopPropagation(),!1;this.model.set("id",e.id),e.id==-1?this.createSkuName(e):this.updateAtomListView(e)},createSkuName:function(e){var t=this,n=window._global.url.www+"/showcase/WCGoodsSkuTree/skuTree.json",i={text:e.text};s.ajax({url:n,type:"POST",timeout:8e3,data:i}).done(function(e){t.onCreateSkuNameSuccess(e,i)}).fail(function(e){s.errorNotify(e||"新增规格类型失败。")})},onCreateSkuNameSuccess:function(e,t){var n={id:Number(e),text:t.text};this.model.set(n),this.ui.skuNameEle.select2("data",n),this.ui.skuNameEle.select2("close"),window._global.skuTree.push({_id:n.id,text:n.text}),this.updateAtomListView(t)},updateAtomListView:function(e){this.skuAtomListView||this.initSkuAtomListView(),this.resetAtomListData(e)},processChoosable:function(e){var n={data:[],count:0};return!e||t.isEmpty(e.option)?n:(t(e.option).each(function(e){e.option_value.indexOf("自定义")===-1?n.data.push(e):n.count+=1}),n)},resetAtomListData:function(e){t(e).extend({list:[]}),this.model.set(e),this.skuAtomList.reset([])},removeSkuGroup:function(e){e.preventDefault(),e.stopPropagation(),this.model.collection.remove(this.model)}})}),define("tpl!templates/sku",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-sku-list-container"></div>\n\n<div class="'+(null==(__t=window.editConfig.sku.readonly?"":"js-sku-group-opts")?"":__t)+' sku-sub-group">\n    <h3 class="sku-group-title">\n        <button type="button" class="'+(null==(__t=window.editConfig.sku.readonly||window.editConfig.sku.stock_locked?"js-help-note":"js-add-sku-group")?"":__t)+' btn">添加规格项目</button>\n        ',window.editConfig.sku.message&&(__p+='\n\t\t\t<div class="js-notes-cont hide">\n\t\t\t    <p>'+(null==(__t=window.editConfig.sku.message)?"":_.escape(__t))+"</p>\n\t\t\t</div>\n\t\t"),__p+="\n    </h3>\n</div>\n";return __p}}),define("views/sku",["require","underscore","backbone","jquery","marionette","core/reqres","commons/utils","models/sku_item","views/sku_item","components/popover/content/app","tpl!templates/sku"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("jquery"),o=e("marionette"),s=e("core/reqres"),a=e("commons/utils"),l=e("models/sku_item"),r=e("views/sku_item"),c=e("components/popover/content/app");return o.CompositeView.extend({className:"sku-group",template:e("tpl!templates/sku"),itemView:r,itemViewContainer:".js-sku-list-container",itemViewOptions:function(){return{isHotel:+this.goodsModel.get("is_hotel"),goodsModel:this.goodsModel}},ui:{skuGroupOpts:".js-sku-group-opts",skuGroupAdd:".js-add-sku-group"},events:{"click @ui.skuGroupAdd":"addSkuGroup","mouseover .js-help-note":"onShowNote","mouseout .js-help-note":"onHideNote"},collectionEvents:{add:"checkAndReverseUpdate",remove:"delToggleAfter"},maxSize:3,initialize:function(e){this.goodsModel=e.goodsModel,this.reverseUpdate(),this.setSkuIndex(),this.initSkuName(),this.del=!1,this.firstRender=!0,this.initStockLockedInfo(),this.listenTo(this.goodsModel,"change:shipment",this.onShipmentChange),this.listenTo(this.collection,"item:list:change",this.reverseUpdate),this.listenTo(this.collection,"item:list:toggle",this.setSkuIndex)},initStockLockedInfo:function(){this.model=new n.Model({stock_locked:!1})},onRender:function(){this.toggleSkuGroupOpts(),this.firstRender&&this.collection.length>0&&(this.firstRender=!1,this.onShipmentChange()),"4"==this.goodsModel.get("shipment")&&(this.maxSize=1)},dealGoods:function(e){},delToggleAfter:function(){this.del=!0,this.toggleSkuGroupOpts(),this.reverseUpdate(),this.setSkuIndex()},initSkuName:function(){this.initSelect2Config(),this.initSkuNameList()},initSelect2Config:function(){var e={multiple:!1,placeholder:"请选择...",createSearchChoice:function(e,t){if(0===i(t).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:-1,text:e}},maximumInputLength:4,width:100};s.setHandler("select2_config:get",function(){return e})},initSkuNameList:function(){var e=this;s.setHandler("sku_name_list:get",function(){e.skuNameList=[];var n=window._global.skuTree;return t.each(n,function(t){e.skuNameList.push({id:t._id,text:t.text||t.name})}),e.skuNameList})},addSkuGroup:function(){var e=new l;this.collection.add(e)},onAfterItemAdded:function(e){e.ui.skuNameEle.select2("open")},checkMaxSize:function(){return this.collection.size()<this.maxSize},onShipmentChange:function(){if(4==+this.goodsModel.get("shipment")){this.maxSize=1;for(var e=this.collection.length;e>1;)this.collection.pop(),e--}else this.maxSize=3;this.toggleSkuGroupOpts()},toggleSkuGroupOpts:function(){this.checkMaxSize()?this.ui.skuGroupOpts.show():this.ui.skuGroupOpts.hide()},checkAndReverseUpdate:function(){this.toggleSkuGroupOpts(),this.reverseUpdate(),this.setSkuIndex()},reverseUpdate:function(){var e=this.goodsModel,n=this.collection.toJSON();t(n).each(function(t,n){if(!t.text)return!1;var i=n+1,o="sku_name_"+i,s=o+"_value",a={id:t.id,is_show:t.is_show,text:t.text};e.set(o,a,{silent:!0}),e.set(s,t.list,{silent:!0})}),this.removeUnnecessaryKeys(n)},setSkuIndex:function(){var e=this.collection.models,n=!!e.length,i=!!n&&e[0].get("is_show");t(e).each(function(e,n){var n=n+1,o=e.get("list");1==n&&i&&(e.set({is_show:i}),t(o).each(function(e,t){e.showImg=i})),e.set({index:n})}),this.del&&this.render(),this.del=!1},removeUnnecessaryKeys:function(e){a.removeSkuKeyValue(this.goodsModel,e.length)},onShowNote:function(e){var t=this,n=window.editConfig.sku.message;n||window.editConfig.sku.stock_locked&&(n="当前商品启用了门店网店库存同步，需要关闭同步才能新增规格项。"),n&&(this.notePopver||(this.notePopver=new c({of:i(e.target)[0],arrow:"bottom-left",data:{html:'<p class="text-left">'+n+"</p>"},autoCloseCallback:function(){t.notePopver=null}})))},onHideNote:function(){this.notePopver&&this.notePopver.close(),this.notePopver=null}})}),define("text!templates/stock.html",[],function(){return""}),define("text!templates/thead.html",[],function(){return'<thead>\n    <tr>\n        <% _.each(thead, function(item, index) {\n            if(item.list && item.list.length > 0) { %>\n            <th class="text-center"><%- item.text %></th>\n        <% }}); %>\n        <th class="th-price">价格（元）</th>\n        <% if(is_fx) { %>\n            <th class="th-profit">利润（元）</th>\n            <th class="th-stock">库存</th>\n            <th class="text-center">是否销售</th>\n        <% } else { %>\n            <th class="th-stock">库存</th>\n            <th class="th-code">商家编码</th>\n            <th class="text-cost-price">成本价</th>\n        <% } %>\n        <th class="text-right">销量</th>\n    </tr>\n</thead>\n'}),define("text!templates/tfoot.html",[],function(){return'<tfoot>\n    <tr>\n        <td colspan="<%=columns %>">\n            <div class="batch-opts">\n                批量设置：\n                <span class="js-batch-type">\n                    <% if (!window.editConfig.price.readonly) { %>\n                    <a class="js-batch-price" href="javascript:;">价格</a>\n                    <% } %>\n                    <% if(!is_fx) { %>\n                    &nbsp;&nbsp;\n                    <a class="js-batch-stock" href="javascript:;">库存</a>\n                    <% } %>\n                </span>\n                <span class="js-batch-form" style="display: none;">\n                    <input type="text" class="js-batch-txt input-mini" placeholder="" />\n                    <a class="js-batch-save" href="javascript:;">保存</a>\n                    <a class="js-batch-cancel" href="javascript:;">取消</a>\n                    <p class="help-desc"></p>\n                </span>\n            </div>\n        </td>\n    </tr>\n</tfoot>\n'}),define("text!templates/td.html",[],function(){return'<td>\n    <input <% if (typeof id !== \'undefined\') { %>data-stock-id="<%= id %>" <% } %>type="text" name="sku_price" class="js-price input-mini" value="<%=price %>" maxlength="10"<% if(!can_sell || window.editConfig.price.readonly) { %> disabled<% } %>/>\n</td>\n<% if(is_fx) { %>\n    <td class="js-atom-profit"><%=profit %></td>\n    <td><%=stock_num %></td>\n    <td class="text-center">\n        <% if(can_sell) { %>\n            <input class="js-is-sell" type="checkbox" name="is_sell" <% if(is_sell == \'1\') { %>checked<% } %> value="1" />\n        <% } else { %>\n            <input disabled class="js-is-sell" type="checkbox" name="is_sell" />\n        <% } %>\n    </td>\n<% } else { %>\n    <td>\n        <input\n            type="text"\n            name="stock_num"\n            class="js-stock-num input-mini"\n            value="<%- stock_num %>"\n            maxlength="9"\n            <%= stock_locked ? \'readonly="readonly"\' : \'\' %>\n        />\n    </td>\n    <td>\n        <input\n            type="text"\n            name="code"\n            class="js-code input-small"\n            value="<%- code %>"  <%= stock_locked ? \'readonly="readonly"\' : \'\' %>\n        />\n    </td>\n    <td>\n        <input\n            type="text"\n            name="cost_price"\n            class="js-cost-price input-small"\n            value="<%- cost_price %>"  <%= stock_locked ? \'readonly="readonly"\' : \'\' %>\n        />\n    </td>\n<% } %>\n<td class="text-right"><%=sold_num || 0 %></td>\n'}),define("views/stock",["require","underscore","backbone","marionette","core/event","core/reqres","commons/utils","core/utils","components/popover/content/app","text!templates/stock.html","text!templates/thead.html","text!templates/tfoot.html","text!templates/td.html"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("marionette"),o=e("core/event"),s=e("core/reqres"),a=e("commons/utils"),l=e("core/utils"),r=e("components/popover/content/app"),c=e("text!templates/stock.html"),d=e("text!templates/thead.html"),u=e("text!templates/tfoot.html"),p=e("text!templates/td.html");return i.Layout.extend({tagName:"table",className:"table-sku-stock",template:t.template(c),theadTemplate:t.template(d),tfootTemplate:t.template(u),tdTemplate:t.template(p),ui:{batchPrice:".js-batch-price",batchStock:".js-batch-stock",batchType:".js-batch-type",batchForm:".js-batch-form",batchTxt:".js-batch-txt",batchSave:".js-batch-save",batchCancel:".js-batch-cancel"},events:{"blur .js-price":"onAtomPriceBlur","input .js-price":"onAtomPriceInput","change .js-is-sell":"onAtomIsSellChange","blur .js-stock-num":"onAtomStockBlur","input .js-stock-num":"onAtomStockInput","input .js-code":"reverseUpdateStock","input .js-cost-price":"reverseUpdateStock","click @ui.batchPrice":"onBatchPriceClick","click @ui.batchStock":"onBatchStockClick","click @ui.batchSave":"onBatchSaveClick","click @ui.batchCancel":"onBatchCancelClick","mouseover .js-stock-num[readonly]":"onFocusStockNum","mouseover .js-code[readonly]":"onFocusCode","mouseleave .js-stock-num[readonly]":"onLeaveStockNum","mouseleave .js-code[readonly]":"onLeaveCode"},initialize:function(e){var t=this;t.skuList=e.skuList,t.isFx="10"==t.model.get("goods_type"),t.fixStockOrder(),t.stockBackup=t.model.get("stock"),t._modelBinder=new n.ModelBinder,t.setupStockResp(),t.setupPriceResp(),t.setupValidateResp(),t.listenTo(t.skuList,"add",t.rebuildStockData),t.listenTo(t.skuList,"remove",t.rebuildStockData),t.listenTo(t.skuList,"change",t.updateStockData),t.listenTo(t.skuList,"stock:sku:leaf:rename",t.handleSkuLeafRename)},onRender:function(){this.showStockView()},setupValidateResp:function(){var e=this;e.errorLen=0,s.setHandler("stock:validate",function(){return"0"==e.model.get("shop_method")?e.resetValidate():e.validateStockData(),e.errorLen})},setupStockResp:function(){var e=this;e.isStockModulShow=!1,s.setHandler("stock_module:is_show",function(){return e.isStockModulShow})},setupPriceResp:function(){var e=this;e.minPrice=.01,s.setHandler("min_price:get",function(){return e.minPrice})},rebuildStockData:function(){var e=this,t=e.generateStockData();e.stockBackup=t,e.model.set({stock:t},{silent:!0}),e.showStockView()},updateStockData:function(){var e=this,t=e.generateStockData();t=e.recoverBackup(t),e.model.set({stock:t},{silent:!0}),e.showStockView()},handleSkuLeafRename:function(e,n,i,o){var s=this.model.get("stock"),a="k"+e+"_id",l="v"+e+"_id",r="v"+e,c=t.filter(s,function(e){return e[a]==n&&e[l]==i.id});t.each(c,function(e){e.id="",e[l]=o.id,e[r]=o.text}),this.showStockView()},generateStockData:function(){var e=this,n=[];return t(e.skuList.toJSON()).each(function(i,o){n=t.isEmpty(n)?e.initSkuData(i,o):e.appendSkuInfo(n,i,o)}),n},onFocusStockNum:function(e){this.model.get("stock_locked")&&(this.stockPop=new r({of:e.target,arrow:"top-center",data:{html:"当前商品启用了门店网店库存同步，需要关闭同步才能修改库存。",className:"info-popover"}}))},onLeaveStockNum:function(){this.stockPop&&this.stockPop.close()},onFocusCode:function(e){this.model.get("stock_locked")&&(this.codePop=new r({of:e.target,arrow:"top-center",data:{html:"当前商品启用了门店网店库存同步，需要关闭同步才能修改商家编码。",className:"info-popover"}}))},onLeaveCode:function(){this.codePop&&this.codePop.close()},recoverBackup:function(e){var n=this;return t(e).each(function(t,i){var o=n.findStockInBackup(t);o&&(o.id&&(e[i].id=o.id),e[i].stock_num=o.stock_num,e[i].price=o.price,e[i].cost_price=o.cost_price,e[i].code=o.code,e[i].sold_num=o.sold_num,e[i].is_sell=o.is_sell,e[i].stock_locked=o.stock_locked)}),e},findStockInBackup:function(e){for(var t,n=this,i=n.getFilterKeys(e),o=0,s=n.stockBackup.length;o<s;o++){var a=n.stockBackup[o];if(i===n.getFilterKeys(a)){t=a;break}}return t},getFilterKeys:function(e){e=e||{};for(var t=[],n=1;n<=5;n++){var i="v"+n+"_id",o=e[i];o&&t.push(i+"_"+o)}return t.join("-")},updateStockBackup:function(e){this.stockBackup=e},initSkuData:function(e,n){var i=[],o={};return t(e.list).each(function(t){var s={id:0,price:"",stock_num:"",sold_num:"",code:"",is_sell:0,cost_price:""},a=n+1;s["k"+a+"_id"]=e.id,s["k"+a]=e.text,s["v"+a+"_id"]=t.id,s["v"+a]=t.text,o["v"+a+"_id"]=t.id,i.push(s)}),i},appendSkuInfo:function(e,n,i){if(t.isEmpty(n.list))return e;var o=[],s={};return t(e).each(function(e){t(n.list).each(function(a){var l={};t(e).each(function(e,t){l[t]=e});var r=i+1;l["k"+r+"_id"]=n.id,l["k"+r]=n.text,l["v"+r+"_id"]=a.id,l["v"+r]=a.text,s["v"+r+"_id"]=a.id,o.push(l)})}),o},showStockView:function(){var e=this;return 0===e.skuList.size()?(e.isStockModulShow=!1,o.trigger("stock_module:hide"),!1):(e.skuData=e.generateSkuData(),t(e.skuData).isEmpty()?(e.isStockModulShow=!1,o.trigger("stock_module:hide"),!1):(e.renderTable(),e.updatePrice(),e.updateTotalStock(),e.bindUIElements(),void(e.isFx&&e.updateIsSellStock())))},renderTable:function(){var e=this,t="";t+=e.renderHeader(),t+=e.renderBody(),t+=e.renderFooter(),e.$el.html(t),o.trigger("stock_module:show"),e.isStockModulShow=!0},renderHeader:function(){var e=this,t={thead:e.skuList.toJSON(),is_fx:e.isFx};return e.theadTemplate(t)},renderBody:function(){var e=this,n=e.skuData;return!t.isEmpty(n)&&(e.combine=e.calcCombine(n),e.generateRows())},renderFooter:function(){var e=this,t=e.skuList.size();return t=e.isFx?t+5:t+4,e.tfootTemplate({columns:t,is_fx:e.isFx})},generateRows:function(){var e=this;return e.TableHtml="<tbody>",e.outputTrTag=!1,e.trIndex=0,e.printRow(0,e.outputTrTag),e.TableHtml+="</tbody>",e.TableHtml},generateSkuData:function(){var e=this,t=[];return e.skuList.each(function(e){var n=e.get("list");n&&n.length>0&&t.push(n)}),t},calcCombine:function(e){for(var t=[],n=e.length,i=0;i<n;i++){t[i]=1;for(var o=i+1;o<n;o++)t[i]=t[i]*e[o].length}return t},printRow:function(e,n){var i=this,o=i.skuData,l=o.length;if(e===l)return!1;t(o[e]).each(function(t){var o=i.getAtomStockData(i.trIndex),r=s.request("price_range:get",o.id),c=!!r;if(c){n||(i.TableHtml+="<tr>",n=!0);var d='<td data-atom-id="'+t.id+'" rowspan="'+i.combine[e]+'">'+t.text+"</td>";i.TableHtml+=d,e===l-1&&(o.can_sell=c,o.is_fx=i.isFx,i.isFx&&(o.profit=a.calcProfit(o.price,r)),i.TableHtml+=i.tdTemplate(o)+"</tr>",i.trIndex+=1,n=!1);var u=e+1;i.printRow(u,n)}})},fixStockOrder:function(){var e=this.generateSkuData(),n=this.model.get("stock");if(this.model.get("id")&&n&&n.length>0&&e&&e.length>1){var i=e.length,o=null,s=[],a=[];o=l.descartes(e),t(o).each(function(e){var n=[],o={};t(e).each(function(e,t){n.push(e.id)}),t(n).each(function(e,t){var n=t+1;o["v"+n+"_id"]=e,n==i&&s.push(o)})}),t(s).each(function(e){var i=t.findWhere(n,e);a.push(i)}),this.model.set("stock",a,{silent:!0})}},getAtomStockData:function(e){var n=this,i=n.model.get("stock"),o=i[e];return o=t.extend({id:0,price:"",stock_num:"",sold_num:0,code:"",cost_price:"",stock_locked:!1,is_sell:0},o),o.price&&(o.price=parseFloat(o.price,10).toFixed(2),o.cost_price=parseFloat(o.cost_price||0,10).toFixed(2)),o},reverseUpdateStock:function(e){var t=this,n=$(e.target),i=n.attr("name");i="sku_price"===i?"price":i;var o=n.attr("type"),s="checkbox"==o?+n.is(":checked"):$.trim(n.val()),a=t.$("tr"),l=a.index(n.parents("tr"))-1,r=t.model.get("stock");r[l]||(r=t.generateStockData(t.skuList)),r[l][i]=s,t.updateStockBackup(r),t.model.set({stock:r},{silent:!0})},onAtomPriceBlur:function(e){var t=this,n=$(e.target),i=Number(n.val());n.val(i.toFixed(2,10)),t.validAtomInput(n,"price"),t.isFx&&t.updateProfit(n,i)},updateProfit:function(e,t){var n=e.data("stock-id"),i=e.parents("tr").find(".js-atom-profit"),o=s.request("price_range:get",n)||{},l=a.calcProfit(t,o);i.text(l)},onAtomStockBlur:function(e){var t=this,n=$(e.target);t.validAtomInput(n,"stock")},validAtomInput:function(e,t){var n,i=this,o=e.val(),s=e.parents("td"),a=s.find(".error-message");"price"===t?e.prop("disabled")||(n=i.validatePrice(o,e)):n=i.validateStockNumber(o),n?(0===a.length?(a=$('<div class="error-message"></div>'),s.append(a.html(n))):a.html(n),s.addClass("manual-valid-error"),i.errorLen+=1):(a.remove(),s.removeClass("manual-valid-error",function(){i.errorLen-=1}))},validAllPrice:function(){var e=this;e.$(".js-price").each(function(t,n){var i=$(n);e.validAtomInput(i,"price")})},validAllStock:function(){var e=this;e.$(".js-stock-num").each(function(t,n){var i=$(n);e.validAtomInput(i,"stock")})},validAllIsSell:function(){var e=this,t=e.model.get("stock");if(t&&!(t.length<1)){for(var n=!1,i=0,o=t.length;i<o;i++){t[i].is_sell&&(n=!0)}n?e.errorLen-=1:(e.errorLen+=1,l.errorNotify("请选择至少一个可销售的商品"))}},validatePrice:function(e,t){if(!e)return"价格不能为空";var n=Number(e);if(isNaN(n))return"请输入一个数字";var i={min:.01,max:9999999};return t&&(i=s.request("price_range:get",t.data("stock-id"))||i),n<i.min?"价格最小为 "+i.min:n>i.max?"价格最大为 "+i.max:n>9999999&&"价格最大不能超过 9999999"},validateStockNumber:function(e){if(!e)return"库存不能为空";var t=Number(e);return isNaN(t)?"请输入一个数字":t<0?"库存不能为负数":t>999999999?"库存最大不能超过 999999999":!/^\d+$/.test(t.toString())&&"库存格式不正确"},resetValidate:function(){var e=this;e.$(".manual-valid-error").removeClass("manual-valid-error"),e.$(".error-message").hide(),e.errorLen=0},validateStockData:function(){var e=this;e.errorLen=0,e.isStockModulShow&&(e.validAllPrice(),e.validAllStock(),e.isFx&&e.validAllIsSell())},onAtomPriceInput:function(e){var t=this;t.updatePrice(),t.reverseUpdateStock(e)},onAtomIsSellChange:function(e){var t=this;t.reverseUpdateStock(e),t.updateIsSellStock(),t.updatePrice()},onAtomStockInput:function(e){var t=this;t.updateTotalStock(),t.reverseUpdateStock(e)},updateIsSellStock:function(){for(var e=this,n=e.model.get("stock"),i=[],o=e.model.get("fx_goods_retail_price_limitation"),s=0,a=n.length;s<a;s++){var l=n[s];l.is_sell&&i.push(l)}var r=t.min(i,function(e){return Number(e.price)}),c=i.length>0?r.id:"total";o.total=o[c],e.model.set({fx_goods_retail_price_limitation:o}),e.validAllIsSell()},calcPrice:function(){var e=this,n=[];return e.$(".js-price").each(function(i,o){var s=$(o),a=$.trim(s.val());if(t.isEmpty(a))return!1;var l=Number(a);if(isNaN(l))return!1;var r=s.parent().parent().find(".js-is-sell");e.isFx&&r&&r.length>0?r.prop("checked")&&n.push(l):n.push(l)}),t.isEmpty(n)?0:t.min(n)},updatePrice:function(){var e=this,t=e.calcPrice();t=l.twoDecimal(t),e.minPrice=t,e.model.set({price:t})},calcTotalStock:function(){var e=this,t=0;return e.$(".js-stock-num").each(function(e,n){t+=Number($(n).val())}),t},updateTotalStock:function(){var e=this,t=e.calcTotalStock();e.model.set({total_stock:t})},onBatchPriceClick:function(e){var t=this;e.preventDefault(),t.showBatchForm("price")},hideBatchType:function(){},onBatchStockClick:function(e){var t=this;e.preventDefault(),t.showBatchForm("stock_num")},onBatchSaveClick:function(e){var t=this;e.preventDefault(),t.executeBatch(),t.hideBatchForm()},onBatchCancelClick:function(e){var t=this;e.preventDefault(),t.hideBatchForm()},showBatchForm:function(e){var t=this;t.batchType=e,"price"===e?t.ui.batchTxt.attr({maxlength:10,placeholder:"请输入价格"}):t.ui.batchTxt.attr({maxlength:9,placeholder:"请输入库存"}),t.ui.batchType.hide(),t.ui.batchForm.show()},hideBatchForm:function(){var e=this;e.ui.batchType.show(),e.ui.batchForm.hide()},executeBatch:function(){var e=this,t=e.ui.batchTxt.val(),n=e.batchType;if("price"===n){if(e.validatePrice(t))return l.errorNotify("请输入一个正确的价格。"),!1;t=Number(t).toFixed(2,10)+"",e.$(".js-price").val(t).trigger("input").trigger("blur"),e.updatePrice()}else{if(e.validateStockNumber(t))return l.errorNotify("请输入一个正确的库存值。"),!1;var i;e.$(".js-stock-num").each(function(e,n){i=$(n),i.prop("readonly")||i.prop("disabled")||i.val(t).trigger("input").trigger("blur")}),e.updateTotalStock()}e.batchUpdateStockData(n,t),e.ui.batchTxt.val("")},batchUpdateStockData:function(e,n){var i=this,o=i.model.get("stock");t(o).each(function(t){
1!==parseInt(t.stock_locked,10)&&(t[e]=n)}),i.model.set("stock",o)},showSelf:function(){this.$el.show()},hideSelf:function(){this.$el.hide()}})}),define("tpl!templates/sku_stock_info",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="info-group-title vbox">\n    <div class="group-inner">库存/规格</div>\n</div>\n<div class="info-group-cont vbox">\n    <div class="group-inner">\n        ',"10"!=goods_type&&(__p+='\n            <div class="js-goods-sku control-group">\n                <label class="js-goods-sku-control-label control-label">\n                    '+(null==(__t="1"==is_hotel?"房间规格：":"商品规格：")?"":__t)+'\n                </label>\n                <div id="sku-region" class="controls"></div>\n                <p class="help-desc hotel-sku-help" style="margin-left: 116px;display: none;">酒店类商品暂只支持1种规格项</p>\n            </div>\n        '),__p+='\n\n        <div class="js-goods-stock control-group">\n            <label class="js-goods-stock-control-label control-label">'+(null==(__t="1"==is_hotel?"房间库存：":"商品库存：")?"":__t)+'</label>\n            <div id="stock-region" class="controls sku-stock">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label"><em class="required">*</em>总库存：</label>\n            <div class="controls">\n                <input type="text" maxlength="9" '+(null==(__t=window.editConfig.sku.stock_locked?'data-info="当前商品启用了门店网店库存同步，需要关闭同步才能修改库存。"':"")?"":__t)+' class="js-global-stock input-small" name="total_stock" value="'+(null==(__t=total_stock)?"":__t)+'" />\n                <label class="checkbox inline">\n                    <input ',"10"==goods_type&&(__p+="disabled"),__p+=' type="checkbox" name="hide_stock" value="'+(null==(__t=hide_stock)?"":_.escape(__t))+'" ',"1"==hide_stock&&(__p+=" checked"),__p+=">页面不显示商品库存\n                </label>\n                ",__p+="1"==is_hotel?'\n                    <p class="help-desc help-desc-0">总库存为0，房间状态默认为关房</p>\n                    <p class="help-desc help-desc-1">发布后，商品库存以每日房态库存为准</p>\n                ':'\n                    <p class="help-desc help-desc-0">总库存为 0 时，会上架到『已售罄的商品』列表里</p>\n                    <p class="help-desc help-desc-1">发布后商品同步更新，以库存数字为准</p>\n                ',__p+='\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">商家编码：</label>\n            <div class="controls">\n                <input type="text" class="js-global-code input-small" '+(null==(__t=window.editConfig.sku.stock_locked?'readonly="readonly" data-info="当前商品启用了门店网店库存同步，需要关闭同步才能修改商家编码。"':"")?"":__t)+' name="goods_no" value="'+(null==(__t=goods_no)?"":__t)+'" />\n                <a style="display: none;" href="javascript:;" class="js-help-notes circle-help">?</a>\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}}),define("views/sku_stock_info",["require","jquery","backbone","marionette","core/event","commons/utils","collections/sku_list","views/sku","views/stock","components/popover/content/app","tpl!templates/sku_stock_info"],function(e){"use strict";var t=e("jquery"),n=e("backbone"),i=e("marionette"),o=e("core/event"),s=e("commons/utils"),a=e("collections/sku_list"),l=e("views/sku"),r=e("views/stock"),c=e("components/popover/content/app");return i.Layout.extend({className:"goods-info-group-inner",template:e("tpl!templates/sku_stock_info"),ui:{goodsSkuBlock:".js-goods-sku",goodsStockBlock:".js-goods-stock",totalStockTxt:'[name="total_stock"]'},events:{"mouseover .js-global-stock,.js-global-code":"onHoverGlobalStockAndCode","mouseleave .js-global-stock,.js-global-code":"onLeaveGlobalStockAndCode"},regions:{skuRegion:"#sku-region",stockRegion:"#stock-region"},_modelBinder:void 0,onHoverGlobalStockAndCode:function(e){var n=t(e.target).data("info");t(e.target).prop("readonly")&&n&&(this.infoPop=new c({of:e.target,arrow:"top-center",data:{html:n,className:"info-popover"}}))},onLeaveGlobalStockAndCode:function(e){this.infoPop&&this.infoPop.close()},initialize:function(e){this.isFx=10==+this.model.get("goods_type"),this._modelBinder=new n.ModelBinder,this.isHotel=e.isHotel,this.listenTo(this.model,"change",s.showLog),this.listenTo(this.model,"change:shop_method",this.onShopMethodChanged),this.listenTo(this.model,"change:shipment",this.onShipmentChange),this.listenTo(o,"sku_module:show",this.showSkuModule),this.listenTo(o,"sku_module:hide",this.hideSkuModule),this.listenTo(o,"stock_module:show",this.showStockModule),this.listenTo(o,"stock_module:hide",this.hideStockModule),this.listenTo(o,"sku_stock:update",this.updateSkuStock)},onClose:function(){this._modelBinder.unbind()},onRender:function(){0==+this.model.get("shop_method")&&this.hideSelf()},onShow:function(){this.initDataBindings(),this.initSkuView(),this.initStockView(),this.onShipmentChange()},onShipmentChange:function(){4==+this.model.get("shipment")?(this.$(".js-goods-sku-control-label").text("房间规格："),this.$(".js-goods-stock-control-label").text("房间库存："),this.$(".help-desc-0").text("总库存为0，房间状态默认为关房"),this.$(".help-desc-1").text("发布后，商品库存以每日房态库存为准"),this.$(".hotel-sku-help").show()):(this.$(".js-goods-sku-control-label").text("商品规格："),this.$(".js-goods-stock-control-label").text("商品库存："),this.$(".help-desc-0").text("总库存为 0 时，会上架到『已售罄的商品』列表里"),this.$(".help-desc-1").text("发布后商品同步更新，以库存数字为准"),this.$(".hotel-sku-help").hide())},initDataBindings:function(){var e={total_stock:'[name="total_stock"]',hide_stock:{selector:'[name="hide_stock"]',converter:s.booleanConverter},goods_no:'[name="goods_no"]'};this._modelBinder.bind(this.model,this.el,e)},initSkuView:function(){var e=this.getSkuData()||[],t=this.skuList=new a(e);this.model.skuList=t,this.skuRegion.show(new l({collection:t,goodsModel:this.model}))},getSkuData:function(){for(var e=[],t=this.model.toJSON(),n=1;n<6;n++){var i="sku_name_"+n,o=i+"_value",s=t[i],a=t[o]||[];s&&e.push({id:s.id,is_show:s.is_show||!1,text:s.text,list:a})}return e},initStockView:function(){this.stockRegion.show(new r({model:this.model,skuList:this.skuList}))},updateSkuStock:function(){if(!this.skuList)return!1;var e=this.getSkuData()||[];this.skuList.reset(e),this.model.set("stock",[])},onShopMethodChanged:function(e,t){0==+t?this.hideSelf():this.showSelf()},showSelf:function(){this.$el.show()},hideSelf:function(){this.$el.hide()},showSkuModule:function(){this.ui.goodsSkuBlock.show()},hideSkuModule:function(){this.ui.goodsSkuBlock.hide()},showStockModule:function(){this.ui.goodsStockBlock.show(),this.ui.totalStockTxt.prop("readonly",!0)},hideStockModule:function(){this.ui.goodsStockBlock.hide(),this.isFx?this.ui.totalStockTxt.prop("readonly",!0):this.ui.totalStockTxt.prop("readonly",Boolean(window.editConfig.sku.stock_locked))}})}),define("tpl!components/tag_selected/templates/taglist",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-tag">\n    <select type="hidden" class="js-select2" style="width: 242px;" tabindex="-1" multiple>\n        ',_.each(data,function(e){__p+='\n            <option value="'+(null==(__t=e.id)?"":__t)+'">'+(null==(__t=e.text)?"":__t)+"</option>\n        "}),__p+="\n    </select>\n</div>\n";return __p}}),define("components/tag_selected/app",["require","jquery","underscore","core/utils","zenjs/util/session_storage","tpl!./templates/taglist"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("core/utils"),o=e("zenjs/util/session_storage"),s=e("tpl!./templates/taglist"),a=function(e){var n=this;n.opts=t.extend({},e),n.tag_list=[],n.tag_selected=n.opts.data||[],n.sessionStorageKey=n.opts.prefix+"-"+window._global.kdt_id+"-tag-list",n.getTagList().done(function(){t(e.el).html(s({data:n.tag_list||[]})),n.selPlace=t(n.opts.el).find(".js-select2").eq(0),n.initializeSelect()})};return a.prototype.initializeSelect=function(){var e=this;e.selPlace.select2({placeholder:e.opts.placeholder,maximumSelectionSize:30,formatSelectionTooBig:function(e){return"你最多只能选择"+e+"项"}}).on("change",n(e.onSelect2Change).bind(e));var t=this.getTagsListIds(),i=[];n.each(this.tag_selected,function(e){n.indexOf(t,e)!==-1&&i.push(e)}),this.tag_selected=i,e.selPlace.select2("val",this.tag_selected)},a.prototype.getTagsListIds=function(){return n.map(this.tag_list,function(e){return e.id.toString()})},a.prototype.onSelect2Change=function(e){var t=this,i=e.added||e.removed;e.added?i.id&&t.tag_selected.push(i.id):e.removed&&(t.tag_selected=n.without(t.tag_selected,i.id)),t.opts.callback(t.tag_selected)},a.prototype.getTagList=function(){var e=this,n=t.Deferred(),o=this.getSessionStorage();return o?n.resolve(o):i.ajax({url:window._global.url.www+e.opts.dataUrl}).done(function(t){t=e.opts.formatData?e.opts.formatData(t):t,n.resolve(t)}).fail(function(){n.resolve([])}),n.done(function(e){this.tag_list=e,this.setSessionStorage()}.bind(this)),n.promise()},a.prototype.setSessionStorage=function(){o.setItem(this.sessionStorageKey,JSON.stringify(this.tag_list))},a.prototype.getSessionStorage=function(){var e=o.getItem(this.sessionStorageKey);return e&&(e=JSON.parse(e)),e},a}),define("models/message_item",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({defaults:{name:"留言",type:"text",datetime:"0",multiple:"0",required:"1",disable:!1,disableDelete:!1,disableEditName:!1,disableType:!1,disableRequired:!1,disableMultiple:!1}})}),define("collections/message",["require","backbone","../models/message_item"],function(e){"use strict";var t=e("backbone"),n=e("../models/message_item");return t.Collection.extend({model:n})}),define("models/delivery/sku_weight",["require","underscore","backbone"],function(e){"use strict";var t=e("underscore");return e("backbone").Model.extend({defaults:{sku_weight:[],item_weight:0,weight_type:1},initialize:function(e,n){this.goodsModel=n.goodsModel,this.set(this.goodsModel.toJSON());var i=t.clone(this.goodsModel.get("stock")),o=this.goodsModel.get("sku_weight")||[],s=t.map(i,function(e){return{sku_id:e.id||0,weight:0,s1:e.s1,s2:e.s2,s3:e.s3,s4:e.s4,s5:e.s5}}),a=t(s).map(function(e,n){return t(o).each(function(n){e.sku_id==n.sku_id&&(e=t.extend({},e,n))}),e});this.set("sku_weight",a),this.rebuildSKURenderData(a)},getSKURenderData:function(){return this.parsedSKURenderData||this.rebuildSKURenderData()},updateSKUData:function(e){var t=this.get("sku_weight");this.findSKUInOldList(e,t).weight=e.weight},fullfillSKUList:function(){var e=function(e,n,i){var o=[];return t(e.list).each(function(e){var t={sku_id:0,weight:i||0};t["s"+(n+1)]=e.id,o.push(t)}),o},n=function(e,n,i){if(t.isEmpty(n.list))return e;var o=[];return t(e).each(function(e){t(n.list).each(function(n){var s={};t(e).each(function(e,t){s[t]=e}),s["s"+(i+1)]=n.id,o.push(s)})}),o};return function(i){var o=this.goodsModel.skuList.toJSON(),s=[];return t(o).each(function(o,a){s=t.isEmpty(s)?e(o,a,i):n(s,o,a)}),s}}(),recoverSKUWeightData:function(e){var n=this,i=this.get("sku_weight");return t(e).each(function(e,t){var o=n.findSKUInOldList(e,i);o&&(e.weight=o.weight,e.sku_id=o.sku_id)}),e},findSKUInOldList:function(){var e=function(e){for(var t=[],n=0;n<5;n++){var i="s"+(n+1);if(!e[i])break;t.push(e[i])}return t.join("-")};return function(t,n){for(var i,o=e(t),s=0,a=n.length;s<a;s++){var l=n[s];if(o===e(l)){i=l;break}}return i}}(),rebuildSKURenderData:function(e){var n=this.goodsModel.skuList,i=n.toJSON(),o={},s=[1,1,1],a=[];return e=e.sort(function(e,t){return e.s1!=t.s1?e.s1<t.s1?-1:1:e.s2!=t.s2?e.s2<t.s2?-1:1:e.s3<t.s3?-1:1}),t.each(i,function(e,n){var i="s"+(n+1);s[n]=e.list.length||1,e.list.length&&(a.push(e.text),o[i]=o[i]||{}),t.each(e.list,function(e){o[i][e.id]=e.text})}),this.parsedSKURenderData={headerList:a,skuNameMap:o,skuLenMap:s,list:e},this.parsedSKURenderData}})}),define("text!templates/delivery/sku_weight.html",[],function(){return'<%\n    var s1Span = skus_weight_render_data.skuLenMap[1] * skus_weight_render_data.skuLenMap[2];\n    var s2Span = skus_weight_render_data.skuLenMap[2];\n%>\n\n<div class="control-group">\n    <label class="control-label pull-left"></label>\n    <div class="controls">\n        <p>当前运费模版，按物流重量（含包装）计费</p>\n        <div>\n            <label class="pull-left">\n                <em class="required">*</em>\n                物流重量:\n            </label>\n            <div style="margin-left: 70px; padding: 0 10px 10px; background-color: #fff; border: 1px solid #e5e5e5;">\n                <table class="table-sku-stock">\n                    <thead>\n                        <tr>\n                            <% for (var i = 0; i < skus_weight_render_data.headerList.length; i++) { %>\n                                <th class="text-center"><%= skus_weight_render_data.headerList[i] %></th>\n                            <% } %>\n                            <th>重量(Kg)</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <%\n                            for (var i = 0; i < skus_weight_render_data.list.length; i++) {\n                                var item = skus_weight_render_data.list[i];\n                        %>\n                            <tr>\n\n                                <%\n                                    if (i % s1Span == 0 && +item.s1) {\n                                %>\n                                        <td class="text-center" rowspan="<%= s1Span %>"><%= skus_weight_render_data.skuNameMap.s1[item.s1] %></td>\n                                <%\n                                    }\n                                %>\n                                <%\n                                    if (i % s2Span == 0 && +item.s2) {\n                                %>\n                                        <td class="text-center" rowspan="<%= s2Span %>"><%= skus_weight_render_data.skuNameMap.s2[item.s2] %></td>\n                                <%\n                                    }\n                                %>\n                                <%\n                                    if (+item.s3) {\n                                %>\n                                        <td class="text-center"><%= skus_weight_render_data.skuNameMap.s3[item.s3] %></td>\n                                <%\n                                    }\n                                %>\n\n                                <td class="">\n                                    <input type="text"\n                                        class="input-small js-sku-weight-input"\n                                        data-skuid="<%= item.sku_id %>"\n                                        data-s1="<%= item.s1 %>"\n                                        data-s2="<%= item.s2 %>"\n                                        data-s3="<%= item.s3 %>"\n                                        value="<%= parseFloat(item.weight / 1000).toFixed(3) %>"\n                                    />\n                                </td>\n\n                            </tr>\n                        <% } %>\n                    </tbody>\n                    <tfoot>\n                        <tr>\n                            <td colspan="<%= skus_weight_render_data.headerList.length + 1 %>">\n                                <div class="batch-opts">\n                                    批量设置：\n                                    <span class="js-batch-weight-type">\n                                        <a class="js-batch-weight" href="javascript:;">重量</a>\n                                    </span>\n                                    <span class="js-batch-weight-form" style="display: none;">\n                                        <input type="text" class="js-batch-weight-txt input-mini" placeholder="">\n                                        <a class="js-batch-save" href="javascript:;">保存</a>\n                                        <a class="js-batch-cancel" href="javascript:;">取消</a>\n                                        <p class="help-desc"></p>\n                                    </span>\n                                </div>\n                            </td>\n                        </tr>\n                    </tfoot>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!templates/delivery/sku_single_weight.html",[],function(){return'<div class="control-group">\n    <label class="control-label pull-left"></label>\n    <div class="controls">\n        <p>当前运费模版，按物流重量（含包装）计费</p>\n        <div>\n            <label class="pull-left">\n                <em class="required">*</em>\n                物流重量:\n            </label>\n            <div style="margin-left: 70px;">\n            \t<div class="input-prepend">\n                    <span class="add-on">Kg</span>\n                    <input type="text" name="weight" value="<%= parseFloat(item_weight / 1000).toFixed(3) %>" class="input-small js-single-weight">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("views/delivery/sku_weight",["require","marionette","underscore","jquery","core/utils","core/reqres","models/delivery/sku_weight","text!templates/delivery/sku_weight.html","text!templates/delivery/sku_single_weight.html"],function(e){"use strict";var t=e("marionette"),n=e("underscore"),i=e("jquery"),o=e("core/utils"),s=e("core/reqres"),a=e("models/delivery/sku_weight"),l=e("text!templates/delivery/sku_weight.html"),r=e("text!templates/delivery/sku_single_weight.html");return t.Layout.extend({tableTemplate:n.template(l),singleTemplate:n.template(r),className:"hide",getTemplate:function(){var e=this.model.get("weight_type");return 2===e?this.tableTemplate:this.singleTemplate},initialize:function(e){this.goodsModel=e.goodsModel,this.model=new a({},{goodsModel:this.goodsModel}),this.initSKUListener(),this.onDeliveryToggle(),this.switchWeightType()},serializeData:function(){var e={};return e.skus_weight_render_data=this.model.getSKURenderData(),e.skus_weight=this.model.toJSON(),e.item_weight=this.model.get("item_weight"),e},onRender:function(){},events:{"blur .js-sku-weight-input":"validWeightInput","change .js-sku-weight-input":"onSKUWeightTableInputChange","change .js-single-weight":"onSKUSingleWeightChange","click .js-batch-weight":"onBatchWeightClick","click .js-batch-save":"onBatchWeightSaveClick","click .js-batch-cancel":"onBatchWeightCancelClick"},initSKUListener:function(){this.listenTo(this.goodsModel,"change:delivery",n(this.onDeliveryToggle).bind(this)),this.listenTo(this.goodsModel,"change:delivery_template_type",n(this.onDeliveryToggle).bind(this));var e=this.goodsModel.skuList;e&&(this.listenTo(e,"add",n(this.rebuildSKUWeightData).bind(this)),this.listenTo(e,"remove",n(this.rebuildSKUWeightData).bind(this)),this.listenTo(e,"change",n(this.updateSKUWeightData).bind(this)),this.listenTo(e,"stock:sku:leaf:rename",n(this.handleSkuLeafRename).bind(this)));var t=this;s.setHandler("delivery:sku_weight:validate",function(){var e="";if(0!=+t.goodsModel.get("delivery")&&2==+t.goodsModel.get("delivery_template_type"))if(1==+t.model.get("weight_type")){var i=t.model.get("item_weight");if(!i||0==+i)return o.errorNotify("请填写商品重量"),"请填写商品重量";if(e=t.isWeightInvalid(i))return o.errorNotify(e),e}else{var s=[],a=t.model.get("sku_weight");if(n.each(a,function(e,n){var i=e.weight||0;t.isWeightInvalid(i)&&s.push(e)}),s.length>0)return t.highlightErrorInput(s),"请填写正确的商品sku重量"}})},multiply:function(e,t){var n,i,o,s;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return s=n+i,o=Math.pow(10,s),e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".","")),e*t/o},validWeightInput:function(e){var t=this,n=i(e.target),o=n.val(),s=n.parents("td"),a=s.find(".error-message"),l=t.validateWeight(o);l?(0===a.length?(a=i('<div class="error-message"></div>'),s.append(a.html(l))):a.html(l),s.addClass("manual-valid-error"),t.errorLen+=1):(a.remove(),s.removeClass("manual-valid-error",function(){t.errorLen-=1}))},validateWeight:function(e){if(!e)return"重量不能为空";var t=Number(e);return isNaN(t)?"请输入一个数字":t<=0?"重量最小为0.001kg":t>1e4?"重量最大不能超过10000kg":!/^\d+(\.\d{1,3})?$/.test(t.toString())&&"商品重量最多精确到0.001kg"},isWeightInvalid:function(e){return e?Math.abs(Number(e).toFixed(0)-e)>2.220446049250313e-13?"商品重量最多精确到0.001kg":e>1e7&&"最大重量不能超过10000kg":"请填写商品重量"},onSKUWeightTableInputChange:function(e){var t=i(e.target),n=+t.data("skuid"),o=+t.data("s1"),s=+t.data("s2"),a=+t.data("s3"),l=this.multiply(t.val(),1e3),r={s1:o,s2:s,s3:a,sku_id:n,weight:l};this.model.updateSKUData(r),this.goodsModel.set("sku_weight",this.model.get("sku_weight"))},onSKUSingleWeightChange:function(e){var t=i(e.target),n=t.val();/^\d+(\.\d{1,3})?$/.test(n)||t.val(n),n=this.multiply(n,1e3),this.model.set("item_weight",n),this.goodsModel.set("item_weight",n)},onBatchWeightClick:function(){this.$(".js-batch-weight-form").show(),this.$(".js-batch-weight-type").hide()},onBatchWeightSaveClick:function(){var e=this.$(".js-batch-weight-txt").val();if(!/^\d+(\.\d{1,3})?$/.test(e))return void o.errorNotify("请填写一个正确的重量数字");if(e>1e4)return void o.errorNotify("最大重量不能超过10000kg");e=this.multiply(e,1e3);var t=this.model.fullfillSKUList(e);this.model.set("sku_weight",t),this.goodsModel.set("sku_weight",t),this.model.rebuildSKURenderData(t),this.render()},onBatchWeightCancelClick:function(){this.$(".js-batch-weight-form").hide(),this.$(".js-batch-weight-type").show()},onDeliveryToggle:function(){var e=1==this.goodsModel.get("delivery"),t=this.goodsModel.get("delivery_template_type");e&&2==t?this.$el.removeClass("hide"):this.$el.addClass("hide")},switchWeightType:function(){var e=this.model.get("sku_weight"),t=e.length>0?2:1;this.model.set("weight_type",t)},rebuildSKUWeightData:function(){var e=this.model.fullfillSKUList();e=this.model.recoverSKUWeightData(e),this.model.set("sku_weight",e),this.goodsModel.set("sku_weight",e),this.model.rebuildSKURenderData(e),this.switchWeightType(),this.render()},updateSKUWeightData:function(){var e=this.model.fullfillSKUList();e=this.model.recoverSKUWeightData(e),this.model.set("sku_weight",e),this.goodsModel.set("sku_weight",e),e.length>0&&(this.model.set("item_weight",0),this.goodsModel.set("item_weight",0)),this.model.rebuildSKURenderData(e),this.switchWeightType(),this.render()},handleSkuLeafRename:function(e,t,i,o){var s=this.model.get("stock"),a="k"+e+"_id",l="v"+e+"_id",r="v"+e,c=n.filter(s,function(e){return e[a]==t&&e[l]==i.id});n.each(c,function(e){e.id="",e[l]=o.id,e[r]=o.text}),this.rebuildSKUWeightData()},highlightErrorInput:function(e){var t=this;n.each(e,function(e){var n="";if(e.sku_id)n+='[data-skuid="'+e.sku_id+'"]';else for(var i=1;i<4;i++)e["s"+i]&&(n+="[data-s"+i+'="'+e["s"+i]+'"]');var o=t.$(n),s=o.parent();s.hasClass("manual-valid-error")||(s.addClass("manual-valid-error"),o.one("click",function(e){s.removeClass("manual-valid-error")}))})}})}),define("text!templates/delivery/index.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>运费设置：</label>\n    <div class="controls">\n        <% if(goods_type == \'10\' && fx_shipper_type == \'supplier\') { %>\n            <div class="static-value">\n                该商品为分销商品，暂不支持修改运费、配送信息\n            </div>\n        <% } else { %>\n            <label class="radio">\n                <input id="js-unified-postage" type="radio" name="delivery" value="0" <% if (delivery_template_id == \'\') { %>checked<% } %>>统一邮费\n                <div class="input-prepend">\n                    <span class="add-on">￥</span>\n                    <input type="text" name="postage" value="<%= postage %>" class="input-small js-postage">\n                </div>\n            </label>\n        <% } %>\n    </div>\n</div>\n<% if(goods_type == \'10\' && fx_shipper_type == \'supplier\') { %>\n<% } else { %>\n    <div class="control-group" style="margin-top: -20px;">\n        <label class="control-label"></label>\n        <div class="controls">\n            <label class="radio mat10">\n                <input id="js-use-delivery" type="radio" name="delivery" value="1" <% if (delivery_template_id != \'\') { %>checked<% } %>>运费模版\n                <div class="delivery-template" style="display: inline-block;">\n                    <input type="hidden" name="delivery_template_id" value="<%=delivery_template_id %>" class="js-delivery-template">\n                    <div class="help-inline">\n                        <a class="js-refresh-delivery" href="javascript:;">刷新</a>\n                        <span class="c-gray">|</span>\n                        <a href="<%=window._global.url.www %>/trade/delivery#add" target="_blank" class="new-window">新建</a>\n                        <span class="c-gray">|</span>\n                        <a href="<%=window._global.url.help %>/qa#/menu/2119/detail/994?_k=h6uj8k" target="_blank" class="new-window">如何设置合适的运费模版？</a>\n                    </div>\n                </div>\n            </label>\n        </div>\n    </div>\n<% } %>\n<div class="js-delivery-sku-weight"></div>\n'}),define("views/delivery/index",["require","jquery","underscore","backbone","marionette","core/utils","commons/utils","./sku_weight","text!templates/delivery/index.html"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("backbone"),o=e("marionette"),s=e("core/utils"),a=e("commons/utils"),l=e("./sku_weight"),r=e("text!templates/delivery/index.html");return o.Layout.extend({template:n.template(r),ui:{useDelivery:"#js-use-delivery",unifiedPostage:"#js-unified-postage",deliveryTemplate:".js-delivery-template",refreshDelivery:".js-refresh-delivery",postageTxt:".js-postage",skuWeight:".js-delivery-sku-weight"},events:{"click @ui.refreshDelivery":"onRefreshDeliveryClick","change @ui.unifiedPostage":"onUnifiedPostageChange","focus @ui.postageTxt":"onPostageTxtFocus","change @ui.useDelivery":"onUseDeliveryChange"},regions:{skuWeightRegion:".js-delivery-sku-weight"},initialize:function(e){window.globalModel=this.model,this._modelBinder=new i.ModelBinder},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON(),e=this.processData(e)),e},onClose:function(){this._modelBinder.unbind()},processData:function(e){var t="0"==e.delivery_template_id?"":e.delivery_template_id;return e.delivery_template_id=t,e},onRender:function(){this.initDeliveryTemplate(),this.initDataBinding(),this.skuWeightRegion.show(new l({goodsModel:this.model}))},initDataBinding:function(){var e={},t=this.model.get("goods_type"),i=+this.model.get("is_hotel");"10"==t||i||n(e).extend({postage:{selector:'[name="postage"]',converter:this.postageConverter}}),this._modelBinder.bind(this.model,this.el,e)},initDeliveryTemplate:function(){this.deliveryData=[],this.fetchDeliveryData()},focusText:function(){this.ui.postageTxt.val("0.00"),this.onPostageTxtFocus()},onRefreshDeliveryClick:function(e){e.preventDefault(),this.clearDeliveryTemplate(),this.fetchDeliveryData()},onUseDeliveryChange:function(){this.ui.useDelivery.prop("checked")&&(this.model.set("delivery","1",{silent:!0}),t(this.ui.deliveryTemplate).select2("open"))},onUnifiedPostageChange:function(){this.ui.unifiedPostage.prop("checked")&&(this.model.set("delivery","0"),this.setToUsePostage())},onPostageTxtFocus:function(e){this.ui.unifiedPostage.prop("checked",!0).trigger("change")},clearDeliveryTemplate:function(){t(this.ui.deliveryTemplate).select2("val",0),this.model.set({delivery_template_type:0,delivery_template_id:0})},selectDeliveryTemplate:function(e,t){this.ui.useDelivery.prop("checked",!0);var n=e.id;this.model.set({delivery:1,delivery_template_type:e.delivery_type,delivery_template_id:n})},getPostageValue:function(){var e=this.ui.postageTxt.val();return e=a.numberValueFix(e)},fetchDeliveryData:function(){var e=this;if(this.isFetching)return!1;try{this.xhr.abort()}catch(e){}this.isFetching=!0;var t=window._global.url.www+"/trade/delivery/simpleTemplates.json";this.xhr=s.ajax({url:t,method:"GET"}).done(function(t){e.processDeliveryData(t)}).fail(function(e){s.errorNotify(e)}).always(function(){e.isFetching=!1})},processDeliveryData:function(e){var t=[];n(e).each(function(e){t.push({id:e.template_id,text:e.name,delivery_type:e.valuation_type})});var i=this.getSelect2Config(t);this.initDeliverySelect2(i)},setToUsePostage:function(){this.clearDeliveryTemplate();var e=this.getPostageValue();this.model.set("postage",e)},initDeliverySelect2:function(e){var n,i=this;try{t(this.ui.deliveryTemplate).select2("destroy"),t(this.ui.deliveryTemplate).select2(e).on("select2-opening",function(e){}).on("select2-selecting",function(e){var t=e.object;i.selectDeliveryTemplate(t,e)}),n=t(this.ui.deliveryTemplate).select2("data"),n&&n.delivery_type&&this.model.set({delivery_template_type:n.delivery_type})}catch(e){}},getSelect2Config:function(e){var t={multiple:!1,maximumInputLength:12,width:200,data:e};return t.placeholder=n.isEmpty(e)?"没有可用运费模版":"请选择运费模版...",t},postageConverter:function(e,t,n,i,o){return t=a.numberValueFix(t)}})}),define("components/validation/validate",["backbone","backboneValidate"],function(e){_.extend(e.Validation.patterns,{mobile:/^1\d{10}$/,integer:/^[1-9]\d*$/,zipCode:/^\d{6}$/}),_.extend(e.Validation.messages,{mobile:"请输入正确的手机号码"}),_.extend(e.Validation.callbacks,{valid:function(e,t,n){t.indexOf(".")>=0&&(t=t.split(".").join("_"));var i,o;return i=e.$("["+n+"="+t+"]"),0===i.length?(i=e.$("["+n+'^="'+t+'"]'),o=i.parents(".control-group").first()):o=i.parents(".control-group").first(),o.removeClass("error"),"tooltip"!==i.data("error-style")?"inline"===i.data("error-style")?o.find(".help-inline.error-message").remove():o.find(".help-block.error-message").remove():i.data("tooltip")?i.tooltip("hide"):void 0},invalid:function(e,t,n,i){t.indexOf(".")>=0&&(t=t.split(".").join("_"));var o,s,a,l;return o=e.$("["+i+"="+t+"]"),0===o.length?(o=e.$("["+i+'^="'+t+'"]'),s=o.parents(".control-group").first()):s=o.parents(".control-group").first(),s.addClass("error"),"tooltip"===o.data("error-style")?(a=o.data("tooltip-position")||"right",o.tooltip({placement:a,trigger:"manual",title:n}),o.tooltip("show")):"inline"===o.data("error-style")?(0===s.find(".help-inline").length&&s.find(".controls").append('<span class="help-inline error-message"></span>'),l=s.find(".help-inline"),l.html(n)):"block"===o.data("error-style")?(0===s.find(".help-block").length&&s.append('<p class="help-block error-message"></p>'),l=s.find(".help-block"),l.html(n)):(0===s.find(".help-block").length&&s.find(".controls").append('<p class="help-block error-message"></p>'),l=s.find(".help-block"),l.html(n))}})}),define("text!templates/other_info.html",[],function(){
return'<div class="info-group-title vbox">\n    <div class="group-inner">\n        <% // 酒店房间类型特殊处理 %>\n        <%= is_hotel == \'1\' ? \'其他\' : \'物流/其他\' %>\n    </div>\n</div>\n<div class="info-group-cont vbox">\n    <div class="group-inner">\n        <div class="js-delivery-group">\n            <div class="control-group">\n                <label class="control-label"><em class="required">*</em>运费设置：</label>\n                <div class="controls">\n                    <% if(goods_type == \'10\' && fx_shipper_type == \'supplier\') { %>\n                        <div class="static-value">\n                            该商品为分销商品，暂不支持修改运费、配送信息\n                        </div>\n                    <% } else { %>\n                        <label class="radio">\n                            <input id="js-unified-postage" type="radio" name="delivery" value="0" <% if (delivery_template_id == \'\') { %>checked<% } %>>统一邮费\n                            <div class="input-prepend">\n                                <span class="add-on">￥</span>\n                                <input type="text" name="postage" value="<%= postage %>" class="input-small js-postage">\n                            </div>\n                        </label>\n                    <% } %>\n                </div>\n            </div>\n            <% if(goods_type == \'10\' && fx_shipper_type == \'supplier\') { %>\n            <% } else { %>\n                <div class="control-group" style="margin-top: -20px;">\n                    <label class="control-label"></label>\n                    <div class="controls">\n                        <label class="radio mat10">\n                            <input id="js-use-delivery" type="radio" name="delivery" value="1" <% if (delivery_template_id != \'\') { %>checked<% } %>>运费模版\n                            <div class="delivery-template" style="display: inline-block;">\n                                <input type="hidden" name="delivery_template_id" value="<%- delivery_template_id %>" class="js-delivery-template">\n                                <div class="help-inline">\n                                    <a class="js-refresh-delivery" href="javascript:;">刷新</a>\n                                    <span class="c-gray">|</span>\n                                    <a href="<%=window._global.url.www %>/trade/delivery#add" target="_blank" class="new-window">新建</a>\n                                    <span class="c-gray">|</span>\n                                    <a href="<%=window._global.url.help %>/qa#/menu/2119/detail/994?_k=h6uj8k" target="_blank" class="new-window">如何设置合适的运费模版？</a>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                </div>\n            <% } %>\n        </div>\n        <div class="control-group">\n            <label class="control-label">每人限购：</label>\n            <div class="controls <%= window.editConfig.quota.readonly ? "js-lock-help-note" : "" %>">\n                <input type="text" name="quota" value="<%=quota %>" class="input-small js-quota" <%= window.editConfig.quota.readonly ? "readonly" : "" %> >\n                <% if (is_hotel == \'1\') { %>\n                    <p class="help-desc quota-help-desc">限购数量 ＝间＊晚  示例 限购数量3  ＝3晚一间 或1晚3间</p>\n                <% } else { %>\n                    <p class="help-desc quota-help-desc">0 代表不限购</p>\n                <% } %>\n            </div>\n        </div>\n        <div class="control-group js-purchase-right">\n            <label class="control-label">购买权限：</label>\n            <div class="controls <%= window.editConfig.purchase_right.readonly ? "js-lock-help-note" : ""%>">\n                <label class="checkbox inline">\n                    <input type="checkbox" name="purchase_right" value="1"\n                        <% if (purchase_right == \'1\') { %>checked<% } %>\n                        <%= window.editConfig.purchase_right.readonly ? " disabled" : "" %>\n                    >设置购买权限\n                </label>\n                <div class="js-purchase-right-setting">\n                    <label class="checkbox mt10">\n                        <span>请选择可购买该商品的会员身份</span>\n                        <div class="js-member-level"></div>\n                    </label>\n                    <label class="checkbox mt10 js-user-tag-setting">\n                        <span>请选择可购买该商品的用户标签</span>\n                        <div class="js-user-tag"></div>\n                    </label>\n                    <label class="checkbox">\n                        <span>以上均不选择，则默认为所有用户</span>\n                    </label>\n                </div>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label">要求留言：</label>\n            <div class="controls">\n                <input type="hidden" name="messages" />\n                <div id="messages-region"></div>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label">开售时间：</label>\n            <div class="controls <%= window.editConfig.sold_time.readonly ? "js-lock-help-note" : "" %>">\n                <label class="radio">\n                    <input type="radio" name="sold_time" value="0" <% if (sold_time == \'0\') { %>checked<% } %> <%= window.editConfig.sold_time.readonly ? "disabled" : "" %> >立即开售\n                </label>\n                <label class="radio mat5" for="sold_time">\n                    <input type="radio" id="sold_time" name="sold_time" value="1" <% if (sold_time == \'1\') { %>checked<% } %> <%= window.editConfig.sold_time.readonly ? "disabled" : "" %> >定时开售\n                    <input id="start_sold_time" name="start_sold_time" class="input-medium js-sold-time <% if (sold_time == \'0\') { %>v-hide<% } %>" type="text" value="<% if (sold_time == \'1\') { %><%- start_sold_time %><% } %>" <%= window.editConfig.sold_time.readonly ? "disabled" : "" %> readonly >\n                </label>\n            </div>\n        </div>\n\n        <div class="js-level-discount control-group control-group-notes-wrap">\n            <label class="control-label">会员折扣：</label>\n            <div class="controls">\n                <label class="checkbox inline">\n                    <input type="checkbox" name="join_level_discount" value="1" <% if (join_level_discount == \'1\') { %>checked<% } %>>参加会员折扣\n                </label>\n                <div class="js-join-discount-alert hide alert" style="margin: 0; width: 400px;">该商品是分销商品，若勾选会员折扣，有可能最终出售价格低于成本价，造成亏损，请参考成本价合理设置折扣</div>\n                <% if (window.editConfig.join_level_discount.message) { %>\n                <div class="js-join-level-discount-message ui-message-warning mt10 <%= join_level_discount != \'1\' ? \'hide\' : \'\' %>">\n                    <%- window.editConfig.join_level_discount.message %>\n                </div>\n                <% } %>\n            </div>\n            <div class="controls" style="margin-top: 0px;">\n                <span class="c-gray">指的是统一的会员卡折扣，是否勾选不影响自定义会员价生效。</span><a target="_blank" href="https://help.youzan.com/qa#/menu/2111/detail/1092">什么是自定义会员价？</a>\n            </div>\n        </div>\n\n        <div class="control-group service-tel" style="display:none;">\n            <label class="control-label">\n                <em class="required">*</em>\n                客服电话：\n            </label>\n            <div class="controls">\n                <input type="text" class="span1 text-center" name="service_tel_code" placeholder="区号" value="<%- service_tel_code %>" maxlength="6">&nbsp;&nbsp;-&nbsp;&nbsp;\n                <input type="text" name="service_tel" placeholder="请输入电话号码（区号可留空）" value="<%- service_tel %>" maxlength="15">\n                <p class="help-desc">酒店类商品须提供客服电话以便买家咨询</p>\n            </div>\n        </div>\n\n        <div class="js-idcard-info-wrap">\n            <div class="control-group <%= _global.team_status.sign_overseas_protocol == 1 ? \'\' : \'hide\' %>">\n                <label class="control-label">身份证信息：</label>\n                <div class="controls">\n                    <% if (_global.team_status.is_identity_card_required == 1) { %>\n                        <label class="checkbox inline">\n                            <input type="checkbox" name="need_customs_info" value="1" <% if (need_customs_info == \'1\') { %>checked<% } %>>买家需要填写身份证信息\n                        </label>\n                        <div>\n                            <span class="c-gray">送礼订单无法使用该功能</span>\n                        </div>\n                    <% } else { %>\n                        <div class="static-value">你已经关闭了此功能，无法收集买家身份证信息  <a href="<%= _global.url.www %>/setting/team" target="_blank">去开启</a></div>\n                        <input type="checkbox" name="need_customs_info" value="1" class="hide" />\n                    <% } %>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!templates/messages.html",[],function(){return'<div class="js-message-container message-container"></div>\n<div class="message-add">\n    <% if(goods_type == \'10\' && fx_shipper_type == \'supplier\' || window.editConfig.message.readonly) { %>\n        <a href="javascript:;" class="c-gray not-allowed control-action">+ 添加字段</a>\n    <% } else { %>\n        <a href="javascript:;" class="js-add-message control-action">+ 添加字段</a>\n    <% } %>\n</div>\n<p class="help-desc">单件商品最多可设置10条留言</p>\n'}),define("text!templates/message_item.html",[],function(){return'<% if(goods_type == \'10\' && fx_shipper_type == \'supplier\' || window.editConfig.message.readonly || disable) { %>\n    <input type="text" name="name" value="<%= name %>" class="input-mini message-input" maxlength="5" readonly>\n    <select class="input-small message-input" name="type" disabled>\n        <option value="text" <% if (type == \'text\') { %>selected<% } %>>文本格式</option>\n        <option value="tel" <% if (type == \'tel\') { %>selected<% } %>>数字格式</option>\n        <option value="email" <% if (type == \'email\') { %>selected<% } %>>邮件格式</option>\n        <option value="date" <% if (type == \'date\') { %>selected<% } %>>日期</option>\n        <option value="time" <% if (type == \'time\') { %>selected<% } %>>时间</option>\n        <option value="id_no" <% if (type == \'id_no\') { %>selected<% } %>>身份证号码</option>\n        <option value="image" <% if (type == \'image\') { %>selected<% } %>>图片</option>\n    </select>\n\n    <label class="checkbox inline message-input not-allowed <% if (type !== \'time\') { %>hide<% } %>">\n        <input type="checkbox" name="datetime" value="<%= datetime %>" <% if (datetime == 1) { %> checked<% } %> />含日期\n    </label>\n    <label class="checkbox inline message-input not-allowed <% if (type === \'time\') { %>hide<% } %>">\n        <input type="checkbox" name="multiple" value="<%= multiple %>" <% if (multiple == 1) { %> checked<% } %> disabled>多行\n    </label>\n    <label class="checkbox inline message-input not-allowed">\n        <input type="checkbox" name="required" value="<%= required %>" <% if (required == 1) { %> checked<% } %> disabled>必填\n    </label>\n    <a href="javascript:;" class="c-gray remove-message not-allowed">删除</a>\n<% } else { %>\n    <input type="text" name="name" value="<%= name %>" class="input-mini message-input" <%= disableEditName ? \'readonly\':\'\' %> maxlength="5">\n    <select class="input-small message-input" <%= disableType ? \'disabled\':\'\' %> name="type">\n        <option value="text" <% if (type == \'text\') { %>selected<% } %>>文本格式</option>\n        <option value="tel" <% if (type == \'tel\') { %>selected<% } %>>数字格式</option>\n        <option value="email" <% if (type == \'email\') { %>selected<% } %>>邮件格式</option>\n        <option value="date" <% if (type == \'date\') { %>selected<% } %>>日期</option>\n        <option value="time" <% if (type == \'time\') { %>selected<% } %>>时间</option>\n        <option value="id_no" <% if (type == \'id_no\') { %>selected<% } %>>身份证号码</option>\n        <option value="image" <% if (type == \'image\') { %>selected<% } %>>图片</option>\n    </select>\n\n    <label class="checkbox inline message-input <% if (type !== \'time\') { %>hide<% } %>">\n        <input type="checkbox" name="datetime" value="<%= datetime %>" <% if (datetime == 1) { %> checked<% } %> />含日期\n    </label>\n    <label class="checkbox inline message-input <% if (type === \'time\') { %>hide<% } %>">\n        <input type="checkbox" name="multiple" value="<%= multiple %>" <% if (multiple == 1) { %> checked<% } %> <% if (type != \'text\' || disableMultiple) { %>disabled<% } %> >多行\n    </label>\n    <label class="checkbox inline message-input">\n        <input type="checkbox" name="required" value="<%= required %>" <% if (required == 1) { %> checked<% } %> <%= disableRequired ? \'disabled\':\'\' %> >必填\n    </label>\n    <a href="javascript:;" class="<%= disableDelete ? \'c-gray remove-message not-allowed\':\'js-remove-message remove-message\' %>">删除</a>\n<% } %>\n'}),define("views/message_item",["require","underscore","backbone","marionette","core/event","core/utils","commons/utils","text!templates/message_item.html"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("marionette"),o=e("core/event"),s=e("core/utils"),a=e("commons/utils"),l=e("text!templates/message_item.html");return i.ItemView.extend({tagName:"div",className:"message-item",template:t.template(l),updateModel:s.updateModel,ui:{typeSelect:"select",multipleChk:'[name="multiple"]',name:'[name="name"]',type:'[name="type"]',datetime:'[name="datetime"]',required:'[name="required"]'},events:{"click .js-remove-message":"removeMessage","change @ui.typeSelect":"onTypeChange","change @ui.name":"updateModel","change @ui.type":"updateModel","change @ui.datetime":"updateModel","change @ui.multipleChk":"updateModel","change @ui.required":"updateModel"},templateHelpers:function(){return{index:this.model.collection.indexOf(this.model),shipment:this.options.shipment,goods_type:this.options.goods_type,fx_shipper_type:this.options.fx_shipper_type}},_modelBinder:void 0,initialize:function(e){var t=this;this.options=e||{},t._modelBinder=new n.ModelBinder({modelSetOptions:{validate:!0}}),t.listenTo(t.model,"change",t.modelChanged)},onRender:function(){},onShow:function(){this.initDataBindings()},modelChanged:function(){o.trigger("message_item:change")},initDataBindings:function(){var e=this,t={name:'[name="name"]',type:'[name="type"]',datetime:{selector:'[name="datetime"]',converter:a.booleanConverter},multiple:{selector:'[name="multiple"]',converter:a.booleanConverter},required:{selector:'[name="required"]',converter:a.booleanConverter}};e._modelBinder.bind(e.model,e.el,t)},removeMessage:function(e){var t=this;e.preventDefault(),e.stopPropagation(),t.model.collection.remove(t.model)},onTypeChange:function(e){var t=this,n=t.ui.multipleChk,i=t.ui.typeSelect.val(),o="text"!==i,s={disabled:o};o&&(s.checked=!1),n.prop(s).trigger("change"),t.model.set("type",i),t.render()}})}),define("views/messages",["require","underscore","marionette","core/event","core/utils","text!templates/messages.html","models/message_item","views/message_item"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("core/event"),o=(e("core/utils"),e("text!templates/messages.html")),s=e("models/message_item"),a=e("views/message_item");return n.CompositeView.extend({template:t.template(o),itemView:a,itemViewContainer:".js-message-container",itemViewOptions:function(){var e=this.options.parentModel;return{shipment:e.get("shipment"),goods_type:e.get("goods_type"),fx_shipper_type:e.get("fx_shipper_type")}},templateHelpers:function(){var e=this.options.parentModel;return{shipment:e.get("shipment"),goods_type:e.get("goods_type"),fx_shipper_type:e.get("fx_shipper_type")}},events:{"click .js-add-message":"addMessage"},collectionEvents:{"add remove reset":"reverseUpdate"},maxSize:10,initialize:function(e){this.options=e||{},this.listenTo(i,"message_item:change",this.reverseUpdate)},onShow:function(){this.addMsgbtn=this.$(".js-add-message"),this.checkMsgLen()},reverseUpdate:function(){var e=this;this.checkMsgLen();var t=e.collection.toJSON();i.trigger("messages:update",t)},checkMsgLen:function(){this.checkMaxSize()>=this.maxSize?this.addMsgbtn.hide():this.addMsgbtn.show()},addMessage:function(e){var t=this;e.preventDefault(),this.checkMsgLen();var n=new s({name:"留言"+(t.collection.size()+1)});t.collection.add(n)},checkMaxSize:function(){return this.collection.size()}})}),define("views/other_info",["require","underscore","jquery","backbone","marionette","core/event","commons/utils","components/tag_selected/app","components/popover/content/app","zenjs/util/local_storage","../collections/message","./delivery/index","core/utils","datetimepicker","components/validation/validate","text!templates/other_info.html","views/messages"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("core/event"),a=e("commons/utils"),l=e("components/tag_selected/app"),r=e("components/popover/content/app"),c=e("zenjs/util/local_storage"),d=e("../collections/message"),u=e("./delivery/index"),p=e("core/utils");e("datetimepicker"),e("components/validation/validate");var m=e("text!templates/other_info.html"),h=e("views/messages"),f=window._global;return o.Layout.extend({tagName:"div",className:"goods-info-group-inner",template:t.template(m),ui:{quotaTxt:".js-quota",citySelect:"#js-city",soldTimeRadio:'input[name="sold_time"]',startSoldTxt:'input[name="start_sold_time"]',levelDiscount:".js-level-discount",purchaseRight:".js-purchase-right",deliveryGroup:".js-delivery-group"},events:{"change @ui.soldTimeRadio":"showTimepicker","mouseover .js-lock-help-note":"onLockHelpNote","mouseout .js-lock-help-note":"onHideLockHelpNote"},modelEvents:{"change:join_level_discount":"handleJoinLevelDiscountChange","change:purchase_right":"handlePurchaseRightChange"},regions:{messagesRegion:"#messages-region"},_modelBinder:void 0,initialize:function(e){this.setConfig(e),this._modelBinder=new i.ModelBinder,this.listenTo(this.model,"change",a.showLog),this.listenTo(this.model,"change:shop_method",this.onShopMethodChange),this.listenTo(this.model,"change:shipment",this.onShipmentChange)},onClose:function(){this.deliveryView.close(),this._modelBinder.unbind()},onRender:function(){"0"==this.model.get("shop_method")&&this.hideSelf(),this.handleJoinLevelDiscountChange(),this.handlePurchaseRightChange(),this.initDeliveryRegion(),this.initTagSelected(),this.initServiceTel(),this.onShipmentChange()},initDeliveryRegion:function(){this.deliveryView=new u({el:this.ui.deliveryGroup,model:this.model}),this.deliveryView.render()},initServiceTel:function(){if(this.model.get("alias"))this.model.set("service_tel_code",this.model.get("service_tel_code")||""),this.model.set("service_tel",this.model.get("service_tel")||"");else{var e=c.getItem("service_tel_code")||f.service_tel_code,t=c.getItem("service_tel")||f.service_tel;this.model.set("service_tel_code",e),this.model.set("service_tel",t)}},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},onShow:function(){this.initMessages(),this.initTimepicker(),this.initDataBindings()},setConfig:function(e){this.settings={},t(this.settings).extend(e)},onShipmentChange:function(){var e=+this.model.get("shipment"),t=0===e,i=3===e,o=4===e,s=this.$(".service-tel"),a=n("#other-info-region .info-group-title .group-inner");i||o?(a.text("其他"),this.deliveryView.focusText(),this.deliveryView.$el.hide()):(a.text("物流/其他"),this.deliveryView.$el.show()),o?(s.show(),this.$(".quota-help-desc").text("限购数量=间*晚（0代表不限购） 示例:限购数量3=3晚1间或1晚3间")):(s.hide(),this.$(".quota-help-desc").text("0 代表不限购")),t?this.$(".js-idcard-info-wrap").show():this.$(".js-idcard-info-wrap").hide(),this.initMessages()},initMessages:function(){var e=this.model.get("messages");this.messageList=new d(e);var t=new h({collection:this.messageList,parentModel:this.model});this.messagesRegion.show(t),this.listenTo(s,"messages:update",this.updateMessages)},updateMessages:function(e){this.model.set({messages:e})},initDataBindings:function(){var e={};"0"!=this.model.get("class_type")&&t(e).extend({province_id:{selector:'[name="province_id"]',converter:this.provinceConverter.bind(this)},city_id:{selector:'[name="city_id"]',converter:this.cityConverter.bind(this)}}),"1"==this.model.get("is_hotel")&&t(e).extend({service_tel_code:'[name="service_tel_code"]',service_tel:'[name="service_tel"]'}),t(e).extend({quota:'[name="quota"]',join_level_discount:{selector:'[name="join_level_discount"]',converter:a.booleanConverter},purchase_right:{selector:'[name="purchase_right"]',converter:a.booleanConverter},need_customs_info:{selector:'[name="need_customs_info"]',converter:a.booleanConverter}}),this._modelBinder.bind(this.model,this.el,e)},provinceConverter:function(e,t,i,o,s){if(t){var a=n(s[0]),l=a.find("option:selected"),r=l.text();o.set("province",r,{silent:!0}),this.ui.citySelect.trigger("change")}return t},cityConverter:function(e,t,i,o,s){if(t){var a=n(s[0]),l=a.find("option:selected"),r=l.text();o.set("city",r,{silent:!0})}return t},onUnifiedPostageChange:function(){this.ui.unifiedPostage.prop("checked")&&(this.model.set("delivery","0"),this.setToUsePostage())},onUseDeliveryChange:function(){this.ui.useDelivery.prop("checked")&&(this.model.set("delivery","1",{silent:!0}),n(this.ui.deliveryTemplate).select2("open"))},setToUsePostage:function(){this.setDeliveryTemplate("0");var e=this.getPostageValue();this.model.set("postage",e)},getPostageValue:function(){var e=this.ui.postageTxt.val();return e=a.numberValueFix(e)},onPostageTxtFocus:function(e){this.ui.unifiedPostage.prop("checked",!0).trigger("change")},onRefreshDeliveryClick:function(e){e.preventDefault(),this.setDeliveryTemplate("0"),this.fetchDeliveryData()},setDeliveryTemplate:function(e){n(this.ui.deliveryTemplate).select2("val",e),this.model.set("delivery_template_id",e)},fetchDeliveryData:function(){var e=this;if(this.isFetching)return!1;try{this.xhr.abort()}catch(e){}this.isFetching=!0;var t=f.url.www+"/trade/delivery/idToNameMap.json";this.xhr=p.ajax({url:t,method:"GET"}).done(function(t){e.processDeliveryData(t)}).fail(function(e){p.errorNotify(e)}).always(function(){e.isFetching=!1})},processDeliveryData:function(e){var n=[];t(e).each(function(e,t){n.push({id:t,text:e})});var i=this.getSelect2Config(n);this.initDeliverySelect2(i)},initDeliverySelect2:function(e){var t=this;try{n(this.ui.deliveryTemplate).select2("destroy"),n(this.ui.deliveryTemplate).select2(e).on("select2-opening",function(e){}).on("select2-selecting",function(e){var n=e.object;t.selectDeliveryTemplate(n,e)})}catch(e){}},getSelect2Config:function(e){var n={multiple:!1,maximumInputLength:12,width:200,data:e};return n.placeholder=t.isEmpty(e)?"没有可用运费模版":"请选择运费模版...",n},initDeliveryTemplate:function(){this.deliveryData=[],this.fetchDeliveryData()},selectDeliveryTemplate:function(e,t){this.ui.useDelivery.prop("checked",!0);var n=e.id;this.model.set("delivery_template_id",n)},initTimepicker:function(){var e=this,t=this.ui.startSoldTxt,n=+new Date,i=new Date(n+6e4);t.datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",minDate:i,showSecond:!0,onSelect:function(n){e.model.set({start_sold_time:n}),t.siblings("input").trigger("click")}})},showTimepicker:function(e){var t=this.ui.startSoldTxt,i=n(e.target),o=i.val();this.model.set({sold_time:o},{silent:!0}),"1"==o&&(t.removeClass("v-hide"),t.datetimepicker("show"))},initTakeDownTime:function(){var e=this;this.ui.takeDownTxt.datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",minDate:new Date,showSecond:!0,onSelect:function(t){e.model.set({take_down_time:t})}})},onShopMethodChange:function(e,t){"0"==t?this.hideSelf():this.showSelf()},handleJoinLevelDiscountChange:function(){var e=+this.model.get("join_level_discount");"10"==this.model.get("goods_type")&&e?this.$(".js-join-discount-alert").show():this.$(".js-join-discount-alert").hide(),e?n(".js-join-level-discount-message").show():n(".js-join-level-discount-message").hide()},handlePurchaseRightChange:function(){+this.model.get("purchase_right")?this.$(".js-purchase-right-setting").show():this.$(".js-purchase-right-setting").hide()},initTagSelected:function(){var e=this;if(0==f.team_status.weixin_server&&0==f.team_status.weixin_oldsub&&1!=+f.goods_new_account)return void this.ui.purchaseRight.hide();this.ui.purchaseRight.show();var n=this.model.get("ump_level")||[],i=this.model.get("ump_tags")||[];if(new l({el:this.$(".js-member-level"),placeholder:"选择会员身份",prefix:"purchase-right-ump-level",dataUrl:"/showcase/goods/accountLevel.json",data:n,formatData:function(e){return e=t.map(e||[],function(e){return{id:e.id,text:e.level}})},callback:t(e.setLevelData).bind(e)}),0==f.team_status.weixin_server&&0==f.team_status.weixin_oldsub&&1==+f.goods_new_account)return void this.$(".js-user-tag-setting").hide();new l({el:this.$(".js-user-tag"),placeholder:"选择用户标签",prefix:"purchase-right-ump-tags",dataUrl:"/fans/tag/listall.json",data:i,formatData:function(e){return e=t.map(e||[],function(e){return{id:e.id,text:e.tag}})},callback:t(e.setTagData).bind(e)})},setLevelData:function(e){this.model.set({ump_level:e})},setTagData:function(e){this.model.set({ump_tags:e})},getData:function(){return this.model.toJSON()},showSelf:function(){this.$el.show()},hideSelf:function(){this.$el.hide()},onLockHelpNote:function(e){var t=this;window.editConfig.quota.message&&(this.notePopver||(this.notePopver=new r({of:n(e.target)[0],arrow:"bottom-left",data:{html:'<p class="text-left">'+window.editConfig.quota.message+"</p>"},autoCloseCallback:function(){t.notePopver=null}})))},onHideLockHelpNote:function(){this.notePopver&&this.notePopver.close(),this.notePopver=null}})}),define("tpl!templates/step2",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="base-info-region" class="goods-info-group"></div>\n<div id="sku-info-region" class="goods-info-group"></div>\n<div id="goods-info-region" class="goods-info-group"></div>\n<div id="other-info-region" class="goods-info-group"></div>\n<div class="app-actions">\n    <div class="form-actions text-center">\n        <button data-next-step="3" class="zent-btn zent-btn-primary js-switch-step">下一步</button>\n    </div>\n</div>\n';return __p}}),define("views/step2",["require","jquery","underscore","backbone","marionette","core/reqres","core/event","components/popover/price_range/app","views/base_info","views/goods_info","views/sku_stock_info","views/other_info","tpl!templates/step2"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("backbone"),o=e("marionette"),s=e("core/reqres"),a=e("core/event"),l=e("components/popover/price_range/app"),r=e("views/base_info"),c=e("views/goods_info"),d=e("views/sku_stock_info"),u=e("views/other_info");return o.Layout.extend({tagName:"div",className:"form-horizontal fm-goods-info",template:e("tpl!templates/step2"),events:{},regions:{baseInfoRegion:"#base-info-region",skuStockInfoRegion:"#sku-info-region",goodsInfoRegion:"#goods-info-region",otherInfoRegion:"#other-info-region"},initialize:function(){i.Validation.bind(this),this.listenTo(this.model,"change",this.validateModel),this.bindPriceRangePop()},onRender:function(){this.$el.attr("novalidate",!0)},onShow:function(){this.initHotelParams(),this.initBaseInfo(),this.initSkuStockInfo(),this.initGoodsInfo(),this.initOtherInfo(),"goods"===window._global.goods_type&&this.model.isNew()&&!this.model.get("retail_item_id")&&a.trigger("sku_stock:update")},initHotelParams:function(){var e=this.model.get("shipment"),t=!!this.model.get("alias");"8-5"===this.model.get("class_2")&&!t||4==e&&t?(this.model.set("shipment","4"),this.model.set("is_hotel","1")):4==e?(this.model.set("shipment","0"),this.model.set("is_hotel","0")):this.model.set("is_hotel","0")},validateModel:function(e){e.validate(e.changed)},initBaseInfo:function(){this.baseInfoRegion.show(new r({model:this.model}))},initGoodsInfo:function(){this.goodsInfoRegion.show(new c({model:this.model}))},initSkuStockInfo:function(){this.skuStockInfoRegion.show(new d({model:this.model}))},initOtherInfo:function(){this.otherInfoRegion.show(new u({model:this.model}))},bindPriceRangePop:function(){if(!this.model.isFx)return!1;n(this.events).extend({"click .js-price":"onAtomPriceClick"})},onAtomPriceClick:function(e){var n=t(e.target),i=n.data("stock-id"),o=s.request("price_range:get",i)||{},a=this.model.get("stock");"total"===i&&a&&a.length>0||new l({of:n,arrow:"bottom-center",data:o})}})}),define("components/showcase/2.0.0/base/views/show_collection",["require","marionette"],function(e){"use strict";var t=e("marionette");return t.CollectionView.extend({className:"app-fields",initialize:function(e){this.options=e||{},this.layout=this.options.layout},onShow:function(){this.options.unsortable||this.sortable()},itemViewOptions:function(){return{layout:this.layout}},addItemView:function(e){if("config"!==e.get("type"))return t.CollectionView.prototype.addItemView.apply(this,arguments)},getItemView:function(e){var t=e.get("type");return window.SHOWCASE_CONFIG.showViews[t]},sortable:function(){var e=this;this.$el.sortable({axis:"y",items:"> div:not(.js-not-sortable)",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.includeConfigModel()&&(i+=1,o+=1),e.sort(i,o,e.collection.models),e.layout.displayEditView(),e.collection.trigger("sort"))}})},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n},includeConfigModel:function(){return this.collection.includeConfigModel()},isEmpty:function(){return!this.collection||this.includeConfigModel()&&1===this.collection.length||0===this.collection.length}})}),define("text!components/showcase/2.0.0/base/templates/stroagealert.html",[],function(){return'<div class="alert fade in">\n    <button type="button" class="close" data-dismiss="alert">×</button>\n    <strong>提示：</strong>在浏览器中发现未提交的内容，是否使用该内容替换当前内容？<a class="js-use-storage" href="javascript:;"> 使用 </a>\n</div>\n'}),define("components/showcase/2.0.0/rich_text/models/rich_text",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"rich_text",content:"",color:"#ffffff",fullscreen:0}});return{initialize:function(e,t){return new n(e,t)}}}),define("components/showcase/2.0.0/goods/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods",goods:null,size:"2",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"0",price:"1",show_wish_btn:"0",wish_btn_type:"1",show_sub_title:"0",default_image_url:""},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type"),n=this.get("buy_btn_type");"3"===e&&"2"===t&&"3"===n&&this.set("buy_btn_type","1"),"1"===e&&"3"===t&&this.set("price","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!=+t&&1==+n&&this.set("size_type","0"),1!=+t&&3==+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change"),this.trigger("change:goods")}});return{initialize:function(e,n){return t.isUndefined(e)?new i({goods:[]}):new i(e,n)}}}),define("components/showcase/2.0.0/goods_weapp/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods_weapp",goods:null,size:"0",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"1",show_sub_title:"0",
price:"1",show_corner_mark:"0",corner_mark_type:"0",default_image_url:""},validation:{goods:function(e){if(null===e||0===e.length)return"请选择商品"}},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type");this.get("buy_btn_type");"1"===e&&"3"===t&&this.set("price","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!=+t&&1==+n&&this.set("size_type","0"),1!=+t&&3==+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change"),this.trigger("change:goods")}});return{initialize:function(e,n){return t.isUndefined(e)?new i({goods:[]}):new i(e,n)}}}),define("components/showcase/2.0.0/goods_list/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods_list",goods:null,goods_number:6,goods_number_type:0,size:"2",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"0",price:"1",show_wish_btn:"0",show_sub_title:"0"},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type"),n=this.get("buy_btn_type");"3"===e&&"2"===t&&"3"===n&&this.set("buy_btn_type","1"),"1"===e&&"3"===t&&this.set("price","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!=+t&&1==+n&&this.set("size_type","0"),1!=+t&&3==+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change:goods")},validation:{}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/goods_list_weapp/models/goods",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods_list_weapp",goods:null,goods_number_v2:0,goods_number_v2_input:6,size:"0",size_type:"0",buy_btn:"1",buy_btn_type:"1",title:"0",show_sub_title:"0",price:"1"},validation:{goods:function(e){if(null===e)return"请选择商品分组"}},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},beforeSync:function(){null!==this.get("goods")&&(0==this.get("goods_number_v2")&&""!=this.get("goods_number_v2_input")&&this.set("goods_number_v2",this.get("goods_number_v2_input")),this.unset("goods_number_v2_input",{silent:!0}))},afterSync:function(){var e=this.get("goods_number_v2");0==e||50==e?this.set("goods_number_v2_input",""):(this.set("goods_number_v2_input",e),this.set("goods_number_v2",0))},onChange:function(){var e=this.get("size"),t=this.get("size_type");this.get("buy_btn_type");"1"===e&&"3"===t&&this.set("price","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!=+t&&1==+n&&this.set("size_type","0"),1!=+t&&3==+n&&this.set("size_type","0")},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change:goods")}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/goods_template_split/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"goods_template_split"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/groupon/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"groupon",goods_source:"0",goods_num:"0",goods_num_input:"",goods_limit:"0",goods_limit_input:"",order_rule:"0",goods:[],goods_ids:[],activity_ids:[],size:"1",show_buy_btn:"1",buy_btn_type:"0",show_title:"1",show_discount:"1",show_origin_price:"0",show_countdown:"0",hide_goods_end:"0",hide_goods_type:"0",show_goods_source:!1},validation:{goods:function(e){if(1==this.get("goods_source")&&0==e.length)return"请选择商品"}},beforeSync:function(){"goodsNum"===this.get("goods_num")&&(""!==this.get("goods_num_input").trim()?this.set("goods_num",this.get("goods_num_input").trim()):this.set("goods_num","0")),1===this.get("goods_limit")&&(""!==this.get("goods_limit_input").trim()?this.set("goods_limit",this.get("goods_limit_input").trim()):this.set("goods_limit","0")),this.unset("goods_num_input",{silent:!0}),this.unset("goods_limit_input",{silent:!0}),this.unset("show_goods_source",{silent:!0})},deleteItem:function(e,t){var n=this.get(e);n.splice(t,1),this.set(e,n),this.trigger("change"),this.trigger("change: "+e)},deleteGoods:function(e){this.deleteItem("goods",e),this.deleteItem("goods_ids",e),this.deleteItem("activity_ids",e)}});return{initialize:function(e,n){return t.isUndefined(e)?new i({goods:[],goods_ids:[],activity_ids:[]}):new i(e,n)}}}),define("components/showcase/2.0.0/period_buy/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"period_buy",goods_source:"0",goods_num:8,show_all:"1",order_rule:"0",goods:[],goods_ids:[],activity_ids:[],size:"0",show_buy_btn:"1",buy_btn_type:"0",show_title:"1",show_desc:"1",hide_goods_end:"1",show_goods_source:!1},validation:{goods:function(e){if(1==this.get("goods_source")&&0==e.length)return"请选择商品"},goods_num:function(e){return 0==this.get("goods_source")&&e>8?"商品个数最多显示8个":0==this.get("goods_source")&&""==e?"请填写显示个数":void 0}},deleteItem:function(e,t){var n=this.get(e);n.splice(t,1),this.set(e,n),this.trigger("change"),this.trigger("change: "+e)},deleteGoods:function(e){this.deleteItem("goods",e),this.deleteItem("goods_ids",e),this.deleteItem("activity_ids",e)}});return{initialize:function(e,n){return t.isUndefined(e)?new i({goods:[],goods_ids:[],activity_ids:[]}):new i(e,n)}}}),define("components/showcase/2.0.0/image_ad_weapp/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"image_ad_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",alias:""},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){if(e.length>15)return"图片标题最长15个字。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/image_ad_weapp/collections/collection",["require","backbone","components/showcase/2.0.0/image_ad_weapp/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/image_ad_weapp/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/image_ad_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/image_ad_weapp/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/image_ad_weapp/collections/collection"),o=n.extend({defaults:{type:"image_ad",size:"0",show_method:"0",width:320,height:0,sub_entry:new i},validation:{sub_entry:function(e){if(0===e.length)return"请选择一个广告"}},calculateImage:function(){var e=0,t=this.get("sub_entry"),n=320;if("1"==this.get("show_method")&&(n="0"==this.get("size")?280:128),t&&t.length>0){var i=t.at(0),o=n*Number(i.get("image_height"))/Number(i.get("image_width"));e=0===Number(i.get("image_height"))?n:o}this.set("height",Math.round(e)),this.set("width",n)},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.listenTo(this,"change:show_method",function(){"0"==this.get("show_method")&&this.set("size","0")})}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/image_ad/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"image_ad_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",alias:""},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){if(e.length>20)return"图片标题最长20个字。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/image_ad/collections/collection",["require","backbone","components/showcase/2.0.0/image_ad/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/image_ad/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/image_ad/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/image_ad/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/image_ad/collections/collection"),o=n.extend({defaults:{type:"image_ad",size:"0",show_method:"0",height:0,sub_entry:new i},validation:{sub_entry:function(e){if(0===e.length)return"请选择一个广告"}},calculateImage:function(){var e=0;this.get("sub_entry").each(function(t){var n=Number(t.get("image_width"))/320;n=n<1?1:n;var i=0===Number(t.get("image_height"))?320:Number(t.get("image_height"))/n;e=i>e?i:e}),0===e&&(e=260),this.set("height",e)},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.listenTo(this,"change:show_method",function(){"0"==this.get("show_method")&&this.set("size","0")})}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/nav/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"nav_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){if(e.length>5)return"图片标题最长5个字。"},link_url:function(e){if(!e)return"链接不能为空。"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/nav/collections/collection",["require","backbone","components/showcase/2.0.0/nav/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/nav/models/model",["require","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/nav/collections/collection"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=e("components/showcase/2.0.0/nav/collections/collection"),i=t.extend({defaults:function(){return{type:"nav",sub_entry:new n}},validation:{sub_entry:function(e){if(e.length>20)return"图片广告不能多余20个"}},parse:function(e){if(_.isArray(e.sub_entry)){var t=new n;_.each(e.sub_entry,function(e){t.add(e)}),e.sub_entry=t}return e},initialize:function(){this.get("sub_entry").length<4&&this.get("sub_entry").add(_(4).times(n.prototype.model.prototype.defaults))}});return{initialize:function(e,t){return _.isUndefined(e)?new i({sub_entry:new n}):new i(e,t)}}}),define("components/showcase/2.0.0/nav_weapp/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"nav_selection",image_id:"",image_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",alias:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"},link_url:function(e){if(!e)return"链接不能为空。"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/nav_weapp/collections/collection",["require","backbone","components/showcase/2.0.0/nav_weapp/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/nav_weapp/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/nav_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/nav_weapp/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/nav_weapp/collections/collection"),o=n.extend({defaults:function(){return{type:"nav_weapp",sub_entry:new i,display_num:"4"}},validation:{sub_entry:function(e){return e.length>20?"图片广告不能多余20个":e.at(0).get("link_url")?void 0:"链接不能为空。"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){var e=this.get("display_num");this.get("sub_entry").length<e&&this.get("sub_entry").add(t(e).times(i.prototype.model.prototype.defaults))}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/showcase/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"showcase_selection",title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"},title:function(e){if(e.length>5)return"图片标题最长5个字。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/showcase/collections/collection",["require","backbone","components/showcase/2.0.0/showcase/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/showcase/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/showcase/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/showcase/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/showcase/collections/collection"),o=n.extend({defaults:function(){return{type:"showcase",mode:"0",without_space:"0",title:"",body_title:"",body_desc:"",sub_entry:new i}},validation:{sub_entry:function(e){if(e.length>20)return"图片广告不能多余20个"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},initialize:function(){this.get("sub_entry").length<3&&this.get("sub_entry").add(t(3).times(i.prototype.model.prototype.defaults))}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/level/models/level",["components/showcase/2.0.0/base/models/base"],function(e){var t=e.extend({defaults:{type:"level",image:{id:"",url:window._global.url.cdn_static+"/image/avatar/"+window._global.mp_id+".jpg"},show_level:"1",level_msg:"尊贵的",show_point:"1",point_msg:"您拥有本店积分：",is_default:!0},validation:{level_msg:{required:!0,msg:"等级提示不能为空"},point_msg:{required:!0,msg:"积分提示不能为空"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.trigger("editing:error",this)})}});return{initialize:function(e,n){return new t(e,n)}}}),define("components/showcase/2.0.0/link/models/item",["require","core/utils","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("core/utils"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"link_selection",source_type:"",source_url:"",source_id:"",source_title:"",source_image:"",number:"3"},validation:{source_url:function(e){if(!t.REG.url.test(e)&&!t.REG.tel.test(e))return"内容来源不能为空且必须是一个合法的网站地址。"},source_title:{required:!0,msg:"链接名称不能为空。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/link/collections/collection",["require","backbone","components/showcase/2.0.0/link/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/link/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/link/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/link/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/link/collections/collection"),o=n.extend({defaults:{type:"link",show_method:"0",sub_entry:new i},validation:{sub_entry:function(e){if(e.length>20)return"关联链接不能多余20个"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/text_nav/models/item",["require","core/utils","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("core/utils"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"text_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空"},link_url:function(e){return e?t.REG.url.test(e)||t.REG.tel.test(e)?void 0:"链接地址必须是一个合法的网站地址。":"链接地址不能为空"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/text_nav/collections/collection",["require","backbone","components/showcase/2.0.0/text_nav/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/text_nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/text_nav/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/text_nav/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/text_nav/collections/collection"),o=n.extend({defaults:{type:"text_nav",show_method:"0",sub_entry:new i},validation:{sub_entry:function(e){if(e.length>20)return"关联链接不能多余20个"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/text_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"text_weapp",text:"",show_method:"0",font_size:14,color:"#000000",bg_color:"#ffffff",link_id:"",link_type:"",link_title:"",link_url:"",alias:""},validation:{text:{required:!0,msg:"文本不能为空。"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/rich_text_weapp/models/rich_text_weapp",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"rich_text_weapp",content:"",color:"#ffffff",fullscreen:0}});return{initialize:function(e,t){return new n(e,t)}}}),define("components/showcase/2.0.0/tag_list/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({idAttribute:"_id",defaults:function(){return{type:"tag",id:"",title:"",url:"",goods_number:10,timestamp:+new Date+this.cid}},validation:{title:{required:!0,msg:"请选择商品分组"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tag_list/collections/collection",["require","backbone","components/showcase/2.0.0/tag_list/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/tag_list/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tag_list/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tag_list/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tag_list/collections/collection"),o=n.extend({defaults:function(){return{type:"tag_list",timestamp:+new Date,sub_entry:new i}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/tag_list_weapp/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"tag",id:"",title:"",url:"",alias:""}},isNew:function(){return!0}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tag_list_weapp/collections/collection",["require","backbone","components/showcase/2.0.0/tag_list_weapp/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/tag_list_weapp/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tag_list_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tag_list_weapp/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tag_list_weapp/collections/collection"),o=n.extend({defaults:function(){return{type:"tag_list_weapp",goods_number_v2:0,goods_number_v2_input:6,nav_style:0,sub_entry:new i}},validation:{sub_entry:function(e){if(0===e.length)return"请选择商品分组"}},beforeSync:function(){0!==this.get("sub_entry").length&&(0==this.get("goods_number_v2")&&""!=this.get("goods_number_v2_input")&&this.set("goods_number_v2",this.get("goods_number_v2_input")),this.unset("goods_number_v2_input",{silent:!0}))},afterSync:function(){var e=this.get("goods_number_v2");0==e||50==e?this.set("goods_number_v2_input",""):(this.set("goods_number_v2_input",e),this.set("goods_number_v2",0))},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/title/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){if(""===t.trim(e))return"导航链接不能为空。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/title/collections/collection",["require","backbone","components/showcase/2.0.0/title/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/title/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/title/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/title/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/title/collections/collection"),o=n.extend({defaults:{type:"title",title:"",sub_title:"",show_method:"0",color:"#ffffff",sub_entry:new i,title_template:"0",wx_title_date:"",wx_title_author:"",wx_title_link:"",wx_title_link_type:0,wx_link:{},wx_link_url:""},validation:{title:{required:!0,msg:"标题不能为空。"},wx_title_link:function(e,t,n){if("1"==n.title_template&&""===e)return"链接标题不能为空"},wx_link_url:function(e,t,n){if("1"==n.title_template&&"1"==n.wx_title_link_type&&""===e)return"链接地址不能为空"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/component/models/component",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"component",_id:"",title:"",link:""},validation:{_id:function(e){if(""===e)return"请选择一个自定义页面模块。"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/search/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"search",color:"#f8f8f8"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/line/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"line",color:"#e5e5e5",lineType:"solid",hasPadding:!1}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/line_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"line_weapp",color:"#e5e5e5",lineType:"solid",hasPadding:!1}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/cube2/models/item",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:function(){return{type:"cube_selection",x:0,y:0,width:1,height:1,title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:"",show_method:"1"}},validation:{image_url:[{required:!0,msg:"图片不能为空。"}]},layout:function(e){for(var n=t.clone(this.attributes),i=[],o=[],s=n.y;s<e.length;s++){for(var a=n.x;a<e[s].length;a++){var l=e[s][a];if(l&&(n.x!==l.x||n.y!==l.y))break;if(s-n.y>0){if(!t.find(i,function(e){return e.rows===s-n.y&&e.cols===a-n.x+1}))break}o.push({cols:a-n.x+1,rows:s-n.y+1})}if(!o.length)break;i=i.concat(o),o=[]}return i}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/cube2/collections/collection",["require","backbone","components/showcase/2.0.0/cube2/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/cube2/models/item");return t.Collection.extend({model:n.Model})}),define("text!components/showcase/2.0.0/cube2/templates/td.html",[],function(){return'<td class="not-empty cols-<%- width %> rows-<%- height %> <%- image_url ? \'\' : \'index-\' + index %>" colspan="<%- width %>" rowspan="<%- height %>" data-index="<%- index %>">\n    <% if(link_url) { %>\n        <a href="<%- link_url %>">\n            <img src="<%- image_url %>">\n        </a>\n    <% } else { %>\n        <img src="<%- image_url %>">\n    <% } %>\n</td>\n'}),define("components/showcase/2.0.0/cube2/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/cube2/collections/collection","text!components/showcase/2.0.0/cube2/templates/td.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/cube2/collections/collection"),o=e("text!components/showcase/2.0.0/cube2/templates/td.html"),s=e("core/utils"),a=n.extend({tdTemplate:t.template(o),defaults:function(){return{type:"cube2",layout_width:4,layout_height:4,layout_map:"",tableContent:"",sub_entry:new i}},validation:{layout_map:function(){for(var e=!1,t=!1,n=this.layoutMap,i=n.length-1;i>=0;i--){t=!1;for(var o=0;o<n[i].length;o++)n[i][o]?e=!0:t=!0;if(t&&e)return"必须添加满4列。"}return!1}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},denerateTableContent:function(){for(var e,n=t.result(this,"defaults"),i=this.denerateLayoutMap(),o=[],a=0;a<n.layout_height;a++){e=!1,o.push("<tr>");for(var l=0;l<n.layout_width;l++){var r=i[a][l];if(r){if(a===r.y&&l===r.x){var c=r.image_url;c&&(c=s.fullfillImage(c,"!730x0.jpg",{toWebp:!1})),r.image_url=c,r.image_thumb_url=c,o.push(this.tdTemplate(r)),e=!0}}else o.push('<td class="empty" data-x="'+l+'" data-y="'+a+'"></td>'),e=!0}e||(o.push('<td id="sbtd" style="display:none;"></td>'),e=!0),o.push("</tr>")}this.set("tableContent",o.join(""))},denerateLayoutMap:function(){var e=t.result(this,"defaults"),n=this.get("sub_entry").toJSON(),i=new Array(e.layout_width),o=this.layoutMap=[];return t.times(e.layout_height,function(){o.push(t.clone(i))}),t.each(t.clone(n),function(e,t){e.index=t;for(var n=e.y;n<e.height+e.y;n++)for(var i=e.x;i<e.width+e.x;i++)o[n][i]=e}),o}});return{initialize:function(e,t){return new a(e,t)}}}),define("components/showcase/2.0.0/tpl_shop/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_shop",backgroundImage:"",backgroundColor:"#EF483F"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tpl_weixin/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_weixin_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){if(""===t.trim(e))return"导航链接不能为空。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_weixin/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_weixin/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_weixin/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_weixin/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_weixin/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tpl_weixin/collections/collection"),o=n.extend({defaults:{type:"tpl_weixin",background:window._global.url.cdn_static+"/image/tpl_weixin.jpg",width:600,height:900,top:"80",bg_link_id:"",
bg_link_type:"",bg_link_title:"",bg_link_url:"",sub_entry:new i},validation:{background:{required:!0,msg:"必须选择一张背景图片"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/tpl_fbb/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_fbb_nav_selection",title:"",text:"",date:"",link_id:"",link_type:"",link_title:"",link_url:"",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){if(""===t.trim(e))return"导航链接不能为空。"}}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_fbb/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_fbb/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_fbb/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_fbb/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_fbb/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/tpl_fbb/collections/collection"),o=n.extend({defaults:{type:"tpl_fbb",background:window._global.url.cdn_static+"/image/tpl_fbb.jpg",width:600,height:900,bg_link_id:"",bg_link_type:"",bg_link_title:"",bg_link_url:"",sub_entry:new i,is_fullscreen_component:"1"},validation:{background:{required:!0,msg:"必须选择一张背景图片"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i([{type:"title_nav_selection",title:"行程",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"范冰冰微站全新上线",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:"",date:"4月10号"},{type:"title_nav_selection",title:"抽奖",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"神秘大奖等你来拿",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_2.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"投票",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"冰邦们的家！DIY范小胖专属表情",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_3.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"新闻资讯",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"《X战警》范冰冰海报曝光 搭档佩姬联合出击",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"写真",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"",bg_image_id:"",bg_image_url:window._global.url.cdn_static+"/image/tpl_fbb_bg_1.jpg",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"影视",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"",bg_image_id:"",bg_image_url:window._global.url.cdn_static+"/image/tpl_fbb_bg_2.jpg",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"微视",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"三三不尽，关注微站！",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_5.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"爱里的心",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"“爱里的心”公益项目",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"音乐",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"聆听范冰冰的电台",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_6.png",icon_image_width:"",icon_image_height:"",date:""},{type:"title_nav_selection",title:"荣耀时刻",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",text:"一同见证范冰冰星路历程",bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:"",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:"",date:""}])}):new o(e,n)}}}),define("components/showcase/2.0.0/tpl_course/models/item",["require","jquery","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("jquery"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_fbb_nav_selection",title:"",text:"",date:"",link_id:"",link_type:"",link_title:"",link_url:"",icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""},validation:{title:{required:!0,msg:"导航名称不能为空。"},link_url:function(e){if(""===t.trim(e))return"导航链接不能为空。"}},initialize:function(){this.listenTo(this,"editing",function(e){"error"===e&&this.collection.trigger("editing:error",this)})}});return{initialize:function(e,t){return new i(e,t)},Model:i}}),define("components/showcase/2.0.0/tpl_course/collections/collection",["require","backbone","components/showcase/2.0.0/tpl_course/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/tpl_course/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_course/models/model",["require","underscore","jquery","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_course/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/models/base"),o=e("components/showcase/2.0.0/tpl_course/collections/collection"),s=i.extend({defaults:{type:"tpl_course",background:window._global.url.cdn_static+"/image/tpl_course.jpg",width:600,height:900,title:"新品上架，限时优惠",title_color:"#ffffff",sub_title:"微信购买8折起",sub_title_color:"#cfcfcf",button_text:"立即购买",button_link_id:"",button_link_type:"link",button_link_title:"有赞",button_link_url:"http://koudaitong.com",top:"50",sub_entry:new o,is_fullscreen_component:"1"},validation:{button_text:{required:!0,msg:"请输入按钮文字"},background:{required:!0,msg:"必须选择一张背景图片"},button_link_url:function(e){if(""===n.trim(e))return"按钮链接不能为空。"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new o;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new s({sub_entry:new o([{type:"title_nav_selection",title:"上新",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_1.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"抽奖",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_2.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"投票",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_3.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"杂志",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"小游戏",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_5.png",icon_image_width:"",icon_image_height:""},{type:"title_nav_selection",title:"关注",link_id:"",link_type:"link",link_title:"有赞",link_url:"http://koudaitong.com",icon_image_id:"",icon_image_url:window._global.url.cdn_static+"/image/tpl_fbb_icon_4.png",icon_image_width:"",icon_image_height:""}])}):new s(e,n)}}}),define("components/showcase/2.0.0/tpl_wxd/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_wxd",backgroundImage:window._global.url.cdn_static+"/image/tpl_wxd_bg.png",avatar:window._global.mp_data?window._global.mp_data.logo||"":""}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tpl_11_11/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"tpl_11_11",banner:"",notice:"",tradeincard:[]},validation:{banner:{required:!0,msg:"请选择背景图片"},tradeincard:function(e){if(!e.length)return"请添加优惠券"},notice:{required:!0,msg:"请填写店铺公告"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tpl_2016_11_11/models/goods_page",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{page:"goods",goods_page_title:"爆款推荐，点燃全场",goods:[]}},validation:{goods_page_title:[{required:!0,msg:"请填写页面标题"},{maxLength:9,msg:"最多可输入9个字"}],goods:function(e){return e.length<3?"至少上传3款商品才能保存":e.length>6?"商品数量不能超过6个":void 0}},deleteGoods:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change:goods"),this.trigger("change")}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tpl_2016_11_11/models/tradeincard_page",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{page:"tradeincard",tradeincard_page_title:"先领券，再购物",tradeincard:[]}},validation:{tradeincard_page_title:[{required:!0,msg:"请填写页面标题"},{maxLength:9,msg:"最多可输入9个字"}],tradeincard:function(e){if(3!==e.length)return"必须上传三张优惠券"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tpl_2016_11_11/models/info_page_item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{title:"",content:""}},validation:{title:[{required:!0,msg:"请填写页面标题"},{maxLength:12,msg:"最多可输入12个字"}],content:[{required:!0,msg:"请填写页面标题"},{maxLength:40,msg:"最多可输入40个字"}]}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tpl_2016_11_11/collections/info_collection",["require","backbone","../models/info_page_item"],function(e){"use strict";var t=e("backbone"),n=e("../models/info_page_item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_2016_11_11/models/info_page",["require","underscore","components/showcase/2.0.0/base/models/base","../collections/info_collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("../collections/info_collection"),o=n.extend({defaults:function(){return{page:"info",info_page_title:"多种攻略，High翻全场",sub_entry:new i}},validation:{info_page_title:[{required:!0,msg:"请填写页面标题"},{maxLength:12,msg:"最多可输入12个字"}]},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)},Model:o}}),define("components/showcase/2.0.0/tpl_2016_11_11/collections/page_collection",["require","underscore","backbone","../models/goods_page","../models/tradeincard_page","../models/info_page"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("../models/goods_page"),o=e("../models/tradeincard_page"),s=e("../models/info_page");return n.Collection.extend({model:function(e,a){return new({goods:i.Model,tradeincard:o.Model,info:s.Model}[e.page]||n.Model)(e,t.extend({parse:!0},a))}})}),define("components/showcase/2.0.0/tpl_2016_11_11/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","../collections/page_collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("../collections/page_collection"),o=n.extend({defaults:{type:"tpl_2016_11_11",team_name:window._global.mp_data.team_name,first_page_title:"11.11朋友圈狂欢全攻略",last_page_title:"立即关注，及时抢购",sub_entry:new i,is_fullscreen_component:"1"},validation:{team_name:{required:!0,msg:"请填写店铺名称"},first_page_title:[{required:!0,msg:"请填写活动名称"},{maxLength:13,msg:"最多可输入13个字"}],last_page_title:[{required:!0,msg:"请填写页面标题"},{maxLength:9,msg:"最多可输入9个字"}]},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){t.isEmpty(e)||n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i([{page:"tradeincard"},{page:"goods"},{page:"info"}])}):new o(e,n)}}}),define("components/showcase/2.0.0/tpl_dragon_boat/models/goods_slide_model",["require","exports","module","components/showcase/2.0.0/base/models/base"],function(e,t,n){var i=e("components/showcase/2.0.0/base/models/base");n.exports=i.extend({defaults:{goods_display_num:1,goods:[]},initialize:function(){this.on("change:goods_display_num",this.handleGoodsNumChange)},validation:{goods:function(e,t,n){var i=n.goods_display_num;if(e.length!=i)return"请选择商品"}},handleGoodsNumChange:function(){var e=this.get("goods_display_num"),t=this.get("goods").length;t>e&&this.deleteGoods(e-1,t-e)},deleteGoods:function(e,t){var n=this.get("goods");n.splice(e,t),this.set("goods",n),this.trigger("change:goods")}})}),define("components/showcase/2.0.0/tpl_dragon_boat/collections/goods_slide_collection",["require","exports","module","backbone","components/showcase/2.0.0/tpl_dragon_boat/models/goods_slide_model"],function(e,t,n){var i=e("backbone"),o=e("components/showcase/2.0.0/tpl_dragon_boat/models/goods_slide_model");n.exports=i.Collection.extend({model:o})}),define("components/showcase/2.0.0/tpl_dragon_boat/models/model",["require","exports","module","underscore","jquery","core/utils","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/tpl_dragon_boat/collections/goods_slide_collection"],function(e,t,n){var i=e("underscore"),o=e("jquery"),s=e("core/utils"),a=e("components/showcase/2.0.0/base/models/base"),l=e("components/showcase/2.0.0/tpl_dragon_boat/collections/goods_slide_collection"),r=a.extend({defaults:{type:"tpl_dragon_boat",music_icon:"1",music_url:"",music_title:"",sub_entry:new l,is_fullscreen_component:"1",announcement_title:"",announcement_content:"",link_type:"",link_title:"",link_url:""},validation:{announcement_title:function(e){return""==o.trim(e)?"请输入公告标题":e.length>6?"标题字数不能超过6个":void 0},announcement_content:function(e){return""==o.trim(e)?"请输入公告内容":e.length>150?"内容字数不能超过150个":void 0},sub_entry:function(e){if(0==e.length)return"至少添加一页商品"},music_icon:function(e,t,n){if("1"==e&&""==n.music_url)return"请选择背景音乐"},link_url:function(e){return e?s.REG.url.test(e)||s.REG.tel.test(e)?void 0:"链接地址必须是一个合法的网站地址。":"链接地址不能为空"}},parse:function(e){var t=new l;return t.set(e.sub_entry),e.sub_entry=t,e}});n.exports={initialize:function(e,t){return i.isUndefined(e)?new r:new r(e,t)}}}),define("components/showcase/2.0.0/tpl_take_away/models/notice_page",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"notice",content:"欢迎光临本店！"},validation:{content:function(e){return e?e.length>80?"字数请小于80字":void 0:"请填写公告内容"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)},Model:i}}),define("components/showcase/2.0.0/tpl_take_away/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({idAttribute:"_id",defaults:function(){return{type:"tag",id:"",title:"",url:"",alias:"",goods_number:10,timestamp:+new Date+this.cid}},validation:{title:{required:!0,msg:"请选择商品分组"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tpl_take_away/collections/take_away_tag_list_collection",["require","backbone","../models/item"],function(e){"use strict";var t=e("backbone"),n=e("../models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tpl_take_away/models/take_away_tag_list_page",["require","underscore","components/showcase/2.0.0/base/models/base","../collections/take_away_tag_list_collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("../collections/take_away_tag_list_collection"),o=n.extend({defaults:function(){return{type:"take_away_tag_list",timestamp:+new Date,sub_entry:new i}},validation:{sub_entry:function(e){if(0===e.length)return"请选择商品分组"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)},Model:o}}),define("components/showcase/2.0.0/tpl_take_away/collections/collection",["require","underscore","backbone","../models/notice_page","../models/take_away_tag_list_page"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("../models/notice_page"),o=e("../models/take_away_tag_list_page");return n.Collection.extend({model:function(e,s){return new({notice:i.Model,take_away_tag_list:o.Model}[e.type]||n.Model)(e,t.extend({parse:!0},s))}})}),define("components/showcase/2.0.0/tpl_take_away/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","../collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("../collections/collection"),o=n.extend({defaults:function(){return{type:"tpl_take_away",timestamp:+new Date,sub_entry:new i,is_fullscreen_component:"1"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i([{type:"take_away_top"},{type:"notice"},{type:"take_away_tag_list"}])}):new o(e,n)}}}),define("components/showcase/2.0.0/category/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"category_selection",title:"导航名称",link_id:"",link_type:"",link_title:"",link_url:""}},validation:{title:function(e){if(e.length>6)return"分类名称最长6个字。"},link_url:function(e){if(!e)return"链接不能为空。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/category/collections/collection",["require","components/showcase/2.0.0/category/models/item","backbone"],function(e){"use strict";var t=e("components/showcase/2.0.0/category/models/item");return e("backbone").Collection.extend({model:t.Model})}),define("components/showcase/2.0.0/category/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/category/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/category/collections/collection"),o=n.extend({defaults:function(){return{type:"category",sub_entry:new i}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e,t){t<4&&n.add(e)}),e.sub_entry=n}return e},initialize:function(){var e=this.get("sub_entry").length;if(e<4)for(;e<4;e++)this.get("sub_entry").add(i.prototype.model.prototype.defaults)}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/white/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"white",height:"30"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/white_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"white_weapp",height:"30"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/store/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"store"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}});define("components/showcase/2.0.0/recommend_goods/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"recommend_goods"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/scroll/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"scroll_item",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/scroll/collections/collection",["require","backbone","components/showcase/2.0.0/scroll/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/scroll/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/scroll/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/scroll/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/scroll/collections/collection"),o=n.extend({defaults:function(){return{type:"scroll",homepage_icon:"1",music_icon:"1",music_url:"",music_title:"",loop:"1",flipway:"default",first_page_image_id:"",first_page_image_url:"",first_page_image_thumb_url:"",first_page_image_width:0,first_page_image_height:0,first_page_wipe:"0",first_page_wipe_image_id:"",first_page_wipe_image_url:"",first_page_wipe_image_thumb_url:"",first_page_wipe_image_width:0,first_page_wipe_image_height:0,last_page_image_id:"",last_page_image_url:"",last_page_image_thumb_url:"",last_page_image_width:0,last_page_image_height:0,last_page_link_id:"",last_page_link_type:"",last_page_link_title:"",last_page_link_url:"",sub_entry:new i,is_fullscreen_component:"1"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{first_page_image_url:{required:!0,msg:"请选择一张图片。"},last_page_image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/scroll_nav/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{type:"scroll_nav_item",title:"",sub_title:"",image_id:"",image_url:"",image_thumb_url:"",image_width:0,image_height:0,link_id:"",link_type:"",link_title:"",link_url:""}},validation:{image_url:{required:!0,msg:"请选择一张图片。"}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/scroll_nav/collections/collection",["require","backbone","components/showcase/2.0.0/scroll_nav/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/scroll_nav/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/scroll_nav/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/scroll_nav/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/scroll_nav/collections/collection"),o=n.extend({defaults:function(){return{type:"scroll_nav",homepage_icon:"1",background_images:[],nav_style:"right",animate:"zoom",zoom_type:"zoom_out",slide_type:"slide_left",sub_entry:new i,is_fullscreen_component:"1"}},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{background_images:function(e){if(!e||0===e.length)return"请选择背景图片"}}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i([{title:"标题",sub_title:"副标题"},{title:"标题",sub_title:"副标题"}])}):new o(e,n)}}}),define("components/showcase/2.0.0/image_text/models/model",["require","underscore","core/utils","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("components/showcase/2.0.0/base/models/base"),o=i.extend({defaults:{type:"image_text",title:"",digest:"",author:"",image:"",image_id:"",show_image:0,content:"",link_id:"",link_url:"",link_type:"",link_title:""},validation:{title:[{required:!0,msg:"标题不能为空"},{maxLength:64,msg:"标题长度不能超过64个字"}],author:function(e){if(e.length>8)return"作者长度不超过8个字"},content:function(e){return e?n.isFenxiao()&&$(e).find("img[data-alias]").length>20?"最多支持插入20件商品":void 0:"正文不能为空"},image:{required:!0,msg:"必须选择一张图片"},digest:function(e){if(e.length>120)return"摘要不能超过120个字"}}});return{initialize:function(e,n){return t.isUndefined(e)?new o:new o(e,n)}}}),define("components/showcase/2.0.0/advanced_news/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"advanced_news",title:"",digest:"",cover_id:"",cover_url:"",link_id:"",link_url:"",link_type:"",link_title:""},validation:{title:[{required:!0,msg:"标题不能为空"},{maxLength:64,msg:"标题长度不能超过64个字"}],link_url:{required:!0,msg:"请设置链接地址"},digest:function(e){if(e.length>120)return"摘要不能超过120个字"},cover_url:function(e){if(!this.isSingle()&&0===this.position()&&!e)return"请添加封面"}},isSingle:function(){return 1===this.collection.length}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/audio/models/model",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:{type:"audio",reload:"1",style:"0",audio:"",title:"",loop:"0",avatar:"",bubble:"left"},validation:{title:function(e){if(1==+this.get("style")&&e.length<=0)return"标题不能为空"},audio:{required:!0,msg:"必须选择一个音频文件"}}});return{initialize:function(e,t){return new n(e,t)}}}),define("components/showcase/2.0.0/shop_banner/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"shop_banner",background_color:"#EF483F",background_image:window._global.url.cdn_static+"/image/widget/showcase/shop_banner/default.jpg",intro:""}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/shop_banner_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"shop_banner_weapp",is_singleton:!0,store_info_style:"0",background_image:"public_files/2017/07/11/f2a0a05d5a801cb51ecbc0710e6947fb.png"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/tags/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({idAttribute:"_id",defaults:function(){return{type:"tag",id:"",alias:"",title:"",url:""}}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/tags/collections/collection",["require","backbone","../models/item"],function(e){"use strict";var t=e("backbone"),n=e("../models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/tags/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","../collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("../collections/collection"),o=n.extend({defaults:function(){return{type:"tags",show_union_goods:"0",size:"3",size_type:"2",buy_btn:"1",buy_btn_type:"1",title:"0",price:"1",cart:"1",show_wish_btn:"0",wish_btn_type:"1",show_sub_title:"0",sub_entry:new i}},initialize:function(){this.listenTo(this,"change",this.onChange),this.listenTo(this,"change:size",this.onSizeChange)},onChange:function(){var e=this.get("size"),t=this.get("size_type"),n=this.get("buy_btn_type");"3"===e&&"2"===t&&"3"===n&&this.set("buy_btn_type","1"),"1"===e&&"3"===t&&this.set("price","1")},onSizeChange:function(e,t){var n=this.get("size_type");1!=+t&&1==+n&&this.set("size_type","0"),1!=+t&&3==+n&&this.set("size_type","0")},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/notice_weapp/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"notice_weapp",content:"",bg_color:"#fff8e9",color:"#666"},validation:{content:{required:!0,msg:"请填写公告内容"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/notice/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict"
;var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"notice",content:""},validation:{content:{required:!0,msg:"请填写公告内容"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/coupon/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:function(){return{type:"coupon",coupon:[],validate_coupon_is_required:1}},validation:{coupon:function(e,t,n){if(+n.validate_coupon_is_required&&!e.length)return"请添加优惠券"}}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/coupon_weapp/models/model",["require","underscore","core/utils","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=(e("core/utils"),e("components/showcase/2.0.0/base/models/base")),i=n.extend({defaults:{type:"coupon_weapp",coupon:[],coupon_source:"0",coupon_num:"0",coupon_num_input:"",hide_unshared_coupon:"0",hide_empty_coupon:"1",show_coupon_source:!1},validation:{coupon:function(e){if(1==this.get("coupon_source")&&0==e.length)return"请选择优惠券"},coupon_num_input:function(e){if(0==this.get("coupon_source")&&1==this.get("coupon_num")&&e>10)return"券活动数不能大于10张"}},beforeSync:function(){1==this.get("coupon_source")&&0==this.get("coupon").length||0==this.get("coupon_source")&&1==this.get("coupon_num")&&this.get("coupon_num_input")>10||(1==this.get("coupon_num")&&""!=this.get("coupon_num_input")&&this.set("coupon_num",this.get("coupon_num_input")),this.unset("coupon_num_input",{silent:!0}))},afterSync:function(){var e=this.get("coupon_num");0==e?this.set("coupon_num_input",""):1==e?this.set("coupon_num_input",1):(this.set("coupon_num_input",e),this.set("coupon_num","1"))}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/ump_activity/models/model",["require","exports","module","components/showcase/2.0.0/base/models/base"],function(e,t,n){var i=e("components/showcase/2.0.0/base/models/base"),o=i.extend({defaults:{type:"ump_activity",activity_id:""},validation:{activity_id:{required:!0,msg:"请选择一个营销活动"}}});n.exports={initialize:function(e,t){return new o(e,t)}}}),define("components/showcase/2.0.0/ump_seckill/models/model",["require","exports","module","components/showcase/2.0.0/base/models/base"],function(e,t,n){var i=e("components/showcase/2.0.0/base/models/base"),o=i.extend({defaults:{type:"ump_seckill",activity_id:"",title:"",goods_title:"",image_url:"",alias:"",tag:""}});n.exports={initialize:function(e,t){return new o(e,t)}}}),define("components/showcase/2.0.0/ump_limited_discount/models/model",["require","exports","module","components/showcase/2.0.0/base/models/base"],function(e,t,n){var i=e("components/showcase/2.0.0/base/models/base"),o=i.extend({defaults:function(){return{type:"ump_limitdiscount",activity_id:"",title:"",goods:[]}},appendGood:function(e){var t=this.get("goods");this.set("goods",t.concat(e)),this.trigger("change:goods"),this.trigger("change")},deleteGood:function(e){var t=this.get("goods");t.splice(e,1),this.set("goods",t),this.trigger("change:goods"),this.trigger("change")}});n.exports={initialize:function(e,t){return new o(e,t)}}}),define("components/showcase/2.0.0/offline_head/models/model",["require","underscore","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=n.extend({defaults:{type:"offline_head"}});return{initialize:function(e,n){return t.isUndefined(e)?new i:new i(e,n)}}}),define("components/showcase/2.0.0/paid_column/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{title:"这是测试",summary:"这是测试数据",contents_count:5,subscriptions_count:50,price:"80.00",cover:"https://img.yzcdn.cn/upload_files/2016/04/18/FsshMwRU-4lqr0Bs-CVUKxDH8mvq.jpg",publish_at:"2017-04-28 12:44:22"}},isNew:function(){return!0}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/paid_column/collections/collection",["require","backbone","components/showcase/2.0.0/paid_column/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/paid_column/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/paid_column/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/paid_column/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/paid_column/collections/collection"),o=n.extend({defaults:{show_title:1,show_title_all:1,title:"专栏",column_from:"newest",sub_entry:new i,type:"paid_column"},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{sub_entry:function(e,t,n){if("custom"===n.column_from&&!e.length)return"请至少添加一个专栏"},title:function(e,t,n){if(e.length>18)return"标题名称最多18个字"}}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/paid_content/models/item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/models/base"),n=t.extend({defaults:function(){return{title:"这是测试i",summary:"这是测试数据",contents_count:5,subscriptions_count:50,price:"80.00",cover:"https://img.yzcdn.cn/upload_files/2016/04/18/FsshMwRU-4lqr0Bs-CVUKxDH8mvq.jpg",publish_at:"2017-04-28 12:44:22"}},isNew:function(){return!0}});return{initialize:function(e,t){return new n(e,t)},Model:n}}),define("components/showcase/2.0.0/paid_content/collections/collection",["require","backbone","components/showcase/2.0.0/paid_content/models/item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/paid_content/models/item");return t.Collection.extend({model:n.Model})}),define("components/showcase/2.0.0/paid_content/models/model",["require","underscore","components/showcase/2.0.0/base/models/base","components/showcase/2.0.0/paid_content/collections/collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/models/base"),i=e("components/showcase/2.0.0/paid_content/collections/collection"),o=n.extend({defaults:{show_title:1,show_title_all:1,title:"最新内容",content_from:"newest",sub_entry:new i,type:"paid_content"},parse:function(e){if(t.isArray(e.sub_entry)){var n=new i;t.each(e.sub_entry,function(e){n.add(e)}),e.sub_entry=n}return e},validation:{sub_entry:function(e,t,n){if("custom"===n.content_from&&!e.length)return"请至少添加一个专栏"},title:function(e,t,n){if(e.length>18)return"标题名称最多18个字"}}});return{initialize:function(e,n){return t.isUndefined(e)?new o({sub_entry:new i}):new o(e,n)}}}),define("components/showcase/2.0.0/base/views/edit_base",["require","underscore","jquery","backbone","marionette","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("core/utils");return o.Layout.extend({initialize:function(e){this._setOptions(e),this._bind(),this.triggerMethod("init",e)},_setOptions:function(e){this.options=e||{},this.layout=this.options.layout},_bind:function(){this.listenTo(this,"before:close",this._handleViewBeforeClose),this.listenTo(this,"close",this._handleViewClose),this.listenTo(this.model,"destroy",this.close),this.listenTo(this.model,"change",this._handleModelChange),this.bindValidation()},bindValidation:function(){i.Validation.bind(this)},_handleViewBeforeClose:function(){this.$(":focus").blur(),this.save()},_handleViewClose:function(){this.layout=null},_handleModelChange:function(){t.isFunction(this.model.validate)&&this.model.validate(this.model.changed)},save:function(){},updateModel:function(e){this.layout&&this.layout.collection&&this.layout.collection.disableEdit||s.updateModel.call(this,e)},fullfillUrl:function(e,t){var i=n(e.target),o=n.trim(i.val());o=s.urlCheck(o),this.model.set(t,o),i.val(o),e.stopPropagation(),e.stopImmediatePropagation()},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n}})}),define("text!components/showcase/2.0.0/rich_text/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <div class="pull-left">\n            <label class="control-label">背景颜色：</label>\n            <div class="input-append">\n                <input type="color" value="<%= color %>" name="color" class="span1">\n                <button class="btn js-reset-bg" type="button">重置</button>\n            </div>\n        </div>\n        <div class="pull-left">\n            <label class="control-label">是否全屏：</label>\n            <label class="checkbox inline">\n                <input type="checkbox" name="fullscreen" <% if (fullscreen == 1) { %>checked<% } %>> 全屏显示\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <% if (is_fenxiao) { %>\n        <textarea class="js-editor"><%= content %></textarea>\n        <% } else { %>\n        <script class="js-editor" type="text/plain"></script>\n        <% } %>\n    </div>\n</form>\n'}),define("text!components/ueditor_plugins/emotion/templates/normal.html",[],function(){return'<% for(var i=1,len=sum,pos;i<=len;i++){ %>\n    <div><span class="<%= wrapClass %>" style="background-position:left <%= (i-1)*(-35)%>px" data-imgSrc="<%=imgFolder%><%=imgName%><%= i= i<10 ? \'0\'+i:i %>.gif" data-pos="<%= pos=i%12<=6 ? \'posRight\' : \'posLeft\' %>"></span></div>\n<%};%>'}),define("text!components/ueditor_plugins/emotion/templates/pp.html",[],function(){return'<% for(var i=1,len=sum,pos;i<=len;i++){ %>\n    <div><span class="<%= wrapClass %>" style="background-position:left <%= (i-1)*(-25)%>px" data-imgSrc="<%=imgFolder%><%=imgName%><%= i= i<10 ? \'0\'+i:i %>.gif" data-pos="<%= pos=i%15<=6 ? \'posRight\' : \'posLeft\' %>"></span></div>\n<%};%>'}),define("text!components/ueditor_plugins/emotion/templates/qq.html",[],function(){return'<% for(var i=1,len=sum,pos;i<=len;i++){ %>\n    <div><span class="<%= wrapClass %>" style="background-position:<%= (i-1)*(-24)%>px 50%" data-imgSrc="<%=imgFolder%><%=imgName%><%= i= i<10 ? \'0\'+i:i %>.gif" data-pos="<%= pos=i%15<=6 ? \'posRight\' : \'posLeft\' %>"></span></div>\n<%};%>'}),define("tpl!components/ueditor_plugins/emotion/templates/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ui-popover-inner">\n    <div class="wrapper">\n        <div class="emotion-close js-emotion-close">X</div>\n        <div class="emotion-head"></div>\n        <div class="emotion-content"></div>\n    </div>\n    <div class="emotion-tabIconReview">\n        <img class=\'emotion-faceReview\'/>\n    </div>\n</div>\n';return __p}}),define("components/ueditor_plugins/emotion/app",["require","underscore","jquery","components/popover/_base/app","text!./templates/normal.html","text!./templates/pp.html","text!./templates/qq.html","tpl!./templates/app"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/popover/_base/app"),o=e("text!./templates/normal.html"),s=e("text!./templates/pp.html"),a=e("text!./templates/qq.html");return i.extend({className:"ui-popover widget-ueditor-emotion",template:e("tpl!./templates/app"),events:{"click  .emotion-head span":"tabIndex","mouseenter .emotion-list-wrapper span":"showImg","mouseleave .emotion-list-wrapper":"hideImg","click .emotion-list-wrapper span":"selectImg","click .js-emotion-close":"popClose"},initialize:function(e){e=e||{};var n=e.tabs||["Choice","Tuzki","Lvdouwa","Bobo","BabyCat","Bubble","Youa","Qq"];this.showViews={Choice:e.ChoiceName||{name:"精选",whichTpl:"normal",tplInfo:"Choice"},Tuzki:e.TuzkiName||{name:"兔斯基",whichTpl:"normal",tplInfo:"Tuzki"},Lvdouwa:e.LvdouwaName||{name:"绿豆蛙",whichTpl:"normal",tplInfo:"Lvdouwa"},Bobo:e.BoboName||{name:"波波",whichTpl:"normal",tplInfo:"Bobo"},BabyCat:e.BabyCatName||{name:"北鼻猫",whichTpl:"normal",tplInfo:"BabyCat"},Bubble:e.BubbleName||{name:"泡泡",whichTpl:"pp",tplInfo:"Bubble"},Youa:e.YouaName||{name:"有啊",whichTpl:"normal",tplInfo:"Youa"},Qq:e.QqName||{name:"QQ",whichTpl:"qq",tplInfo:"Qq"}},this.finallShowViews=t.pick(this.showViews,n),this.tpl_map={normal:e.normal||o,pp:e.ppTpl||s,qq:e.qqTpl||a},this.finallTpl=t.extend(this.tpl_map,e.addTpl),this.tplInfo={Choice:e.ChoiceTplInfo||{wrapClass:"jd",sum:84,imgFolder:"jx2/",imgName:"j_00"},Tuzki:e.TuzkiTplInfo||{wrapClass:"tsj",sum:40,imgFolder:"tsj/",imgName:"t_00"},Lvdouwa:e.LvdouwaTplInfo||{wrapClass:"ldw",sum:52,imgFolder:"ldw/",imgName:"w_00"},Bobo:e.Bobo||{wrapClass:"bb",sum:63,imgFolder:"bobo/",imgName:"b_00"},BabyCat:e.BabyCat||{wrapClass:"cat",sum:20,imgFolder:"babycat/",imgName:"C_00"},Bubble:e.Bubble||{wrapClass:"pp",sum:50,imgFolder:"face/",imgName:"i_f_"},Youa:e.Youa||{wrapClass:"youa",sum:44,imgFolder:"youa/",imgName:"y_00"},Qq:e.Qq||{wrapClass:"qq",sum:105,imgFolder:"qq/",imgName:""}},this.finallTplInfo=t.extend(this.tplInfo,e.addInfo);var l=t.size(this.finallShowViews);this.instanceActive(l),i.prototype.initialize.apply(this,arguments)},onRender:function(){this.initialFirst()},instanceActive:function(e){this.instance=[!0];for(var t=0;t<e;t++)this.instance.push(!1)},initialFirst:function(){var e=this;t.each(this.finallShowViews,function(t){e.$(".emotion-head").append('<span class="tag tag-big"  data-view="'+t.whichTpl+'" data-info="'+t.tplInfo+'">'+t.name+"</span>"),e.$(".emotion-content").append('<div class="emotion-list-wrapper hide clearfix"></div>')}),e.$(".emotion-head").find("span").eq(0).addClass("tag-green");var n=e.$(".emotion-head").find("span").eq(0).data("view"),i=e.$(".emotion-head").find("span").eq(0).data("info");e.$(".emotion-content > div").eq(0).html(e.renderView(n,i)).show()},renderView:function(e,n){var i=this;return t.template(i.finallTpl[e],i.finallTplInfo[n])},tabIndex:function(e){var t=this,i=n(e.target),o=i.data("view"),s=i.data("info"),a=i.index();i.addClass("tag-green").siblings("span").removeClass("tag-green"),t.showSwitch(a,o,s)},showSwitch:function(e,t,n){var i=this;i.$(".emotion-content > div").eq(e).show().siblings("div").hide(),i.instance[e]||(i.instance[e]=!0,i.$(".emotion-content > div").eq(e).html(i.renderView(t,n)))},showImg:function(e){var t=n(e.target),i=t.data("imgsrc"),o=t.data("pos"),s="posRight"==o?"posLeft":"posRight",a=this.$(".emotion-tabIconReview").children("img");this.showPop(o,s);var l=window._global.url.cdn_static;l=l.replace(/^\/\//,"https://"),this.imgSrc=l+"/image/ueditor_emotion/"+i,a.attr("style","background-image:url("+this.imgSrc+")")},showPop:function(e,t){this.$(".emotion-tabIconReview").removeClass(t).addClass(e).show()},hideImg:function(){this.$(".emotion-tabIconReview").hide()},selectImg:function(){return this.close(),this.options.callback(this.imgSrc)},popClose:function(){this.close()}})}),define("text!components/ueditor_plugins/video/templates/app.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h4>视频插入视频</h4>\n</div>\n<div class="modal-body">\n    <div class="video-content">\n        <strong>为了在微信中有更好的体验，推荐使用<a href="http://v.qq.com" target="_blank">腾讯视频</a>。</strong>\n        <div>\n            <p>\n                <label for="videoUrl">视频地址</label>\n                <input type="text" id="videoUrl" placeholder="复制视频地址到这里">\n            </p>\n        </div>\n        <div id="preview"><span>预览区</span></div>\n    </div>\n</div>\n<div class="modal-footer">\n        <input class="btn btn-primary js-btn-save" type="button" value="确 定">\n        <input class="btn" data-dismiss="modal" type="button" value="取消">\n</div>\n\n'}),define("components/ueditor_plugins/video/app",["require","jquery","backbone","core/utils","text!./templates/app.html"],function(e){var t=e("jquery"),n=e("backbone"),i=e("core/utils"),o=e("text!./templates/app.html"),s=i.fullfillImage("public_files/2015/09/10/04eeb56eb29cbfbe29d67042be4d21ed.jpg","!730x0.jpg",{toWebp:!1}),a=i.fullfillImage("public_files/2015/09/10/1640ba3f20b22d4b35a62d72831e8110.jpg","!730x0.jpg",{toWebp:!1});return n.View.extend({className:"modal fade hide widget-ueditor-video",defaults:{callback:function(){}},events:{hidden:"hidden","keyup #videoUrl":"previewVideo","paste #videoUrl":"previewVideo","click .js-btn-save":"saveVideo"},initialize:function(e){var e=e||{};this.callback=e.callback,this.type=null,this.width=e.width||620,this.height=e.height||.75*this.width,this.imgWidth=e.imgWidth||300,this.imgHeight=e.imgHeight||225,this.iframeUrl="",this.render()},render:function(){return this.$el.html(o),this.show(),this},show:function(){this.$el.modal("show")},previewVideo:function(e){"paste"==e.type?setTimeout(this._previewVideo.bind(this,e),1):this._previewVideo(e)},_previewVideo:function(e){var n=t("#videoUrl"),i=(t("#preview"),t.trim(n.val()));this.iframeUrl=this.processUrl(i),this.renderIframe()},processUrl:function(e){if(e){var t,n;if(window.parent._global.controller.toLowerCase().indexOf("imagetext")>=0){if(e.indexOf("v.qq.com")>=0&&(t=e.match(/vid\=([^\&]*)($|\&)/),t?n="https://v.qq.com/iframe/player.html?vid="+t[1]+"&tiny=0&auto=0":(t=e.match(/\/([0-9a-zA-Z]+).html/))&&(n="https://v.qq.com/iframe/player.html?vid="+t[1]+"&tiny=0&auto=0"),!t))return;return n}if(e.indexOf("v.qq.com")>=0){if(t=e.match(/vid\=([^\&]*)($|\&)/),t?n="https://v.qq.com/iframe/player.html?vid="+t[1]+"&tiny=0&auto=0":(t=e.match(/\/([0-9a-zA-Z]+).html/))&&(n="https://v.qq.com/iframe/player.html?vid="+t[1]+"&tiny=0&auto=0"),!t)return}else if(e.indexOf("v.youku.com")>=0)t=e.match(/id_(.*)\.html/),n="http://player.youku.com/embed/"+t[1];else if(e.indexOf("//player.youku.com/embed/")>=0)n=e.match(/src=\"([^"]*)\"/)[1];else{if(!(e.indexOf("tudou.com")>=0))return;t=e.match(/\/([\w\-]*)\.html/)[1],n="http://www.tudou.com/programs/view/html5embed.action?code="+t}return n}},renderIframe:function(e){if(e=e||this.iframeUrl){var t='<iframe src="'+e+'" width="'+this.width+'" height="'+this.height+'" allowfullscreen="true" ></ifame>';(this.isYouku()||this.isTudou())&&(t='<img src="'+this.getSiteLogoImage()+'" />'),this.$("#preview").html(t)}else window.parent._global.controller.toLowerCase().indexOf("imagetext")>=0?this.$("#preview").html("<span>微信图文暂时只支持腾讯视频。</span>"):this.$("#preview").html("<span>请复制腾讯、优酷视频地址输入框。</span>")},isYouku:function(){return this.iframeUrl&&this.iframeUrl.match("youku")},isTudou:function(){return this.iframeUrl&&this.iframeUrl.match("tudou")},getSiteLogoImage:function(){return this.isYouku()?s:this.isTudou()?a:void 0},saveVideo:function(e){if(this.iframeUrl){var t={url:this.iframeUrl,width:this.imgWidth,height:this.imgHeight};(this.isYouku()||this.isTudou())&&(t.html=_.template('<a class="video-link" target="_blank" href="<%= url %>"><img src="<%= src %>" /></a>',{url:this.iframeUrl,src:this.getSiteLogoImage()})),this.callback(t),this.hidden()}},hidden:function(){this.$el.data("modal",null),t(".modal-backdrop").removeClass("in").remove(),this.$el.remove()}})}),define("text!components/ueditor_plugins/link/templates/app.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h4>超链接</h4>\n</div>\n<div class="modal-body">\n    <div class="share-content">\n        <div class="follow-collect <%= showOff %>">\n           <span class="js-btn-follow">关注链接</span>\n           <span class="js-btn-collect">收藏链接</span>\n        </div>\n        <div><label for="linkUrl">链接地址:</label><input type="text" class="js-url-add" id="linkUrl" value="<%= url %>"></div>\n        <div class="error-info"></div>\n    </div>\n</div>\n<div class="modal-footer">\n    <input class="btn btn-primary js-btn-save" type="button" value="确 定">\n    <input class="btn" data-dismiss="modal" type="button" value="取消">\n</div>\n\n'}),define("components/ueditor_plugins/link/app",["require","jquery","underscore","backbone","text!./templates/app.html"],function(e){var t=e("jquery"),n=e("underscore"),i=e("backbone"),o=e("text!./templates/app.html");return i.View.extend({className:"modal fade hide widget-ueditor-link",template:n.template(o),defaults:{callback:function(){}},events:{hidden:"hidden","keyup .js-url-add":"formatUrl","click .js-btn-follow":"followReturn","click .js-btn-collect":"collectReturn","keypress .js-url-add":"keyDown","click .js-btn-save":"saveShare"},initialize:function(e){this.options=e||{},this.showOff=this.options.showOff||"hide",this.follow=this.options.follow||"关注",this.collect=this.options.collect||"收藏",this.finalUrl="",this.render()},render:function(){return this.$el.html(this.template({showOff:this.showOff,url:this.options.url})),this.$el.css({width:400,marginLeft:-200}),this.show(),this},show:function(){this.$el.modal("show")},hide:function(){this.$el.modal("hide")},formatUrl:function(){var e=this.$(".js-url-add"),n=this.$(".error-info"),i=t.trim(e.val()).replace(/^\s+|\s+$/g,"");if(i){/(:\s*\/\/|tel:)/.test(i)?(n.html(""),this.finalUrl=encodeURI(i)):(n.html("您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"),this.finalUrl=encodeURI("http://"+i))}},keyDown:function(e){13==e.keyCode&&this.saveShare()},saveShare:function(){if(this.formatUrl(),this.finalUrl){var e=this,t={};t={target:/^tel:/.test(e.finalUrl)?"":"_blank",href:this.finalUrl,textValue:this.finalUrl},"hide"===this.showOff&&delete t.textValue,this.callback(t),this.hide()}},followReturn:function(){var e={};e={class:"js-open-follow",href:"###",textValue:this.follow},this.callback(e),this.hide()},collectReturn:function(){var e={};e={class:"js-open-fav",href:"###",textValue:this.collect},this.callback(e),this.hide()},callback:function(e){n.isFunction(this.options.callback)&&this.options.callback(e)},hidden:function(){this.$el.data("modal",null),this.remove()}})}),define("components/ueditor_plugins/app",["require","components/attachment/image/app","underscore","components/ueditor_plugins/emotion/app","components/ueditor_plugins/video/app","components/ueditor_plugins/link/app"],function(e){"use strict";var t=e("components/attachment/image/app"),n=e("underscore");window.__ueditor_emotion=e("components/ueditor_plugins/emotion/app"),window.__ueditor_video=e("components/ueditor_plugins/video/app"),window.__ueditor_link=e("components/ueditor_plugins/link/app");var i={initialize:function(e){e=n.extend({},{multiChoose:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub"},e),t.initialize(e)}};window.__ueditor_image=i}),define("components/showcase/2.0.0/rich_text/views/edit",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/rich_text/templates/edit.html","components/attachment/image/app","components/ueditor_plugins/app"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/rich_text/templates/edit.html"),s=window.UE,a=e("components/attachment/image/app");return e("components/ueditor_plugins/app"),i.extend({className:"edit-rich-text",template:t.template(o),events:{"blur textarea":"updateModel",'change input[type="color"]':"updateModel",'change input[type="checkbox"]':"updateModel","click .js-reset-bg":"handleResetBackground"},handleResetBackground:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},serializeData:function(){var e=this.model.toJSON();return n.insertFenxiaoInto(e),e},onClose:function(){this._editor&&this._editor.destroy()},onShow:function(){var e,t=this,i=this;n.isFenxiao()?tinymce.init({selector:".js-editor",language:"zh_CN",convert_urls:!1,plugins:["advlist autolink link lists charmap print preview hr","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime video nonbreaking","save table contextmenu directionality qq template paste textcolor"],toolbar1:"bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | formatselect fontsizeselect",toolbar2:"searchreplace | bullist numlist | outdent indent blockquote | undo redo | link unlink anchor imageupload video | forecolor backcolor",toolbar3:"table | removeformat | subscript superscript | charmap qq | print fullscreen | ltr rtl",fontsize_formats:"10px 12px 14px 16px 18px 20px 22px 24px",menubar:!1,contextmenu:"link inserttable | cell row column deletetable",block_formats:"Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6",toolbar_items_size:"small",height:400,image_dimensions:!1,media_poster:!1,media_alt_source:!1,media_dimensions:!1,link_title:!1,object_resizing:"table",statusbar:!1,setup:function(e){e.on("change",function(t){i.model.set("content",e.getContent())}),e.on("blur",function(t){i.model.set("content",e.getContent())}),t._editor=e,e.addButton("imageupload",{tooltip:"插入图片",icon:"image",onclick:function(){a.initialize({uploadURL:_global.url.fenxiao+"/common/qiniu/upToken.json",hideIconList:!0,callback:function(t){if("[object Array]"==Object.prototype.toString.call(t))for(var o=0;o<t.length;o++)e.selection.setContent(e.dom.createHTML("img",{src:n.fullfillImage(t[o].attachment_url,"!730x0.jpg",{toWebp:!1})}));else e.selection.setContent(e.dom.createHTML("img",{src:n.fullfillImage(t.attachment_url,"!730x0.jpg",{toWebp:!1})}));i.model.set("content",e.getContent())}})}})}}):(e=this._editor=new s.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","insertvideo","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!1,elementPathEnabled:!1,initialFrameWidth:396,initialFrameHeight:600,focus:!1,pasteplain:!1,readonly:!!(this.layout&&this.layout.collection&&this.layout.collection.disableEdit)}),e.addListener("blur",function(){t.model.set("content",t._editor.getContent())}),e.addListener("contentChange",function(){t.model.set("content",t._editor.getContent())}),e.render(this.$(".js-editor")[0]),e.ready(function(){e.setContent(t.model.get("content"))}))},save:function(){this._editor&&this.model.set("content",this._editor.getContent())}})}),define("text!components/showcase/2.0.0/goods/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">选择商品：</label>\n        <div class="controls">\n            <ul class="module-goods-list clearfix" name="goods">\n                <% _.each(goods, function(item, index) { %>\n                    <li class="sort">\n                        <a href="<%= item.url %>" target="_blank"><img src="<%= fullfillImage(item.image_url) %>" alt="商品图" width="50" height="50"></a>\n                        <a class="close-modal js-delete-goods small hide" data-id="<% item.id %>" title="删除">×</a>\n                    </li>\n                <% }); %>\n                <li>\n                    <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</form>\n<div class="js-goods-style-region" style="margin-top: 10px;"></div>\n'}),define("text!components/modal/1.0.0/templates/modal.html",[],function(){return'<% if (type === \'goods\' || type === \'fenxiao_goods\') { %>\n<div class="modal fade hide js-goods-modal">\n    <div class="modal-header">\n        <a class="close js-news-modal-dismiss" data-dismiss="modal">×</a>\n        <!-- 顶部tab -->\n        <ul class="module-nav modal-tab">\n\n        </ul>\n    </div>\n    <div class="modal-body" style="min-height: 400px">\n        <div class="tab-content">\n\n        </div>\n    </div>\n    <div class="modal-footer clearfix">\n        <div style="display:none;" class="js-confirm-choose pull-left">\n            <input type="button" class="btn btn-primary" value="确定使用">\n        </div>\n        <div class="pagenavi">\n\n        </div>\n    </div>\n</div>\n<% } else { %>\n<div class="modal fade hide js-modal">\n    <div class="modal-header">\n        <a class="close js-news-modal-dismiss" data-dismiss="modal">×</a>\n        <!-- 顶部tab -->\n        <ul class="module-nav modal-tab">\n\n        </ul>\n    </div>\n    <div class="modal-body" style="min-height: 400px">\n        <div class="tab-content">\n\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div style="display:none;" class="js-confirm-choose pull-left">\n            <input type="button" class="btn btn-primary" value="确定使用">\n        </div>\n        <div class="pagenavi">\n\n        </div>\n    </div>\n</div>\n<% } %>\n'}),define("text!components/modal/1.0.0/templates/modal_link.html",[],function(){return'    <a href="<%= link %>" target="_blank" class="new_window"><%= text %></a>\n    <% if (!isLast) { %>-<% } %>'}),define("text!components/modal/1.0.0/templates/modal_pane.html",[],function(){return'<% if (type !== \'image\') { %>\n<table class="table ui-table ui-table-list">\n    <% if(type === \'activity\' || type === "survey") { %>\n        <colgroup>\n            <col class="modal-col-title">\n            <col class="modal-col-time">\n            <col class="modal-col-action">\n        </colgroup>\n    <% } else if (type === \'goods\' || type === \'recommend_goods\' || type === \'groupon_goods\') { %>\n        <colgroup>\n            <col class="modal-col-image">\n            <col class="modal-col-title">\n            <col class="modal-col-time" span="2">\n            <col class="modal-col-action">\n        </colgroup>\n    <% } else { %>\n        <colgroup>\n            <col class="modal-col-title">\n            <col class="modal-col-time" span="2">\n            <col class="modal-col-action">\n        </colgroup>\n    <% } %>\n    <!-- 表格头部 -->\n    <thead>\n\n    </thead>\n    <!-- 表格数据区 -->\n    <tbody>\n\n    </tbody>\n</table>\n<% } else { %>\n<div class="module-header"></div>\n<ul class="module-body clearfix"></ul>\n<% } %>\n'}),define("text!components/modal/1.0.0/templates/modal_row.html",[],function(){
return'<% if (type === \'image\') { %>\n    <div class="js-choose" title="<%= attachment_title %>">\n        <p class="image-size"><%= attachment_title.slice(0, 5) %><br><%= (size / 1000).toFixed(1) %> KB</p>\n        <img src="<%= window._global.url.imgqn %>/<%= thumb_url %>" width="60" height="60" />\n    </div>\n    <label class="multi-select-container hide">\n        <input type="checkbox" class="multi-select js-multi-select">\n    </label>\n<% } else if([\'guang_activity\', \'activity\', \'survey\', \'grab\', \'guaguale\', \'wheel\', \'zodiac\', \'crazyguess\'].indexOf(type) != -1) { %>\n    <td class="title">\n        <div class="td-cont">\n            <a target="_blank" class="new_window" href="<%= link %>"><%= title %></a>\n        </div>\n    </td>\n    <td class="time">\n        <div class="td-cont">\n            <span><%= start_time %></span>\n        </div>\n    </td>\n    <td class="time">\n        <div class="td-cont">\n            <span><%= end_time %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="#" data-id="<%= data_id %>" data-url="<%= data_url %>" data-page-type="<%= type %>" data-cover-attachment-id="<%= data_cover_attachment_id %>" data-cover-attachment-url="<%= data_cover_attachment_url %>" data-title="<%= data_title %>" data-alias="<%= data_alias %>">选取</button>\n        </div>\n    </td>\n<% } else  if([\'mpNews\', \'news\', \'multiNews\', \'articles\', \'fenxiao_imagetext\', \'fenxiao_enterprise_imagetext\'].indexOf(type) !== -1) { %>\n    <td class="title">\n        <div class="td-cont">\n        <% if (news && news.length > 1) { %>\n            <!-- <div class="ng ng-multiple"> -->\n            <div class="ui-image-text">\n            <% for (var index in news) { %>\n                <% if (news[index] && news.hasOwnProperty(index)) { %>\n                    <% if (news[index].title.indexOf(\'　　点此查看更多\') !== -1) { %>\n                        <!-- <div class="ng-item">\n                            <div class="ng-title">\n                                <a href="javascript:;" target="_blank" class="new_window" title=""><%=news[index] %></a>\n                            </div>\n                        </div> -->\n                        <div class="ui-image-text-item">\n                            <span class="ui-image-text-label">图文</span>\n                            <a class="ui-image-text-title" href="javascript:;" target="_blank" title="">\n                                <%=news[index] %>\n                            </a>\n                        </div>\n                    <% } else { %>\n                        <!-- <div class="ng-item">\n                            <span class="label label-success">图文<%=Number(index) + 1%></span>\n                            <div class="ng-title">\n                                <a href="<%= news[index] && news[index].url %>" class="new_window" title="<%=news[index].title %>">\n                                    <%=news[index].title %>\n                                </a>\n                            </div>\n                        </div> -->\n                        <div class="ui-image-text-item">\n                            <span class="ui-image-text-label">图文<%=Number(index) + 1%></span>\n                            <a class="ui-image-text-title" href="<%= news[index] && news[index].url %>" target="_blank" title="<%=news[index].title %>">\n                                <%=news[index].title %>\n                            </a>\n                        </div>\n                    <% } %>\n                    <% } %>\n            <% } %>\n            </div>\n        <% } else { %>\n            <!-- <div class="ng ng-single">\n                <div class="ng-item">\n                    <div class="ng-title">\n                        <a href="<%= news[0] && news[0].url %>" target="_blank" class="new-window" title="<%= news[0] &&news[0].title %>"><%= news[0] && news[0].title %></a>\n                    </div>\n                </div>\n                <div class="ng-item view-more">\n                    <a href="<%= news[0] && news[0].url %>" class="clearfix new-window">\n                        <span class="pull-left">阅读全文</span>\n                        <span class="pull-right">&gt;</span>\n                    </a>\n                </div>\n            </div> -->\n\n            <div class="ui-image-text">\n                <div class="ui-image-text-item">\n                    <span class="ui-image-text-label">图文</span>\n                    <a class="ui-image-text-title" href="<%= news[0] && news[0].url %>" target="_blank" title="<%= news[0] &&news[0].title %>">\n                        <%= news[0] && news[0].title %>\n                    </a>\n                </div>\n                <div class="ui-image-text-more">\n                    <a href="<%= news[0] && news[0].url %>" target="_blank" class="more-link">\n                        <span class="more-text">阅读全文</span>\n                    </a>\n                </div>\n            </div>\n        <% } %>\n        </div>\n    </td>\n\n    <td class="time">\n        <div class="td-cont">\n            <span><%= time %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="#" data-id="<%= data_id %>" data-url="<%= data_url %>" data-page-type="<%= type %>" data-cover-attachment-id="<%= data_cover_attachment_id %>" data-cover-attachment-url="<%= data_cover_attachment_url %>" data-title="<%= data_title %>" data-alias="<%= data_alias %>">选取</button>\n        </div>\n    </td>\n<% } else if (type === \'goods\' || type === \'recommend_goods\' || type === \'groupon_goods\' || type === \'groupon\') { %>\n    <!-- 商品图片缩略图 -->\n    <td class="image">\n        <div class="td-cont">\n            <img src="<%= image_url %>">\n        </div>\n    </td>\n    <td class="title">\n        <div class="td-cont" <% if (type === \'groupon\') { %> style="width: 200px" <% } %>>\n            <a target="_blank" class="new_window" href="<%= link %>" data-cover-attachment-url="<%= data_cover_attachment_url %>"><%= title %></a>\n            <% if (goods_type == \'10\') { %><button style="color: #fff;background: #FF6500;border: none;outline: none;border-radius: 2px;padding: 4px 12px;">分销</button><% } %>\n        </div>\n    </td>\n    <td class="time">\n        <div class="td-cont" <% if (type === \'groupon\') { %> style="width: 150px" <% } %>>\n            <span><%= time %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <% if (type === \'groupon\') { %>\n                <button class="btn js-choose" href="javascript:void(0);">选取</button>\n            <% } else { %>\n                <% if (str_lock) { %>\n                    <span class="err-msg"><%= str_lock %></span>\n                <% } else { %>\n\n                    <% if (could_choose === false) { %>\n                        <span>不可选</span>\n                    <% } else { %>\n                        <button class="btn js-choose" href="javascript:void(0);">选取</button>\n                    <% } %>\n                <% } %>\n            <% } %>\n        </div>\n    </td>\n<% } else if (type === \'fenxiao_goods\') { %>\n    <td class="title">\n        <div class="td-cont">\n            <a target="_blank" class="new_window" href="<%= link %>" data-cover-attachment-url="<%= data_cover_attachment_url %>"><%= title %></a>\n        </div>\n    </td>\n\n    <td class="time">\n        <div class="td-cont">\n            <span><%= time %></span>\n        </div>\n    </td>\n    <td class="privilege">\n        <div class="td-cont">\n            <span><%= privilege %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <% if (str_lock) { %>\n                <span class="err-msg"><%= str_lock %></span>\n            <% } else { %>\n                <button class="btn js-choose" href="javascript:void(0);">选取</button>\n            <% } %>\n        </div>\n    </td>\n<% } else if (type === \'tradeincard\' || type === \'promocode\') { %>\n    <td class="">\n        <div class="td-cont">\n            <span><%= name %></span>\n        </div>\n    </td>\n\n    <td class="" style="width: 115px">\n        <div class="td-cont">\n            <% if (type === \'tradeincard\' && preferential_type == 2) { %>\n                <span><%- (discount / 10) %>折</span>\n            <% } else { %>\n                <span><%= value %>元</span>\n                <% if (type === \'tradeincard\' && +value_random_to) { %>\n                    <span>~ <%= value_random_to %>元</span>\n                <% } %>\n            <% } %>\n        </div>\n    </td>\n    <td class="">\n        <div class="td-cont">\n            <span>\n                <% if(at_least) { %>\n                    满<%= at_least %>元可用\n                <% } else { %>\n                    无限制\n                <% } %>\n            </span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="javascript:void(0);">选取</button>\n        </div>\n    </td>\n<% } else if (type === \'storelist\') { %>\n    <td class="title">\n        <div class="td-cont">\n            <span><%= name %></span>\n        </div>\n    </td>\n    <td>\n        <div class="td-cont">\n            <span><%- area %><%- address %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="javascript:void(0);" data-id="<%= id %>" data-name="<%= name %>" data-address="<%- address %>">选取</button>\n        </div>\n    </td>\n<% } else if (type === \'weappfeature\') { %>\n    <td class="title">\n        <div class="td-cont">\n            <span><%= title %></span>\n        </div>\n    </td>\n\n    <td class="time">\n        <div class="td-cont">\n            <span><%= time %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="#" data-id="<%= data_id %>" data-url="<%= data_url %>" data-page-type="<%= type %>" data-cover-attachment-id="<%= data_cover_attachment_id %>" data-cover-attachment-url="<%= data_cover_attachment_url %>" data-title="<%= data_title %>" data-alias="<%= data_alias %>">选取</button>\n        </div>\n    </td>\n<% } else if (type === \'period_buy\') { %>\n    <td class="title">\n        <div class="td-cont">\n            <a href="<%- link %>" target="_blank"><%- title %></a>\n        </div>\n    </td>\n    <td style="width: 300px">\n        <div class="td-cont">\n            <span><%- description %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="javascript:void(0);">选取</button>\n        </div>\n    </td>\n<% } else { %>\n    <td class="title">\n        <div class="td-cont">\n            <a target="_blank" class="new_window" href="<%= link %>"><%= title %></a>\n        </div>\n    </td>\n\n    <td class="time">\n        <div class="td-cont">\n            <span><%= time %></span>\n        </div>\n    </td>\n    <td class="opts">\n        <div class="td-cont">\n            <button class="btn js-choose" href="#" data-id="<%= data_id %>" data-url="<%= data_url %>" data-page-type="<%= type %>" data-cover-attachment-id="<%= data_cover_attachment_id %>" data-cover-attachment-url="<%= data_cover_attachment_url %>" data-title="<%= data_title %>" data-alias="<%= data_alias %>">选取</button>\n        </div>\n    </td>\n<% } %>\n'}),define("text!components/modal/1.0.0/templates/modal_tab.html",[],function(){return'<a href="#js-module-<%= type %>" data-type="<%= type %>" class="js-modal-tab"><%= tab %></a><% if (!isLast) { %> | <% } %>\n'}),define("text!components/modal/1.0.0/templates/modal_thead.html",[],function(){return'    <% if (type === \'image\') { %>\n    <p class="help-inline">点击图片即可选中 <a class="js-update" href="javascript:void(0);">刷新</a></p>\n    <form class="form-search search-box">\n        <div class="input-append">\n            <input class="input-small js-modal-search-input" type="text"/>\n\t\t\t<a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n        </div>\n    </form>\n    <% } else if ([\'guang_activity\', \'activity\', \'survey\', \'grab\', \'guaguale\', \'wheel\', \'zodiac\', \'crazyguess\'].indexOf(type) != -1) { %>\n    <tr>\n        <th class="title">\n            <div class="td-cont">\n                <span><%= title %></span> <a class="js-update" href="javascript:void(0);">刷新</a>\n            </div>\n        </th>\n        <th class="time">\n            <span></span>\n        </th>\n        <th class="time">\n            <div class="td-cont">\n                <span>有效时间</span>\n            </div>\n        </th>\n        <th class="opts">\n            <div class="td-cont">\n                <form class="form-search">\n                    <div class="input-append">\n                        <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                    </div>\n                </form>\n            </div>\n        </th>\n    </tr>\n    <% } else if(type === \'tradeincard\' || type === \'promocode\') { %>\n    <tr>\n        <th class="">\n            <div class="td-cont">\n                <span>名称</span> <a class="js-update" href="javascript:void(0);">刷新</a>\n            </div>\n        </th>\n        <th>\n            <div class="td-cont" style="width: 115px">价值</div>\n        </th>\n        <th style="width: 30%;">\n            <div class="td-cont">使用条件</div>\n        </th>\n        <th class="opts">\n            <div class="td-cont">\n                <form class="form-search">\n                    <div class="input-append">\n                        <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                    </div>\n                </form>\n            </div>\n        </th>\n    </tr>\n    <% } else if(type === \'storelist\') { %>\n        <tr>\n            <th width="30%">\n                <div class="td-cont">\n                    <span>门店名称</span> <a class="js-update" href="javascript:void(0);">刷新</a>\n                </div>\n            </th>\n            <th width="50%">\n                <div class="td-cont">地址</div>\n            </th>\n            <th width="20%">\n                <div class="td-cont">\n                    <form class="form-search">\n                        <div class="input-append">\n                            <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                        </div>\n                    </form>\n                </div>\n            </th>\n        </tr>\n    <% } else if (type === \'fenxiao_goods\') {%>\n        <tr>\n            <th class="title">\n                <div class="td-cont">\n                    <span><%= title %></span> <a class="js-update" href="javascript:void(0);">刷新</a>\n                </div>\n            </th>\n            <th class="time">\n                <div class="td-cont">\n                    <span><%= time %></span>\n                </div>\n            </th>\n            <th class="privilege">\n                <div class="td-cont">\n                    <span>分销权限</span>\n                </div>\n            </th>\n            <th class="opts">\n                <div class="td-cont">\n                    <form class="form-search">\n                        <div class="input-append">\n                            <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                        </div>\n                    </form>\n                </div>\n            </th>\n        </tr>\n    <% } else if (type === \'period_buy\') {%>\n        <tr>\n            <th class="title">\n                <div class="td-cont">\n                    <span>活动名称</span> <a class="js-update" href="javascript:void(0);">刷新</a>\n                </div>\n            </th>\n            <th style="width: 300px">\n                <div class="td-cont">\n                    <span>活动补充文案</span>\n                </div>\n            </th>\n            <th class="opts">\n                <div class="td-cont">\n                    <form class="form-search">\n                        <div class="input-append">\n                            <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                        </div>\n                    </form>\n                </div>\n            </th>\n        </tr>\n    <% } else { %>\n    <tr>\n        <th class="title">\n            <div class="td-cont">\n                <span><%= title %></span> <a class="js-update" href="javascript:void(0);">刷新</a>\n            </div>\n        </th>\n        <% if (type === \'goods\' || type === \'recommend_goods\' || type === \'groupon_goods\' || type === \'groupon\') { %>\n            <th class="title"></th>\n        <% } %>\n        <th class="time">\n            <div class="td-cont">\n                <% if (type === \'groupon\') { %>\n                    <span>活动时间</span>\n                <% } else { %>\n                    <span><%= time %></span>\n                <% } %>\n            </div>\n        </th>\n        <th class="opts">\n            <div class="td-cont">\n                <form class="form-search">\n                    <div class="input-append">\n                        <input class="input-small js-modal-search-input" type="text" placeholder="输入名称" /><a href="javascript:void(0);" class="btn js-fetch-page js-modal-search" data-action-type="search">搜</a>\n                    </div>\n                </form>\n            </div>\n        </th>\n    </tr>\n    <% } %>\n'}),define("text!components/modal/1.0.0/templates/modal_dropdown.html",[],function(){return'    <a href="javascript:void(0);" data-toggle="dropdown" data-hover="dropdown" data-delay="200">+新建营销活动<b class="caret"></b></a>\n    <ul class="dropdown-menu">\n        <li><a href="/v2/apps/cards#create" target="_blank">刮刮卡</a></li>\n        <li><a href="/v2/apps/wheel#create" target="_blank">幸运大抽奖</a></li>\n        <li><a href="/v2/apps/shake#create" target="_blank">摇一摇</a></li>\n        <li><a href="/v2/apps/zodiac#create" target="_blank">生肖翻翻看</a></li>\n        <li><a href="/v2/apps/crazyguess#create" target="_blank">疯狂猜猜猜</a></li>\n    </ul>\n'}),define("text!components/modal/1.0.0/templates/modal_static.html",[],function(){return'<div class="get-web-img">\n    <form class="form-horizontal" action="<%= window._global.url.img %>/download" method="post">\n        <div class="control-group">\n            <label class="control-label">网络图片：</label>\n            <div class="controls">\n                <input type="text" name="attachment_url" class="get-web-img-input js-web-img-input" placeholder="请贴入网络图片地址">\n                <a href="javascript:;" class="btn js-preview-img">提取</a>\n            </div>\n            <div class="controls preview-container js-download-img">\n            </div>\n        </div>\n    </form>\n</div>\n<div class="upload-local-img">\n    <div class="form-horizontal">\n        <div class="control-group">\n            <label class="control-label">本地图片：</label>\n            <div class="controls preview-container js-upload-img">\n            </div>\n            <div class="controls">\n                <div class="fileinput-button">\n                    <a href="javascript:;" data-toggle-text="重新选择..." class="control-action">添加图片...</a>\n                    <input class="js-fileupload fileupload" type="file" name="upload_file[]" data-url="<%= window._global.url.img + \'/uploadmultiple?format=json\' %>" multiple>\n                </div>\n                <p class="help-desc">最大支持 1 MB 的图片( jpg / gif / png )</p>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!components/modal/1.0.0/templates/modal_static_footer.html",[],function(){return'<div class="form-action">\n    <button type="button" class="btn btn-primary js-confirm-upload-image" data-loading-text="正在上传...">确定使用</button>\n    <a href="javascript:void(0);" data-dismiss="modal" class="btn btn-cancel">取消</a>\n</div>\n'}),function(e){"use strict";"function"==typeof define&&define.amd?define("fileupload",["jquery","jqueryui"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var n,i=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=i,n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=n-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=n,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,o=t.files[0],s=t.multipart||!e.support.xhrFileUpload,a=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(e,i){n.push({name:t.paramName[e]||a,value:i})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,o.name):e.each(t.files,function(e,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append(t.paramName[e]||a,o,o.name)})),t.data=n):(t.contentType=o.type,t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)i.push(n),o-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var o=e.Deferred(),s=o.promise();return n=n||this.options.context||s,t===!0?o.resolveWith(n,i):t===!1&&o.rejectWith(n,i),s.abort=o.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var i=this,o=function(t){return e.Deferred().resolveWith(i,[t]).promise()};n.process=function(e,t){return(e||t)&&(n._processQueue=this._processQueue=(this._processQueue||o(this)).pipe(e,t)),this._processQueue||o(this)},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t,this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():i._getXHRPromise()},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,o,s=this,a=t.files[0],l=a.size,r=t.uploadedBytes,c=t.maxChunkSize||l,d=this._blobSlice,u=e.Deferred(),p=u.promise();return!(!(this._isXHRUpload(t)&&d&&(r||c<l))||t.data)&&(!!n||(r>=l?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(o=function(){var n=e.extend({},t),p=n._progress.loaded;n.blob=d.call(a,r,r+c,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+r+"-"+(r+n.chunkSize-1)+"/"+l,s._initXHRData(n),s._initProgressListener(n),i=(s._trigger("chunksend",null,n)!==!1&&e.ajax(n)||s._getXHRPromise(!1,n.context)).done(function(i,a,c){r=s._getUploadedBytes(c)||r+n.chunkSize,p+n.chunkSize-n._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r-n.uploadedBytes,total:r-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=r,n.result=i,n.textStatus=a,n.jqXHR=c,s._trigger("chunkdone",null,n),s._trigger("chunkalways",null,n),r<l?o():u.resolveWith(n.context,[i,a,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,s._trigger("chunkfail",null,n),s._trigger("chunkalways",null,n),u.rejectWith(n.context,[e,t,i])})},this._enhancePromise(p),p.abort=function(){return i.abort()},o(),p)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,o){var s=o._progress.total,a=o._response;o._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),o),a.result=o.result=t,a.textStatus=o.textStatus=n,a.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(e,t,n,i){var o=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),o.jqXHR=i.jqXHR=e,o.textStatus=i.textStatus=t,o.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,o,s,a,l=this,r=l._getAJAXSettings(n),c=function(){return l._sending+=1,r._bitrateTimer=new l._BitrateTimer,i=i||((o||l._trigger("send",t,r)===!1)&&l._getXHRPromise(!1,r.context,o)||l._chunkedUpload(r)||e.ajax(r)).done(function(e,t,n){l._onDone(e,t,n,r)}).fail(function(e,t,n){l._onFail(e,t,n,r)}).always(function(e,t,n){if(l._onAlways(e,t,n,r),l._sending-=1,l._active-=1,r.limitConcurrentUploads&&r.limitConcurrentUploads>l._sending)for(var i=l._slots.shift();i;){if("pending"===l._getDeferredState(i)){i.resolve();break}i=l._slots.shift()}0===l._active&&l._trigger("stop")})};return this._beforeSend(t,r),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),a=s.pipe(c)):(this._sequence=this._sequence.pipe(c,c),a=this._sequence),a.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(s&&s.rejectWith(r.context,o),c())},this._enhancePromise(a)):c()},_onAdd:function(t,n){var i,o,s,a,l=this,r=!0,c=e.extend({},this.options,n),d=c.limitMultiFileUploads,u=this._getParamName(c);if((c.singleFileUploads||d)&&this._isXHRUpload(c))if(!c.singleFileUploads&&d)for(s=[],i=[],a=0;a<n.files.length;a+=d)s.push(n.files.slice(a,a+d)),o=u.slice(a,a+d),o.length||(o=u),i.push(o);else i=u;else s=[n.files],i=[u];return n.originalFiles=n.files,e.each(s||n.files,function(o,a){var c=e.extend({},n);return c.files=s?a:[a],c.paramName=i[o],l._initResponseObject(c),l._initProgressObject(c),l._addConvenienceMethods(t,c),r=l._trigger("add",t,c)}),r},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),
e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,o=this,s=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,s.resolve(t._file)):t.file(function(e){e.relativePath=n,s.resolve(e)},a):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){o._handleFileTreeEntries(e,n+t.name+"/").done(function(e){s.resolve(e)}).fail(a)},a)):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t,i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};if(n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t,i)===!1||this._onAdd(t,i)===!1))return!1},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,n=e.dataTransfer,i={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;if(n){if(this._trigger("dragover",t)===!1)return!1;e.inArray("Files",n.types)!==-1&&(n.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=e.inArray(t,this._specialOptions)!==-1;i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,i){t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,o=this,s=e.Deferred(),a=s.promise();return a.abort=function(){return i=!0,n?n.abort():(s.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void s.reject();t.files=e,n=o._onSend(null,t).then(function(e,t,n){s.resolve(e,t,n)},function(e,t,n){s.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define("fileupload_process",["jquery","fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var o=e(this);i.process(function(){return o.fileupload("process",i)}),t.call(this,n,i)}},processActions:{},_processFile:function(t){var n=this,i=e.Deferred().resolveWith(n,[t]),o=i.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(e,t){var i=function(e){return n.processActions[t.action].call(n,e,t)};o=o.pipe(i,t.always&&i)}),o.done(function(){n._trigger("processdone",null,t),n._trigger("processalways",null,t)}).fail(function(){n._trigger("processfail",null,t),n._trigger("processalways",null,t)}),o},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var i={},o=this.action,s=this.prefix===!0?o:this.prefix;e.each(this,function(n,o){"string"===e.type(o)&&"@"===o.charAt(0)?i[n]=t[o.slice(1)||(s?s+n.charAt(0).toUpperCase()+n.slice(1):n)]:i[n]=o}),n.push(i)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,i=e.extend({},this.options,t);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(t){var o=t?e.extend({},i):i,s=function(){return n._processFile(o)};o.index=t,n._processing+=1,n._processingQueue=n._processingQueue.pipe(s,s).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define("fileupload_validate",["jquery","fileupload_process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var i=e.Deferred(),o=this.options,s=t.files[t.index];return"number"===e.type(n.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?s.error=o.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(s.type)||n.acceptFileTypes.test(s.name)?n.maxFileSize&&s.size>n.maxFileSize?s.error=o.i18n("maxFileSize"):"number"===e.type(s.size)&&s.size<n.minFileSize?s.error=o.i18n("minFileSize"):delete s.error:s.error=o.i18n("acceptFileTypes"),s.error||t.files.error?(t.files.error=!0,i.rejectWith(this,[t])):i.resolveWith(this,[t]),i.promise()}}})}),define("components/modal/1.0.0/modal",["backbone","jqueryui","text!components/modal/1.0.0/templates/modal.html","text!components/modal/1.0.0/templates/modal_link.html","text!components/modal/1.0.0/templates/modal_pane.html","text!components/modal/1.0.0/templates/modal_row.html","text!components/modal/1.0.0/templates/modal_tab.html","text!components/modal/1.0.0/templates/modal_thead.html","text!components/modal/1.0.0/templates/modal_dropdown.html","text!components/modal/1.0.0/templates/modal_static.html","text!components/modal/1.0.0/templates/modal_static_footer.html","core/utils","fileupload_validate"],function(e,t,n,i,o,s,a,l,r,c,d,u){"use strict";$.ajaxSetup({cache:!1});var p=e.Model.extend({defaults:{tab:"",isLink:!1,type:"",text:"",link:"",groupID:null,isDropdown:!1}}),m=e.Collection.extend({model:p}),h=e.View.extend({tagName:"li",className:function(){return this.model.get("isLink")?"link-group link-group-"+this.model.get("groupID"):this.model.get("isDropdown")?"link-group dropdown link-group-"+this.model.get("groupID"):void 0},template:_.template(a),linkTemplate:_.template(i),dropdownTemplate:_.template(r),render:function(){var e=this.model.toJSON(),t=this.model.get("groupID");return _.isNumber(this.model.get("groupID"))&&_.isEqual(_.last(this.model.collection.where({groupID:t})),this.model)?_.extend(e,{isLast:!0}):_.extend(e,{isLast:!1}),this.model.collection.where({isLink:!1,isDropdown:!1}).length===this.model.collection.length&&this.model.collection.indexOf(this.model)===this.model.collection.length-1&&_.extend(e,{isLast:!0}),this.model.get("isLink")?this.$el.html(this.linkTemplate(e)):this.model.get("isDropdown")?this.$el.html(this.dropdownTemplate(e)):this.$el.html(this.template(e)),this.options.hide&&this.$el.hide(),this}}),f=e.Model.extend({defaults:{title:"",time:"",type:""}}),g=e.View.extend({tagName:"tr",template:_.template(l),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),v=e.Model.extend({}),b=e.View.extend({tagName:function(){return"image"===this.model.get("type")?"li":"tr"},template:_.template(s),events:{"click .js-choose":function(e){if(this.parent.multiChoose)this.toggle();else{var t=this.model.attributes;"guaguale"==t.type&&(t.type="activity",t._real_type="guaguale"),"wheel"==t.type&&(t.type="activity",t._real_type="wheel"),"zodiac"==t.type&&(t.type="activity",t._real_type="zodiac"),"crazyguess"==t.type&&(t.type="activity",t._real_type="crazyguess"),"mpNews"==t.type&&(t.type="news"),"promocode"!=t.type&&"tradeincard"!=t.type||(t.data_title=t.name),"news"===t.type&&t.news&&t.news.length>8?u.errorNotify("因微信限制图文内容最多8条，请先修改"):I.chooseItemCallback(t)}e.stopPropagation()},"click .js-multi-select":"toggleImage"},initialize:function(e){this.parent=e.parent;var t=this.model.get("time"),n=t.split(" ");if(this.model.set("time",n.join("<br>")),this.model.has("image_url")){var i=this.model.get("image_url");this.model.set("image_url",u.fullfillImage(i))}},toggleImage:function(e){this.toggle(!0)},toggle:function(e){var t=this.$(".js-choose");t.toggleClass("btn-primary"),t.hasClass("btn-primary")?(t.data("view",this),e||t.html("取消")):e||t.html("选取"),this.toggleConfirm()},toggleConfirm:function(){this.parent.$(".js-choose.btn-primary").length>0?this.parent.$(".js-confirm-choose").show():this.parent.$(".js-confirm-choose").hide()},render:function(){return this.$el.html(this.template(this.model.toJSON())),"image"===this.model.get("type")&&this.parent.multiChoose?this.$(".multi-select-container").show():this.$(".multi-select-container").hide(),this}}),w=e.Model.extend({defaults:{type:"",data:[],pageNavi:""},getType:function(e){var t=e.slice(1).split("-");return this.get("type")===t[t.length-1]},fetch:function(e,t,n){var i=this,o=this.get("type"),s=I.url[o];_.isUndefined(s)||("cards"!=o&&"groupon"!=o&&"weappfeature"!=o&&"period_buy"!=o&&(s+=s.indexOf("?")>=0?"&v=2":"?v=2"),"groupon"==o&&(s+="?type=ongoing&page_size=8"),"weappfeature"==o&&(s+="?page_size=8"),"period_buy"==o&&(s+="?state=1&page_size=8"),_.isUndefined(e)||(s+="&keyword="+e),_.isUndefined(t)||(s+="&p="+t),window._global.imageSize&&"image"===o&&(s+="&size="+window._global.imageSize),$.getJSON(s,function(e){var t=e.data;if(0==+e.errcode||0==+e.code){var s=t.data_list?t.data_list:t.list?t.list:[];t.homepage_alias&&(window._global.homepage_alias=t.homepage_alias);var a=t.page_view,l=t.data_type;i.set({type:o,data:s,pageNavi:a,dataType:l})}else u.errorNotify(e.errmsg);_.isFunction(n)&&n()}))}}),y=e.Collection.extend({model:w,fetch:function(e,t){var n=this,i=I.url[e];if(_.isUndefined(i))return void n.add({type:e},{callback:t});"cards"!=e&&"groupon"!=e&&"weappfeature"!=e&&"period_buy"!=e&&(i+=i.indexOf("?")>=0?"&v=2":"?v=2"),"groupon"==e&&(i+="?type=ongoing&page_size=8"),"weappfeature"==e&&(i+="?page_size=8"),"period_buy"==e&&(i+="?state=1&page_size=8"),window._global.imageSize&&"image"===e&&(i+="&size="+window._global.imageSize);var o;_.isFunction(t)?o=t:n.reset(),$.getJSON(i,function(t){var i=t.data;if(0==+t.errcode||0==+t.code){var s=i.data_list?i.data_list:i.list?i.list:[];i.homepage_alias&&(window._global.homepage_alias=i.homepage_alias);var a=i.page_view,l=i.data_type;n.add({type:e,data:s,pageNavi:a,dataType:l},{callback:o})}else u.errorNotify(t.errmsg)})}}),k=e.View.extend({tagName:"div",id:function(){return"js-module-"+this.model.get("type")},className:function(){return"tab-pane module-"+this.model.get("type")},template:_.template(o),events:{"click .js-modal-search":function(e){var t=this,n=t.search.val()||void 0;t.model.getType(t.parent.tab.find("li.active a").attr("href"))&&("image"===t.model.get("type")?t.$(".module-header").addClass("loading"):t.parent.loading(),t.model.fetch(n,void 0,function(){"image"===t.model.get("type")?t.$(".module-header").removeClass("loading"):t.parent.done()}))},"keydown .js-modal-search-input":function(e){13===e.keyCode&&(this.$(".js-modal-search").trigger("click"),e.preventDefault())},"click .js-update":"update"},initialize:function(e){e=e||{},this.parent=e.parent;var t=this;this.parent.$(".pagenavi").on("click",function(e){var n=$(e.target),i=n.data("page-num");e.preventDefault(),n.hasClass("js-confirm-upload-image")||n.hasClass("btn-cancel")||e.stopPropagation(),n.hasClass("fetch_page")&&!n.hasClass("active")&&t.model.getType(t.parent.tab.find("li.active a").attr("href"))&&t.searchKeyword(i)}),this.parent.$(".pagenavi").on("keydown",".goto-input",function(e){e.keyCode===u.keyCode.ENTER&&t.model.getType(t.parent.tab.find("li.active a").attr("href"))&&(t.searchKeyword(Number(e.target.innerText)),e.preventDefault())}),this.parent.$(".pagenavi").on("click",".goto-btn",function(e){if(t.model.getType(t.parent.tab.find("li.active a").attr("href"))){var n=t.parent.$(".pagenavi .goto-input");t.searchKeyword(+n.text())}}),this.parent.tabLink.on("active:tab",function(e){var n=e.target,i=n.getAttribute("href");i&&t.model.getType(i)&&t.renderPageNavi()}),"image"===this.model.get("type")&&this.parent.$el.on("show",function(){t.renderRow()}),this.listenTo(this.model,"change:data",this.renderRow),this.listenTo(this.model,"change:pageNavi",this.renderPageNavi)},update:function(){var e=this;"image"===e.model.get("type")?e.$(".module-header").addClass("loading"):e.parent.loading(),this.model.fetch(void 0,void 0,function(){"image"===e.model.get("type")?e.$(".module-header").removeClass("loading"):e.parent.done()})},searchKeyword:function(e){var t=this;isNaN(e)&&(e=1);var n=t.search.val()||void 0;"image"===t.model.get("type")?t.$(".module-header").addClass("loading"):t.parent.loading(),t.model.fetch(n,e,function(){"image"===t.model.get("type")?t.$(".module-header").removeClass("loading"):t.parent.done()})},render:function(){var e=this;this.modelData=this.model.toJSON(),this.$el.html(this.template(this.modelData)),this.thead=new f({title:"标题",time:"创建时间",type:e.model.get("type")}),this.renderThead(),this.renderRow(),this.search=this.$(".js-modal-search-input");var t=this.parent.tab.find("li.active a");return t.length>0&&this.model.getType(t.attr("href"))&&this.renderPageNavi(this.modelData.pageNavi),this},renderThead:function(){var e,t=this;e="image"===this.model.get("type")?this.$(".module-header"):this.$("thead"),e.empty(),new g({el:e,model:t.thead}).render()},renderRow:function(){var e,t=this,n=this.model.get("type");e="groupon"===n||"weappfeature"===n?this.model.get("data").list:this.model.get("data");var i,o=this.model.get("dataType");i="image"===n?t.$(".module-body"):t.$("tbody"),i.empty(),_.each(e,function(s){var a;"news"===n||"mpNews"===n?(e=[],_.each(s.news_list,function(t){e.push(t.title)}),a=e.join("\\n")):"offlinepage"===n?(a=s.name,s.title=s.name,s.url=window._global.url.wap+"/showcase/homepage?alias="+window._global.homepage_alias+"&oid="+s.id):"groupon"===n?(a=s.title,s.image_url=s.thumb_url,s.url=window._global.url.wap+"/showcase/goods?alias="+(s.goods_info?s.goods_info.alias:""),s.time=u.getFullTime(new Date(1e3*parseInt(s.start_at,10)),!1,!0)+"至 "+u.getFullTime(new Date(1e3*parseInt(s.end_at,10)),!1,!0)):"weappfeature"===n?(a=s.title,s.url="pages/home/feature/index?id="+s.id):"period_buy"===n?s.url=window._global.url.wap+"/showcase/goods?alias="+(s.goods_info?s.goods_info.alias:""):a=s.title;var l=new b({model:new v({title:s.title||"",name:s.name||"",time:s.created_time||s.created_at||s.time||"",link:s.url||"",data_url:s.url||"",data_cover_attachment_id:s.cover_attachment_id||"",data_cover_attachment_url:s.cover_attachment_url||"",data_title:a||"",data_alias:s.alias||"",data_price:s.price||"",data_buy_url:s.buy_url||"",data_type:o||"",width:s.width||"",height:s.height||"",type:n||"",data_id:s.id||s._id||"",start_time:s.valid_start_time||s.start_time||"",end_time:s.valid_end_time||s.end_time||"",news:s.news_list||"",attachment_url:s.attachment_url||"",attachment_title:s.attachment_title||"",attachment_id:s.attachment_id||"",thumb_url:s.thumb_url||"",multiChoose:t.parent.multiChoose||!1,id:s.id||s._id||"",is_virtual:s.is_virtual||"",image_url:s.image_url||"",size:s.attachment_size||"",at_least:s.at_least||"",is_at_least:s.is_at_least||"",value:s.value,feature_num:s.num||"",feature_hot_per:s.hot_per||"",feature_img_url:s.img_url||"",feature_intro:s.intor||"",area:s.area||"",address:s.address||"",stock_num:s.stock_num||"",min_retail_price:s.min_retail_price||"",max_retail_price:s.max_retail_price||"",str_lock:s.str_lock||"",privilege:s.privilege||"",could_choose:void 0!==s.could_choose?s.could_choose:"",goods_type:s.goods_type||"",preferential_type:s.preferential_type||"",discount:s.discount||0,value_random_to:s.value_random_to||0,origin_value:s.origin_value||0,origin_at_least:s.origin_at_least||0,condition:s.condition||"",description:s.description,extra:s}),parent:t.parent});i.append(l.render().el)}),e.length||(this.parent.trigger("empty",this),i.append($('<tr><td colspan="100"><div class="no-result">没有相关数据</div></td></tr>'))),"image"===this.model.get("type")?this.$(".module-header").removeClass("loading"):this.parent.done()},renderPageNavi:function(){var e=this.model.get("pageNavi");this.parent.$(".pagenavi").html(e),this.parent.done()}}),x=e.View.extend({tagName:"div",id:function(){return"js-module-"+this.model.get("type")},className:function(){return"tab-pane module-"+this.model.get("type")},events:{"click .js-preview-img":"previewImage"},template:_.template(c),footerTemplate:_.template(d),initialize:function(e){var t=this;e=e||{},this.parent=e.parent,this.parent.tabLink.on("active:tab",function(e){var n=e.target,i=n.getAttribute("href");i&&t.model.getType(i)&&t.renderFooter()}),this.parent.$el.on("click",function(e){if(e.target===$(".js-confirm-upload-image")[0]){$(e.target).button("loading");if(t.downloadImage())return;var n=$(".js-fileupload");t.uploadFiles?n.fileupload("send",{files:t.uploadFiles}).success(function(e,n,i){var o=[],s=[];if(_.each(e,function(e,t){"success"===e.status?s.push(e.success_msg):o.push({index:t+1,msg:e.failed_msg})}),s.length>1?t.parent.multiChoose?I.chooseItemCallback(s):I.chooseItemCallback(s[0]):1===s.length&&I.chooseItemCallback(s[0]),o.length>0){var a=_.reduce(o,function(e,t){return"size"===t.msg.upload_file?e+"第"+t.index+" 张图片大于 1MB 上传失败；":e+"第"+t.index+" 张图片上传失败（请联系客服）；"},"");u.errorNotify(a)}t.clearDownload()}):(u.errorNotify("至少选择一张图片。"),t.clearDownload())}})},render:function(){return this.$el.html(this.template(this.model.attributes)),this},renderFooter:function(){this.parent.$(".pagenavi").html(this.footerTemplate(this.model.attributes)),this.uploadImage()},uploadImage:function(){var e=this;if(!e.initUploadImage){e.initUploadImage=!0;$(".js-fileupload").fileupload({dataType:"json",add:function(){},xhrFields:{withCredentials:!0}}).fileupload("option",{formData:{media_type:"image",v:"2",mp_id:window._global.kdt_id},maxFileSize:1e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i}).on("change",function(t){var n=t.target.files.length;if(0!==n){if(n>10)return void u.errorNotify("一次只能选择 10 张图片。");var i=$(".js-upload-img");i.empty(),_.each(t.target.files,function(e){var t=new FileReader;t.onload=function(e){i.append($("<img>").attr("src",e.target.result))},t.readAsDataURL(e)}),e.uploadFiles=t.target.files}})}},previewImage:function(){var e=$(".js-web-img-input").val();if(""===$.trim(e))return void $(".js-web-img-input").focus();this.model.set("src",e);var t=this.$(".js-download-img"),n=$("<img>").on("load",function(){t.removeClass("loading")}).attr("src",e);t.html(n).addClass("loading")},downloadImage:function(){var e=this;if(""!==$.trim(this.model.get("src"))){var t={attachment_url:this.model.get("src"),media_type:"image",v:2,mp_id:window._global.kdt_id};return $.ajax({url:window._global.url.img+"/download?format=json",type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0}}).done(function(e){e.success&&I.chooseItemCallback(e.success)}).always(function(){e.clearDownload()}).fail(function(){u.errorNotify("网络出现错误啦。")}),!0}},clearDownload:function(){this.$(".js-download-img").html(""),this.$(".js-upload-img").html(""),this.$(".js-web-img-input").val(""),this.uploadFiles=null,this.model.set("src",""),$(".js-confirm-upload-image").button("reset")}}),j=e.View.extend({initialize:function(e){e=e||{},this.type=e.type,this.multiChoose=e.multiChoose||!1,this.tab=this.$(".modal-tab"),this.tabContent=this.$(".tab-content"),this.modalBody=this.$(".modal-body"),this.listenTo(C[e.type],"add",this.addTabs),this.listenTo(S[e.type],"add",this.addPanes),this.listenTo(S[e.type],"reset",this.reset),C[e.type].add(e.list),this.tabList=e.tab;var t=this,n=this.tabLink=this.tab.find(".js-modal-tab"),i=function(e){var i=$(e.target),o=n.index(i);t.tab.find(".link-group").css({display:"none"}),t.tab.find(".link-group-"+o).css({display:"inline-block"}),t.tabContent.find("#"+i.attr("href").substring(1)).length>0&&i.tab("show").trigger("active:tab"),e.preventDefault(),e.stopPropagation()};n.on("click",i),n.one("click",function(e){var n=$(e.target),i=n.data("type");t.loading(),S[t.options.type]&&S[t.options.type].fetch(i,function(){n.tab("show").trigger("active:tab")})}),this.$el.on("click",".js-confirm-choose .btn",function(){var e=[];t.$(".js-choose.btn-primary").each(function(t,n){e.push($(n).data("view").model.attributes)}),I.chooseItemCallback(e)}),this.on("hide",function(){"image"===t.type&&this.$(".js-multi-select:checked").prop("checked",!1);var e;t.$(".js-choose.btn-primary").each(function(n,i){(e=$(i).data("view"))&&("image"===t.type?e.toggle(!0):e.toggle())})}),this.on("show",function(){for(var e=!0,t=0;t<n.length;t++){var i=$(n[t]);if(i.parent("li").hasClass("active")&&"none"!==i.parent("li").css("display")){i.trigger("click"),e=!1;break}}e&&n.first().trigger("click")})},addTabs:function(e){var t={model:e};!_.isUndefined(this.options.hide)&&""!==e.type&&_.indexOf(this.options.hide,e.get("type"))>=0&&_.extend(t,{hide:!0});var n=new h(t);this.tab.append(n.render().$el)},addPanes:function(e,t,n){var i,o=this;i=_.isUndefined(I.url[e.get("type")])?new x({model:e,parent:o}):new k({model:e,parent:o}),this.tabContent.append(i.render().$el),_.isFunction(n.callback)&&n.callback(),this.done()},reset:function(){this.tabContent.empty()},update:function(){var e=this;this.loading(),_.each(this.tabList,function(t){S[e.type]&&S[e.type].fetch(t,!0)})},loading:function(){this.modalBody.addClass("loading")},done:function(){this.modalBody.removeClass("loading"),this.$(".js-confirm-choose").hide()},fetchAll:function(){var e=this;_.each(this.options.tab,function(t){S[e.options.type]&&S[e.options.type].fetch(t)})}}),S={},C={},T=e.Model.extend({defaults:{type:"other"}}),O=e.View.extend({template:_.template(n),render:function(){return $(this.template(this.model.attributes)).appendTo("body")}}),I={},P={};return{initialize:function(e){var t=!e.disableCached;if(e.disableCached&&(I={}),t&&P[e.type])return _.isArray(e.hide)&&e.hide.length>0?P[e.type].find(".modal-tab li:not(.link-group)>a").each(function(t,n){var i=$.trim($(n).attr("href").replace("#js-module-",""));e.hide.indexOf(i)>=0&&$(n).parent("li").hide()}):P[e.type].find(".modal-tab li:not(.link-group)").removeAttr("style"),e.multiChoose?P[e.type].app.multiChoose=!0:P[e.type].app.multiChoose=!1,P[e.type];var n=1===window._global.is_weapp_setting?window._global.url.www+"/showcase/goods/weAppShortList.json":window._global.url.www+"/showcase/goods/shortList.json";_.isUndefined(I.url)&&(I.url=e.url||{goods:n,topic:"//koudaitong.com/v1/topic/list/get",category:window._global.url.www+"/showcase/category/shortList.json",component:window._global.url.www+"/showcase/component/shortList.json",feature_category:window._global.url.www+"/showcase/category/shortList.json",survey:window._global.url.www+"/apps/vote/selectList.json",image:window._global.url.www+"/showcase/attachment/alert.json?media_type=1",article:"//koudaitong.com/v1/article/list/get",tag:window._global.url.www+"/showcase/tag/shortList.json",goods_tag:window._global.url.www+"/showcase/tag/shortList.json",f_category:window._global.url.www+"/showcase/category/shortList.json",tag_feature:window._global.url.www+"/showcase/tag/shortList.json",tag_feature_2:window._global.url.www+"/showcase/feature/shortList.json",news:window._global.url.www+"/weixin/Advancednews/minilist.json",mpNews:window._global.url.www+"/weixin/imagetext/minilist.json",activity:"//koudaitong.com/v1/activity/list/modal",guaguale:window._global.url.www+"/apps/cards/shortlist.json",wheel:window._global.url.www+"/apps/wheel/shortlist.json",zodiac:window._global.url.www+"/apps/zodiac/shortlist.json",crazyguess:window._global.url.www+"/apps/crazyguess/shortlist.json",grab:window._global.url.www+"/apps/grab/shortList.json",guang_activity:"//koudaitong.com/v1/activity/list/modal?is_guangyiguang=1",feature:window._global.url.www+"/showcase/feature/shortList.json",articles:window._global.url.www+"/sinaweibo/articles/atricleselectionlist.json",tradeincard:window._global.url.www+"/ump/tradeincard/listForSelection.json?source=feature",promocode:window._global.url.www+"/ump/promocode/listForSelection.json",present:window._global.url.www+"/ump/present/shortlist.json",storelist:window._global.url.www+"/setting/teamphysical/storelist.json",recommend_goods:window._global.url.fenxiao+"/pinjian/activity/goodsList.json",fenxiao_goods:window._global.url.fenxiao+"/supplier/goods/shortlist.json",fenxiao_imagetext:window._global.url.fenxiao+"/supplier/imagetext/shortlist.json",fenxiao_enterprise_imagetext:window._global.url.fenxiao+"/supplier/imagetext/shortlist.json",groupon_goods:window._global.url.www+"/ump/groupon/goodslist.json",groupon:window._global.url.www+"/showcase/groupOn/list.json",offlinepage:window._global.url.www+"/ump/multistore/offlinelist.json",weappfeature:window._global.url.www+"/weapp/homepage2/selection.json",period_buy:window._global.url.www+"/showcase/periodbuy/list.json"},_.each(I.url,function(e,t){S[t]=new y,C[t]=new m})),I.chooseItemCallback=function(){e.chooseItemCallback.apply(o,arguments),o.modal("hide"),a.trigger("hide")}||function(){};var i=new O({model:new T({type:e.type})}),o=i.render();o.view=i,o.on("show",function(e){$(e.target).hasClass("modal")&&a.trigger("show")}),o.setChooseItemCallback=function(e){return I.chooseItemCallback=null,I.chooseItemCallback=function(){e.apply(o,arguments),o.modal("hide"),a.trigger("hide")},this};var s;switch(e.type){case"mass_news":s={list:[{tab:"微信图文",type:"mpNews"},{link:window._global.url.www+"/weixin/imagetext#list",text:"微信图文素材管理",isLink:!0,groupID:0}],tab:["mpNews"],type:"news"};break;case"news":s={list:[{tab:"高级图文",type:"news"},{tab:"微信图文",type:"mpNews"},{link:window._global.url.www+"/weixin/advancednews#list",text:"高级图文素材管理",isLink:!0,groupID:0},{link:window._global.url.www+"/weixin/imagetext#list",text:"微信图文素材管理",isLink:!0,groupID:1}],tab:["news","mpNews"],type:"news"};break;case"fenxiao_imagetext":s={list:[{tab:"图文素材",type:"fenxiao_imagetext"},{link:"/supplier/imagetext",text:"图文素材管理",isLink:!0,groupID:0}],tab:["fenxiao_imagetext"],type:"fenxiao_imagetext"};break;case"fenxiao_enterprise_imagetext":s={list:[{tab:"图文素材",type:"fenxiao_enterprise_imagetext"},{link:"/supplier/enterprise/imagetext/index",text:"图文素材管理",isLink:!0,groupID:0}],tab:["fenxiao_enterprise_imagetext"],type:"fenxiao_enterprise_imagetext"};break;case"articles":s={list:[{tab:"新浪微博图文素材",type:"articles"},{link:window._global.url.www+"/sinaweibo/articles",text:"新浪微博图文素材管理",isLink:!0,groupID:0}],tab:["articles"],type:"articles"};break;case"tag":s={list:[{tab:"商品分组",type:"goods_tag"},{link:"/v2/showcase/tag",text:"分组管理",isLink:!0,groupID:0}],tab:["goods_tag"],type:"goods_tag"};break;case"tag_feature":s={list:[{tab:"商品分组",type:"tag_feature"},{tab:"微页面",type:"tag_feature_2"},{link:"/v2/showcase/tag",text:"分组管理",isLink:!0,groupID:0},{link:"/v2/showcase/feature#create",text:"新建微页面",isLink:!0,groupID:1},{link:"/v2/showcase/feature#list&is_display=0",text:"草稿管理",isLink:!0,groupID:1}],tab:["tag_feature","tag_feature_2"],type:"tag_feature"};break;case"feature":s={list:[{tab:"微页面",type:"feature"},{tab:"微页面分类",type:"category"},{link:"/v2/showcase/feature#create",text:"新建微页面",isLink:!0,groupID:0},{link:"/v2/showcase/feature#list&is_display=0",text:"草稿管理",isLink:!0,groupID:0},{link:"/v2/showcase/category",text:"分类管理",isLink:!0,groupID:1}],tab:["feature","category"],type:"feature"};break;case"feature_only":s={list:[{tab:"微页面",type:"feature"},{link:"/v2/showcase/feature#create",text:"新建微页面",isLink:!0,groupID:0},{link:"/v2/showcase/feature#list&is_display=0",text:"草稿管理",isLink:!0,groupID:0}],tab:["feature"],type:"feature"};break;case"category":s={list:[{tab:"微页面分类",type:"f_category"},{link:"/v2/showcase/category",text:"分类管理",isLink:!0,groupID:0}],tab:["f_category"],type:"f_category"};break;case"feature_category":s={list:[{tab:"微页面分类",type:"feature_category"},{link:"/v2/showcase/category",text:"分类管理",isLink:!0,groupID:0}],tab:["feature_category"],type:"feature_category"};break;case"activity":s={list:[{tab:"刮刮卡",type:"guaguale"},{tab:"幸运大抽奖",type:"wheel"},{tab:"生肖翻翻看",type:"zodiac"},{tab:"疯狂猜",type:"crazyguess"},{link:"/v2/apps/cards#create",text:"新建刮刮卡",groupID:0,isLink:!0},{link:"/v2/apps/wheel#create",text:"新建幸运大抽奖",groupID:1,isLink:!0},{link:"/v2/apps/zodiac#create",text:"新建生肖翻翻看",groupID:2,isLink:!0},{link:"/v2/apps/crazyguess#create",text:"新建疯狂猜",groupID:3,isLink:!0}],tab:["activity"],type:"activity"};break;case"grab":s={list:[{tab:"抢楼活动",type:"grab"},{link:_global.url.www+"/apps/grab/create",text:"新建抢楼活动",groupID:0,isLink:!0}],tab:["grab"],type:"grab"};break;case"guang_activity":s={list:[{tab:"刮刮乐",type:"guaguale"},{tab:"幸运大抽奖",type:"wheel"},{tab:"翻翻看",type:"zodiac"},{tab:"疯狂猜",type:"crazyguess"},{link:"/v2/apps/cards#create",text:"新建刮刮乐",groupID:0,isDropdown:!0},{link:"/v2/apps/wheel#create",text:"新建幸运大抽奖",groupID:1,isDropdown:!0},{link:"/v2/apps/zodiac#create",text:"新建翻翻看",groupID:2,isDropdown:!0},{
link:"/v2/apps/crazyguess#create",text:"新建疯狂猜",groupID:3,isDropdown:!0}],tab:["guang_activity"],type:"guang_activity"};break;case"goods":s={list:[{tab:"已上架商品",type:"goods"},{tab:"商品分组",type:"tag"},{link:"/v2/showcase/goods/edit",text:"新建商品",isLink:!0,groupID:0},{link:"/v2/showcase/goods#list&is_display=0",text:"草稿管理",isLink:!0,groupID:0},{link:"/v2/showcase/tag",text:"分组管理",isLink:!0,groupID:1}],tab:["goods","tag"],type:"goods"};break;case"tradeincard_goods":s={list:[{tab:"已上架商品",type:"goods"},{tab:"商品分组",type:"tag"}],tab:["goods","tag"],type:"goods"};break;case"groupon_goods":s={list:[{tab:"已上架商品",type:"groupon_goods"},{tab:"商品分组",type:"tag"},{link:"/v2/showcase/goods/edit",text:"新建商品",isLink:!0,groupID:0},{link:"/v2/showcase/goods#list&is_display=0",text:"草稿管理",isLink:!0,groupID:0},{link:"/v2/showcase/tag",text:"分组管理",isLink:!0,groupID:1}],tab:["groupon_goods","tag"],type:"groupon_goods"};break;case"groupon":s={list:[{tab:"已拼团商品",type:"groupon"}],tab:["groupon"],type:"groupon"};break;case"period_buy":s={list:[{tab:"周期购",type:"period_buy"}],tab:["period_buy"],type:"period_buy"};break;case"fenxiao_goods":s={list:[{tab:"已上架商品",type:"fenxiao_goods"},{link:_global.url.fenxiao+"/supplier/goods/create",text:"新建商品",isLink:!0,groupID:0}],tab:["fenxiao_goods"],type:"fenxiao_goods"};break;case"recommend_goods":s={list:[{tab:"掌柜推荐商品",type:"recommend_goods"},{link:_global.url.fenxiao+"/supplier/goods/create",text:"新建商品",isLink:!0,groupID:0}],tab:["recommend_goods"],type:"recommend_goods"};break;case"survey":s={list:[{tab:"投票调查",type:"survey"},{link:"/v2/apps/vote#create",text:"新建投票调查",groupID:0,isLink:!0}],tab:["survey"],type:"survey"};break;case"offlinepage":s={list:[{tab:"新建网点",type:"offlinepage"}],tab:["offlinepage"],type:"offlinepage"};break;case"storelist":s={list:[{tab:"线下门店",type:"storelist"},{link:"/v2/setting/store#physical_store",text:"新建线下门店",groupID:0,isLink:!0}],tab:["storelist"],type:"storelist"};break;case"component":s={list:[{tab:"自定义页面模块",type:"component"},{link:"/v2/showcase/component#create",text:"新建自定义页面模块",groupID:0,isLink:!0}],tab:["component"],type:"component"};break;case"image":s={list:[{tab:"用过的图片",type:"image"},{tab:"新图片",type:"uploadImage"}],tab:["image","uploadImage"],type:"image"};break;case"tradeincard":s={list:[{tab:"优惠券",type:"tradeincard"},{link:"/v2/ump/tradeincard#add",text:"新建优惠券",groupID:0,isLink:!0}],tab:["tradeincard"],type:"tradeincard"};break;case"promocode":s={list:[{tab:"优惠码",type:"promocode"},{link:"/v2/ump/promocode#add",text:"新建优惠码",groupID:0,isLink:!0}],tab:["promocode"],type:"promocode"};break;case"present":s={list:[{tab:"赠品",type:"present"},{link:"/v2/ump/present#add",text:"新建赠品",groupID:0,isLink:!0}],tab:["present"],type:"present"};break;case"weappfeature":s={list:[{tab:"小程序微页面",type:"weappfeature"}],tab:["weappfeature"],type:"weappfeature"};break;default:s=e.config}_.extend(s,{modal:o,hide:e.hide||[],multiChoose:e.multiChoose||!1}),e.size&&(window._global.imageSize=e.size||!1);var a=new j(_.extend({},{el:o},s));return o.app=a,P[e.type]=o,o}}}),define("tpl!components/showcase/2.0.0/goods_list/templates/edit_goods_style",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" ',"0"==size&&(__p+=" checked "),__p+='>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" ',"1"==size&&(__p+=" checked "),__p+='>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" ',"2"==size&&(__p+=" checked "),__p+='>一大两小\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="3" ',"3"==size&&(__p+=" checked "),__p+=">详细列表\n            </label>\n        </div>\n    </div>\n    ",isFenxiao()||(__p+='\n    <div class="control-group">\n        <div class="controls">\n            <div class="controls-card">\n                <div class="controls-card-tab">\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="0" ',"0"==size_type&&(__p+=" checked "),__p+=">\n                        卡片样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="1" ',"1"==size_type&&(__p+=" checked "),__p+=">\n                        瀑布流\n                    </label>\n                    "),__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="2" ',"2"==size_type&&(__p+=" checked "),__p+=">\n                        极简样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="3" ',"3"==size_type&&(__p+=" checked "),__p+=">\n                        促销\n                    </label>\n                    "),__p+="\n                </div>\n                ","3"==size_type||"2"==size_type&&"3"!=size||(__p+='\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==buy_btn?'\n                                <input type="checkbox" name="buy_btn" value="0">显示购买按钮\n                            ':'\n                                <input type="checkbox" name="buy_btn" value="1" checked>显示购买按钮\n                            ',__p+="\n                        </label>\n                    </div>\n                    ","1"==buy_btn&&(__p+='\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" ',"1"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" ',"2"==buy_btn_type&&(__p+=" checked "),__p+=">\n                            样式2\n                        </label>\n                        ","3"==size&&"2"==size_type||(__p+='\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="3" ',"3"==buy_btn_type&&(__p+=" checked "),__p+=">\n                            样式3\n                        </label>\n                        "),__p+='\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="4" ',"4"==buy_btn_type&&(__p+=" checked "),__p+=">\n                            样式4\n                        </label>\n                    </div>\n                    "),__p+="\n                </div>\n                "),__p+="\n                ",window._global.isWishOpen&&(__p+='\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_wish_btn?'\n                                <input type="checkbox" name="show_wish_btn" value="0">显示加入心愿单按钮\n                            ':'\n                                <input type="checkbox" name="show_wish_btn" value="1" checked>显示加入心愿单按钮\n                            ',__p+="\n                        </label>\n                    </div>\n                </div>\n                "),__p+="\n                ","3"!=size_type&&"3"!=size&&(__p+="\n                    ","1"==size&&"2"==size_type||(__p+='\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            ',__p+="0"==title?'\n                                <input type="checkbox" name="title" value="0">显示商品名 '+(null==(__t="2"==size?"(小图不显示名称)":"")?"":__t)+"\n                            ":'\n                                <input type="checkbox" name="title" value="1" checked>显示商品名 '+(null==(__t="2"==size?"(小图不显示名称)":"")?"":__t)+"\n                            ",__p+="\n                        </label>\n                    </div>\n                    "),__p+="\n                    ","0"==size&&(__p+='\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_sub_title?'\n                                <input type="checkbox" name="show_sub_title" value="0">显示商品简介\n                            ':'\n                                <input type="checkbox" name="show_sub_title" value="1" checked>显示商品简介\n                            ',__p+="\n                        </label>\n                    </div>\n                    "),__p+='\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            ',__p+="0"==price?'\n                                <input type="checkbox" name="price" value="0">显示价格\n                            ':'\n                                <input type="checkbox" name="price" value="1" checked>显示价格\n                            ',__p+="\n                        </label>\n                    </div>\n                "),__p+="\n            </div>\n        </div>\n    </div>\n    "),__p+="\n</form>\n";return __p}}),define("components/showcase/2.0.0/goods_list/views/edit_goods_style",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","components/modal/1.0.0/modal","tpl!../templates/edit_goods_style"],function(e){"use strict";var t=(e("underscore"),e("core/utils")),n=e("components/showcase/2.0.0/base/views/edit_base");e("components/modal/1.0.0/modal");return n.extend({template:e("tpl!../templates/edit_goods_style"),events:{'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},modelEvents:{change:"render"},bindValidation:function(){},templateHelpers:{isFenxiao:t.isFenxiao}})}),define("components/showcase/2.0.0/goods/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods/templates/edit.html","components/modal/1.0.0/modal","core/utils","components/showcase/2.0.0/goods_list/views/edit_goods_style"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/goods/templates/edit.html"),s=e("components/modal/1.0.0/modal"),a=e("core/utils"),l=e("components/showcase/2.0.0/goods_list/views/edit_goods_style");return i.extend({template:t.template(o),templateHelpers:{fullfillImage:a.fullfillImage},events:{"click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"},modelEvents:{"change:goods":"render"},regions:{goodsStyleRegion:".js-goods-style-region"},onRender:function(){var e=this;this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.model.trigger("change"),e.model.trigger("change:goods"))}}),this.goodsStyleRegion.show(new l({model:this.model}))},handleDeleteGoods:function(e){var t=n(e.target),i=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGoods(i)},handleAddGoods:function(){var e=this;this.goodsModal=s.initialize({type:"goods",hide:["tag"],multiChoose:!0}).setChooseItemCallback(function(n){t.each(n,function(t){e.model.get("goods").push({id:t.data_id,url:t.data_url,image_url:t.image_url,image_id:t.data_id||t.id||"",price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title})}),e.model.trigger("change"),e.model.trigger("change:goods")}),this.goodsModal.modal("show")}})}),define("text!components/showcase/2.0.0/goods_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="app-sidebar-title">\n        <p class="app-sidebar-title__name">新建商品</p>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">选择商品：</label>\n        <div class="controls">\n            <ul class="module-goods-list clearfix" name="goods">\n                <% _.each(goods, function(item, index) { %>\n                    <li class="sort">\n                        <a href="<%= item.url %>" target="_blank"><img src="<%= fullfillImage(item.image_url) %>" alt="商品图" width="50" height="50"></a>\n                        <a class="close-modal js-delete-goods small hide" data-id="<% item.id %>" title="删除">×</a>\n                    </li>\n                <% }); %>\n                <li>\n                    <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <% if (_global.is_weapp_template == 1) { %>\n    <div class="control-group">\n        <label class="control-label">默认图片：</label>\n        <div class="controls">\n            <div class="weapp-choice-image">\n                <% if (default_image_url === \'\') { %>\n                    <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n                <% } else { %>\n                    <img src="<%= fullfillImage(default_image_url) %>" width="118" height="118" class="thumb-image">\n                    <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n                <% } %>\n\n                <!-- for error msg -->\n                <div class="control-group">\n                    <div class="controls">\n                        <input type="hidden" name="default_image_url">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <% } %>\n\n</form>\n<div class="js-goods-style-region" style="margin-top: 10px;"></div>\n'}),define("tpl!components/showcase/2.0.0/goods_weapp/templates/edit_goods_style",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" ',"0"==size&&(__p+=" checked "),__p+='>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" ',"1"==size&&(__p+=" checked "),__p+='>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" ',"2"==size&&(__p+=" checked "),__p+='>一大两小\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="3" ',"3"==size&&(__p+=" checked "),__p+='>详细列表\n            </label>\n        </div>\n    </div>\n\n    <div class="controls-card" style="margin-left: 0; padding: 10px 5px;">\n        <div class="control-group">\n            <label class="control-label">显示样式：</label>\n            <div class="controls">\n                <div class="controls-card-item">\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="0" ',"0"==size_type&&(__p+=" checked "),__p+=">\n                        卡片样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="1" ',"1"==size_type&&(__p+=" checked "),__p+=">\n                        瀑布流\n                    </label>\n                    "),__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="2" ',"2"==size_type&&(__p+=" checked "),__p+=">\n                        极简样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="3" ',"3"==size_type&&(__p+=" checked "),__p+=">\n                        促销\n                    </label>\n                    "),__p+='\n                </div>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label">显示内容：</label>\n            <div class="controls">\n                ',"3"!=size_type&&"3"!=size&&(__p+='\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            ',__p+="0"==title?'\n                                <input type="checkbox" name="title" value="0">显示商品名称\n                            ':'\n                                <input type="checkbox" name="title" value="1" checked>显示商品名称\n                            ',__p+="\n                        </label>\n\n                        ","0"==size&&"1"==title&&(__p+='\n                        <div style="margin: 10px 0 0 20px;">\n                            <label class="checkbox inline">\n                                ',__p+="0"==show_sub_title?'\n                                    <input type="checkbox" name="show_sub_title" value="0">显示商品简介\n                                ':'\n                                    <input type="checkbox" name="show_sub_title" value="1" checked>显示商品简介\n                                ',__p+="\n                            </label>\n                        </div>\n                        "),__p+='\n                    </div>\n\n                    <div class="controls-card-item">\n                        <label class="checkbox inline">\n                            ',__p+="0"==price?'\n                                <input type="checkbox" name="price" value="0">显示商品价格\n                            ':'\n                                <input type="checkbox" name="price" value="1" checked>显示商品价格\n                            ',__p+="\n                        </label>\n                    </div>\n                "),__p+="\n\n                ","3"==size_type||"2"==size_type&&"3"!=size||(__p+='\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==buy_btn?'\n                                <input type="checkbox" name="buy_btn" value="0">显示购买按钮\n                            ':'\n                                <input type="checkbox" name="buy_btn" value="1" checked>显示购买按钮\n                            ',__p+="\n                        </label>\n                    </div>\n\n                    ","1"==buy_btn&&(__p+='\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" ',"1"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" ',"2"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式2\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="3" ',"3"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式3\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="4" ',"4"==buy_btn_type&&(__p+=" checked "),__p+=">\n                            样式4\n                        </label>\n                    </div>\n                    "),__p+="\n                </div>\n                "),__p+='\n\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_corner_mark?'\n                                <input type="checkbox" name="show_corner_mark" value="0">显示商品角标\n                            ':'\n                                <input type="checkbox" name="show_corner_mark" value="1" checked>显示商品角标\n                            ',__p+="\n                        </label>\n                    </div>\n                    ","1"==show_corner_mark&&(__p+='\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="corner_mark_type" value="0" ',"0"==corner_mark_type&&(__p+=" checked "),__p+='>\n                            新品\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="corner_mark_type" value="1" ',"1"==corner_mark_type&&(__p+=" checked "),__p+='>\n                            热卖\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="corner_mark_type" value="2" ',"2"==corner_mark_type&&(__p+=" checked "),__p+='>\n                            NEW\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="corner_mark_type" value="3" ',"3"==corner_mark_type&&(__p+=" checked "),__p+=">\n                            HOT\n                        </label>\n                    </div>\n                    "),__p+="\n                </div>\n            </div>\n        </div>\n    </div>\n\n</form>\n";return __p}}),define("components/showcase/2.0.0/goods_weapp/views/edit_goods_style",["require","core/utils","components/showcase/2.0.0/base/views/edit_base","tpl!../templates/edit_goods_style"],function(e){"use strict";var t=e("core/utils");return e("components/showcase/2.0.0/base/views/edit_base").extend({template:e("tpl!../templates/edit_goods_style"),events:{'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},modelEvents:{change:"render"},bindValidation:function(){},templateHelpers:{isFenxiao:t.isFenxiao}})}),define("components/showcase/2.0.0/goods_weapp/views/edit",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods_weapp/templates/edit.html","components/modal/1.0.0/modal","core/utils","./edit_goods_style","components/attachment/image/app"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/goods_weapp/templates/edit.html"),s=e("components/modal/1.0.0/modal"),a=e("core/utils"),l=e("./edit_goods_style"),r=e("components/attachment/image/app");return i.extend({template:t.template(o),templateHelpers:{fullfillImage:a.fullfillImage},events:{"click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods","click .js-trigger-image":"chooseImage"},modelEvents:{"change:goods":"render","change:default_image_url":"render"},regions:{goodsStyleRegion:".js-goods-style-region"},onRender:function(){var e=this;this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.model.trigger("change"),e.model.trigger("change:goods"))}}),this.goodsStyleRegion.show(new l({model:this.model}))},handleDeleteGoods:function(e){var t=n(e.target),i=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGoods(i)},handleAddGoods:function(){var e=this;this.goodsModal=s.initialize({type:"goods",hide:["tag"],multiChoose:!0}).setChooseItemCallback(function(n){t.each(n,function(t){e.model.get("goods").push({id:t.data_id,url:t.data_url,image_url:t.image_url,image_id:t.data_id||t.id||"",price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title})}),e.model.trigger("change"),e.model.trigger("change:goods")}),this.goodsModal.modal("show")},chooseImage:function(){var e=this;r.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set({default_image_url:t.attachment_url})}})}})}),define("text!components/showcase/2.0.0/goods_list/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">商品来源：</label>\n        <div class="controls">\n            <% if (goods) { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left link-to">\n                        <a href="<%= goods.url %>" class="link-to-title" target="_blank">\n                            <span class="label label-success">\n                                <% if (goods.type === \'feature\') { %>微页面<%} else { %>商品标签<% } %>\n                                <em class="link-to-title-text"><%- goods.title %></em>\n                            </span>\n                        </a>\n                    </div>\n                    <a href="javascript:void(0);" class="pull-right js-add-goods add-goods">修改</a>\n                </div>\n            <% } else { %>\n                <a href="javascript:void(0);" class="js-add-goods add-goods control-action">从商品分组中选择</a>\n            <% } %>\n            <p class="help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示个数：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="0" <% if (goods_number_type == 0) { %> checked <% } %>>6\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="1" <% if (goods_number_type == 1) { %> checked <% } %>>12\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="goods_number_type" value="2" <% if (goods_number_type == 2) { %> checked <% } %>>18\n            </label>\n        </div>\n    </div>\n</form>\n<div class="js-goods-style-region" style="margin-top: 10px;"></div>\n'}),define("components/showcase/2.0.0/goods_list/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods_list/templates/edit.html","components/modal/1.0.0/modal","./edit_goods_style"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/goods_list/templates/edit.html"),o=e("components/modal/1.0.0/modal"),s=e("./edit_goods_style");return n.extend({template:t.template(i),events:{'change input[type="radio"]':"updateModel","click .js-add-goods":"handleAddGoods"},modelEvents:{"change:goods":"render"},regions:{goodsStyleRegion:".js-goods-style-region"},onRender:function(){this.goodsStyleRegion.show(new s({model:this.model}))},handleAddGoods:function(){var e=this;this.goodsModal=o.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set("goods",{id:t.data_id,url:t.data_url,image_url:t.data_cover_attachment_url,price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title,type:t.data_type})}),this.goodsModal.modal("show")}})}),define("text!components/showcase/2.0.0/goods_list_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal goods-list-weapp-edit" novalidate>\n    <div class="control-group">\n        <label class="control-label">商品来源：</label>\n        <div class="controls">\n            <% if (goods) { %>\n                <div class="control-action clearfix">\n                    <div class="pull-left link-to">\n                        <a href="<%= goods.url %>" class="link-to-title" target="_blank">\n                            <span class="label label-success">\n                                <% if (goods.type === \'feature\') { %>微页面<%} else { %>商品标签<% } %>\n                                <em class="link-to-title-text"><%- goods.title %></em>\n                            </span>\n                        </a>\n                    </div>\n                    <a href="javascript:void(0);" class="pull-right js-add-goods add-goods">修改</a>\n                </div>\n            <% } else { %>\n                <a href="javascript:void(0);" class="js-add-goods add-goods control-action">从商品分组中选择</a>\n            <% } %>\n            <p class="help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls" name="goods"></div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示个数：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_v2" value="0" <% if (goods_number_v2 == 0) { %> checked <% } %>>\n            </label>\n            <input type="text" name="goods_number_v2_input" value="<%= goods_number_v2_input %>" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_v2" value="50" <% if (goods_number_v2 == 50) { %> checked <% } %>>全部\n            </label>\n        </div>\n    </div>\n</form>\n<div class="js-goods-style-region" style="margin-top: 10px;"></div>\n'}),define("tpl!components/showcase/2.0.0/goods_list_weapp/templates/edit_goods_style",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" ',"0"==size&&(__p+=" checked "),__p+='>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" ',"1"==size&&(__p+=" checked "),__p+='>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" ',"2"==size&&(__p+=" checked "),__p+='>一大两小\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="3" ',"3"==size&&(__p+=" checked "),__p+='>详细列表\n            </label>\n        </div>\n    </div>\n\n    <div class="controls-card" style="margin-left: 0; padding: 10px 5px;">\n        <div class="control-group">\n            <label class="control-label">显示样式：</label>\n            <div class="controls">\n                <div class="controls-card-item">\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="0" ',"0"==size_type&&(__p+=" checked "),__p+=">\n                        卡片样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="1" ',"1"==size_type&&(__p+=" checked "),__p+=">\n                        瀑布流\n                    </label>\n                    "),__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="2" ',
"2"==size_type&&(__p+=" checked "),__p+=">\n                        极简样式\n                    </label>\n                    ","1"==size&&(__p+='\n                    <label class="radio inline">\n                        <input type="radio" name="size_type" value="3" ',"3"==size_type&&(__p+=" checked "),__p+=">\n                        促销\n                    </label>\n                    "),__p+="\n                </div>\n            </div>\n        </div>\n\n        ","3"!=size_type&&(__p+='\n        <div class="control-group">\n            <label class="control-label">显示内容：</label>\n            <div class="controls">\n                ',"3"!=size_type&&"3"!=size&&(__p+='\n                <div class="controls-card-item">\n                    <label class="checkbox inline">\n                        ',__p+="0"==title?'\n                        <input type="checkbox" name="title" value="0">显示商品名称\n                        ':'\n                        <input type="checkbox" name="title" value="1" checked>显示商品名称\n                        ',__p+="\n                    </label>\n\n                    ","0"==size&&"1"==title&&(__p+='\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_sub_title?'\n                            <input type="checkbox" name="show_sub_title" value="0">显示商品简介\n                            ':'\n                            <input type="checkbox" name="show_sub_title" value="1" checked>显示商品简介\n                            ',__p+="\n                        </label>\n                    </div>\n                    "),__p+='\n                </div>\n\n                <div class="controls-card-item">\n                    <label class="checkbox inline">\n                        ',__p+="0"==price?'\n                        <input type="checkbox" name="price" value="0">显示商品价格\n                        ':'\n                        <input type="checkbox" name="price" value="1" checked>显示商品价格\n                        ',__p+="\n                    </label>\n                </div>\n                "),__p+="\n\n                ","3"==size_type||"2"==size_type&&"3"!=size||(__p+='\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==buy_btn?'\n                            <input type="checkbox" name="buy_btn" value="0">显示购买按钮\n                            ':'\n                            <input type="checkbox" name="buy_btn" value="1" checked>显示购买按钮\n                            ',__p+="\n                        </label>\n                    </div>\n\n                    ","1"==buy_btn&&(__p+='\n                    <div style="margin: 10px 0 0 20px;">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" ',"1"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" ',"2"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式2\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="3" ',"3"==buy_btn_type&&(__p+=" checked "),__p+='>\n                            样式3\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="4" ',"4"==buy_btn_type&&(__p+=" checked "),__p+=">\n                            样式4\n                        </label>\n                    </div>\n                    "),__p+="\n                </div>\n                "),__p+="\n\n            </div>\n        </div>\n        "),__p+="\n    </div>\n\n</form>\n";return __p}}),define("components/showcase/2.0.0/goods_list_weapp/views/edit_goods_style",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","components/modal/1.0.0/modal","tpl!../templates/edit_goods_style"],function(e){"use strict";var t=(e("underscore"),e("core/utils")),n=e("components/showcase/2.0.0/base/views/edit_base");e("components/modal/1.0.0/modal");return n.extend({template:e("tpl!../templates/edit_goods_style"),events:{'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},modelEvents:{change:"render"},bindValidation:function(){},templateHelpers:{isFenxiao:t.isFenxiao}})}),define("components/showcase/2.0.0/goods_list_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/goods_list_weapp/templates/edit.html","components/modal/1.0.0/modal","./edit_goods_style","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/goods_list_weapp/templates/edit.html"),o=e("components/modal/1.0.0/modal"),s=e("./edit_goods_style"),a=e("core/utils");return n.extend({template:t.template(i),events:{'change input[type="radio"]':"updateModel",'change input[type="text"]':"updateModel","click .js-add-goods":"handleAddGoods"},modelEvents:{"change:goods":"render"},regions:{goodsStyleRegion:".js-goods-style-region"},onInit:function(){this.listenTo(this.model,"change",this.render)},onRender:function(){this.goodsStyleRegion.show(new s({model:this.model}))},handleAddGoods:function(){var e=this;this.goodsModal=o.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set("goods",{id:t.data_id,url:t.data_url,image_url:t.data_cover_attachment_url,price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title,type:t.data_type})}),this.goodsModal.modal("show")},updateModel:a.updateModel})}),define("tpl!components/showcase/2.0.0/goods_template_split/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="app-component-desc">\n   <p>\n        请在商品页中进行编辑\n        <a href="/v2/showcase/goods#list" target="_blank" class="new-window">点此查看</a>\n    </p>\n</div>\n';return __p}}),define("components/showcase/2.0.0/goods_template_split/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","tpl!../templates/edit"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/edit_base").extend({template:e("tpl!../templates/edit")})}),define("tpl!zenjs/marionette/modal/modal",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h3 class="title">弹层标题</h3>\n</div>\n<div class="modal-body">\n    弹层内容\n</div>\n<div class="modal-footer clearfix">\n    <button class="ui-btn ui-btn-primary pull-right js-close">关闭</button>\n</div>\n';return __p}}),define("zenjs/marionette/modal/modal",["require","marionette","tpl!./modal"],function(e){"use strict";return e("marionette").Layout.extend({className:"modal hide fade",template:e("tpl!./modal"),events:{hidden:"hidden","click .js-close":"hide"},initialize:function(){this.render(),this.show()},show:function(){this.triggerMethod("before:modal:show"),this.$el.modal("show"),this.triggerMethod("modal:show")},hide:function(){this.triggerMethod("before:modal:close"),this.$el.modal("hide"),this.triggerMethod("modal:close")},hidden:function(){this.$el.data("modal",null),this.close()}})}),define("tpl!components/showcase/2.0.0/groupon/modal/view_examples",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal medium" style="top: -300px">\n    <div class="modal-header">\n        <a class="close" data-dismiss="modal">×</a>\n        <h3 class="title">查看更多示例</h3>\n    </div>\n    <div class="modal-body">\n        <div class="text-center"><img src="'+(null==(__t=window._global.url.imgqn+"/public_files/2017/7/28/321f02db1026ee2f74e4571ad24627bb.png")?"":__t)+'" width="280px" height="476px" /></div>\n    </div>\n    <div class="modal-footer clearfix">\n    <span class="pull-right">\n        <button class="btn btn-primary js-close">我知道了</button>\n    </span>\n    </div>\n</div>\n';return __p}}),define("components/showcase/2.0.0/groupon/modal/view_examples",["require","zenjs/marionette/modal/modal","tpl!./view_examples"],function(e){"use strict";return e("zenjs/marionette/modal/modal").extend({template:e("tpl!./view_examples")})}),define("tpl!components/showcase/2.0.0/groupon/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal groupon-com-edit-form" novalidate>\n    <div class="control-group">\n        <div><label>添加方式：</label></div>\n        <div class="com-edit-collapse__wrapper '+(null==(__t=show_goods_source?"open":"")?"":_.escape(__t))+'">\n            <div class="com-edit-collapse__header">\n                <label class="radio inline">\n                    <input type="radio" name="goods_source" value="0" ',"0"==goods_source&&(__p+=" checked "),__p+='>\n                    自动获取\n                </label>\n                <span class="ui-block-head-help" style="position: relative; top: 3px; right: 0">\n                    <a href="javascript:void(0);" class="js-help-notes" data-class="bottom center"></a>\n                    <div class="js-notes-cont hide">\n                        <div>系统自动获取店铺拼团商品, 建议选择</div>\n                    </div>\n                </span>\n                <span class="setting">高级设置</span>\n            </div>\n            <div class="groupon-edit-source-body com-edit-collapse__body">\n                <div class="control-group goods-num-wrapper">\n                    <label class="control-label goods-num-label">商品个数：</label>\n                    <div class="controls goods-num-controls">\n                        <label class="radio inline all">\n                            <input type="radio" name="goods_num" value="0" class="goods-num-all" ',"0"==goods_num&&(__p+=" checked "),__p+='>全部(最多30个)\n                        </label>\n                        <label class="radio inline other">\n                            <input type="radio" name="goods_num" class="goods-num-radio" value="goodsNum" ',"0"!=goods_num&&(__p+=" checked "),__p+='>\n                        </label>\n                        <input type="text" name="goods_num_input" value="'+(null==(__t=goods_num_input)?"":__t)+'" class="goods-num-input" placeholder="请输入显示的商品数" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')">\n                    </div>\n                    <div class="controls">\n                        <label class="checkbox inline goods-limit-label">\n                            ',__p+="1"==goods_limit?'\n                                <input type="checkbox" name="goods_limit" class="goods-limit-checkbox" value="1" checked />\n                            ':'\n                                <input type="checkbox" name="goods_limit" class="goods-limit-checkbox" value="0" />\n                            ',__p+='\n                        </label>\n                        <span class="goods-limit-des">超过<input type="text" name="goods_limit_input" value="'+(null==(__t=goods_limit_input)?"":__t)+'" class="goods-limit-input" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')">个显示查看更多</span>\n                        <span class="view-examples">查看示例</span>\n                    </div>\n                </div>\n                <div class="control-group">\n                    <label class="control-label goods-order-label">排序规则：</label>\n                    <div class="controls">\n                        <label class="radio vertical mb5"><input type="radio" name="order_rule" value="0" ',"0"==order_rule&&(__p+="checked"),__p+=' />销量最高<span class="help">销量最高的排在前面</span></label>\n                        <label class="radio vertical mb5"><input type="radio" name="order_rule" value="1" ',"1"==order_rule&&(__p+="checked"),__p+=' />最热<span class="help">浏览次数最多的排在前面</span></label>\n                        <label class="radio vertical mb5"><input type="radio" name="order_rule" value="2" ',"2"==order_rule&&(__p+="checked"),__p+=' />最新<span class="help">最新开始的排在前面</span></label>\n                        <label class="radio vertical mb5"><input type="radio" name="order_rule" value="3" ',"3"==order_rule&&(__p+="checked"),__p+=' />最快结束<span class="help">离活动结束时间最近的排在前面</span></label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="com-edit-collapse__wrapper">\n            <div class="com-edit-collapse__header">\n                <label class="radio inline">\n                    <input type="radio" name="goods_source" value="1" ',"1"==goods_source&&(__p+=" checked "),__p+=">\n                    手动添加\n                </label>\n            </div>\n        </div>\n        ","1"==goods_source&&(__p+='\n            <div class="control-group">\n                <label class="control-label">选择商品：</label>\n                <div class="controls">\n                    <ul class="module-goods-list clearfix" name="goods">\n                        ',_.each(goods,function(e,t){__p+='\n                        <li class="sort">\n                            <a href="'+(null==(__t=e.url)?"":__t)+'" target="_blank"><img src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" alt="商品图" width="50" height="50"></a>\n                            <a class="close-modal js-delete-goods small hide" data-id="',e.id,__p+='" title="删除">×</a>\n                        </li>\n                        '}),__p+='\n                        <li>\n                            <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="max-goods help">最多添加30个商品</div>\n        '),__p+='\n    </div>\n    <div class="control-group">\n        <div class="controls" name="goods"></div>\n    </div>\n    <div class="control-group">\n        <label class="control-label goods-list-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" ',"0"==size&&(__p+=" checked "),__p+='>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" ',"1"==size&&(__p+=" checked "),__p+='>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" ',"2"==size&&(__p+=" checked "),__p+='>详细列表\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls">\n            <div class="controls-card">\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_buy_btn?'\n                            <input type="checkbox" name="show_buy_btn" value="0">显示购买按钮\n                            ':'\n                            <input type="checkbox" name="show_buy_btn" value="1" checked>显示购买按钮\n                            ',__p+="\n                        </label>\n                    </div>\n                    ","1"==show_buy_btn&&(__p+='\n                        <div class="indent-style">\n                            <label class="radio inline">\n                                <input type="radio" name="buy_btn_type" value="0" ',"0"==buy_btn_type&&(__p+=" checked "),__p+='>样式1\n                            </label>\n                            <label class="radio inline">\n                                <input type="radio" name="buy_btn_type" value="1" ',"1"==buy_btn_type&&(__p+=" checked "),__p+=">样式2\n                            </label>\n                        </div>\n                    "),__p+='\n                </div>\n                <div class="controls-card-item">\n                    ',"0"==size||"1"==size?(__p+='\n                        <div>\n                            <label class="checkbox inline">\n                                ',__p+="0"==show_title?'\n                                <input type="checkbox" name="show_title" value="0">显示商品标题\n                                ':'\n                                <input type="checkbox" name="show_title" class="show_goods_title" value="1" checked>显示商品标题\n                                ',__p+="\n                            </label>\n                        </div>\n                        ","1"==show_title&&(__p+='\n                            <div class="indent-style">\n                                <label class="checkbox inline">\n                                    ',__p+="0"==show_discount?'\n                                    <input type="checkbox" name="show_discount" value="0">显示立减x元\n                                    ':'\n                                    <input type="checkbox" name="show_discount" value="1" checked>显示立减x元\n                                    ',__p+="\n                                </label>\n                            </div>\n                        "),__p+="\n                    "):"2"==size&&(__p+='\n                        <div>\n                            <label class="checkbox inline">\n                                ',__p+="0"==show_discount?'\n                                <input type="checkbox" name="show_discount" value="0">显示立减x元\n                                ':'\n                                <input type="checkbox" name="show_discount" value="1" checked>显示立减x元\n                                ',__p+="\n                            </label>\n                        </div>\n                    "),__p+='\n                </div>\n                <div class="controls-card-item">\n                    <div>\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_origin_price?'\n                            <input type="checkbox" name="show_origin_price" value="0">显示商品原价\n                            ':'\n                            <input type="checkbox" name="show_origin_price" value="1" checked>显示商品原价\n                            ',__p+="\n                        </label>\n                    </div>\n                </div>\n                ","0"!=size&&(__p+='\n                    <div class="controls-card-item">\n                        <div>\n                            <label class="checkbox inline">\n                                ',__p+="0"==show_countdown?'\n                                <input type="checkbox" name="show_countdown" value="0">显示活动倒计时\n                                ':'\n                                <input type="checkbox" name="show_countdown" value="1" checked>显示活动倒计时\n                                ',__p+="\n                            </label>\n                        </div>\n                    </div>\n                "),__p+="\n            </div>\n        </div>\n    </div>\n    ","1"==goods_source&&(__p+='\n        <div class="control-group">\n            <div class="more-setting"><label>更多设置：</label></div>\n            <div class="controls">\n                <div class="controls-card">\n                    <div class="controls-card-item">\n                        <div>\n                            <label class="checkbox inline">\n                                ',__p+="0"==hide_goods_end?'\n                                <input type="checkbox" name="hide_goods_end" value="0">隐藏活动结束商品<span class="help">勾选后页面不显示活动结束的商品</span>\n                                ':'\n                                <input type="checkbox" name="hide_goods_end" value="1" checked>隐藏活动结束商品<span class="help">勾选后页面不显示活动结束的商品</span>\n                                ',__p+="\n                            </label>\n                        </div>\n                        ","1"==hide_goods_end&&(__p+='\n                        <div class="indent-style">\n                            <label class="radio inline">\n                                <input type="radio" name="hide_goods_type" value="0" ',"0"==hide_goods_type&&(__p+=" checked "),__p+='>24小时后隐藏\n                            </label>\n                            <label class="radio inline">\n                                <input type="radio" name="hide_goods_type" value="1" ',"1"==hide_goods_type&&(__p+=" checked "),__p+=">立即隐藏\n                            </label>\n                        </div>\n                        "),__p+="\n                    </div>\n                </div>\n            </div>\n        </div>\n    "),__p+='\n    <p class="help-desc">当页面无可显示的拼团商品时, 拼团区块将隐藏</p>\n</form>\n';return __p}}),define("components/showcase/2.0.0/groupon/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","underscore","jquery","core/utils","../modal/view_examples","components/modal/1.0.0/modal","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("underscore"),i=e("jquery"),o=e("core/utils"),s=e("../modal/view_examples"),a=e("components/modal/1.0.0/modal");return t.extend({template:e("tpl!../templates/edit"),templateHelpers:{fullfillImage:o.fullfillImage},events:{"change input":"updateModel","click .setting":"toggleGoodsSource","change .goods-num-all":"resetGoodsNumInput","change .goods-limit-checkbox":"resetGoodsLimitInput",'change input[name="goods_source"]':"resetGoods",'change input[name="size"]':"resetGoodsTitleCountDown","change .show_goods_title":"resetGoodsDiscount","click .view-examples":"handleViewExamples","click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"},onInit:function(){this.listenTo(this.model,"change",this.render)},toggleGoodsSource:function(){var e=this.model.get("show_goods_source");this.model.set("show_goods_source",!e)},resetGoodsNumInput:function(e){e.target.checked&&this.model.set("goods_num_input","")},resetGoodsLimitInput:function(e){e.target.checked||this.model.set("goods_limit_input","")},resetGoods:function(e){"0"==e.target.value&&(this.model.set("goods",[]),this.model.set("goods_ids",[]),this.model.set("activity_ids",[]))},resetGoodsTitleCountDown:function(e){"0"==e.target.value?this.model.set("show_countdown","1"):(this.model.set("show_countdown","0"),"2"==e.target.value&&this.model.set("show_title","1"))},resetGoodsDiscount:function(e){e.target.checked||this.model.set("show_discount","0")},handleViewExamples:function(){new s},handleDeleteGoods:function(e){var t=i(e.target),n=this.$(".js-delete-goods").index(t);this.model.deleteGoods(n)},handlePrice:function(e){var t=n.values(e);return n.min(t)},handleOriginPrice:function(e,t){var i,o=this.handlePrice(e),s=n.keys(e);return s.forEach(function(t){e[t]===o&&(i=t)}),t[i]},handleAddGoods:function(){var e=this;this.goodsModal=a.initialize({type:"groupon",multiChoose:!0}).setChooseItemCallback(function(t){var i=!1,s=e.model.get("goods_ids");n.each(t,function(t){if(s.length<30){s.every(function(e){return e!==t.extra.goods_id})&&(e.model.get("goods_ids").push(t.extra.goods_id),e.model.get("activity_ids").push(t.extra.activity_id),e.model.get("goods").push({title:t.data_title,start_at:t.extra.start_at,end_at:t.extra.end_at,condition_num:t.extra.condition_num,image_url:t.image_url,url:t.data_url,min_sku_price:e.handlePrice(t.extra.sku_prices),origin_price:e.handleOriginPrice(t.extra.sku_prices,t.extra.origin_sku_price)}))}else i=!0}),i&&o.errorNotify("商品不能多于30个，已经自动删除多余的商品。"),e.model.trigger("change"),e.model.trigger("change:goods"),e.model.trigger("change:goods_ids"),e.model.trigger("change:activity_ids")}),this.goodsModal.modal("show")},updateModel:o.updateModel})}),define("tpl!components/showcase/2.0.0/period_buy/modal/view_examples",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal medium" style="top: -300px">\n    <div class="modal-header">\n        <a class="close" data-dismiss="modal">×</a>\n        <h3 class="title">查看更多示例</h3>\n    </div>\n    <div class="modal-body">\n        <div class="text-center">\n            <div class="text-left" style="margin-bottom: 10px">当周期购商品总数多于所设置显示数量时，可勾选在商品列表底部显示“查看全部”，点击进入全部周期购商品列表页</div>\n            <img src="'+(null==(__t=window._global.url.imgqn+"/public_files/2017/9/11/f0baa9d5f4685ff70a33b3841bb6a691.png")?"":__t)+'" width="280px" height="476px" />\n        </div>\n    </div>\n    <div class="modal-footer clearfix">\n    <span class="pull-right">\n        <button class="btn btn-primary js-close">我知道了</button>\n    </span>\n    </div>\n</div>\n';return __p}}),define("components/showcase/2.0.0/period_buy/modal/view_examples",["require","zenjs/marionette/modal/modal","tpl!./view_examples"],function(e){"use strict";return e("zenjs/marionette/modal/modal").extend({template:e("tpl!./view_examples")})}),define("tpl!components/showcase/2.0.0/period_buy/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal periodbuy-com-edit-form" novalidate>\n    <div class="control-group">\n        <div><label>添加方式：</label></div>\n        <div class="com-edit-collapse__wrapper '+(null==(__t=show_goods_source?"open":"")?"":_.escape(__t))+'">\n            <div class="com-edit-collapse__header">\n                <label class="radio inline">\n                    <input type="radio" name="goods_source" value="0" ',"0"==goods_source&&(__p+=" checked "),__p+='>\n                    自动获取\n                </label>\n                <span class="ui-block-head-help" style="position: relative; top: 3px; right: 0">\n                    <a href="javascript:void(0);" class="js-help-notes" data-class="bottom center"></a>\n                    <div class="js-notes-cont hide">\n                        <div>系统自动获取店铺周期购商品，建议选择</div>\n                    </div>\n                </span>\n                <span class="setting">高级设置</span>\n            </div>\n            <div class="periodbuy-edit-source-body com-edit-collapse__body">\n                <div class="control-group goods-num-wrapper">\n                    <label class="control-label">显示个数：</label>\n                    <div class="controls">\n                        <input type="text" name="goods_num" value="'+(null==(__t=goods_num)?"":__t)+'" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')" /><span class="help">最多显示8个</span>\n                    </div>\n                    <div class="control-group">\n                        <div class="controls" name="goods_num"></div>\n                    </div>\n                    <div class="controls">\n                        <label class="checkbox show-all-label">\n                            ',__p+="1"==show_all?'\n                            <input type="checkbox" name="show_all" value="1" checked />显示查看全部按钮\n                            ':'\n                            <input type="checkbox" name="show_all" value="0" />显示查看全部按钮\n                            ',__p+='\n                        </label>\n                        <span class="view-examples">查看实例</span>\n                    </div>\n                    <div class="control-group">\n                        <label class="control-label">排序规则：</label>\n                        <div class="controls">\n                            <label class="radio vertical mb10"><input type="radio" name="order_rule" value="0" ',"0"==order_rule&&(__p+="checked"),__p+=' />销量最高<span class="help">销量最高的排在前面</span></label>\n                            <label class="radio vertical mb10"><input type="radio" name="order_rule" value="1" ',"1"==order_rule&&(__p+="checked"),__p+=' />最热<span class="help">浏览次数最多的排在前面</span></label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="com-edit-collapse__wrapper">\n            <div class="com-edit-collapse__header">\n                <label class="radio inline">\n                    <input type="radio" name="goods_source" value="1" ',"1"==goods_source&&(__p+=" checked "),__p+=">\n                    手动获取\n                </label>\n            </div>\n        </div>\n        ","1"==goods_source&&(__p+='\n            <div class="control-group">\n                <label class="control-label">选择商品：</label>\n                <div class="controls">\n                    <ul class="module-goods-list clearfix" name="goods">\n                        ',_.each(goods,function(e,t){__p+='\n                        <li class="sort">\n                            <a href="'+(null==(__t=e.url)?"":__t)+'" target="_blank"><img src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" alt="商品图" width="50" height="50"></a>\n                            <a class="close-modal js-delete-goods small hide" data-id="',e.id,__p+='" title="删除">×</a>\n                        </li>\n                        '}),__p+='\n                        <li>\n                            <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="max-goods help">最多添加8个商品<span>'+(null==(__t=goods.length>=2?", 拖动调整商品排序":"")?"":__t)+"</span></div>\n        "),__p+='\n    </div>\n    <div class="control-group">\n        <div class="controls" name="goods"></div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">列表样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" ',"0"==size&&(__p+=" checked "),__p+='>大图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" ',"1"==size&&(__p+=" checked "),__p+='>小图\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="size" value="2" ',"2"==size&&(__p+=" checked "),__p+='>详细列表\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls">\n            <div class="controls-card">\n                <div class="controls-card-item">\n                    <label class="checkbox inline">\n                        ',__p+="0"==show_buy_btn?'\n                        <input type="checkbox" name="show_buy_btn" value="0">显示购买按钮\n                        ':'\n                        <input type="checkbox" name="show_buy_btn" value="1" checked>显示购买按钮\n                        ',__p+="\n                    </label>\n                    ","1"==show_buy_btn&&(__p+='\n                    <div class="indent-style">\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="0" ',"0"==buy_btn_type&&(__p+=" checked "),__p+='>样式1\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="1" ',"1"==buy_btn_type&&(__p+=" checked "),__p+='>样式2\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="buy_btn_type" value="2" ',"2"==buy_btn_type&&(__p+=" checked "),
__p+=">样式3\n                        </label>\n                    </div>\n                    "),__p+='\n                </div>\n                <div class="controls-card-item">\n                    ',"0"==size||"1"==size?(__p+='\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_title?'\n                            <input type="checkbox" name="show_title" value="0">显示活动标题\n                            ':'\n                            <input type="checkbox" name="show_title" value="1" checked>显示活动标题\n                            ',__p+="\n                        </label>\n                        ","0"==size&&"1"==show_title&&(__p+='\n                            <div class="indent-style">\n                                <label class="checkbox inline">\n                                    ',__p+="0"==show_desc?'\n                                    <input type="checkbox" name="show_desc" value="0">显示活动描述\n                                    ':'\n                                    <input type="checkbox" name="show_desc" value="1" checked>显示活动描述\n                                    ',__p+="\n                                </label>\n                            </div>\n                        "),__p+="\n                    "):"2"==size&&(__p+='\n                        <label class="checkbox inline">\n                            ',__p+="0"==show_desc?'\n                            <input type="checkbox" name="show_desc" value="0">显示活动描述\n                            ':'\n                            <input type="checkbox" name="show_desc" value="1" checked>显示活动描述\n                            ',__p+="\n                        </label>\n                    "),__p+='\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="more-setting"><label>更多设置：</label></div>\n        <div class="controls">\n            <div class="controls-card">\n\n                    <label class="checkbox">\n                        ',__p+="1"==hide_goods_end?'\n                        <input type="checkbox" name="hide_goods_end" value="1" checked/>隐藏已售罄周期购商品\n                        ':'\n                        <input type="checkbox" name="hide_goods_end" value="0"/>隐藏已售罄周期购商品\n                        ',__p+="\n                    </label>\n\n            </div>\n        </div>\n    </div>\n</form>\n";return __p}}),define("components/showcase/2.0.0/period_buy/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","underscore","jquery","core/utils","../modal/view_examples","components/modal/1.0.0/modal","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("underscore"),i=e("jquery"),o=e("core/utils"),s=e("../modal/view_examples"),a=e("components/modal/1.0.0/modal");return t.extend({template:e("tpl!../templates/edit"),templateHelpers:{fullfillImage:o.fullfillImage},events:{"change input":"updateModel","click .setting":"toggleGoodsSource",'change input[name="goods_source"]':"resetGoods",'change input[name="size"]':"resetGoodsTitleDesc",'change input[name="show_title"]':"resetGoodsDesc","click .view-examples":"handleViewExamples","click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"},onRender:function(){var e=this;this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.sort(i,o,e.model.get("goods_ids")),e.sort(i,o,e.model.get("activity_ids")),e.model.trigger("change"),e.model.trigger("change:goods"),e.model.trigger("change:goods_ids"),e.model.trigger("change:activity_ids"))}})},toggleGoodsSource:function(){var e=this.model.get("show_goods_source");this.model.set("show_goods_source",!e)},resetGoods:function(e){"0"==e.target.value&&(this.model.set("goods",[]),this.model.set("goods_ids",[]),this.model.set("activity_ids",[]))},resetGoodsTitleDesc:function(e){"0"==e.target.value||"2"==e.target.value?(this.model.set("show_title","1"),this.model.set("show_desc","1")):"1"==e.target.value&&this.model.set("show_desc","0")},resetGoodsDesc:function(e){"1"==e.target.value&&this.model.set("show_desc","0")},handleViewExamples:function(){new s},handleDeleteGoods:function(e){var t=i(e.target),n=this.$(".js-delete-goods").index(t);this.model.deleteGoods(n)},handlePrice:function(e){if(e){var t=e.map(function(e){return e.price});return n.min(t)}return 0},handleDescription:function(e){if(e){var t=this.handlePrice(e),n=0;return e.forEach(function(e,i){e.price===t&&(n=i)}),e[n].description}return""},handleAddGoods:function(){var e=this;this.goodsModal=a.initialize({type:"period_buy",multiChoose:!0}).setChooseItemCallback(function(t){var i=!1,s=e.model.get("goods_ids");n.each(t,function(t){if(s.length<8){s.every(function(e){return e!==t.extra.goods_id})&&(e.model.get("goods_ids").push(t.extra.goods_id),e.model.get("activity_ids").push(t.extra.id),e.model.get("goods").push({title:t.title,description:t.description,image_url:t.extra.goods_info?t.extra.goods_info.attachment_url:"",min_sku_price:e.handlePrice(t.extra.skus),min_sku_description:e.handleDescription(t.extra.skus)}))}else i=!0}),i&&o.errorNotify("商品不能多于8个，已经自动删除多余的商品。"),e.model.trigger("change"),e.model.trigger("change:goods"),e.model.trigger("change:goods_ids"),e.model.trigger("change:activity_ids")}),this.goodsModal.modal("show")},onInit:function(){this.listenTo(this.model,"change",this.render)},updateModel:o.updateModel})}),define("components/showcase/2.0.0/base/views/edit_collection_base",["require","jquery","marionette"],function(e){"use strict";e("jquery");return e("marionette").CollectionView.extend({tagName:"ul",className:"choices",events:{"click .choice":function(e){var t=e.target.nodeName.toLowerCase();["input","textarea","select"].indexOf(t)===-1&&this.$(":focus").blur()}},itemViewOptions:function(){return{layout:this.options.layout}},sortable:function(){var e=this;this.$el.sortable({axis:"y",cursor:"move",start:function(e,t){t.item.data("start",t.item.index())},stop:function(t,n){var i=n.item.data("start"),o=n.item.index();i!==o&&(e.sort(i,o,e.collection.models),e.collection.trigger("reset"))}})},sort:function(e,t,n){var i=n.splice(e,1)[0];return n.splice(t,0,i),n}})}),define("text!components/showcase/2.0.0/image_ad_weapp/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <div class="choice-image__inner">\n        <% if (image_id === \'\') { %>\n            <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n        <% } else { %>\n            <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n            <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n        <% } %>\n    </div>\n    <div class="choice-image__desc">建议宽度：750像素</div>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input class="" type="text" placeholder="图片广告描述，最多15字" name="title[<%= cid %>]" value="<%- title %>">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("tpl!components/setup_link/render_link",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var TYPE_MAP={feature:"微页面",category:"微页面分类",topic:"专题",article:"资讯",goods:"商品",tag:"商品标签",activity:"营销活动",guaguale:"营销活动",wheel:"营销活动",zodiac:"营销活动",crazyguess:"营销活动",survey:"调查",homepage:"店铺主页",offlinepage:"网点",offlinelist:"网点列表",usercenter:"会员主页",history:"历史信息",link:"外链",checkin:"签到",paidcontent:"知识内容",paidcolumn:"知识专栏",mypaidcontent:"我购买的专栏、内容",weappfeature:"小程序微页面"};__p+="\n\n",link_type?(__p+='\n    <div class="control-action clearfix">\n        <div class="pull-left js-link-to link-to">\n            ',__p+=link_title&&["homepage","offlinelist","usercenter","history"].indexOf(link_type)===-1?'\n                <a href="'+(null==(__t=link_url)?"":__t)+'" target="_blank" class="new-window link-to-title">\n                    <span class="label label-success">\n                        '+(null==(__t=TYPE_MAP[link_type])?"":__t)+'\n                        <em class="link-to-title-text">'+(null==(__t=link_title)?"":__t)+"</em>\n                    </span>\n                </a>\n            ":'\n                <span class="label label-success">\n                    '+(null==(__t=TYPE_MAP[link_type])?"":__t)+"\n                </span>\n            ",__p+="\n            ",options.showDelete&&(__p+='\n                <a href="javascript:;" class="js-delete-link link-to-title close-modal" title="删除">×</a>\n            '),__p+='\n        </div>\n        <div class="'+(null==(__t=options.drop)?"":__t)+' hover pull-right">\n            <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n            '+(null==(__t=dropdown_menu())?"":__t)+"\n        </div>\n    </div>\n\n"):__p+='\n    <div class="'+(null==(__t=options.drop)?"":__t)+' hover">\n        <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n        '+(null==(__t=dropdown_menu())?"":__t)+"\n    </div>\n",__p+="\n"}return __p}}),define("tpl!components/setup_link/dropdown_menu",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="dropdown-menu">\n    <li>\n        <a class="js-modal-magazine" data-type="feature" href="javascript:void(0);">微页面及分类</a>\n    </li>\n    <li>\n        <a class="js-modal-goods" data-type="goods" href="javascript:void(0);">商品及分类</a>\n    </li>\n    <li>\n        <a class="js-modal-activity" data-type="activity" href="javascript:void(0);">营销活动</a>\n    </li>\n    <li>\n        <a class="js-modal-survey" data-type="survey" href="javascript:void(0);">投票调查</a>\n    </li>\n    ',1!=+_global.team_status.weixin_oldsub&&1!=+_global.team_status.weixin_server&&1!=+_global.team_status.weixin_certsub||(__p+='\n    <li>\n        <a class="js-modal-history" data-type="history" href="javascript:void(0);">历史消息</a>\n    </li>\n    '),__p+='\n    <li>\n        <a class="js-modal-homepage" data-type="homepage" href="javascript:void(0);">店铺主页</a>\n    </li>\n    <li>\n        <a class="js-modal-usercenter" data-type="usercenter" href="javascript:void(0);">会员主页</a>\n    </li>\n    <li>\n        <a class="js-modal-offlinelist" data-type="offlinelist" href="javascript:void(0);">网点列表</a>\n    </li>\n    <li>\n        <a class="js-modal-offlinepage" data-type="offlinepage" href="javascript:void(0);">某网点主页</a>\n    </li>\n    ',window._global.paidcontent_auth&&(__p+='\n    <li>\n        <a class="js-modal-paidcontent" data-type="column" href="javascript:void(0);">知识专栏</a>\n    </li>\n    <li>\n        <a class="js-modal-paidcontent" data-type="content" href="javascript:void(0);">知识内容</a>\n    </li>\n    <li>\n        <a class="js-modal-mypaidcontent" data-type="paidcontent" href="javascript:void(0);">我购买的专栏、内容</a>\n    </li>\n    '),__p+='\n    <li>\n        <a class="js-modal-links" data-type="links" href="javascript:void(0);">自定义外链</a>\n    </li>\n</ul>\n';return __p}}),define("tpl!components/setup_link/dropdown_menu_weapp",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="dropdown-menu">\n    <li>\n        <a class="js-modal-goods" data-type="goods" href="javascript:void(0);">商品及分类</a>\n        <a class="js-modal-weappfeature" data-type="weappfeature" href="javascript:void(0);">小程序微页面</a>\n    </li>\n</ul>\n';return __p}}),define("components/setup_link/render_link",["require","underscore","jquery","tpl!./render_link","tpl!./dropdown_menu","tpl!./dropdown_menu_weapp"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("tpl!./render_link"),o=e("tpl!./dropdown_menu"),s=e("tpl!./dropdown_menu_weapp"),a=function(){n(".js-modal-offlinelist").parent().remove(),n(".js-modal-offlinepage").parent().remove(),window._global.nothasmultistore=!0};return function(e,l,r,c){c=t.extend({drop:"dropdown",showDelete:!0},c);var d={link_url:e,link_title:l,link_type:r,options:c,dropdown_menu:o};return 1===window._global.is_weapp_setting&&(d.dropdown_menu=s),window._global.has_multistore_checked?window._global.nothasmultistore&&setTimeout(a,0):(window._global.has_multistore_checked=!0,n.ajax({method:"get",url:window._global.url.www+"/ump/multistore/status.json",success:function(e){+e.data.status||a()}})),i(d)}}),define("components/paidcontent_select_dialog/consts",["require"],function(e){return{DIALOG_TITLE:{column:"专栏选择",content:"内容选择"},NEW:{column:"新建专栏",content:"新建内容"},PLACEHOLDER:{column:"搜索专栏",content:"搜索内容"},FETCH_URL:{column:"/ump/paidcontent/columns.json",content:"/ump/paidcontent/contents.json"},NEW_URL:{column:"/ump/paidcontent#/column/add",content:"/ump/paidcontent#/list/content"}}}),define("jsx!components/paidcontent_select_dialog/ItemInfo",["require","react","core/utils"],function(e){var t=e("react"),n=e("core/utils");return t.createClass({render:function(){var e=this.props;return t.createElement("div",{className:"flex",style:{justifyContent:"flex-start"}},t.createElement("div",{className:"flex",style:{alignItems:"center",justifyContent:"center",marginRight:"10px",width:"60px",height:"60px"}},t.createElement("img",{src:n.fullfillImage(e.img,"!60x60.jpg")})),t.createElement("div",{className:"flex",style:{flexDirection:"column",justifyContent:"center"}},t.createElement("div",null,e.title),t.createElement("div",{style:{color:"#f60"}},"￥",(e.price/100).toFixed(2))))}})}),define("jsx!components/paidcontent_select_dialog/SelectDialog",["require","react","zent","core/utils","./consts","jsx!./ItemInfo"],function(e){var t=e("react"),n=e("zent"),i=n.Table,o=n.Button,s=n.Input,a=n.Dialog,l=a.openDialog,r=a.closeDialog,c=e("core/utils"),d=e("./consts"),u=e("jsx!./ItemInfo"),p=t.createClass({displayName:"List",getInitialState:function(){return{loading:!1,title:"",datasets:[],total:0,pageSize:10,p:1,order:"desc",orderBy:"publish_at",selectedRowKeys:[],selectedRows:[]}},componentWillMount:function(){this.fetch()},fetch:function(e){var t=this,n=this.prepareParams(e);"content"===this.props.type&&(n.seller_type="1,3"),t.setState({loading:!0}),c.ajax({url:window._global.url.www+d.FETCH_URL[this.props.type],data:n}).done(function(e){t.setState({datasets:e.list,total:e.total,p:n.p,order:n.order,orderBy:n.order_by})}).fail(function(e){c.errorNotify(e)}).always(function(){t.setState({loading:!1})})},prepareParams:function(e){var e=e||{},t=this.state;return{p:e.current||t.p,page_size:t.pageSize,order_by:e.sortBy||t.orderBy,order:e.sortType||t.order,title:t.title,status:1}},getColumns:function(){return"column"===this.props.type?this.getColumnColumns():this.getContentColumns()},getColumnColumns:function(){return[{title:"商品",bodyRender:function(e){return t.createElement(u,{img:e.cover,title:e.title,price:e.price})}},{title:"创建时间",name:"publish_at",needSort:!0}]},getContentColumns:function(){return[{title:"商品",bodyRender:function(e){return t.createElement(u,{img:e.cover,title:e.title,price:e.price})}},{title:"创建时间",name:"publish_at",needSort:!0}]},onSelect:function(e,t,n){this.props.options.multiple===!1?this.setState({selectedRowKeys:n?[n.alias]:[],selectedRows:n?[n]:[]}):this.setState({selectedRowKeys:e,selectedRows:t})},onConfirm:function(){var e=this.props.options.callback;if(e){e(this.state.selectedRows)!==!1&&r(this.props.dialogId)}},onTableChange:function(e){this.fetch(e)},onTitleChange:function(e){this.setState({title:e.target.value})},render:function(){var e=this;return t.createElement("div",{className:"seelct-dialog"},t.createElement("div",{className:"seelct-dialog-header flex",style:{marginBottom:"10px"}},t.createElement("div",null,t.createElement(o,{href:window._global.url.www+d.NEW_URL[this.props.type],target:"_blank"},d.NEW[this.props.type]),t.createElement(o,{onClick:this.fetch},"刷新")),t.createElement(s,{placeholder:d.PLACEHOLDER[this.props.type],className:"search",onPressEnter:this.fetch,onChange:this.onTitleChange,value:this.state.title})),t.createElement(i,{rowKey:"alias",sortBy:"publish_at",loading:this.state.loading,sortType:this.state.order,columns:this.getColumns(),datasets:this.state.datasets,selection:{selectedRowKeys:this.state.selectedRowKeys,onSelect:function(t,n,i){e.onSelect(t,n,i)}},onChange:this.onTableChange,pageInfo:{limit:this.state.pageSize,current:this.state.p,total:this.state.total}}),t.createElement("center",null,t.createElement(o,{type:"primary",onClick:this.onConfirm},"确定")))}});return{open:function(e){if(e=e||{},!e.type)throw new Error("paidcontent_select_dialog组件必须传入type参数");var n=e.type,i="PAIDCONTENT-DIALOG-ID-XWG-"+Date.now();l({dialogId:i,title:d.DIALOG_TITLE[n],children:t.createElement(p,{type:n,options:e,dialogId:i}),style:{width:"800px"},onClose:function(){}})}}}),define("components/paidcontent_select_dialog/index",["require","jsx!./SelectDialog"],function(e){var t=e("jsx!./SelectDialog");return{open:function(e){t.open(e)}}}),define("components/setup_link/bind_link",["require","underscore","jquery","core/utils","components/modal/1.0.0/modal","components/pop/atom/link","components/paidcontent_select_dialog/index"],function(e){"use strict";function t(e){var t=this,n=r(e.target).data("type");d.initialize({type:n}).setChooseItemCallback(function(e){t.triggerMethod("link:change",{link_id:e.data_id,link_type:e._real_type||e.type,link_title:e.data_title,link_url:e.data_url,alias:e.data_alias})}).modal("show")}function n(e){var t=r(e.target).data("type"),n=this;c.getStaticUrl(t,function(e,i){n.triggerMethod("link:change",{link_id:"",link_type:t,link_title:i,link_url:e})})}function i(e,t){var n,i=this;n=this.$(e+" .js-link-to").length>0?this.$(e+" .js-link-to"):this.$(e+" .js-dropdown-toggle");var o=t.target;u.initialize({target:n,trigger:r(o),callback:function(e){e&&"http://"!=e?i.triggerMethod("link:change",{link_id:"",link_type:"link",link_title:e,link_url:e}):i.triggerMethod("link:change",{link_id:"",link_type:"",link_title:"",link_url:""})}})}function o(e){this.triggerMethod("link:change",{link_id:"",link_type:"",link_title:"",link_url:""})}function s(e){this.triggerMethod("link:change",{link_id:"",link_type:"mypaidcontent",link_title:"我购买的专栏、内容",link_url:window._global.url.wap+"/ump/paidcontent?kdt_id="+window._global.kdt_id+"#/mypay"})}function a(e){var t=this,n=r(e.target).data("type");p.open({type:n,multiple:!1,callback:function(e){1===e.length&&(e=e[0],t.triggerMethod("link:change",{link_id:e.id,link_type:"paid"+n,link_title:e.title,link_url:e.url,alias:e.alias}))}})}var l=e("underscore"),r=e("jquery"),c=e("core/utils"),d=e("components/modal/1.0.0/modal"),u=e("components/pop/atom/link"),p=e("components/paidcontent_select_dialog/index");return function(e){if(this.$el&&this.triggerMethod){e=l.extend({parentSelector:""},e);var r=e.parentSelector;this.$el.off("click.bind.link").on("click.bind.link",l.template("<%= ps %> .js-modal-magazine, <%= ps %> .js-modal-goods, <%= ps %> .js-modal-activity, <%= ps %> .js-modal-survey, <%= ps %> .js-modal-offlinepage, <%= ps %> .js-modal-weappfeature",{ps:r}),t.bind(this)).on("click.bind.link",l.template("<%= ps %> .js-modal-history, <%= ps %> .js-modal-homepage, <%= ps %> .js-modal-usercenter, <%= ps %> .js-modal-offlinelist",{ps:r}),n.bind(this)).on("click.bind.link",l.template("<%= ps %> .js-modal-links",{ps:r}),i.bind(this,r)).on("click.bind.link",l.template("<%= ps %> .js-delete-link",{ps:r}),o.bind(this)).on("click.bind.link",l.template("<%= ps %> .js-modal-mypaidcontent",{ps:r}),s.bind(this)).on("click.bind.link",l.template("<%= ps %> .js-modal-paidcontent",{ps:r}),a.bind(this)),this.listenTo(this,"close",function(){this.$el.off("click.bind.link")})}}}),define("components/showcase/2.0.0/image_ad_weapp/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/image_ad_weapp/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/image_ad_weapp/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render),s.call(this)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);t.extend(n,{cid:e,renderLink:o});var i=this.model.get("image_url");return i=i&&l.fullfillImage(i,"!100x100+2x.jpg"),n.image_url=i,n.image_thumb_url=i,n},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.options.layout.model.calculateImage()}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url,alias:e.alias||""})},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void l.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.collection.indexOf(this.model);this.model.collection.add(e,{at:n+1,element:this.$el}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/image_ad_weapp/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/image_ad_weapp/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/image_ad_weapp/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/image_ad_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="app-sidebar-title">\n        <p class="app-sidebar-title__name">新建图片广告</p>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                    <input type="radio" name="show_method" value="0" <% if (show_method == \'0\') { %> checked <% } %>>折叠轮播\n            </label>\n            <label class="radio inline">\n                    <input type="radio" name="show_method" value="1" <% if (show_method == \'1\') { %> checked <% } %>>横向滑动\n            </label>\n        </div>\n    </div>\n\n    <% if (show_method == \'1\') { %>\n        <div class="control-group">\n            <label class="control-label">显示大小：</label>\n            <div class="controls">\n                <label class="radio inline">\n                    <input type="radio" name="size" value="0" <% if (size == \'0\') { %> checked <% } %>>大图\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="size" value="1" <% if (size == \'1\') { %> checked <% } %>>小图\n                </label>\n            </div>\n        </div>\n    <% } %>\n\n    <div class="control-group js-choices-region">\n    </div>\n\n    <div class="control-group options">\n        <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个广告</a>\n    </div>\n\n    <div class="control-group">\n        <div class="controls" name="sub_entry" style="margin-left: 0;"></div>\n    </div>\n\n    <p class="app-component-desc">最多添加10个广告，拖动选中的图片广告可对其排序</p>\n</form>\n'}),define("components/showcase/2.0.0/image_ad_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/image_ad_weapp/views/edit_collection","text!components/showcase/2.0.0/image_ad_weapp/templates/edit.html","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/image_ad_weapp/views/edit_collection"),o=e("text!components/showcase/2.0.0/image_ad_weapp/templates/edit.html"),s=e("components/attachment/image/app"),a=e("core/utils");return n.extend({template:t.template(o),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-option":"addOption"},regions:{choicesRegion:".js-choices-region"},onInit:function(e){this.parent=e.parent;var t=this;this.listenTo(this.model,"change:show_method",this.render),this.listenTo(this.model.get("sub_entry"),"remove",function(e,n){n.models.length<10&&t.$(".options").show(),t.model.calculateImage()})},onRender:function(){this.model.get("sub_entry").length>=10&&this.$(".options").hide(),this.choicesRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))},addOption:function(){var e=this,n=e.model.get("sub_entry");s.initialize({fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(e){var i=!1;if(t.each(e,function(e){n.length<10?n.add({type:"image_ad_selection",image_id:e.attachment_id,image_url:e.attachment_url,image_thumb_url:e.thumb_url,image_width:Number(e.width),image_height:Number(e.height)}):i=!0}),n.trigger("update"),i){var o=setTimeout(a.clearNotify,3e3);a.errorNotify("图片广告不能多于10个，已经自动删除多余的图片。",function(){clearTimeout(o)})}}})}})}),define("text!components/showcase/2.0.0/image_ad/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input class="" type="text" name="title[<%= cid %>]" value="<%- title %>">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/image_ad/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/image_ad/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/image_ad/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render),s.call(this)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);t.extend(n,{cid:e,renderLink:o});var i=this.model.get("image_url");return i=i&&l.fullfillImage(i,"!100x100+2x.jpg"),n.image_url=i,n.image_thumb_url=i,n},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.options.layout.model.calculateImage()}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url,alias:e.alias||""})},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void l.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.collection.indexOf(this.model);this.model.collection.add(e,{at:n+1,element:this.$el}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/image_ad/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/image_ad/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/image_ad/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/image_ad/templates/edit.html",[],function(){
return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <% if (show_method == \'0\') { %>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="0" checked>折叠轮播\n                </label>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="1">分开显示\n                </label>\n            <% } else { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">折叠轮播\n                </label>\n                <label class="radio inline">\n                        <input type="radio" name="show_method" value="1" checked>分开显示\n                </label>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示大小：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="size" value="0" <% if (size == \'0\') { %> checked <% } %>>大图\n            </label>\n            <% if (show_method == \'1\') { %>\n            <label class="radio inline">\n                <input type="radio" name="size" value="1" <% if (size == \'1\') { %> checked <% } %>>小图\n            </label>\n            <% } %>\n        </div>\n    </div>\n\n    <div class="control-group js-choices-region">\n    </div>\n\n    <div class="control-group options">\n        <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个广告</a>\n    </div>\n\n    <div class="control-group">\n        <div class="controls" name="sub_entry" style="margin-left: 0;"></div>\n    </div>\n\n    <p class="app-component-desc" style="font-size: 12px; color:#666;">最多添加10个广告</p>\n</form>\n'}),define("components/showcase/2.0.0/image_ad/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/image_ad/views/edit_collection","text!components/showcase/2.0.0/image_ad/templates/edit.html","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/image_ad/views/edit_collection"),o=e("text!components/showcase/2.0.0/image_ad/templates/edit.html"),s=e("components/attachment/image/app"),a=e("core/utils");return n.extend({template:t.template(o),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-option":"addOption"},regions:{choicesRegion:".js-choices-region"},onInit:function(e){this.parent=e.parent;var t=this;this.listenTo(this.model,"change:show_method",this.render),this.listenTo(this.model.get("sub_entry"),"remove",function(e,n){n.models.length<10&&t.$(".options").show(),t.model.calculateImage()})},onRender:function(){this.model.get("sub_entry").length>=10&&this.$(".options").hide(),this.choicesRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))},addOption:function(){var e=this,n=e.model.get("sub_entry");s.initialize({fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(e){var i=!1;if(t.each(e,function(e){n.length<10?n.add({type:"image_ad_selection",image_id:e.attachment_id,image_url:e.attachment_url,image_thumb_url:e.thumb_url,image_width:Number(e.width),image_height:Number(e.height)}):i=!0}),n.trigger("update"),i){var o=setTimeout(a.clearNotify,3e3);a.errorNotify("图片广告不能多于10个，已经自动删除多余的图片。",function(){clearTimeout(o)})}}})}})}),define("text!components/showcase/2.0.0/nav/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">文字：</label>\n        <div class="controls">\n            <input class="" type="text" name="title" value="<%- title %>" maxLength="5">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/nav/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/nav/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/nav/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage"},onInit:function(){this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render),s.call(this)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{renderLink:o});var n=this.model.get("image_url");return n=n&&l.fullfillImage(n,"!100x100+2x.jpg"),e.image_url=n,e.image_thumb_url=n,e},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})}})}),define("components/showcase/2.0.0/nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/nav/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/nav/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/nav/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="js-collection-region">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/nav/views/edit_collection","text!components/showcase/2.0.0/nav/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/nav/views/edit_collection"),o=e("text!components/showcase/2.0.0/nav/templates/edit.html");return n.extend({template:t.template(o),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/nav_weapp/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/nav_weapp/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/nav_weapp/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/nav_weapp/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage"},onInit:function(){this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render),s.call(this)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{renderLink:o});var n=this.model.get("image_url");return n=n&&l.fullfillImage(n,"!100x100+2x.jpg"),e.image_url=n,e},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_width:Number(t.width),image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url,alias:e.alias||""})},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=4)return void l.errorNotify("最多添加4张图片。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.collection.indexOf(this.model);this.model.collection.add(e,{at:n+1,element:this.$el}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/nav_weapp/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/nav_weapp/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/nav_weapp/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/nav_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">展示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="display_num" value="1" <% if (display_num == \'1\') { %> checked <% } %>>一列\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="display_num" value="2" <% if (display_num == \'2\') { %> checked <% } %>>两列\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="display_num" value="3" <% if (display_num == \'3\') { %> checked <% } %>>三列\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="display_num" value="4" <% if (display_num == \'4\') { %> checked <% } %>>四列\n            </label>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/nav_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/nav_weapp/views/edit_collection","components/attachment/image/app","text!components/showcase/2.0.0/nav_weapp/templates/edit.html","components/showcase/2.0.0/nav_weapp/models/item","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/nav_weapp/views/edit_collection"),o=e("components/attachment/image/app"),s=e("text!components/showcase/2.0.0/nav_weapp/templates/edit.html"),a=e("components/showcase/2.0.0/nav_weapp/models/item"),l=e("core/utils");return n.extend({template:t.template(s),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions),this.listenTo(this.model,"change:display_num",this.changeDisplay)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()},addOption:function(){var e=this,n=e.model.get("sub_entry");o.initialize({fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(e){var i=!1;if(t.each(e,function(e){n.length<10?n.add({type:"image_ad_selection",image_id:e.attachment_id,image_url:e.attachment_url,image_width:Number(e.width),image_height:Number(e.height)}):i=!0}),n.trigger("update"),i){var o=setTimeout(l.clearNotify,3e3);l.errorNotify("图片广告不能多于10个，已经自动删除多余的图片。",function(){clearTimeout(o)})}}})},changeDisplay:function(){var e=this.model.get("display_num"),t=this.model.get("sub_entry"),n=t.length;e!==n&&(e>n?this.fillEntry(e,n):this.simplifyEntry(e,n))},fillEntry:function(e,t){for(var n=this.model.get("sub_entry"),i=e-t,o=0;o<i;o++)n.add(a.initialize())},simplifyEntry:function(e,t){for(var n=this.model.get("sub_entry"),i=t-e,o=1;o<=i;o++)n.remove(n.at(t-o))}})}),define("text!components/showcase/2.0.0/showcase/templates/edit_item.html",[],function(){return'<div class="choice-image">\n    <% if (image_id === \'\') { %>\n        <a class="add-image js-trigger-image" href="javascript: void(0);"><i class="icon-add"></i>  添加图片</a>\n    <% } else { %>\n        <img src="<%= fullfillImage(image_url, \'!100x100+2x.jpg\') %>" width="118" height="118" class="thumb-image">\n        <a class="modify-image js-trigger-image" href="javascript: void(0);">重新上传</a>\n    <% } %>\n\n    <!-- for error msg -->\n    <div class="control-group">\n        <div class="controls">\n            <input type="hidden" name="image_url">\n        </div>\n    </div>\n</div>\n<div class="choice-content">\n\n    <div class="control-group hide">\n        <label class="control-label">文字：</label>\n        <div class="controls">\n            <input class="input-xxlarge" type="text" name="title" value="<%- title %>" maxLength="5">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n\n'}),define("components/showcase/2.0.0/showcase/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/showcase/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/showcase/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){return{renderLink:o,fullfillImage:l.fullfillImage}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage"},onInit:function(){this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render),s.call(this)},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void l.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1})}})}),define("components/showcase/2.0.0/showcase/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/showcase/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/showcase/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/showcase/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">橱窗标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%= title %>" maxLength="15">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="mode" value="0" <% if (mode == \'0\') { %> checked <% } %>>默认\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="mode" value="1" <% if (mode == \'1\') { %> checked <% } %>>3 列\n            </label>\n            <p class="help-desc">PC版一直显示 3 列</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">图片间隙：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="without_space" value="0" <% if (without_space == \'0\') { %> checked <% } %>>保留\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="without_space" value="1" <% if (without_space == \'1\') { %> checked <% } %>>消除\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">内容区标题：</label>\n        <div class="controls">\n            <input type="text" name="body_title" value="<%= body_title %>" maxLength="15">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">内容区说明：</label>\n        <div class="controls">\n            <textarea name="body_desc" cols="15" rows="3" maxLength="50"><%= body_desc %></textarea>\n        </div>\n    </div>\n\n    <div class="control-group js-collection-region">\n\n    </div>\n\n</form>\n'}),define("components/showcase/2.0.0/showcase/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/showcase/views/edit_collection","text!components/showcase/2.0.0/showcase/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/showcase/views/edit_collection"),o=e("text!components/showcase/2.0.0/showcase/templates/edit.html");return n.extend({template:t.template(o),events:{'blur input[type="text"]':"updateModel","blur textarea":"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/level/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图：</label>\n        <div class="controls">\n            <% if (image.url === \'\') { %>\n                <a class="js-choose-bg control-action" href="javascript: void(0);">选择背景图</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(image.url) %>" width="100" height="100">\n                <a class="js-choose-bg control-action" href="javascript: void(0);">修改背景图</a>\n            <% } %>\n            <p class="help-desc">背景图推荐宽度 640 像素、高度 320 像素</p>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">显示等级的设置</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">等级：</label>\n        <div class="controls">\n            <label class="checkbox inline">\n                <% if (show_level == \'0\') { %>\n                    <input type="checkbox" name="show_level" value="0">显示等级\n                <% } else { %>\n                    <input type="checkbox" name="show_level" value="1" checked>显示等级\n                <% } %>\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">等级提示：</label>\n        <div class="controls">\n            <input type="text" name="level_msg" value="<%- level_msg %>">\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">显示积分的设置</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">积分：</label>\n        <div class="controls">\n            <label class="checkbox inline">\n                <% if (show_point == \'0\') { %>\n                    <input type="checkbox" name="show_point" value="0">显示积分\n                <% } else { %>\n                    <input type="checkbox" name="show_point" value="1" checked>显示积分\n                <% } %>\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">积分提示：</label>\n        <div class="controls">\n            <input type="text" name="point_msg" value="<%- point_msg %>">\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/level/views/edit",["components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/level/templates/edit.html","components/modal/1.0.0/modal","components/attachment/image/app","core/utils"],function(e,t,n,i,o){return e.extend({template:_.template(t),events:{'blur input[type="text"]':"updateModel",'change input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel","click .js-choose-bg":function(){var e=this;i.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set("image",{id:t.attachment_id,url:t.attachment_url}),e.model.set("is_default",!1)}})}},onInit:function(e){this.parent=e.parent,this.listenTo(this.model,"change:image",this.render)},render:function(e){return this.$el.html(this.template(_.extend({},this.model.attributes,{fullfillImage:o.fullfillImage}))),this}})}),define("text!components/showcase/2.0.0/link/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>内容来源：</label>\n    <div class="controls">\n        <% if (source_type != \'\') { %>\n            <div class="control-action clearfix">\n                <div class="pull-left js-link-to link-to">\n                    <% if (source_title !== \'\' && source_type !== \'link\') { %>\n                        <input type="hidden" name="source_url" value="<%= source_url %>">\n                        <a href="<%= source_url %>" target="_blank" class="new-window link-to-title">\n                    <% } %>\n                    <span class="label label-success">\n                    <% if (source_type === \'feature\') { %>\n                        微页面\n                    <% } else if (source_type === \'category\') { %>\n                        微页面分类\n                    <% } else if (source_type === \'topic\') { %>\n                        专题\n                    <% } else if (source_type === \'article\') { %>\n                        资讯\n                    <% } else if (source_type === \'goods\') { %>\n                        商品\n                    <% } else if (source_type === \'tag\') { %>\n                        商品标签\n                    <% } else if (source_type === \'activity\') { %>\n                        营销活动\n                    <% } else if (source_type === \'survey\') { %>\n                        调查\n                    <% } else if (source_type === \'homepage\') { %>\n                        店铺主页\n                    <% } else if (source_type === \'usercenter\') { %>\n                        会员主页\n                    <% } else if (source_type === \'link\') { %>\n                        自定义外链\n                    <% } else if (source_type === \'history\') { %>\n                        历史信息\n                    <% } %>\n                <% if (source_title !== \'\' && source_type !== \'link\') { %>\n                        <em class="link-to-title-text"><%- source_title %></em>\n                    </span></a>\n                <% } else { %>\n                    </span>\n                <% } %>\n                </div>\n                <% if (source_type !== \'link\') { %>\n                <div class="dropdown hover pull-right">\n                    <a class="dropdown-toggle" href="javascript:void(0);">修改 <i class="caret"></i></a>\n                    <ul class="dropdown-menu">\n                        <li>\n                            <a class="js-modal-category" data-type="category" href="javascript:void(0);">微页面分类</a>\n                        </li>\n                        <li>\n                            <a class="js-modal-tag" data-type="tag" href="javascript:void(0);">商品标签</a>\n                        </li>\n                    </ul>\n                </div>\n                <% } %>\n            </div>\n\n        <% } else { %>\n            <div class="dropdown hover">\n                <a class="js-dropdown-toggle dropdown-toggle control-action" href="javascript:void(0);">设置链接到的页面地址 <i class="caret"></i></a>\n                <ul class="dropdown-menu">\n                    <li>\n                        <a class="js-modal-category" data-type="category" href="javascript:void(0);">微页面分类</a>\n                    </li>\n                    <li>\n                        <a class="js-modal-tag" data-type="tag" href="javascript:void(0);">商品标签</a>\n                    </li>\n                    <li>\n                        <a class="js-modal-links" data-type="links" href="javascript:void(0);">自定义外链</a>\n                    </li>\n                </ul>\n            </div>\n        <% } %>\n        <input type="hidden" name="source_url">\n    </div>\n</div>\n\n<% if (source_type === \'link\') { %>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接名称：</label>\n    <div class="controls">\n        <input type="text" name="source_title" value="<%- source_title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接地址：</label>\n    <div class="controls">\n        <input type="text" name="source_url" value="<%- source_url %>" class="js-fullfill-url">\n    </div>\n</div>\n<% } else if (source_type !== \'\') { %>\n<div class="control-group">\n    <label class="control-label">显示条数：</label>\n    <div class="controls">\n        <select name="number">\n            <option value="1" <% if (number == 1) {%>selected<% } %>>1条</option>\n            <option value="2" <% if (number == 2) {%>selected<% } %>>2条</option>\n            <option value="3" <% if (number == 3) {%>selected<% } %>>3条</option>\n            <option value="4" <% if (number == 4) {%>selected<% } %>>4条</option>\n            <option value="5" <% if (number == 5) {%>selected<% } %>>5条</option>\n        </select>\n    </div>\n</div>\n<% } %>\n\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/link/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/link/templates/edit_item.html","components/pop/atom/link","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/link/templates/edit_item.html"),s=e("components/pop/atom/link"),a=e("components/modal/1.0.0/modal"),l=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(o),events:{'blur input[type="text"]:not(.js-fullfill-url)':"updateModel","blur .js-fullfill-url":"urlCheck","change select":"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-modal-category, .js-modal-tag":"chooseLink","click .js-modal-links":"chooseOtherLink"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"source_url")},chooseLink:function(e){var t=this,i=n(e.target).data("type");a.initialize({type:i}).setChooseItemCallback(function(e){t.model.set({source_id:e.data_id||e.id,source_type:i,source_url:e.data_url,source_image:e.cover_attachment_url,source_title:e.data_title})}).modal("show")},chooseOtherLink:function(e){var t,i=this;t=this.$(".js-link-to").length>0?this.$(".js-link-to"):this.$(".js-dropdown-toggle");var o=e.target;s.initialize({target:t,trigger:n(o),callback:function(e){i.model.set({source_id:"",source_type:"link",source_url:e,source_image:"",source_title:e})}})},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void l.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/link/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/link/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/link/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/link/templates/edit.html",[],function(){
return'<form class="form-horizontal" novalidate>\n    <% if (show_method == \'1\') { %>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="0">通栏\n            </label>\n        </div>\n    </div>\n    <% } %>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="js-add-option add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个关联链接</a>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/link/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/link/views/edit_collection","text!components/showcase/2.0.0/link/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/link/views/edit_collection"),o=e("text!components/showcase/2.0.0/link/templates/edit.html");return n.extend({template:t.template(o),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e={type:"source_selection",number:"3"};this.model.get("sub_entry").add(e)},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/text_nav/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <% if (show_method == \'1\') { %>\n    <div class="control-group">\n        <label class="control-label">显示方式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="0">通栏\n            </label>\n        </div>\n    </div>\n    <% } %>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个文本导航</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/text_nav/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>导航名称：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%= title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls">\n        <%= renderLink(link_url, link_title, link_type) %>\n        <input type="hidden" name="link_url">\n    </div>\n</div>\n<div class="actions">\n    <span class="action add close-modal" title="添加">+</span><span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/text_nav/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/text_nav/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/text_nav/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:{renderLink:o},events:{'blur input[type="text"]:not(.js-fullfill-url)':"updateModel","blur .js-fullfill-url":"urlCheck","click .actions .delete":"delete","click .actions .add":"add"},onInit:function(){this.listenTo(this.model,"change",this.render),s.call(this)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},onLinkChange:function(e){e.link_type&&"link"!=e.link_type&&this.model.set("title",this.getOldTitle()||e.link_title,{silent:!0}),this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()},getOldTitle:function(){var e=this.model.toJSON();return e.title&&e.title!==e.link_title?e.title:""},add:function(){if(this.model.collection.length>=20)return void a.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")}})}),define("components/showcase/2.0.0/text_nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/text_nav/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/text_nav/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/text_nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/text_nav/templates/edit.html","components/showcase/2.0.0/text_nav/views/edit_collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/text_nav/templates/edit.html"),o=e("components/showcase/2.0.0/text_nav/views/edit_collection");return n.extend({template:t.template(i),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e={type:"text_nav_selection",title:""};this.model.get("sub_entry").add(e)},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()}})}),define("tpl!components/showcase/2.0.0/text_weapp/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>文本：</label>\n        <div class="controls">\n            <textarea class="text-weapp-textarea" name="text" maxlength="100" rows="4" cols="40" placeholder="请输入要说明的文字, 最多100字">'+(null==(__t=text)?"":__t)+'</textarea>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">字体大小：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="font_size" value=18 '+(null==(__t=18==font_size?"checked":"")?"":__t)+' >大\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="font_size" value=14 '+(null==(__t=14==font_size?"checked":"")?"":__t)+' >中\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="font_size" value=12 '+(null==(__t=12==font_size?"checked":"")?"":__t)+' >小\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">文本颜色：</label>\n        <div class="controls">\n            <input type="color" value="'+(null==(__t=color)?"":__t)+'" name="color">\n            <button class="btn js-reset-color" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="'+(null==(__t=bg_color)?"":__t)+'" name="bg_color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示位置：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="0" '+(null==(__t="0"==show_method?"checked":"")?"":__t)+' >居左\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="1" '+(null==(__t="1"==show_method?"checked":"")?"":__t)+' >居中\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="show_method" value="2" '+(null==(__t="2"==show_method?"checked":"")?"":__t)+' >居右\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <input type="hidden" name="link_url">\n            '+(null==(__t=renderLink(link_url,link_title,link_type))?"":__t)+"\n        </div>\n    </div>\n</form>\n";return __p}}),define("components/showcase/2.0.0/text_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","core/utils","components/setup_link/render_link","components/setup_link/bind_link","tpl!../templates/edit"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("core/utils"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link");return n.extend({template:e("tpl!../templates/edit"),events:{"blur textarea":"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-reset-color":"handleResetColor","click .js-reset-bg":"handleResetBackground"},updateModel:i.updateModel,handleResetColor:function(){this.model.set("color","#000000"),this.$('input[name="color"]').val("#000000")},handleResetBackground:function(){this.model.set("bg_color","#ffffff"),this.$('input[name="bg_color"]').val("#ffffff")},onInit:function(){this.listenTo(this.model,"change:link_url",this.render),s.call(this)},serializeData:function(){var e=t.clone(this.model.attributes);return t.extend(e,{renderLink:o}),e},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url,alias:e.alias||""})}})}),define("text!components/showcase/2.0.0/rich_text_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <div class="pull-left">\n            <label class="control-label">背景颜色：</label>\n            <div class="input-append">\n                <input type="color" value="<%= color %>" name="color" class="span1">\n                <button class="btn js-reset-bg" type="button">重置</button>\n            </div>\n        </div>\n        <div class="pull-left">\n            <label class="control-label">是否全屏：</label>\n            <label class="checkbox inline">\n                <input type="checkbox" name="fullscreen" <% if (fullscreen == 1) { %>checked<% } %>> 全屏显示\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <script class="js-editor" type="text/plain"></script>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/rich_text_weapp/views/edit",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/rich_text_weapp/templates/edit.html","components/ueditor_plugins/app"],function(e){"use strict";var t=e("underscore"),n=(e("core/utils"),e("components/showcase/2.0.0/base/views/edit_base")),i=e("text!components/showcase/2.0.0/rich_text_weapp/templates/edit.html"),o=window.UE;return e("components/ueditor_plugins/app"),n.extend({className:"edit-rich-text",template:t.template(i),events:{'change input[type="color"]':"updateModel",'change input[type="checkbox"]':"updateModel","click .js-reset-bg":"handleResetBackground"},handleResetBackground:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},onClose:function(){this._editor&&this._editor.destroy()},onShow:function(){var e,t=this;e=this._editor=new o.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!1,elementPathEnabled:!1,initialFrameWidth:396,initialFrameHeight:600,focus:!1,pasteplain:!1,readonly:!!(this.layout&&this.layout.collection&&this.layout.collection.disableEdit)}),e.addListener("blur",function(){t.model.set("content",t._editor.getContent())}),e.addListener("contentChange",function(){t.model.set("content",t._editor.getContent())}),e.render(this.$(".js-editor")[0]),e.ready(function(){e.setContent(t.model.get("content"))})},save:function(){this._editor&&this.model.set("content",this._editor.getContent())}})}),define("text!components/showcase/2.0.0/tag_list/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group-large">\n        <label class="control-label">商品分组模版：</label>\n        <div class="controls">\n            <label class="radio inline"><input type="radio" name="tag_group" value="tag_list" checked /> 左侧菜单</label>\n            <label class="radio inline"><input type="radio" class="js-toggle-type" data-field-type="tags" name="tag_group" value="tags" /> 顶部菜单</label>\n        </div>\n    </div>\n\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加商品分组</a>\n    </div>\n\n    <div class="control-group">\n        <p class="app-component-desc help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n    </div>\n\n</form>\n'}),define("text!components/showcase/2.0.0/tag_list/templates/edit_item.html",[],function(){return'<div class="edit-tag-list">\n    <div class="tag-source">\n        <div class="control-group">\n            <label class="control-label pull-left">商品来源：</label>\n            <div class="controls pull-left">\n                <% if(title) { %>\n                        <a href="<%- url %>" target="_blank" class="tag-title new-window"><%- title %></a>\n                        <a href="javascript:;" class="tag-modify js-select-tag">修改</a>\n                <% } else { %>\n                    <a href="javascript:;" class="js-select-tag pull-left">选择商品分组</a>\n                <% } %>\n                <input type="hidden" name="title">\n            </div>\n        </div>\n    </div>\n    <div class="split-line"></div>\n    <div class="goods-number">\n        <span>显示数量</span>\n\n        <div class="dropdown hover pull-right">\n            <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0);"><%- goods_number %> <i class="caret"></i></a>\n            <ul class="dropdown-menu" role="menu">\n                <li>\n                    <a class="js-goods-number" data-value="5" href="javascript:void(0);">5</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="10" href="javascript:void(0);">10</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="15" href="javascript:void(0);">15</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="30" href="javascript:void(0);">30</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="50" href="javascript:void(0);">50</a>\n                </li>\n                <li>\n                    <a class="js-goods-number" data-value="100" href="javascript:void(0);">100</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tag_list/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list/templates/edit_item.html","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/tag_list/templates/edit_item.html"),s=e("components/modal/1.0.0/modal");e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(o),events:{"click .actions .delete":"delete","click .js-select-tag":"handleSelectTag","click .js-goods-number":"handleGoodsNumber"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},delete:function(){var e=this.model.collection;this.model.destroy(),e.trigger("reset")},handleSelectTag:function(){var e=this;this.tagModel=s.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set({type:t.data_type,id:t.data_id,title:t.title,url:t.data_url})}),this.tagModel.modal("show")},handleGoodsNumber:function(e){var t=n(e.target).data("value");this.model.set("goods_number",t,{silent:!0}),this.render()}})}),define("components/showcase/2.0.0/tag_list/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tag_list/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tag_list/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tag_list/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list/templates/edit.html","components/showcase/2.0.0/tag_list/views/edit_collection","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tag_list/templates/edit.html"),o=e("components/showcase/2.0.0/tag_list/views/edit_collection"),s=e("components/modal/1.0.0/modal"),a=e("core/utils");return n.extend({template:t.template(i),events:{'change input[type="radio"]':"updateModel","click .js-add-option":"addOption","click .js-toggle-type":"toggleTagType"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e=this,n=e.model.get("sub_entry");s.initialize({multiChoose:!0,type:"tag"}).setChooseItemCallback(function(e){var i=!1;if(t.each(e,function(e){n.length<50?n.add({type:e.data_type,id:e.data_id,title:e.title,url:e.data_url}):i=!0}),i){var o=setTimeout(a.clearNotify,3e3);a.errorNotify("商品分组不能多于50个，已经自动删除多余的分组。",function(){clearTimeout(o)})}}).modal("show")},toggleOptions:function(){this.model.get("sub_entry").length>=50?this.$(".options").hide():this.$(".options").show()},toggleTagType:function(e){var t=this.layout,n=$(e.target).data("field-type"),i=this.layout.collection,o=this.model,s=window.SHOWCASE_CONFIG.models[n].initialize(o.configCache);s.configCache=o.toJSON(),i.add(s,{at:o.index(),silent:!0}),i.trigger("reset"),o.destroy(),t.displayEditView(s)}})}),define("text!components/showcase/2.0.0/tag_list_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal tag-list-weapp-edit" novalidate>\n    <div class="control-group js-collection-region">\n\n    </div>\n\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加商品分组</a>\n    </div>\n\n    <div class="control-group">\n        <div class="controls" name="sub_entry" style="margin-left: 0;"></div>\n    </div>\n\n    <div class="control-group">\n        <p class="desc">最多添加8个商品分组</p>\n    </div>\n\n    <div class="control-group goods-num">\n        <label class="control-label">显示个数：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_v2" value="0" <% if (goods_number_v2 == 0) { %> checked <% } %>>\n            </label>\n            <input type="text" name="goods_number_v2_input" value="<%= goods_number_v2_input %>" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')">\n            <label class="radio inline">\n                <input type="radio" name="goods_number_v2" value="50" <% if (goods_number_v2 == 50) { %> checked <% } %>>全部\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <p class="desc">每个商品分组最多显示100个商品</p>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">导航样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="nav_style" value="0" <% if (nav_style == 0) { %> checked <% } %>>样式1\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="nav_style" value="1" <% if (nav_style == 1) { %> checked <% } %>>样式2\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="nav_style" value="2" <% if (nav_style == 2) { %> checked <% } %>>样式3\n            </label>\n        </div>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tag_list_weapp/templates/edit_item.html",[],function(){return'<div class="edit-tag-list">\n    <div class="tag-source">\n        <div class="control-group">\n            <label class="control-label pull-left">商品来源：</label>\n            <div class="controls pull-left">\n                <% if(title) { %>\n                    <a href="<%- url %>" target="_blank" class="tag-title new-window"><%- title %></a>\n                <% } else { %>\n                    <a href="javascript:;" class="js-select-tag pull-left">选择商品分组</a>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tag_list_weapp/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list_weapp/templates/edit_item.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tag_list_weapp/templates/edit_item.html");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{"click .actions .delete":"delete"},onInit:function(){this.listenTo(this.model,"change",this.render)},delete:function(){var e=this.model.collection;this.model.destroy(),e.trigger("reset")}})}),define("components/showcase/2.0.0/tag_list_weapp/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tag_list_weapp/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tag_list_weapp/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tag_list_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tag_list_weapp/templates/edit.html","components/showcase/2.0.0/tag_list_weapp/views/edit_collection","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tag_list_weapp/templates/edit.html"),o=e("components/showcase/2.0.0/tag_list_weapp/views/edit_collection"),s=e("components/modal/1.0.0/modal"),a=e("core/utils");return n.extend({template:t.template(i),events:{"click .js-add-option":"addOption",'change input[type="radio"]':"updateModel",'change input[type="text"]':"updateModel"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions),this.listenTo(this.model,"change",this.render)},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry")})),this.toggleOptions()},addOption:function(){var e=this.model.get("sub_entry");s.initialize({multiChoose:!0,type:"tag"}).setChooseItemCallback(function(n){var i=!1;t.each(n,function(t){e.length<8?e.add({id:t.id,title:t.title,url:t.data_url,alias:t.data_alias}):i=!0}),i&&a.errorNotify("商品分组不能多于8个，已经自动删除多余的分组。")}).modal("show")},toggleOptions:function(){this.model.get("sub_entry").length>=8?this.$(".options").hide():this.$(".options").show()},updateModel:a.updateModel})}),define("text!components/showcase/2.0.0/title/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" maxlength="100">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题模版：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="title_template" value="0" <%= title_template == 0 ? "checked": "" %> >传统样式\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="title_template" value="1" <%= title_template == 1 ? "checked": "" %>>模仿微信图文页样式\n            </label>\n        </div>\n    </div>\n    <% if(title_template == \'0\'){%>\n\n    <div class="control-group">\n        <label class="control-label">副标题：</label>\n        <div class="controls">\n            <input type="hidden" class="js-time-holder">\n            <input type="text" name="sub_title" value="<%- sub_title %>" maxlength="100">\n            <a href="javascript: void(0);" class="js-time">日期</a>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示：</label>\n        <div class="controls">\n            <% if (show_method == \'0\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0" checked>居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1">居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2">居右显示\n                </label>\n            <% } else if (show_method == \'1\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1" checked>居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2">居右显示\n                </label>\n            <% } else if (show_method == \'2\') { %>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="0">居左显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="1">居中显示\n                </label>\n                <label class="radio inline">\n                    <input type="radio" name="show_method" value="2" checked>居右显示\n                </label>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= color %>" name="color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n        <ul class="choices">\n\n        </ul>\n    </div>\n    <div class="control-group options">\n        <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个文本导航</a>\n    </div>\n\n    <% } else { %>\n        <div class="control-group">\n            <label class="control-label">日期：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_date" value="<%- wx_title_date %>" maxlength="100" class="js-wx-time-holder span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">作者：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_author" value="<%- wx_title_author %>" maxlength="100" class="span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">链接标题：</label>\n            <div class="controls">\n                <input type="text" name="wx_title_link" value="<%- wx_title_link %>" maxlength="100" class="span2">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">链接地址：</label>\n            <div class="controls">\n                <label class="radio">\n                    <input type="radio" name="wx_title_link_type" value="0" <%= wx_title_link_type == 0 ? "checked": "" %> >引导关注\n                    <a href="/v2/setting/weixin" target="_blank" style="margin-left:20px" class="new-window">设置快速关注链接</a>\n                </label>\n            </div>\n        </div>\n        <div class="control-group">\n            <div class="controls js-wx-link">\n                <label class="radio wx-template-radio">\n                    <input type="radio" name="wx_title_link_type" value="1" <%= wx_title_link_type == 1 ? "checked": "" %>>其他链接\n                    <input type="hidden" name="wx_link_url">\n                    <%= renderLink(wx_link.link_url, wx_link.link_title, wx_link.link_type) %>\n                </label>\n            </div>\n        </div>\n\n    <% } %>\n</form>\n'}),define("text!components/showcase/2.0.0/title/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>名称：</label>\n    <div class="controls">\n        <input type="text" name="title[<%= cid %>]" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接：</label>\n    <div class="controls" name="link_url">\n        <%= renderLink(link_url, link_title, link_type, {showDelete: false}) %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/title/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/title/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link"],function(e){"use strict"
;var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/title/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete"},onInit:function(){this.listenTo(this.model,"change",this.render),s.call(this)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);return t.extend(n,{cid:e,renderLink:o}),n},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/title/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/title/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/title/views/edit_item");return t.extend({itemView:n})}),define("components/showcase/2.0.0/title/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/setup_link/render_link","components/setup_link/bind_link","text!components/showcase/2.0.0/title/templates/edit.html","components/showcase/2.0.0/title/views/edit_collection","datetimepicker"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/setup_link/render_link"),o=e("components/setup_link/bind_link"),s=e("text!components/showcase/2.0.0/title/templates/edit.html"),a=e("components/showcase/2.0.0/title/views/edit_collection");return e("datetimepicker"),n.extend({template:t.template(s),templateHelpers:function(){return{renderLink:i}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-add-option":"addOption","click .js-time":function(){this.timepicker.datepicker("show")},"click .js-reset-bg":"resetBg"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions),this.listenTo(this.model,"change:title_template",this.render),this.listenTo(this.model,"change:wx_link",this.render),o.call(this,{parentSelector:".js-wx-link"})},onRender:function(){var e=new Date,t=this;this.timepicker=this.$(".js-time-holder"),this.timepicker.datetimepicker({dateFormat:"yy-mm-dd",minDate:e,changeMonth:!0,changeYear:!0,yearRange:"1900:+20",onClose:function(e){""!==e&&(t.model.set("sub_title",e),t.$('input[name="sub_title"]').val(e))}}),this.wxTimepicker=this.$(".js-wx-time-holder"),this.wxTimepicker.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"1900:+20",dateonly:!0,onClose:function(e){""!==e&&t.model.set("wx_title_date",e)}}),this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},resetBg:function(){this.model.set("color","#F9F9F9"),this.$('input[type="color"]').val("#F9F9F9")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>0?this.$(".options").hide():this.$(".options").show()},onLinkChange:function(e){e.link_type||(e={},this.setLink({})),this.setLink({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},setLink:function(e){this.model.set({wx_link:e}),this.model.set("wx_link_url",e.link_url||"")}})}),define("text!components/showcase/2.0.0/component/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group control-group-large">\n        <label class="control-label">自定义页面模块：</label>\n        <div class="controls" name="_id">\n            <div class="control-action">\n                <% if (_id !== \'\') { %>\n                    <div class="pull-left link-to">\n                        <a href="<%= link %>" target="_blank" class="new-window link-to-title">\n                            <span class="label label-success">\n                                自定义页面模块\n                                <em class="link-to-title-text"><%- title %></em>\n                            </span>\n                        </a>\n                    </div>\n                    <a href="javascript:void(0);" class="js-add-component add-component">修改</a>\n                <% } else { %>\n                    <a href="javascript:void(0);" class="js-add-component add-component">+添加</a>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/component/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/component/templates/edit.html","components/modal/1.0.0/modal"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/component/templates/edit.html"),o=e("components/modal/1.0.0/modal");return n.extend({template:t.template(i),events:{"click .js-add-component":"handleAddComponent"},handleAddComponent:function(){var e=this;this.componentModal=o.initialize({type:"component"}).setChooseItemCallback(function(t){e.model.set({type:"component",_id:t.data_id,title:t.title,link:t.data_url}),e.render()}),this.componentModal.modal("show")}})}),define("text!components/showcase/2.0.0/search/templates/edit.html",[],function(){return'<div class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <label class="control-label">背景色：</label>\n        <div class="controls">\n            <input type="color" value="<%= color %>" name="color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n\n</div>\n'}),define("components/showcase/2.0.0/search/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/search/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/search/templates/edit.html");return n.extend({className:"edit-search",template:t.template(i),events:{'change input[type="color"]':"updateModel","click .js-reset-bg":"handleResetBackground"},handleResetBackground:function(){this.model.set("color","#f8f8f8"),this.$('input[type="color"]').val("#f8f8f8")}})}),define("text!components/showcase/2.0.0/line/templates/edit.html",[],function(){return'<div class="form-horizontal" novalidate>\n    <div class="control-group">\n        <div class="pull-left">\n            <label class="control-label">颜色：</label>\n            <div class="input-append">\n                <input type="color" value="<%= color %>" name="color" class="span1">\n                <button class="btn js-reset-bg" type="button">重置</button>\n            </div>\n        </div>\n        <div class="pull-left">\n            <label class="control-label"></label>\n            <label class="checkbox inline">\n                <input type="checkbox" name="hasPadding" <% if (hasPadding) { %>checked<% } %>> 左右留边\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="solid" <% if (lineType == \'solid\') { %>checked<% } %>>实线\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="dashed" <% if (lineType == \'dashed\') { %>checked<% } %>>虚线\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="dotted" <% if (lineType == \'dotted\') { %>checked<% } %>>点线\n            </label>\n        </div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/line/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/line/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/line/templates/edit.html");return n.extend({className:"edit-search",template:t.template(i),events:{'change input[type="color"]':"updateModel","click .js-reset-bg":"handleResetBackground",'click input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},handleResetBackground:function(){this.model.set("color","#e5e5e5"),this.$('input[type="color"]').val("#e5e5e5")}})}),define("text!components/showcase/2.0.0/line_weapp/templates/edit.html",[],function(){return'<div class="form-horizontal" novalidate>\n    <div class="control-group">\n        <div class="pull-left">\n            <label class="control-label">颜色：</label>\n            <div class="input-append">\n                <input type="color" value="<%= color %>" name="color" class="span1">\n                <button class="btn js-reset-bg" type="button">重置</button>\n            </div>\n        </div>\n        <div class="pull-left">\n            <label class="control-label"></label>\n            <label class="checkbox inline">\n                <input type="checkbox" name="hasPadding" <% if (hasPadding) { %>checked<% } %>> 左右留边\n            </label>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">样式：</label>\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="solid" <% if (lineType == \'solid\') { %>checked<% } %>>实线\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="dashed" <% if (lineType == \'dashed\') { %>checked<% } %>>虚线\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="lineType" value="dotted" <% if (lineType == \'dotted\') { %>checked<% } %>>点线\n            </label>\n        </div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/line_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/line_weapp/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/line_weapp/templates/edit.html");return n.extend({className:"edit-search",template:t.template(i),events:{'change input[type="color"]':"updateModel","click .js-reset-bg":"handleResetBackground",'click input[type="radio"]':"updateModel",'click input[type="checkbox"]':"updateModel"},handleResetBackground:function(){this.model.set("color","#e5e5e5"),this.$('input[type="color"]').val("#e5e5e5")}})}),define("text!components/showcase/2.0.0/cube2/templates/edit_item.html",[],function(){return'\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>选择图片：</label>\n    <div class="controls" name="image_url">\n        <% if (image_url === \'\') { %>\n            <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= image_url %>" data-full-size="<%= image_url %>" width="100" height="100" class="thumb-image">\n            <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：<%- 160 * width %> x <%- 160 * height %> 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">链接到：</label>\n    <div class="controls">\n        <%= renderLink(link_url, link_title, link_type) %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">图片占：</label>\n    <div class="controls">\n        <div class="btn-group">\n            <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;">\n                <%- height %>行 <%- width %>列\n                <span class="caret"></span>\n            </a>\n            <ul class="dropdown-menu">\n                <% for(var i = 0; i < layout.length; i++) { %>\n                    <% var cols = layout[i].cols, rows = layout[i].rows; %>\n                    <li><a class="js-image-layout" href="javascript:;" data-width="<%- cols %>" data-height="<%- rows %>"><%- rows %>行 <%- cols %>列</a></li>\n                <% } %>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/cube2/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/cube2/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/cube2/templates/edit_item.html"),s=e("components/setup_link/render_link"),a=e("components/setup_link/bind_link"),l=e("components/attachment/image/app"),r=e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(o),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .actions .add":"add","click .js-trigger-image":"chooseImage","click .js-image-layout":"updateLayout"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change:image_url",this.render),this.listenTo(this.model,"change:link_url",this.render),a.call(this)},render:function(){var e=this.model.cid,n=t.clone(this.model.attributes);t.extend(n,{cid:e,renderLink:s,layout:this.model.layout(this.parent.model.layoutMap)});var i=this.model.get("image_url");return i=i&&r.fullfillImage(i),n.image_url=i,n.image_thumb_url=i,this.$el.html(this.template(n)),this},chooseImage:function(){var e=this;l.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)}),e.parent.render()}})},updateLayout:function(e){var t=n(e.target);this.model.set({width:+t.data("width"),height:+t.data("height")}),this.parent.render()},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url}),this.parent.render()},delete:function(){this.model.destroy()},add:function(){if(this.model.collection.length>=20)return void r.errorNotify("选项最多20个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1,element:this.$el})}})}),define("text!components/showcase/2.0.0/cube2/templates/layout_modal.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <ul class="module-nav modal-tab">\n        <li class="active hide">\n            <h4>选择布局</h4>\n        </li>\n    </ul>\n</div>\n<div class="modal-body clearfix layout-table">\n    <%\n        var result = [];\n        for(var i = 0; i < layout.length; i++){\n            result[layout[i].cols] = layout[i].rows;\n        }\n    %>\n    <% for(var i = 1; i < result.length; i++){ %>\n    <ul class="layout-cols layout-cols-<%- i %>">\n        <% for(var j = 1; j <= result[i]; j++){ %>\n            <% var cols = i, rows = j %>\n            <li data-cols="<%- cols %>" data-rows="<%- rows %>"></li>\n        <% } %>\n        </ul>\n    <% } %>\n</div>\n\n'}),define("components/showcase/2.0.0/cube2/views/layout_modal",["require","underscore","jquery","backbone","text!components/showcase/2.0.0/cube2/templates/layout_modal.html"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("text!components/showcase/2.0.0/cube2/templates/layout_modal.html");return i.View.extend({className:"modal hide fade",template:t.template(o),events:{"click .layout-cols li":"chooseLayout","mouseenter .layout-cols li":function(e){var t=n(e.target),i=+t.data("cols"),o=+t.data("rows");this.$(".layout-table li").removeClass("selected").filter(function(e,t){return t=n(t),+t.data("cols")<=i&&+t.data("rows")<=o}).addClass("selected")},hidden:"delete"},initialize:function(e){this.options=e||{},this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)).modal("show"),this},chooseLayout:function(e){var t=n(e.target),i=+t.data("cols"),o=+t.data("rows");this.options.callback&&this.options.callback({width:i,height:o}),this.$el.modal("hide")},delete:function(){this.$el.data("modal",null),this.remove()}})}),define("text!components/showcase/2.0.0/cube2/templates/edit.html",[],function(){return'<form class="form-horizontal custom-cube2-table cube2-edit" novalidate>\n    <div class="control-group layout-map">\n        <label class="control-label">布局：</label>\n        <div class="controls" name="layout_map">\n            <table>\n                <tbody>\n                    <%= tableContent %>\n                </tbody>\n            </table>\n            <p class="help-desc">点击 + 号添加内容</p>\n        </div>\n    </div>\n    <div class="control-group js-item-region">\n        <ul class="choices"></ul>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/cube2/views/edit",["require","underscore","jquery","backbone","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/cube2/models/item","components/showcase/2.0.0/cube2/views/edit_item","components/showcase/2.0.0/cube2/views/layout_modal","text!components/showcase/2.0.0/cube2/templates/td.html","text!components/showcase/2.0.0/cube2/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/showcase/2.0.0/cube2/models/item"),a=e("components/showcase/2.0.0/cube2/views/edit_item"),l=e("components/showcase/2.0.0/cube2/views/layout_modal"),r=e("text!components/showcase/2.0.0/cube2/templates/td.html"),c=e("text!components/showcase/2.0.0/cube2/templates/edit.html");return o.extend({template:t.template(c),tdTemplate:t.template(r),events:{"click .empty":"add","click .not-empty":"edit","click td a":function(e){e.preventDefault()}},regions:{itemRegion:".js-item-region"},onInit:function(){this.currentSelection=-1,this.previousSelection=-1,this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"remove",this.delete),this.listenTo(this.model.get("sub_entry"),"valid:error",function(e){var t=this;setTimeout(function(){t.$(".not-empty[data-index="+e.index()+"]").trigger("click")},20)})},onBeforeRender:function(){this.model.denerateTableContent()},onRender:function(){0===this.$(".layout-map .empty").size()&&this.$(".layout-map .help-desc").hide(),this.suggestion(),this.renderSelection()},delete:function(){this.currentSelection=-1,this.previousSelection=-1,this.render()},add:function(e){var t=this,o=this.model.get("sub_entry"),a=n(e.target),r=+a.data("x"),c=+a.data("y"),d=function(e){u.set(e),o.add(u,{silent:!0}),t.currentSelection=o.length-1,t.render()},u=s.initialize({x:r,y:c}),p=u.layout(this.model.layoutMap);if(1===p.length)return void d({width:1,height:1});new l({model:new i.Model({layout:p}),callback:d})},edit:function(e){var t=n(e.currentTarget),i=+t.data("index");i!==this.currentSelection&&(this.currentSelection=i,this._slideSelection())},renderSelection:function(){var e=this,t=this.model.get("sub_entry");e.$(".choices").html(""),t.each(function(t,n){var i=new a({model:t,parent:e});i.render(),n!==e.previousSelection&&i.$el.hide(),e.$(".choices").append(i.el)}),this._slideSelection()},_slideSelection:function(){if(this.$("td").removeClass("current"),this.$("td[data-index="+this.currentSelection+"]").addClass("current"),this.previousSelection!==this.currentSelection){var e=this.$(".choice");e.eq(this.previousSelection).slideUp(),e.eq(this.currentSelection).slideDown(),this.previousSelection=this.currentSelection}},suggestion:function(){this.$el.find(".not-empty").filter(function(){return!n(this).find("img").attr("src")}).each(function(){var e=n(this),t=160*+e.attr("colspan"),i=160*+e.attr("rowspan");e.append("<span>"+t+"x"+i+"</span>")})}})}),define("text!components/showcase/2.0.0/tpl_shop/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (backgroundImage === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-shop-header" style="width: 320px; background-image: url(<%- fullfillImage(backgroundImage) %>);">\n                    <a class="close-modal small hide js-delete-image" data-index="0">×</a>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">最佳尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%- backgroundColor %>" name="backgroundColor">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">店铺Logo：</label>\n        <div class="controls">\n            <img src="<%- fullfillImage(window._global.mp_data.logo, \'!145x145.jpg\') %>" width="80" height="80" class="thumb-image" style="width: 80px; height: 80px;">\n            <a class="control-action js-trigger-avatar" href="javascript: void(0);">修改店铺Logo</a>\n        </div>\n    </div>\n</form>\n'}),define("components/image_shear/js/collection",["require","underscore","jquery","core/reqres","backbone","core/utils"],function(e){"use strict";var t=(e("underscore"),e("jquery")),n=(e("core/reqres"),e("backbone")),i=e("core/utils"),o=window._global;return n.Collection.extend({url:"//upload.qbox.me",uploadURL:o.url.materials+"/storage/pubImgUploadToken.json",uploadLinkURL:window._global.url.img+"/download?format=json",dataType:void 0,private:!1,sync:function(e){var n=this,i=t.Deferred();return this.getToken(e).done(function(e){n.upload(e.uptoken).done(function(e){i.resolve(e)}).fail(function(){i.reject()})}).fail(function(e){i.reject(e||"获取token失败，请重试")}),i.promise()},getToken:function(e){return i.ajax({url:this.uploadURL,type:"POST",dataType:this.dataType,xhrFields:{withCredentials:!0},data:{kdt_id:window._global.kdt_id,transform:e.transform}})},upload:function(e){var n=this,o=this.map(function(o){var s=new FormData;return s.append("token",e),s.append("file",o.get("file")),s.append("x:skip_save",1),i.ajax({url:n.url,type:"POST",data:s,processData:!1,contentType:!1,disableCsrfToken:!0,xhr:function(){var e=t.ajaxSettings.xhr();return e.upload.addEventListener("progress",function(e){o.trigger("upload:progress",Math.ceil(e.loaded/e.total*100))},!1),e}}).done(function(e){o.set("image",e)})});return t.when.apply(null,o)}})}),define("text!components/image_shear/template/image_shear.html",[],function(){return'<div class="widget-image-shear <%= extClass %>">\n    <div class="modal-dialog">\n        <div class="modal-header">\n            <span class="title">上传Logo</span>\n            <a href="javascript:void(0);" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</a>\n        </div>\n        <div class="notify">\n            <p class="bg-warning">图片不允许涉及政治敏感与色情</p>\n            <p class="bg-warning">图片大小不可大于1M</p>\n        </div>\n        <div class="modal-body">\n             <div class="lflex image-pro">\n                <div class="flex1">\n                    <div class="image-share-dropbox lflex lflex-v jc-center js-image-share-drop">\n                        <div id="dropped_image">\n                            <img src=""/>\n                            <div class="image-cupture js-image-cupture"></div>\n                            <div class="image-cupture-shadow js-image-cupture-shadow"></div>\n                        </div>\n                        <div id="dropbox">\n                            <p class="notice-title">拖拽图片至此</p>\n                            <p class="notice-or">或者</p>\n                            <div class="file-select">\n                                <input type="file" accept="<%= acceptImageTypeStr %>" class="ui-btn js-file" style="display:none" />\n                                <a href="javascript:void(0);" class="ui-btn ui-btn-normal js-img-btn-trigger">选择图片 …</a>\n                                <img class="js-sheared-img" style="display:none;" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="flex1">\n                    <div class="widget-image-shear__preview">\n                        <h4 class="title">预览</h4>\n                        <div class="js-preview preview">\n                            <img/>\n                        </div>\n                        <div class="js-preview preview preview--circle">\n                            <img/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="image-first js-origin-select">\n                <svg width="100" height="100" viewBox="0 0 30 30" class="js-image-add image-add" style="margin-top: 101px">\n                    <g class="transform-group">\n                      <g transform="translate(0, 28.0) scale(1, -1) scale(0.03125, 0.03125)">\n                        <path d="M984.694 387.878h-918.734c-8.062 0-14.606-6.522-14.606-14.606 0-8.034 6.522-14.582 14.606-14.582h918.734c8.062 0 14.606 6.522 14.606 14.582s-6.522 14.606-14.606 14.606zM539.907-86.086v918.734c0 8.062-6.522 14.606-14.606 14.606s-14.606-6.522-14.606-14.606v-918.734c0-8.066 6.522-14.62 14.606-14.62s14.606 6.522 14.606 14.62z" fill="#ddd"></path>\n                      </g>\n                    </g>\n                </svg>\n            </div>\n        </div>\n        <div class="widget-image-shear__footer modal-footer">\n            <a class="ui-btn ui-btn-primary js-gen-img" href="javascript:void(0);">生成</a>\n        </div>\n    </div>\n</div>\n'}),define("components/image_shear/js/detectImage",["require"],function(e){"use strict";return function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:null:null}}),define("components/image_shear/js/view",["require","exports","module","jquery","underscore","core/event","core/utils","backbone","components/image_shear/js/collection","text!components/image_shear/template/image_shear.html","components/image_shear/js/detectImage","jqueryui"],function(e,t,n){var i=e("jquery"),o=e("underscore"),s=e("core/event"),a=e("core/utils"),l=e("backbone"),r=e("components/image_shear/js/collection"),c=e("text!components/image_shear/template/image_shear.html"),d=e("components/image_shear/js/detectImage");e("jqueryui");var u=l.View.extend({className:"widget-image_shear modal hide",template:o.template(c),acceptImageType:["png","jpg","jpeg","gif"],events:{"change .js-file":"selectFile","click .js-image-add":"triggerFileBtn","click .js-img-btn-trigger":"triggerFileBtn","click .js-gen-img":"genImg"},setDefaultParams:function(){this.$Wrapper=null,this.$Preview=null,this.$Shear=null,this.$Shoadow=null,this.imgLength=300,this.previewRatio=1,this.shearRatio=1,this.aspectRatio=!0,this.rect={width:0,height:0,top:0,right:0,bottom:0,left:0}},checkImageType:function(e){var t=!1;if(e&&this.acceptImageType&&this.acceptImageType.length)for(var n=this.acceptImageType.length-1;n>=0;n--)if(this.acceptImageType[n]===e){t=!0;break}return t},initialize:function(e){var t=/^\d+(px){0,1}$/g;this.setDefaultParams(),this.collection=new r,this.el=i(e.el),e&&(this.extClass=e.extClass||"",void 0!==e.aspectRatio&&(this.aspectRatio=e.aspectRatio),e.imgLength&&t.test(e.imgLength)&&(this.imgLength=parseInt(e.imgLength,10)),"function"==typeof e.callback&&(this.callback=e.callback),e.uploadURL&&(this.collection.uploadURL=e.uploadURL),e.acceptImageType&&(this.acceptImageType=e.acceptImageType)),this.listenTo(this.collection,"add",this.createShear);var n=this;s.on("widget:image_shear:upload:sheared",function(){n.$el.modal("hide")})},triggerFileBtn:function(){this.$el.find(".js-file").trigger("click")},imageTypeError:function(){a.errorNotify("当前图片不支持上传，请换张图再试试")},initDropImg:function(){var e=this;i.event.props.push("dataTransfer"),i(document).on("dragenter",function(e){e.preventDefault()}).on("dragover",function(e){e.preventDefault()}).on("drop",function(e){e.preventDefault()}),i(document).delegate(".js-image-share-drop","dragenter",function(e){e.preventDefault(),e.stopPropagation(),i(e.currentTarget).addClass("dragover")}).delegate(".js-image-share-drop","dragover",function(e){e.preventDefault(),e.stopPropagation();var t=i(e.currentTarget);t.hasClass("dragover")||t.addClass("dragover")}).delegate(".js-image-share-drop","dragleave",function(e){e.preventDefault(),e.stopPropagation(),i(e.currentTarget).removeClass("dragover")}).delegate(".js-image-share-drop","drop",function(t){t.preventDefault(),t.stopPropagation(),i(t.currentTarget).removeClass("dragover");var n=t.dataTransfer.files;if(n.length>0){var o=n[0];if(o.size>1048576)return void a.errorNotify("添加的图片大小不能超过1M");var s=new FileReader;s.onload=function(){var t=new window.Uint8Array(s.result),n=d(t),i=n&&n.ext;e.checkImageType(i)?e.previewAndAdd(o):e.imageTypeError()},s.readAsArrayBuffer(o)}return!1}),i(document).delegate(".js-origin-select","dragenter",function(e){e.preventDefault(),e.stopPropagation(),i(e.currentTarget).addClass("dragover")}).delegate(".js-origin-select","dragover",function(e){e.preventDefault(),e.stopPropagation();var t=i(e.currentTarget);t.hasClass("dragover")||t.addClass("dragover")}).delegate(".js-origin-select","dragleave",function(e){e.preventDefault(),e.stopPropagation(),i(e.currentTarget).removeClass("dragover")}).delegate(".js-origin-select","drop",function(t){t.preventDefault(),t.stopPropagation(),i(t.currentTarget).removeClass("dragover");var n=t.dataTransfer.files;if(n.length>0){var o=n[0];if(o.size>1048576)return void a.errorNotify("添加的图片大小不能超过1M");var s=new FileReader;s.onload=function(){var t=new window.Uint8Array(s.result),n=d(t),i=n&&n.ext;e.checkImageType(i)?e.previewAndAdd(o):e.imageTypeError()},s.readAsArrayBuffer(o)}return!1})},genImg:function(){if(0===this.collection.length)return void a.errorNotify("请先选择图片");var e=this;e.$el.find(".js-gen-img").removeClass("ui-btn-primary").addClass("ui-btn-disabled").prop("disabled",!0).text("上传中"),e.collection.sync({
transform:this.getTransform()}).done(function(t){s.trigger("widget:image_shear:upload:sheared",t),e.$el.find(".js-gen-img").removeClass("ui-btn-disabled").addClass("ui-btn-primary").prop("disabled",!1).text("上传"),e.callback&&e.callback(t)}).fail(function(t){e.$el.find(".js-gen-img").removeClass("ui-btn-disabled").addClass("ui-btn-primary").prop("disabled",!1).text("上传"),a.errorNotify(t||"上传失败，请重试")})},getTransform:function(){return"imageMogr2/crop/!"+(this.rect.width/this.shearRatio).toFixed(1)+"x"+(this.rect.height/this.shearRatio).toFixed(1)+"a"+(this.rect.left/this.shearRatio).toFixed(1)+"a"+(this.rect.top/this.shearRatio).toFixed(1)},createShear:function(e){var t=this.$el.find("#dropped_image img"),n=e.get("src"),o=document.createElement("img");o.onload=i.proxy(function(){o.width>o.height?(this.shearRatio=this.imgLength/o.width,t.css("width",this.imgLength+"px").css("height",this.shearRatio*o.height+"px")):(this.shearRatio=this.imgLength/o.height,t.css("height",this.imgLength+"px").css("width",this.shearRatio*o.width+"px")),t.attr("src",n),this.$Preview.find("img").attr("src",n);var e,i=t.width(),s=t.height();this.$Wrapper.css("width",i+"px").css("height",s+"px").css("position","relative"),e=Math.min(this.$Wrapper.width()/(this.aspectRatio||1),this.$Wrapper.height()),this.$Shear.css("width",.618*e*(this.aspectRatio||1)+"px").css("height",.618*e+"px").css("left",(this.$Wrapper.width()-.618*e*(this.aspectRatio||1))/2+"px").css("top",(this.$Wrapper.height()-.618*e)/2+"px"),this.setShadow((this.$Wrapper.width()-.618*e*(this.aspectRatio||1))/2,(this.$Wrapper.height()-.618*e)/2),this.$el.find("#dropbox").hide()},this),o.src=n},selectFile:function(e){var t=e.target.files,n=this;o.each(t,function(e){if(e.size>1048576)return void a.errorNotify("添加的图片大小不能超过1M");var t=new FileReader;t.onload=function(){var i=new window.Uint8Array(t.result),o=d(i),s=o&&o.ext;n.checkImageType(s)?n.previewAndAdd(e):n.imageTypeError()},t.readAsArrayBuffer(e)}),i(e.target).val("")},reset:function(){this.originUploadedUrl="",this.$Wrapper.attr("style",""),this.rect={width:0,height:0,top:0,right:0,bottom:0,left:0},this.$Shear.css("top",0).css("left",0)},previewAndAdd:function(e){var t=new FileReader,n=this;t.onload=function(t){n.reset(),n.collection.pop(),n.collection.add({src:t.target.result,file:e})},t.readAsDataURL(e),i(".image-first").hide(),i(".image-pro").css("display","flex")},setShadow:function(e,t){if(this.$Shear){var n=this.$Wrapper.width(),i=this.$Wrapper.height(),o=this.$Shear.width(),s=this.$Shear.height();this.rect.width=o,this.rect.height=s,this.rect.left=e,this.rect.top=t,this.rect.right=n-o-e,this.rect.bottom=i-s-t,this.setPreview(this.$Preview.width()/this.$Shear.width()),this.$Shadow.css("width",o+"px").css("height",s+"px"),this.$Shear.show(),this.$Shadow.css("border-width",this.rect.top+"px "+this.rect.right+"px "+this.rect.bottom+"px "+this.rect.left+"px")}},setPreview:function(e){this.$Preview.find("img").css("width",e*this.$Wrapper.width()+"px").css("height",e*this.$Wrapper.height()+"px").css("margin-left","-"+e*this.rect.left+"px").css("margin-top","-"+e*this.rect.top+"px")},initAct:function(){var e=this;i(".js-image-cupture").draggable({cursor:"move",containment:"parent",drag:function(t,n){var o=(i(t.target),Math.floor(e.$Wrapper.width()-e.$Shear.width())),s=Math.floor(e.$Wrapper.height()-e.$Shear.height());n.position.top>s&&(n.position.top=s),n.position.left>o&&(n.position.left=o),e.setShadow(n.position.left,n.position.top)}}).resizable({containment:"parent",handles:"ne, nw, se, sw",aspectRatio:e.aspectRatio,minHeight:50,minWidth:50,resize:function(t,n){i(t.target);n.position.left<0&&(n.position.left=0),n.position.top<0&&(n.position.top=0),n.size={width:50,height:50},e.setShadow(n.position.left,n.position.top)}})},render:function(){var e=this;if(!e.$Shear){for(var t=[],n=this.acceptImageType.length-1;n>=0;n--)t.push("image/"+this.acceptImageType[n]);e.$el.html(e.template({acceptImageTypeStr:t.join(","),extClass:e.extClass})),e.$Wrapper=e.$el.find("#dropped_image"),e.$Shear=e.$el.find(".js-image-cupture"),e.$Shadow=e.$el.find(".js-image-cupture-shadow"),e.$Preview=e.$el.find(".js-preview")}return e.$el.modal("show"),e.initAct(),e.initDropImg(),e}});n.exports=u}),define("components/uploadlogo/models/model",["require","backbone","core/utils"],function(e){"use strict";var t,n=e("backbone"),i=e("core/utils");return t=i.isFenxiao()?window._global.url.fenxiao+"/supplier/enterprise/template/logo.json":window._global.url.www+"/account/team/logo.json",n.Model.extend({defaults:{logo:""},url:t,sync:function(){return i.ajax({url:this.url,type:"PUT",data:this.toJSON()})}})}),define("components/uploadlogo/app",["require","underscore","backbone","marionette","core/utils","components/image_shear/js/view","./models/model"],function(e){"use strict";var t=e("underscore"),n=(e("backbone"),e("marionette")),i=e("core/utils"),o=e("components/image_shear/js/view"),s=e("./models/model");return n.ItemView.extend({initialize:function(e){var n;this.options=e||{},this.model=new s,n=new o(i.isFenxiao()?{uploadURL:_global.url.fenxiao+"/common/qiniu/upToken.json",callback:t.bind(this.selectedImage,this)}:{callback:t.bind(this.selectedImage,this)}),n.render()},selectedImage:function(e){var t=e,n=this;this.model.set("logo",t.attachment_url),this.model.sync().done(function(){i.isFenxiao()?window._global.template_logo=t.attachment_url:window._global.mp_data.logo=t.attachment_url,n.options.callback&&n.options.callback(t),n.close()}).fail(function(){i.errorNotify("上传店铺Logo失败")})},onClose:function(){}})}),define("components/showcase/2.0.0/tpl_shop/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_shop/templates/edit.html","components/attachment/image/app","components/uploadlogo/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_shop/templates/edit.html"),o=e("components/attachment/image/app"),s=e("components/uploadlogo/app"),a=e("core/utils");return n.extend({template:t.template(i),events:{'blur input[type="text"]':"updateModel",'change input[type="color"]':"changeColor","click .js-reset-bg":"resetBg","click .js-trigger-image":"chooseImage","click .js-trigger-avatar":"chooseLogo","click .js-delete-image":"deleteImage"},templateHelpers:{fullfillImage:a.fullfillImage},resetBg:function(){this.$('input[type="color"]').val("#EF483F"),this._changeColor("#EF483F")},changeColor:function(e){this._changeColor(e.target.value)},_changeColor:function(e){this.model.set({backgroundColor:e})},chooseImage:function(){this._openImageModal(function(e){this.model.set("backgroundImage",e)})},chooseLogo:function(){var e=this;new s({callback:function(){e.render(),e.model.trigger("change")}})},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url),this.render()},this);o.initialize({multiChoose:!1,callback:n,fetchTokenType:"wsc",uploadTokenType:"imgPub"})},deleteImage:function(){this.model.set({backgroundImage:""})}})}),define("text!components/showcase/2.0.0/tpl_weixin/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(background) %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-block">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group js-background-link">\n        <label class="control-label">背景链接：</label>\n        <div class="controls" name="link_url">\n            <%= renderLink(bg_link_url, bg_link_title, bg_link_type, {showDelete: false}) %>\n        </div>\n    </div>\n    <div class="control-group white-space-group">\n        <label class="control-label">导航位置：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height hide"><span class="js-top"><%= top %></span> %</div>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>名称：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <%= renderLink(link_url, link_title, link_type) %>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_weixin/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){return{renderLink:o}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete"},onInit:function(){this.listenTo(this.model,"change",this.render),s.call(this)},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_weixin/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_weixin/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_weixin/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_weixin/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_weixin/templates/edit.html","components/setup_link/render_link","components/setup_link/bind_link","components/showcase/2.0.0/tpl_weixin/views/edit_collection","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/edit.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/showcase/2.0.0/tpl_weixin/views/edit_collection"),l=e("components/attachment/image/app"),r=e("core/utils");return n.extend({template:t.template(i),templateHelpers:function(){return{fullfillImage:r.fullfillImage,renderLink:o}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg"},modelEvents:{"change:bg_link_url":"render"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions),this.listenTo(this.model,"change:background",this.render),s.call(this,{parentSelector:".js-background-link"})},onRender:function(){this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.renderSilder(),this.toggleOptions()},renderSilder:function(){var e=this,n=e.$(".js-top");this.$(".js-slider").slider({min:0,max:100,value:e.model.get("top"),slide:function(i,o){var s=o.value;t.isNumber(s)&&e.model.set("top",s),n.text(s)}})},chooseImage:function(){var e=this;l.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()},onLinkChange:function(e){this.model.set({bg_link_id:e.link_id,bg_link_type:e.link_type,bg_link_title:e.link_title,bg_link_url:e.link_url})}})}),define("text!components/showcase/2.0.0/tpl_fbb/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= fullfillImage(background) %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group js-background-link">\n        <label class="control-label">背景链接：</label>\n        <div class="controls" name="link_url">\n            <%= renderLink(bg_link_url, bg_link_title, bg_link_type, {showDelete: false}) %>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">导航链接</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:;"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>小标题：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <%= renderLink(link_url, link_title, link_type, {showDelete: false}) %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">小图标：</label>\n    <div class="controls">\n        <% if (!icon_image_url) { %>\n            <a class="control-action js-icon-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= fullfillImage(icon_image_url) %>" width="30" height="30" class="thumb-image">\n            <a class="control-action js-icon-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-icon">删除</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：60 x 60 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">简介：</label>\n    <div class="controls">\n        <input type="text" name="text" value="<%- text %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">背景图：</label>\n    <div class="controls">\n        <% if (bg_image_url === \'\') { %>\n            <a class="control-action js-bg-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= fullfillImage(bg_image_url) %>" width="100" height="100" class="thumb-image">\n            <a class="control-action js-bg-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-bg">删除</a>\n        <% } %>\n        <p class="help-desc">建议尺寸：85 x 188 像素</p>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">日期：</label>\n    <div class="controls">\n        <input type="text" name="date" value="<%- date %>">\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_fbb/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){return{renderLink:o,fullfillImage:l.fullfillImage}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-bg-image":"chooseImage","click .js-icon-image":"chooseIconImage","click .js-trigger-delete-bg":"deleteImage","click .js-trigger-delete-icon":"deleteIconImage"},onInit:function(){this.listenTo(this.model,"change:link_url change:bg_image_url change:icon_image_url",this.render),s.call(this)},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({bg_image_id:t.attachment_id,bg_image_url:t.attachment_url,bg_image_width:Number(t.width),bg_image_height:Number(t.height)})}})},deleteImage:function(){this.model.set({bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:""})},chooseIconImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({icon_image_id:t.attachment_id,icon_image_url:t.attachment_url,icon_image_width:Number(t.width),icon_image_height:Number(t.height)})}})},deleteIconImage:function(){this.model.set({icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_fbb/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_fbb/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_fbb/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_fbb/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_fbb/templates/edit.html","components/setup_link/render_link","components/setup_link/bind_link","components/showcase/2.0.0/tpl_fbb/views/edit_collection","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/edit.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/showcase/2.0.0/tpl_fbb/views/edit_collection"),l=e("components/attachment/image/app"),r=e("core/utils");return n.extend({template:t.template(i),templateHelpers:function(){return{fullfillImage:r.fullfillImage,renderLink:o}},events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model,"change:bg_link_url",this.render),this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions),s.call(this,{parentSelector:".js-background-link"})},onRender:function(){this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},chooseImage:function(){var e=this;l.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()},onLinkChange:function(e){this.model.set({bg_link_id:e.link_id,bg_link_type:e.link_type,bg_link_title:e.link_title,bg_link_url:e.link_url})}})}),define("text!components/showcase/2.0.0/tpl_course/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>背景图片：</label>\n        <div class="controls">\n            <% if (background === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <img src="<%= background %>" data-full-size="<%= background %>" width="100" height="100" class="thumb-image">\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-block">建议尺寸：640 x 1080 像素</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" maxlength="10">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= title_color %>" name="title_color">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">副标题：</label>\n        <div class="controls">\n            <input type="text" name="sub_title" value="<%- sub_title %>" maxlength="20">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">副标题颜色：</label>\n        <div class="controls">\n            <input type="color" value="<%= sub_title_color %>" name="sub_title_color">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">按钮文字：</label>\n        <div class="controls">\n            <input type="text" name="button_text" value="<%- button_text %>" maxlength="10">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label"><em class="required">*</em>按钮链接：</label>\n        <div class="controls js-parent-link">\n            <input type="hidden" name="button_link_url" value="<%= button_link_url %>">\n            <%= renderLink(button_link_url, button_link_title, button_link_type, {showDelete: false}) %>\n        </div>\n    </div>\n    <div class="control-group white-space-group tpl-course-white-space-group">\n        <label class="control-label">按钮离顶部：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height"><span class="js-height"><%= top %></span> %</div>\n        </div>\n    </div>\n    <div class="separate-line-wrap">\n        <hr>\n        <div class="separate-line">\n            <p class="text-center">导航链接</p>\n            <p class="text-center">v</p>\n        </div>\n    </div>\n    <div class="control-group js-collection-region">\n    </div>\n\n    <div class="control-group options">\n        <a class="add-option js-add-option" href="javascript:;"><i class="icon-add"></i> 添加一个导航链接</a>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/tpl_course/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label"><em class="required">*</em>小标题：</label>\n    <div class="controls">\n        <input type="text" name="title" value="<%- title %>">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls" name="link_url">\n        <%= renderLink(link_url, link_title, link_type, {showDelete: false}) %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">小图标：</label>\n    <div class="controls">\n        <% if (!icon_image_url) { %>\n            <a class="control-action js-icon-image" href="javascript: void(0);">选择图片</a>\n        <% } else { %>\n            <img src="<%= icon_image_url %>" data-full-size="<%= icon_image_url %>" width="30" height="30" class="thumb-image">\n            <a class="control-action js-icon-image" href="javascript: void(0);">修改</a>\n            <span>|</span>\n            <a href="javascript:;" class="control-action js-trigger-delete-icon">删除</a>\n        <% } %>\n        <p class="help-block">建议尺寸：60 x 60 像素</p>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_course/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_course/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_course/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-bg-image":"chooseImage","click .js-icon-image":"chooseIconImage","click .js-trigger-delete-bg":"deleteImage","click .js-trigger-delete-icon":"deleteIconImage"},modelEvents:{change:"render"},onInit:function(){s.call(this)},serializeData:function(){var e=this.model.toJSON();return e.icon_image_url=l.fullfillImage(e.icon_image_url),e.bg_image_url=l.fullfillImage(e.bg_image_url),e.renderLink=o,e},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({bg_image_id:t.attachment_id,bg_image_url:t.attachment_url,bg_image_width:Number(t.width),bg_image_height:Number(t.height)})}})},deleteImage:function(){this.model.set({bg_image_id:"",bg_image_url:"",bg_image_width:"",bg_image_height:""})},chooseIconImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({icon_image_id:t.attachment_id,icon_image_url:t.attachment_url,icon_image_width:Number(t.width),icon_image_height:Number(t.height)})}})},deleteIconImage:function(){this.model.set({icon_image_id:"",icon_image_url:"",icon_image_width:"",icon_image_height:""})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_course/views/edit_colleciton",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_course/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/tpl_course/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/tpl_course/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_course/templates/edit.html","components/setup_link/render_link","components/setup_link/bind_link","components/showcase/2.0.0/tpl_course/views/edit_colleciton","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_course/templates/edit.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/showcase/2.0.0/tpl_course/views/edit_colleciton"),l=e("components/attachment/image/app"),r=e("core/utils");return n.extend({template:t.template(i),events:{'blur input[type="text"]':"updateModel",'click input[type="radio"]':"updateModel",'change input[type="color"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-trigger-delete":"deleteImage","click .js-add-option":"addOption","click .js-reset-bg":"resetBg"},modelEvents:{"change:background":"render"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model,"change:button_link_url",this.render),this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions),s.call(this,{parentSelector:".js-parent-link"})},serializeData:function(){var e=this.model.toJSON();return e.background=r.fullfillImage(e.background),e.renderLink=o,e},onRender:function(){this.collectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this})),this.renderSlider(),this.toggleOptions()},renderSlider:function(){var e=this,n=e.$(".js-height");this.$(".js-slider").slider({min:0,max:100,value:e.model.get("top"),slide:function(i,o){var s=o.value;t.isNumber(s)&&e.model.set("top",s),n.text(s)}})},addOption:function(){this.model.get("sub_entry").add({type:"title_nav_selection",title:"",link_id:"",link_type:"",link_title:"",link_url:""})},toggleOptions:function(){this.model.get("sub_entry").length>=20?this.$(".options").hide():this.$(".options").show()},chooseImage:function(){var e=this;l.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({background:t.attachment_url,width:Number(t.width),height:Number(t.height)})}})},deleteImage:function(){this.model.set({background:"",width:"",height:""})},onLinkChange:function(e){this.model.set({button_link_id:e.link_id,button_link_type:e.link_type,button_link_title:e.link_title,button_link_url:e.link_url})},resetBg:function(){this.model.set("color","#ffffff"),this.$('input[type="color"]').val("#ffffff")}})}),define("text!components/showcase/2.0.0/tpl_wxd/templates/edit.html",[],function(){
return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (backgroundImage === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-wxd">\n                    <div class="tpl-wxd-bg">\n                        <img src="<%- backgroundImage %>" alt="">\n                    </div>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">建议尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n        </div>\n    </div>\n\n    <div class="control-group">\n        <label class="control-label">店铺Logo：</label>\n        <div class="controls">\n            <img src="<%- window._global.mp_data.logo %>" width="80" height="80" class="thumb-image" style="width: 80px; height: 80px;">\n            <a class="control-action js-trigger-avatar" href="javascript: void(0);">修改店铺Logo</a>\n            <p class="help-desc">建议尺寸：160 x 160 像素</p>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_wxd/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_wxd/templates/edit.html","components/attachment/image/app","components/uploadlogo/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_wxd/templates/edit.html"),o=e("components/attachment/image/app"),s=e("components/uploadlogo/app"),a=e("core/utils");return n.extend({template:t.template(i),events:{"click .js-trigger-image":"chooseImage","click .js-trigger-avatar":"chooseAvatar"},serializeData:function(){var e=this.model.toJSON();return e.avatar=a.fullfillImage(e.avatar)||"",e.backgroundImage=a.fullfillImage(e.backgroundImage)||"",e},chooseImage:function(){this._openImageModal(function(e){this.model.set("backgroundImage",e)})},chooseAvatar:function(){var e=this;new s({callback:function(){e.render(),e.model.trigger("change")}})},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url),this.render()},this);o.initialize({multiChoose:!1,callback:n,fetchTokenType:"wsc",uploadTokenType:"imgPub"})}})}),define("text!components/showcase/2.0.0/tpl_11_11/templates/edit.html",[],function(){return'<form class="form-horizontal edit-tpl-11-11" novalidate onsubmit="return false">\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <% if (banner === \'\') { %>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">选择图片</a>\n            <% } else { %>\n                <div class="tpl-shop-header" style="width: 320px; background-image: url(<%- fullfillImage(banner) %>);">\n                    <a class="close-modal small hide js-delete-image" data-index="0">×</a>\n                </div>\n                <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <% } %>\n            <p class="help-desc">最佳尺寸：640 x 200 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n            <input type="hidden" name="banner">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">优惠券：</label>\n        <div class="controls">\n            <ul class="coupon-list">\n            <% _.each(tradeincard, function(item) { %>\n                <li>\n                    <div class="coupon-list-content">\n                        <div class="coupon-list-summary">\n                            <span class="label label-success">优惠券</span>\n                            <span><%- item.name %></span>\n                            <span class="c-gray">\n                                <% if(item.at_least) { %>\n                                    （满<%= item.at_least %>元可用）\n                                <% } else { %>\n                                    无限制\n                                <% } %>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="coupon-list-opts">\n                        <a href="javascript:;" class="js-remove-tradeincard">删除</a>\n                    </div>\n                </li>\n\n            <% }); %>\n            </ul>\n            <% if(tradeincard.length < 3) { %>\n                <a href="javascript:;" class="control-action js-add-tradeincard">添加优惠券</a>\n            <% } %>\n            <input type="hidden" name="tradeincard">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">公告：</label>\n        <div class="controls">\n            <input type="text" name="notice" value="<%= notice %>" class="input-xxlarge" placeholder="请填写内容，如果过长，将会在手机上滚动显示">\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_11_11/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_11_11/templates/edit.html","components/attachment/image/app","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/tpl_11_11/templates/edit.html"),o=e("components/attachment/image/app"),s=e("components/modal/1.0.0/modal"),a=e("core/utils");return n.extend({template:t.template(i),events:{'blur input[type="text"]':"updateModel","click .js-trigger-image":"chooseImage","click .js-delete-image":"deleteImage","click .js-add-tradeincard":"addTradeincard","click .js-remove-tradeincard":"removeTradeincard"},templateHelpers:{fullfillImage:a.fullfillImage},modelEvents:{"change:banner":"render","change:tradeincard":"render"},chooseImage:function(){this._openImageModal(function(e){this.model.set("banner",e)})},onRender:function(){},_openImageModal:function(e){var n=t.bind(function(t){t=t[0],e.call(this,t.attachment_url)},this);o.initialize({multiChoose:!1,callback:n,fetchTokenType:"wsc",uploadTokenType:"imgPub"})},deleteImage:function(){this.model.set("banner","")},addTradeincard:function(){var e=this;this.tradeincardModal=s.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(n){var i=e.model.get("tradeincard");t.each(n,function(e){i.length<3&&i.push({id:e.id,name:e.name,value:e.value,is_at_least:e.is_at_least,at_least:e.at_least})}),e.model.trigger("change:tradeincard"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},removeTradeincard:function(e){var t=$(e.target).parents("li").index();this.model.get("tradeincard").splice(t,1),this.model.trigger("change:tradeincard"),this.model.trigger("change")}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/edit_goods_page",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="form-block-with-demo">\n    <img class="block-demo js-preview-demo"\n        src="'+(null==(__t=fullfillImage("public_files/2016/11/07/a7f25384ad5bb5a1b8d115a42075a0c3.png"))?"":__t)+'"\n        srcset="'+(null==(__t=fullfillImage("public_files/2016/11/07/7c03236d559b1913e8c4380ec0bb4799.png"))?"":__t)+' 2x"\n        data-src="public_files/2016/11/03/f7593e9a21bfa0009e7dbf9d682c4446.jpg"\n        data-srcset="public_files/2016/11/03/d8f37326ad8cf990ec87a0e3b3dd82fe.jpg 2x"\n    />\n    <div class="block-form">\n        <form class="form-horizontal">\n            <div class="control-group">\n                <label class="control-label">页面标题：</label>\n                <div class="controls">\n                    <input type="text" name="goods_page_title" value="'+(null==(__t=goods_page_title)?"":__t)+'" placeholder="简单介绍当前页面的主题是什么" required maxLength="9">\n                </div>\n            </div>\n            <div class="control-group">\n                <label class="control-label">选择商品：</label>\n                <div class="controls">\n                    <ul class="module-goods-list clearfix" name="goods">\n                        ',_.each(goods,function(e,t){__p+='\n                            <li class="sort">\n                                <a href="'+(null==(__t=e.url)?"":__t)+'" target="_blank"><img src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" alt="商品图" width="50" height="50"></a>\n                                <a class="close-modal js-delete-goods small hide" data-id="',e.id,__p+='" title="删除">×</a>\n                            </li>\n                        '}),__p+='\n                        <li class="js-add-goods-options">\n                            <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_goods_page",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","core/utils","components/modal/1.0.0/modal","tpl!../templates/edit_goods_page"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("core/utils"),s=e("components/modal/1.0.0/modal");return i.extend({tagName:"li",className:"choice",template:e("tpl!../templates/edit_goods_page"),events:{'change input[name="goods_page_title"]':"updateModel","click .actions .delete":"delete","click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"},modelEvents:{"change:goods":"render"},templateHelpers:{fullfillImage:o.fullfillImage},updateModel:o.updateModel,onRender:function(){var e=this;this.model.get("goods").length&&this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.model.trigger("change"),e.model.trigger("change:goods"))}}),this.toggleOptions()},handleDeleteGoods:function(e){var t=n(e.target),i=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGoods(i)},handleAddGoods:function(){var e=this;this.goodsModal=s.initialize({type:"goods",hide:["tag"],multiChoose:!0}).setChooseItemCallback(function(n){t.each(n,function(t){if(e.model.get("goods").length>=6)return null;e.model.get("goods").push({id:t.data_id,url:t.data_url,image_url:t.image_url,image_id:t.data_id||t.id||"",price:0!=+t.data_price?(t.data_price/100).toFixed(2):0,title:t.title})}),e.model.trigger("change"),e.model.trigger("change:goods")}),this.goodsModal.modal("show")},toggleOptions:function(){this.model.get("goods").length>=6?this.$(".js-add-goods-options").hide():this.$(".js-add-goods-options").show()},delete:function(){this.model.destroy()}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/edit_tradeincard_page",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="form-block-with-demo">\n    <img class="block-demo js-preview-demo"\n        src="'+(null==(__t=fullfillImage("public_files/2016/11/07/9c9ede32ed53aa74f26c3d2bba5f8cc9.png"))?"":__t)+'"\n        srcset="'+(null==(__t=fullfillImage("public_files/2016/11/07/9c5c5ec0cc36f2baefbca0179042afa5.png"))?"":__t)+' 2x"\n        data-src="public_files/2016/11/03/5e590b3bc1c49fb68c3a43efe91af61d.jpg"\n        data-srcset="public_files/2016/11/03/4379664d0999468e060cb88ca843b97a.jpg 2x"\n    />\n    <div class="block-form">\n        <form class="form-horizontal edit-custom-coupon">\n            <div class="control-group">\n                <label class="control-label">页面标题：</label>\n                <div class="controls">\n                    <input type="text" name="tradeincard_page_title" value="'+(null==(__t=tradeincard_page_title)?"":__t)+'" placeholder="简单介绍当前页面的主题是什么" required maxLength="9">\n                </div>\n            </div>\n            <div class="control-group">\n                <label class="control-label">优惠券：</label>\n                <div class="controls">\n                    <ul class="coupon-list">\n                    ',_.each(tradeincard,function(e){__p+='\n                        <li>\n                            <div class="coupon-list-content">\n                                <div class="coupon-list-summary">\n                                    ';var t;t=e.at_least?"满"+e.at_least+"元可用":"无限制",__p+='\n                                    <span class="ui-tooltip" data-tooltip-title="'+(null==(__t=t)?"":__t)+'"  data-tooltip-placement="left">'+(null==(__t=e.name)?"":_.escape(__t))+'</span>\n                                </div>\n                            </div>\n                            <div class="coupon-list-opts">\n                                <a href="javascript:;" class="js-remove-coupon">删除</a>\n                            </div>\n                        </li>\n\n                    '}),__p+="\n                    </ul>\n                    ",tradeincard.length<3&&(__p+='\n                        <a href="javascript:;" class="control-action js-add-coupon">添加优惠券</a>\n                    '),__p+='\n                    <input type="hidden" name="tradeincard">\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_tradeincard_page",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","core/utils","components/modal/1.0.0/modal","tpl!../templates/edit_tradeincard_page"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("core/utils"),s=e("components/modal/1.0.0/modal");return i.extend({tagName:"li",className:"choice",template:e("tpl!../templates/edit_tradeincard_page"),events:{"click .actions .delete":"delete",'change input[name="tradeincard_page_title"]':"updateModel","click .js-add-coupon":"handleAddTradeincard","click .js-remove-coupon":"handleRemoveTradeincard"},modelEvents:{"change:tradeincard":"render"},templateHelpers:{fullfillImage:o.fullfillImage},updateModel:o.updateModel,handleAddTradeincard:function(){var e=this;this.tradeincardModal=s.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(n){var i=e.model.get("tradeincard");t.each(n,function(e){i.length<3&&i.push({id:e.id,alias:e.data_alias,name:e.name,value:e.value,is_at_least:e.is_at_least,at_least:e.at_least})}),e.model.trigger("change:tradeincard"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},handleRemoveTradeincard:function(e){var t=n(e.target).parents("li").index();this.model.get("tradeincard").splice(t,1),this.model.trigger("change:tradeincard"),this.model.trigger("change")},delete:function(){this.model.destroy()}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/edit_info_page_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input type="text" name="title" value="'+(null==(__t=title)?"":__t)+'" placeholder="标题" required maxLength="12">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">公告内容：</label>\n        <div class="controls">\n            <textarea name="content" placeholder="公告内容">'+(null==(__t=content)?"":__t)+'</textarea>\n        </div>\n    </div>\n</form>\n<div class="actions" style="right: -1px;">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_info_page_item",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","tpl!../templates/edit_info_page_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils");return t.extend({tagName:"li",className:"choice",template:e("tpl!../templates/edit_info_page_item"),events:{"click .actions .delete":"delete",'change input[name="title"]':"updateModel",'change textarea[name="content"]':"updateModel"},updateModel:n.updateModel,delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_info_page_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","./edit_info_page_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("./edit_info_page_item");return t.extend({itemView:n,initialize:function(e){this.options=e||{}},onShow:function(){this.sortable()}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/edit_info_page",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="form-block-with-demo">\n    <img class="block-demo js-preview-demo"\n        src="'+(null==(__t=fullfillImage("public_files/2016/11/07/a05f8750e1a2a6c9b00338b9f34eec8a.png"))?"":__t)+'"\n        srcset="'+(null==(__t=fullfillImage("public_files/2016/11/07/c8cf0cd6687835d59fa4510080f09655.png"))?"":__t)+' 2x"\n        data-src="public_files/2016/11/03/baf4ce3b45eef4eb331eda06a2fb5b73.jpg"\n        data-srcset="public_files/2016/11/03/54803f036e810552d76c23b5153d126f.jpg 2x"\n    />\n    <div class="block-form">\n        <form class="form-horizontal">\n            <div class="control-group">\n                <label class="control-label">页面标题：</label>\n                <div class="controls">\n                    <input type="text" name="info_page_title" value="'+(null==(__t=info_page_title)?"":__t)+'" placeholder="本次活动的主题是什么" required maxLength="9">\n                </div>\n            </div>\n        </form>\n        <div class="js-info-collection-region info-collection-region">\n\n        </div>\n        <div class="js-options options" style="margin-left: 15px; margin-top: 10px;">\n            <a href="javascript:;" class="add-option js-add-info"><i class="icon-add"></i> 添加一个公告</a>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_info_page",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","./edit_info_page_collection","tpl!../templates/edit_info_page"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils"),i=e("./edit_info_page_collection");return t.extend({tagName:"li",className:"choice",template:e("tpl!../templates/edit_info_page"),events:{'change input[name="info_page_title"]':"updateModel","click .js-add-info":"handleAddInfo","click .actions .delete":"delete"},templateHelpers:{fullfillImage:n.fullfillImage},regions:{infoCollectionRegion:".js-info-collection-region"},updateModel:n.updateModel,onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.infoCollectionRegion.show(new i({collection:this.model.get("sub_entry")})),this.toggleOptions()},handleAddInfo:function(){this.model.get("sub_entry").add({})},delete:function(){this.model.destroy()},toggleOptions:function(){this.model.get("sub_entry").length>=3?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit_page_collection",["require","backbone","components/showcase/2.0.0/base/views/edit_collection_base","./edit_goods_page","./edit_tradeincard_page","./edit_info_page"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/base/views/edit_collection_base"),i=e("./edit_goods_page"),o=e("./edit_tradeincard_page"),s=e("./edit_info_page");return n.extend({initialize:function(e){this.options=e||{}},getItemView:function(e){switch(e.get("page")){case"goods":return i;case"tradeincard":return o;case"info":return s}return t.View},onShow:function(){this.sortable()}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="custom-scroll edit-tpl-2016-11-11">\n    <div class="custom-scroll-page" style="margin: 0; border: 0; padding: 0;">\n        <h4>封面页面</h4>\n        <div class="form-block-with-demo">\n            <img class="block-demo js-preview-demo"\n                src="'+(null==(__t=fullfillImage("public_files/2016/11/07/0d296b1ad391478d23dc0c15823f48fe.png"))?"":__t)+'"\n                srcset="'+(null==(__t=fullfillImage("public_files/2016/11/07/f5b4154d93783dd27aac74661a810b03.png"))?"":__t)+' 2x"\n                data-src="public_files/2016/11/03/5e4054938b05eaf2c2dc7f12ae0546ee.jpg"\n                data-srcset="public_files/2016/11/03/10c7d06ec734886d3bc9b9cd76a35f30.jpg 2x"\n            />\n            <div class="block-form">\n                <form class="form-horizontal">\n                    <div class="control-group">\n                        <label class="control-label">标题：</label>\n                        <div class="controls">\n                            <input type="text" name="team_name" value="'+(null==(__t=team_name)?"":__t)+'" required maxLength="20">\n                            <p class="help-desc">建议不要超过10个字</p>\n                        </div>\n                    </div>\n                    <div class="control-group">\n                        <label class="control-label">活动名称：</label>\n                        <div class="controls">\n                            <input type="text" name="first_page_title" value="'+(null==(__t=first_page_title)?"":__t)+'" placeholder="本次活动的主题是什么" required maxLength="13">\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n    <div class="custom-scroll-page">\n        <h4>内容页面</h4>\n        <div>\n            <a href="javascript:;" data-tooltip-title="最多只能添加3页" class="ui-tooltip zent-btn zent-btn-primary-outline js-add-page js-add-tradeincard-page" data-page="tradeincard">添加“优惠券”页</a>\n            <a href="javascript:;" data-tooltip-title="最多只能添加3页" class="ui-tooltip zent-btn zent-btn-primary-outline js-add-page js-add-goods-page" data-page="goods">添加“商品”页</a>\n            <a href="javascript:;" data-tooltip-title="最多只能添加3页" class="ui-tooltip zent-btn zent-btn-primary-outline js-add-page js-add-info-page" data-page="info">添加“文字说明”页</a>\n        </div>\n        <div class="js-page-collection-region"></div>\n    </div>\n    <div class="custom-scroll-page">\n        <h4>封底页面</h4>\n        <div class="form-block-with-demo">\n            <img class="block-demo js-preview-demo"\n                src="'+(null==(__t=fullfillImage("public_files/2016/11/07/e57c43eddc7bde3dcd4a3cc7289cfabd.png"))?"":__t)+'"\n                srcset="'+(null==(__t=fullfillImage("public_files/2016/11/07/4a5f9986be0063e332a89be8eff87d56.png"))?"":__t)+' 2x"\n                data-src="public_files/2016/11/03/5efaf7e0146ff84a98872e94b01c5071.jpg"\n                data-srcset="public_files/2016/11/03/2898b03c106366e99108b97feac492f8.jpg"\n            />\n            <div class="block-form">\n                <form class="form-horizontal">\n                    <div class="control-group">\n                        <label class="control-label">页面标题：</label>\n                        <div class="controls">\n                            <input type="text" name="last_page_title" value="'+(null==(__t=last_page_title)?"":__t)+'" placeholder="本次活动的主题是什么" required maxLength="9">\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/edit",["require","underscore","jquery","core/utils","components/showcase/2.0.0/base/views/edit_base","components/modal/1.0.0/modal","./edit_page_collection","components/image_preview/app","tpl!../templates/edit"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("core/utils"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/modal/1.0.0/modal"),a=e("./edit_page_collection"),l=e("components/image_preview/app");return o.extend({template:e("tpl!../templates/edit"),regions:{pageCollectionRegion:".js-page-collection-region"},events:{'change input[name="team_name"]':"updateModel",'change input[name="first_page_title"]':"updateModel",'change input[name="last_page_title"]':"updateModel","click .js-preview-demo":"handlePreviewDemo","click .js-add-page":"handleAddPage"},templateHelpers:{logo:function(){return i.fullfillImage(window._global.template_logo,"!145x145.jpg")},fullfillImage:i.fullfillImage},updateModel:i.updateModel,onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleAddPageOption)},onShow:function(){this.pageCollectionRegion.show(new a({collection:this.model.get("sub_entry"),layout:this}))},onRender:function(){this.toggleAddPageOption()},handlePreviewDemo:function(e){var t=n(e.currentTarget),i=t.data("src"),o=t.data("srcset");i&&new l({images:{src:i,srcset:o}})},handleAddPage:function(e){var t=n(e.currentTarget),i=t.data("page");this.model.get("sub_entry").add({page:i})},addTradeincard:function(){var e=this;this.tradeincardModal=s.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(n){var i=e.model.get("tradeincard");t.each(n,function(e){i.length<3&&i.push({id:e.id,name:e.name,value:e.value,is_at_least:e.is_at_least,at_least:e.at_least})}),e.model.trigger("change:tradeincard"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},removeTradeincard:function(e){var t=n(e.target).parents("li").index();this.model.get("tradeincard").splice(t,1),this.model.trigger("change:tradeincard"),this.model.trigger("change")},toggleAddPageOption:function(){function e(e){return(t.filter(n,function(t){return t.page===e})||[]).length}var n=this.model.get("sub_entry").toJSON(),i=e("goods"),o=e("info"),s=e("tradeincard");i<3?this.$(".js-add-goods-page").addClass("js-add-page").removeClass("zent-btn-disabled"):this.$(".js-add-goods-page").removeClass("js-add-page").addClass("zent-btn-disabled"),o<3?this.$(".js-add-info-page").addClass("js-add-page").removeClass("zent-btn-disabled"):this.$(".js-add-info-page").removeClass("js-add-page").addClass("zent-btn-disabled"),s<3?this.$(".js-add-tradeincard-page").addClass("js-add-page").removeClass("zent-btn-disabled"):this.$(".js-add-tradeincard-page").removeClass("js-add-page").addClass("zent-btn-disabled")}})});define("text!components/music/2.0.0/templates/app.html",[],function(){return'<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <!-- 顶部tab -->\n    <ul class="module-nav modal-tab">\n        <li class="active"><a href="javascript:;" data-pane="public" class="js-modal-tab">配乐库</a> | </li>\n        <li><a href="javascript:;" data-pane="my" class="js-modal-tab">我的音乐</a></li>\n    </ul>\n</div>\n<div class="js-content-region">\n\n</div>\n<audio id="custom_scroll_audio_player" src=""></audio>\n'}),define("text!components/music/2.0.0/templates/public_music.html",[],function(){return'<div class="tab-pane">\n    <div class="modal-body">\n        <table class="ui-table ui-table-list">\n            <thead>\n                <tr>\n                    <th>音乐</th>\n                    <th class="text-center">时长</th>\n                    <th class="text-right">大小</th>\n                    <th class="text-center">风格</th>\n                    <th class="text-right">操作</th>\n                </tr>\n            </thead>\n            <tbody>\n                <% _.each(musics, function(music, index) { %>\n                <tr data-title="<%- music.title %>" data-url="<%- music.url %>">\n                    <td>\n                        <span class="music-preview js-paly-music"></span>\n                        <div class="music-content">\n                            <%= music.title %>\n                            <% if(music.description) { %>\n                                <p class="music-description"><%= music.description %></p>\n                            <% } %>\n                        </div>\n                    </td>\n                    <td class="text-center"><%- music.time %></td>\n                    <td class="text-right"><%- music.size %></td>\n                    <td class="text-center"><%- music.type %></td>\n                    <td class="text-right">\n                        <% if(music.url != currentUrl) { %>\n                        <button class="ui-btn js-btn-choose">选取</button>\n                        <% } else { %>\n                        <button class="ui-btn ui-btn-disabled">已选</button>\n                        <% } %>\n                    </td>\n                </tr>\n                <% }) %>\n            </tbody>\n        </table>\n\n    </div>\n    <div class="modal-footer">\n        <div class="pagenavi js-pagenavi">\n            <% for(var i = 1; i < totalPage + 1; i++ ) { %>\n            <a data-page-num="<%= i %>" href="javascript:;" class="num <% if(i == p) { %>active<% } %>"><%= i %></a>\n            <% } %>\n        </div>\n    </div>\n</div>\n'}),define("components/music/2.0.0/data",[],function(){"use strict";return{musics:[{title:"Lucky Day",url:"public_files/music/Lucky Day.mp3",type:"节奏",time:"01:08",size:"543 KB"},{title:"Parasail",url:"public_files/music/Parasail.mp3",type:"节奏",time:"03:04",size:"1.5 MB"},{title:"Phase Three",url:"public_files/music/Phase Three.mp3",type:"节奏",time:"03:08",size:"1.5 MB"},{title:"Say Yeah",url:"public_files/music/Say Yeah.mp3",type:"节奏",time:"03:11",size:"1.5 MB"},{title:"Soft",url:"public_files/music/Soft.mp3",type:"节奏",time:"01:23",size:"666 KB"},{title:"The Wrong Way",url:"public_files/music/The Wrong Way.mp3",type:"节奏",time:"02:45",size:"1.3 MB"},{title:"Road to Moscow",url:"public_files/music/Road to Moscow.mp3",type:"轻快",time:"01:14",size:"594 KB"},{title:"No Pressha",url:"public_files/music/No Pressha.mp3",type:"轻快",time:"01:27",size:"700 KB"},{title:"Rotten Gardenias",url:"public_files/music/Rotten Gardenias.mp3",type:"轻快",time:"02:17",size:"1.1 MB"},{title:"Sound Off",url:"public_files/music/Sound Off.mp3",type:"轻快",time:"01:36",size:"769 KB"},{title:"Swamp Stomp",url:"public_files/music/Swamp Stomp.mp3",type:"轻快",time:"02:05",size:"1 MB"},{title:"Jazz In Paris",url:"public_files/music/Jazz In Paris.mp3",type:"轻快",time:"01:42",size:"821 KB"},{title:"Let's Do It",url:"public_files/music/Let's Do It.mp3",type:"放松",time:"03:14",size:"1.6 MB"},{title:"Monks",url:"public_files/music/Monks.mp3",type:"放松",time:"03:10",size:"1.5 MB"},{title:"Pluto",url:"public_files/music/Pluto.mp3",type:"放松",time:"02:13",size:"1.1 MB"},{title:"抱着你",url:"public_files/music/baozheni.mp3",type:"放松",time:"04:28",size:"1.9 MB",description:"由有赞商户 <em>VINOTECA</em> 提供正版授权"}]}}),define("components/music/2.0.0/views/public_music",["require","underscore","jquery","marionette","text!components/music/2.0.0/templates/public_music.html","components/music/2.0.0/data"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("text!components/music/2.0.0/templates/public_music.html"),s=e("components/music/2.0.0/data")
;return i.Layout.extend({template:t.template(o),events:{"click .js-pagenavi .num":"handlePageClick"},p:1,initialize:function(e){this.options=e||{},this.layout=this.options.layout},serializeData:function(){var e={};return e.musics=s.musics.slice(10*(this.p-1),10*this.p),t.extend(e,{currentUrl:this.options.currentUrl,p:this.p,totalPage:Math.ceil(s.musics.length/10)})},handlePageClick:function(e){var t=+n(e.target).data("page-num");t!==this.p&&(this.p=t,this.render(),this.layout.stopMusic())}})}),define("components/music/2.0.0/models/music",["require","underscore","jquery","backbone","core/utils","cookie"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("core/utils"),s=window._global;return e("cookie"),i.Model.extend({defaults:{items:null,page:"",p:1},sync:function(e){return o.ajax(e)},ajax:function(e,i){var o=n.Deferred();return"object"==typeof e&&(i=e,e=void 0),i=t.defaults(i||{},{dataType:"json"}),o.xhr=n.ajax(e,i).done(function(e){0==+e.code?o.resolve(e.data,e):o.reject(e.errmsg,e)}).fail(function(){o.reject("数据错误",{code:-1,msg:"数据错误"})}),o},fetch:function(e){var n=this;return e=e||{},this.ajax({url:s.url.materials+"/shop/musicList.json",method:"GET",data:t.extend({s:10,p:this.get("p")},e),xhrFields:{withCredentials:!0}}).done(function(e){n.set({items:e.data_list,page:e.page_view},{silent:!0}),n.trigger("sync")}).fail(function(e){o.errorNotify(e)})},uploadMusic:function(){var e=this,t=n.Deferred();return this.getToken().done(function(n){e.upload(n.uptoken).done(function(e,n){t.resolve(e,n)}).fail(function(e){t.reject(e)})}).fail(function(){t.reject("获取token失败，请重试。")}),t},getToken:function(){return this.sync({url:s.url.materials+"/shop/pubMusicUploadToken.json",method:"POST",data:{scope:s.js.qn_public,kdt_id:n.cookie("kdt_id")},xhrFields:{withCredentials:!0}})},upload:function(e){var t=new FormData;return t.append("token",e),t.append("file",this.get("file")),t.append("x:kdt_type","music"),this.sync({url:"//upload.qbox.me",method:"POST",data:t,processData:!1,disableCsrfToken:!0,contentType:!1})}})}),define("text!components/music/2.0.0/templates/my_music.html",[],function(){return'<div class="tab-pane">\n    <div class="modal-body">\n        <div class="ui-box music-upload">\n            <p>根据中国相关法律、法规和规范性文件要求，有赞制定了旨在保护知识产权权利人合法权益的措施和步骤。如背景音乐上传者上传的内容侵犯音乐著作权权利人相关权益，责任由上传者全部承担，有赞不承担任何连带责任。</p>\n\n\n            <div class="music-upload-btn">\n                <a class="ui-btn ui-btn-primary music-upload-label js-music-upload-label" href="javascript:;" data-loading-text="正在上传...">同意协议，上传音乐</a>\n                <input class="music-upload-input fileupload js-upload-music-input" type="file" name="upload_music">\n                <span class="c-gray" style="margin-left: 10px;">支持MP3格式音乐，大小不超过6M</span>\n            </div>\n\n        </div>\n\n        <% if(items && items.length > 0) { %>\n            <table class="ui-table ui-table-list">\n                <thead>\n                    <tr>\n                        <th>音乐</th>\n                        <th class="text-right">操作</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <% _.each(items, function(music, index) { %>\n                    <tr data-title="<%- music.attachment_title.replace(/\\.mp3$/i, \'\') %>" data-url="<%- music.attachment_url %>">\n                        <td>\n                            <span class="music-preview js-paly-music"></span>\n                            <div class="music-content">\n                                <%= music.attachment_title.replace(/\\.mp3$/i, \'\') %>\n                                <% if(music.description) { %>\n                                    <p class="music-description"><%= music.description %></p>\n                                <% } %>\n                            </div>\n                        </td>\n                        <td class="text-right">\n                            <button class="ui-btn js-btn-choose">选取</button>\n                        </td>\n                    </tr>\n                    <% }) %>\n                </tbody>\n            </table>\n        <% } else { %>\n        <div class="no-result">还没有上传的音乐。</div>\n        <% } %>\n    </div>\n    <div class="modal-footer">\n        <div class="pagenavi js-pagenavi">\n            <%= page %>\n        </div>\n    </div>\n</div>\n'}),define("components/music/2.0.0/views/my_music",["require","underscore","jquery","marionette","components/music/2.0.0/models/music","core/utils","text!components/music/2.0.0/templates/my_music.html"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("components/music/2.0.0/models/music"),s=e("core/utils"),a=e("text!components/music/2.0.0/templates/my_music.html");return i.Layout.extend({template:t.template(a),events:{"click .js-pagenavi .num":"handlePageClick","change .js-upload-music-input":"handleFileChange","click .pagenavi a:not(.active)":"handlePageNumClick","keypress .pagenavi a.active":"handlePageNumKeypress"},modelEvents:{sync:"render"},initialize:function(e){this.options=e||{},this.layout=this.options.layout,this.model=new o,this.model.fetch()},onRender:function(){this.layout.stopMusic()},handlePageClick:function(e){+n(e.target).data("page-num")!==this.p&&this.layout.stopMusic()},handleFileChange:function(e){var t=this,n=e.target.files[0];return n.name.match(/(\.|\/)(mp3)$/i)?n.size>6291456?void s.errorNotify("音乐文件大小不能超过6MB。"):(this.$(".js-music-upload-label").btn("loading"),this.$(".js-upload-music-input").hide(),this.model.set("file",n,{silent:!0}),void this.model.uploadMusic().done(function(e){t.options.callback&&t.options.callback({url:e.attachment_full_url,title:e.attachment_title.replace(/\.mp3$/i,"")}),t.layout.$el.modal("hide")}).fail(function(e){s.errorNotify(e),t.$(".js-music-upload-label").btn("reset"),t.$(".js-upload-music-input").show()})):void s.errorNotify("请选择MP3格式的音乐文件。")},handlePageNumClick:function(e){var t=n(e.currentTarget),i=t.data("page-num");this.model.set("p",i,{silent:!0}),this.model.fetch()},handlePageNumKeypress:function(e){var t=+n(e.currentTarget).text();s.isNumber(e)||e.preventDefault(),e.keyCode===s.keyCode.ENTER&&(t!==+this.model.get("p")&&t&&(this.model.set("p",t,{silent:!0}),this.model.fetch({scroll:!0})),e.preventDefault())}})}),define("components/music/2.0.0/music",["require","underscore","jquery","marionette","text!components/music/2.0.0/templates/app.html","components/music/2.0.0/views/public_music","components/music/2.0.0/views/my_music","core/utils","components/spider/spider"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("text!components/music/2.0.0/templates/app.html"),s=e("components/music/2.0.0/views/public_music"),a=e("components/music/2.0.0/views/my_music"),l=e("core/utils");e("components/spider/spider");var r=i.Layout.extend({className:"modal fade hide music-v2-modal",template:t.template(o),events:{hidden:"hidden","click .js-modal-tab":"handleTabClick","click .js-btn-choose":"chooseMusic","click .js-paly-music":"playMusic"},regions:{content:".js-content-region"},initialize:function(e){this.options=e||{},this.cache={},this.render()},onRender:function(){this.renderPublicMusicView(),this.$el.modal("show"),this.initPlayer()},renderPublicMusicView:function(){this.content.show(new s(t.extend({layout:this},this.options)))},renderMyMusicView:function(){this.content.show(new a(t.extend({layout:this},this.options)))},handleTabClick:function(e){var t=n(e.target),i=t.parent(),o=t.data("pane");i.hasClass("active")||(this.$(".modal-tab > li").removeClass("active"),i.addClass("active"),"public"===o?this.renderPublicMusicView():this.renderMyMusicView(),this.stopMusic())},initPlayer:function(){var e=this;this.player=this.$("#custom_scroll_audio_player")[0],this.player.addEventListener("ended",function(){e.$(".playing").removeClass("playing")})},chooseMusic:function(e){var t=n(e.target),i=t.parents("tr").data();this.options.callback&&this.options.callback(i),this.hideModal()},playMusic:function(e){var t=n(e.target),i=t.parents("tr").data();t.hasClass("playing")?(t.removeClass("playing"),this.player.pause(),this.player.currentTime=0):(this.$(".playing").removeClass("playing"),t.addClass("playing"),this.player.src=l.fullfillImage(i.url),this.player.play())},stopMusic:function(){this.$(".playing").removeClass("playing"),0!==this.player.readyState&&(this.player.pause(),this.player.currentTime=0)},hideModal:function(){this.$el.modal("hide")},hidden:function(){this.$el.data("modal",null),this.close()},onClose:function(){this.player=null}});return{initialize:function(e){new r(e)}}}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit_meta.html",[],function(){return'<form class="form-horizontal">\n    <div class="control-group">\n        <label class="control-label">背景音乐：</label>\n        <div class="controls">\n            <label class="checkbox inline">\n                <input type="checkbox" name="music_icon" <% if(music_icon == \'1\') {%>checked<%}%>>\n                启用背景音乐：\n            </label>\n\n            <% if (music_icon == \'1\') { %>\n                <% if(music_url) { %>\n                    <div class="music-box">\n                        <span class="label label-success js-music"><%= music_title %></span>\n                        <a href="javascript:;" class="js-delete-music close-modal" title="删除">×</a>\n                    </div>\n                    <a href="javascript:;" class="choose-music js-music">修改</a>\n                <% } else { %>\n                    <a href="javascript:;" class="choose-music js-music">选择音乐</a>\n                <% } %>\n            <% } %>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/edit_meta",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","components/music/2.0.0/music","text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit_meta.html"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/music/2.0.0/music"),a=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit_meta.html");n.exports=o.extend({className:"ui-box",template:i.template(a),events:{'change input[type="checkbox"]':"updateModel","click .js-music":"handleMusicClick","click .js-delete-music":"handleDeleteMusicClick"},modelEvents:{"change:music_url":"render","change:music_icon":"render"},bindValidation:function(){},handleMusicClick:function(){s.initialize({callback:i.bind(this.choseMusice,this),currentUrl:this.model.get("music_url")})},choseMusice:function(e){this.model.set({music_url:e.url,music_title:e.title})},handleDeleteMusicClick:function(){this.model.set({music_url:"",music_title:""})}})}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/announcement.html",[],function(){return'<h4>店铺公告</h4>\n\n<div class="announcement-page"></div>\n\n<form class="form-horizontal announcement-form">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input type="text" name="announcement_title" value="<%= announcement_title %>">\n        </div>\n    </div>\n    <div class="control-group">\n\n    </div>\n    <div class="control-group">\n        <label class="control-label">公告内容：</label>\n        <div class="controls">\n            <textarea class="announcement-content" name="announcement_content"><%= announcement_content %></textarea>\n        </div>\n    </div>\n    <div class="control-group">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/announcement",["require","exports","module","components/ueditor_plugins/app","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_dragon_boat/templates/announcement.html"],function(e,t,n){e("components/ueditor_plugins/app");var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/announcement.html");n.exports=o.extend({className:"custom-scroll-page",template:i.template(s),events:{"change input":"updateModel","change textarea":"updateModel"},bindValidation:function(){}})}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/goods_slide.html",[],function(){return'<div class="goods-page type-<%= goods_display_num %>">\n\n</div>\n\n<form class="form-horizontal goods-form">\n    <div class="control-group">\n        <label class="control-label">商品个数：</label>\n        <div class="controls">\n            <label class="radio inline"><input type="radio" value="1" name="goods_display_num" <%= goods_display_num == 1 ? \'checked\' : \'\' %>>1</label>\n            <label class="radio inline"><input type="radio" value="2" name="goods_display_num" <%= goods_display_num == 2 ? \'checked\' : \'\' %>>2</label>\n            <label class="radio inline"><input type="radio" value="3" name="goods_display_num" <%= goods_display_num == 3 ? \'checked\' : \'\' %>>3</label>\n            <label class="radio inline"><input type="radio" value="4" name="goods_display_num" <%= goods_display_num == 4 ? \'checked\' : \'\' %>>4</label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">选择商品：</label>\n        <div class="controls">\n            <ul class="module-goods-list clearfix type-<%= goods_display_num %>" name="goods">\n                <% _.each(goods, function(item, index) { %>\n                    <li class="sort">\n                        <a href="<%= item.url %>" target="_blank"><img src="<%= fullfillImage(item.image_url, \'!100x100.jpg\') %>" alt="商品图" width="50" height="50"></a>\n                        <a class="close-modal js-delete-goods small hide" data-id="<% item.id %>" title="删除">×</a>\n                    </li>\n                <% }); %>\n                <% _.times(goods_display_num - goods.length, function(n) { %>\n                    <li>\n                        <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n                    </li>\n                <% }); %>\n            </ul>\n        </div>\n    </div>\n</form>\n\n<div class="actions">\n    <span class="action close-modal js-delete" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_dragon_boat/templates/goods_slide.html","components/modal/1.0.0/modal","core/utils"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/goods_slide.html"),a=e("components/modal/1.0.0/modal"),l=e("core/utils");n.exports=o.extend({tagName:"li",className:"choice",template:i.template(s),templateHelpers:{fullfillImage:l.fullfillImage},events:{'change input[type="radio"]':"updateModel","click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods","click .js-delete":"handleDeletePage"},modelEvents:{"change:goods":"render","change:goods_display_num":"render"},onRender:function(){var e=this;this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.model.trigger("change:goods"))}})},handleDeleteGoods:function(e){var t=$(e.target),n=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGoods(n,1)},handleAddGoods:function(){var e=this;this.goodsModal=a.initialize({type:"goods",hide:["tag"],multiChoose:!1}).setChooseItemCallback(function(t){e.model.get("goods").push({id:t.data_id,url:t.data_url,image_url:t.image_url,image_id:t.data_id||t.id||"",price:"0"!=t.data_price?(t.data_price/100).toFixed(2):0,title:t.title}),e.model.trigger("change:goods")}),this.goodsModal.modal("show")},handleDeletePage:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide_collection",["require","exports","module","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide"],function(e,t,n){var i=e("components/showcase/2.0.0/base/views/edit_collection_base"),o=e("components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide");n.exports=i.extend({itemView:o,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/end.html",[],function(){return'<h4>封底页</h4>\n<div class="last-page"></div>\n<form class="form form-horizontal">\n    <div class="control-group">\n        <label class="control-label">链接地址：</label>\n        <div class="controls">\n            <%= renderLink(link_url, link_title, link_type) %>\n            <input type="hidden" name="link_url">\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/end",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/tpl_dragon_boat/templates/end.html","components/setup_link/render_link","components/setup_link/bind_link"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/end.html"),a=e("components/setup_link/render_link"),l=e("components/setup_link/bind_link");n.exports=o.extend({className:"custom-scroll-page",template:i.template(s),templateHelpers:{renderLink:a},events:{'blur input[type="text"]:not(.js-fullfill-url)':"updateModel","blur .js-fullfill-url":"urlCheck"},bindValidation:function(){},onInit:function(){this.listenTo(this.model,"change",this.render),l.call(this)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},onLinkChange:function(e){e.link_type&&"link"!=e.link_type&&this.model.set("title",this.getOldTitle()||e.link_title,{silent:!0}),this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},getOldTitle:function(){var e=this.model.toJSON();return e.title&&e.title!==e.link_title?e.title:""}})}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit.html",[],function(){return'<div class="custom-scroll tpl-dragon-boat">\n    <div class="js-meta-region"></div>\n    <div class="custom-scroll-page">\n        <h4>封面图</h4>\n        <div class="first-page"></div>\n    </div>\n\n    <div class="custom-scroll-page">\n        <h4>过场页面</h4>\n        <div class="js-pages-region">\n        </div>\n        <div class="js-options options" style="margin-top: 10px;">\n            <a href="javascript:;" class="add-option js-add-page"><i class="icon-add"></i> 添加一页</a>\n        </div>\n        <form class="horizontal">\n            <div class="control-group">\n                <div class="controls" style="margin: 5px 0 0">\n                    <input type="text" name="sub_entry" style="visibility: hidden;position: absolute;">\n                </div>\n            </div>\n        </form>\n    </div>\n\n    <div class="js-announcement-page-region"></div>\n\n    <div class="js-end-page-region"></div>\n</div>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/edit",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/tpl_dragon_boat/views/edit_meta","components/showcase/2.0.0/tpl_dragon_boat/views/announcement","components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide_collection","components/showcase/2.0.0/tpl_dragon_boat/views/end","components/showcase/2.0.0/tpl_dragon_boat/models/goods_slide_model","text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit.html"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("components/showcase/2.0.0/tpl_dragon_boat/views/edit_meta"),a=e("components/showcase/2.0.0/tpl_dragon_boat/views/announcement"),l=e("components/showcase/2.0.0/tpl_dragon_boat/views/goods_slide_collection"),r=e("components/showcase/2.0.0/tpl_dragon_boat/views/end"),c=e("components/showcase/2.0.0/tpl_dragon_boat/models/goods_slide_model"),d=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/edit.html");n.exports=o.extend({template:i.template(d),regions:{metaRegion:".js-meta-region",pagesRegion:".js-pages-region",announcementRegion:".js-announcement-page-region",endRegion:".js-end-page-region"},events:{"click .js-add-page":"addPage"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.metaRegion.show(new s({model:this.model})),this.pagesRegion.show(new l({collection:this.model.get("sub_entry")})),this.announcementRegion.show(new a({model:this.model})),this.endRegion.show(new r({model:this.model})),this.toggleOptions()},addPage:function(){this.model.get("sub_entry").add(new c({goods:[]}))},toggleOptions:function(){this.model.get("sub_entry").length>=30?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("text!components/showcase/2.0.0/tpl_take_away/templates/edit.html",[],function(){return'<div class="custom-scroll">\n\t<!-- 信息内容 -->\n\t<div>\n\t\t<h4 style="margin-bottom: 10px;">信息内容</h4>\n\t\t<p>该区域展示内容为店铺Logo、店铺名称、店铺活动（仅支持减金额和包邮 ）、消费者的订单记录。</p>\n\t</div>\n\n\t<div class="js-page-collection-region"></div>\n</div>\n'}),define("tpl!components/showcase/2.0.0/tpl_take_away/templates/notice_page",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form novalidate onsubmit="return false" style="margin-top: 20px; border-top: 1px solid #e5e5e5; padding-top: 20px;">\n    <div class="control-group">\n        <label class="control-label" style="margin-bottom: 10px;"><em style="font-size: 16px;color: #f00;">*</em>公告</label>\n    \t<div class="controls" style="margin-left: 0;">\n        \t<input type="text" name="content" value="'+(null==(__t=content)?"":__t)+'" class="input-xxlarge" placeholder="',__p+=1===window._global.is_weapp_setting?"请填写公告内容":"请填写内容，如果过长，将会在手机上滚动显示",__p+='" />\n        </div>\n    </div>\n</form>\n';return __p}}),define("components/showcase/2.0.0/tpl_take_away/views/notice_page",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","tpl!../templates/notice_page"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils");return t.extend({template:e("tpl!../templates/notice_page"),events:{"blur input":"updateModel"},updateModel:n.updateModel})}),define("text!components/showcase/2.0.0/tpl_take_away/templates/edit_item.html",[],function(){return'<div class="edit-tag-list">\n    <div class="tag-source takeout-tag-source">\n        <div class="control-group">\n            <label class="control-label pull-left">商品来源：</label>\n            <div class="controls pull-left">\n                <% if(title) { %>\n                        <a href="<%- url %>" target="_blank" class="tag-title new-window takeout-tag-title"><%- title %></a>\n                        <a href="javascript:;" class="tag-modify js-select-tag takeout-tag-modify">修改</a>\n                <% } else { %>\n                    <a href="javascript:;" class="js-select-tag pull-left">选择商品分组</a>\n                <% } %>\n                <input type="hidden" name="title">\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("components/showcase/2.0.0/tpl_take_away/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","text!../templates/edit_item.html","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!../templates/edit_item.html"),s=e("components/modal/1.0.0/modal");e("core/utils");return i.extend({tagName:"li",className:"choice",template:t.template(o),events:{"click .actions .delete":"delete","click .js-select-tag":"handleSelectTag","click .js-goods-number":"handleGoodsNumber"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},delete:function(){var e=this.model.collection;this.model.destroy(),e.trigger("reset")},handleSelectTag:function(){var e=this;this.tagModel=s.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set({alias:t.data_alias,type:t.data_type,id:t.data_id,title:t.title,url:t.data_url})}),this.tagModel.modal("show")},handleGoodsNumber:function(e){var t=n(e.target).data("value");this.model.set("goods_number",t,{silent:!0}),this.render()}})}),define("components/showcase/2.0.0/tpl_take_away/views/take_away_tag_list_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","./edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("./edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("tpl!components/showcase/2.0.0/tpl_take_away/templates/take_away_tag_list_page",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div style="margin-top: 20px; border-top: 1px solid #e5e5e5; padding-top: 20px;">\n\t<h4 style="margin-bottom: 10px;">商品分组</h4>\n\t<div class="control-group js-collection-region">\n\n\t</div>\n\t<div class="control-group options js-add-subentry">\n\t    <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加商品分组</a>\n\t</div>\n\n    <div class="control-group">\n        <div class="controls" name="sub_entry" style="margin-left: 0;"></div>\n    </div>\n\n\t<div class="control-group">\n\t    <p class="app-component-desc" style="font-size: 12px; color:#666;">最多添加'+(null==(__t=MAX_TAG_NUMBER)?"":_.escape(__t))+"个商品分组，每个商品分组最多显示100个商品</p>\n\t</div>\n</div>\n";return __p}}),define("components/showcase/2.0.0/tpl_take_away/views/take_away_tag_list_page",["require","underscore","components/showcase/2.0.0/base/views/edit_base","./take_away_tag_list_collection","components/modal/1.0.0/modal","core/utils","jquery","tpl!../templates/take_away_tag_list_page"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("./take_away_tag_list_collection"),o=e("components/modal/1.0.0/modal"),s=e("core/utils"),a=e("jquery");return n.extend({template:e("tpl!../templates/take_away_tag_list_page"),events:{"click .js-add-option":"addOption","click .js-toggle-type":"toggleTagType"},regions:{collectionRegion:".js-collection-region"},templateHelpers:{MAX_TAG_NUMBER:30},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addOption:function(){var e=this,n=e.model.get("sub_entry");o.initialize({multiChoose:!0,type:"tag"}).setChooseItemCallback(function(e){var i=!1,o=0;if(t.each(e,function(e){if(n.where({id:e.id}).length>0)return o++,!0;n.length<30?n.add({alias:e.data_alias,type:e.data_type,id:e.data_id,title:e.title,url:e.data_url}):i=!0}),o>0){var a=setTimeout(s.clearNotify,3e3);s.errorNotify("你添加了"+o+"个重复分组，重复分组将不会被添加。",function(){clearTimeout(a)})}if(i){var a=setTimeout(s.clearNotify,3e3);s.errorNotify("商品分组不能多于30个，已经自动删除多余的分组。",function(){clearTimeout(a)})}}).modal("show")},toggleOptions:function(){this.model.get("sub_entry").length>=30?this.$(".options").hide():this.$(".options").show()},toggleTagType:function(e){var t=this.layout,n=a(e.target).data("field-type"),i=this.layout.collection,o=this.model,s=window.SHOWCASE_CONFIG.models[n].initialize(o.configCache);s.configCache=o.toJSON(),i.add(s,{at:o.index(),silent:!0}),i.trigger("reset"),o.destroy(),t.displayEditView(s)}})}),define("components/showcase/2.0.0/tpl_take_away/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","./notice_page","./take_away_tag_list_page"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("./notice_page"),i=e("./take_away_tag_list_page");return t.extend({getItemView:function(e){switch(e.get("type")){case"notice":return n;case"take_away_tag_list":return i}return Backbone.View}})}),define("components/showcase/2.0.0/tpl_take_away/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!../templates/edit.html","./edit_collection","components/modal/1.0.0/modal","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!../templates/edit.html"),o=e("./edit_collection");e("components/modal/1.0.0/modal"),e("core/utils");return n.extend({template:t.template(i),regions:{pageCollectionRegion:".js-page-collection-region"},onShow:function(){this.pageCollectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/category/templates/edit_item.html",[],function(){return'<div class="control-group">\n    <label class="control-label">名称：</label>\n    <div class="controls">\n        <input class="" type="text" name="title" value="<%- title %>" maxLength="6">\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label"><em class="required">*</em>链接到：</label>\n    <div class="controls">\n        <input type="hidden" name="link_url">\n        <%= renderLink(link_url, link_title, link_type) %>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/category/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/category/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/category/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){return{renderLink:o}},events:{'blur input[type="text"]':"updateModel"},onInit:function(){this.listenTo(this.model,"change:link_url",this.render),s.call(this)},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})}})}),define("components/showcase/2.0.0/category/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/category/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/category/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/category/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group js-collection-region">\n\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/category/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/category/views/edit_collection","text!components/showcase/2.0.0/category/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/category/views/edit_collection"),o=e("text!components/showcase/2.0.0/category/templates/edit.html");return n.extend({template:t.template(o),regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/white/templates/edit.html",[],function(){
return'<form class="form-horizontal" novalidate>\n    <div class="control-group white-space-group">\n        <label class="control-label">空白高度：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height"><span class="js-height"><%= height %></span> 像素</div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/white/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/white/templates/edit.html","jqueryui"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/white/templates/edit.html");return e("jqueryui"),n.extend({template:t.template(i),ui:{slider:".js-slider",height:".js-height"},onShow:function(){var e=this;this.ui.slider.slider({min:10,max:100,value:e.model.get("height"),slide:function(n,i){var o=i.value;t.isNumber(o)&&e.model.set("height",o),e.ui.height.text(o)}})}})}),define("text!components/showcase/2.0.0/white_weapp/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group white-space-group">\n        <label class="control-label">空白高度：</label>\n        <div class="controls controls-slider">\n            <div class="js-slider white-space-slider"></div>\n            <div class="slider-height"><span class="js-height"><%= height %></span> 像素</div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/white_weapp/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/white_weapp/templates/edit.html","jqueryui"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/white_weapp/templates/edit.html");return e("jqueryui"),n.extend({template:t.template(i),ui:{slider:".js-slider",height:".js-height"},onShow:function(){var e=this;this.ui.slider.slider({min:10,max:100,value:e.model.get("height"),slide:function(n,i){var o=i.value;t.isNumber(o)&&e.model.set("height",o),e.ui.height.text(o)}})}})}),define("text!components/showcase/2.0.0/store/templates/edit.html",[],function(){return'<div class="app-component-desc">\n    <p>进入店铺</p>\n</div>\n'}),define("components/showcase/2.0.0/store/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/store/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/store/templates/edit.html");return n.extend({template:t.template(i)})}),define("tpl!components/showcase/2.0.0/recommend_goods/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<p>如果店铺中上架的商品数量少于10个，这个组件将不会在页面中显示。</p>\n";return __p}}),define("components/showcase/2.0.0/recommend_goods/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","tpl!../templates/edit"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/edit_base").extend({className:"app-component-desc",template:e("tpl!../templates/edit")})}),define("text!components/showcase/2.0.0/scroll/templates/edit_meta.html",[],function(){return'<div class="control-group">\n    <label class="control-label">主页图标：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="homepage_icon" <% if(homepage_icon == \'1\') {%>checked<%}%>>\n            显示店铺主页图标，用户点击后进入店铺主页\n        </label>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">背景音乐：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="music_icon" <% if(music_icon == \'1\') {%>checked<%}%>>\n            启用背景音乐：\n        </label>\n\n        <% if(music_url) { %>\n            <div class="music-box">\n                <span class="label label-success js-music"><%= music_title %></span>\n                <a href="javascript:;" class="js-delete-music close-modal" title="删除">×</a>\n            </div>\n            <a href="javascript:;" class="choose-music js-music">修改</a>\n        <% } else { %>\n            <a href="javascript:;" class="choose-music js-music">选择音乐</a>\n        <% } %>\n    </div>\n</div>\n<div class="control-group">\n    <label class="control-label">循环滚动：</label>\n    <div class="controls">\n        <label class="checkbox inline">\n            <input type="checkbox" name="loop" <% if(loop == \'1\') {%>checked<%}%>>\n            封底页可继续滑动切换到封面\n        </label>\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label" style="width: 108px">场景切换方式：</label>\n    <div class="controls">\n        <select name="flipway" class="input-small">\n            <option value="default" <%if(flipway==\'default\'){%>selected<%}%> >普通</option>\n            <option value="zoomOut" <%if(flipway==\'zoomOut\'){%>selected<%}%> >缩小</option>\n        </select>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll/views/edit_meta",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/music/2.0.0/music","text!components/showcase/2.0.0/scroll/templates/edit_meta.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/music/2.0.0/music"),o=e("text!components/showcase/2.0.0/scroll/templates/edit_meta.html");return n.extend({className:"ui-box",template:t.template(o),events:{'change input[type="checkbox"]':"updateModel",'change select[name="flipway"]':"updateModel","click .js-music":"handleMusicClick","click .js-delete-music":"handleDeleteMusicClick"},modelEvents:{"change:music_url":"render"},bindValidation:function(){},handleMusicClick:function(){i.initialize({callback:t.bind(this.choseMusice,this),currentUrl:this.model.get("music_url")})},choseMusice:function(e){this.model.set({music_url:e.url,music_title:e.title})},handleDeleteMusicClick:function(){this.model.set({music_url:"",music_title:""})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_first_page.html",[],function(){return'<h4>封面页</h4>\n<div class="ui-box clearfix">\n    <% if(first_page_wipe == \'0\') { %>\n        <% if(first_page_image_url) { %>\n            <div class="image-box">\n                <img src="<%= fullfillImage(first_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                <a href="javascript:;" class="modify-image js-first-page-image">重新上传</a>\n            </div>\n        <% } else { %>\n            <a href="javascript:;" class="add-image js-first-page-image"><i class="icon-add"></i> 添加图片</a>\n            <div class="control-group">\n                <div class="controls" style="margin: 2px;">\n                    <input type="hidden" name="first_page_image_url">\n                </div>\n            </div>\n        <% } %>\n    <% } else { %>\n        <div class="pull-left before-wipe">\n            <div class="pull-left">擦拭前：</div>\n            <div class="pull-left">\n                <% if(first_page_wipe_image_id) { %>\n                    <div class="image-box">\n                        <img src="<%= fullfillImage(first_page_wipe_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                        <a href="javascript:;" class="modify-image js-first-page-wipe-image">重新上传</a>\n                    </div>\n                <% } else { %>\n                    <a href="javascript:;" class="add-image js-first-page-wipe-image"><i class="icon-add"></i> 添加图片</a>\n                <% } %>\n            </div>\n        </div>\n        <div class="pull-left after-wipe">\n            <div class="pull-left">擦拭后：</div>\n            <div class="pull-left">\n                <% if(first_page_image_id) { %>\n                    <div class="image-box">\n                        <img src="<%= fullfillImage(first_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                        <a href="javascript:;" class="modify-image js-first-page-image">重新上传</a>\n                    </div>\n                <% } else { %>\n                    <a href="javascript:;" class="add-image js-first-page-image"><i class="icon-add"></i> 添加图片</a>\n                    <div class="control-group">\n                        <div class="controls" style="margin: 2px;">\n                            <input type="hidden" name="first_page_image_url">\n                        </div>\n                    </div>\n                <% } %>\n            </div>\n        </div>\n    <% } %>\n</div>\n<label class="checkbox inline">\n    <input type="checkbox" name="first_page_wipe" <% if(first_page_wipe == \'1\') {%>checked<%}%>>\n    启用擦拭屏幕后显示的交互效果\n</label>\n'}),define("components/showcase/2.0.0/scroll/views/edit_first_page",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","text!components/showcase/2.0.0/scroll/templates/edit_first_page.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/attachment/image/app"),o=e("text!components/showcase/2.0.0/scroll/templates/edit_first_page.html"),s=e("core/utils");return n.extend({className:"custom-scroll-page",template:t.template(o),templateHelpers:{fullfillImage:s.fullfillImage},events:{'change input[type="checkbox"]':"updateModel","click .js-first-page-image":"handleImageClick","click .js-first-page-wipe-image":"handleWipeImageClick"},modelEvents:{"change:first_page_wipe":"render","change:first_page_image_id":"render","change:first_page_wipe_image_id":"render"},bindValidation:function(){},handleImageClick:function(){var e=t.bind(function(e){this.model.set({first_page_image_id:e.attachment_id,first_page_image_url:e.attachment_url,first_page_image_thumb_url:e.thumb_url,first_page_image_width:Number(e.width),first_page_image_height:Number(e.height)})},this);this.chooseImage(e)},handleWipeImageClick:function(){var e=t.bind(function(e){this.model.set({first_page_wipe_image_id:e.attachment_id,first_page_wipe_image_url:e.attachment_url,first_page_wipe_image_thumb_url:e.thumb_url,first_page_wipe_image_width:Number(e.width),first_page_wipe_image_height:Number(e.height)})},this);this.chooseImage(e)},chooseImage:function(e){i.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(n){n=n[0],t.isFunction(e)&&e(n)}})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_last_page.html",[],function(){return'<h4>封底页</h4>\n<div class="clearfix">\n    <div class="pull-left">\n        <% if(last_page_image_url) { %>\n            <div class="image-box">\n                <img src="<%= fullfillImage(last_page_image_url, \'!140x140+2x.jpg\') %>" class="image">\n                <a href="javascript:;" class="modify-image js-last-page-image">重新上传</a>\n            </div>\n        <% } else { %>\n            <a href="javascript:;" class="add-image js-last-page-image"><i class="icon-add"></i> 添加图片</a>\n            <div class="control-group">\n                <div class="controls" style="margin: 2px;">\n                    <input type="hidden" name="last_page_image_url">\n                </div>\n            </div>\n        <% } %>\n    </div>\n    <div class="pull-left">\n        <div class="control-group">\n            <label class="control-label">链接：</label>\n            <div class="controls">\n                <%= renderLink(last_page_link_url, last_page_link_title, last_page_link_type) %>\n            </div>\n        </div>\n    </div>\n</div>\n\n'}),define("components/showcase/2.0.0/scroll/views/edit_last_page",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","components/setup_link/render_link","components/setup_link/bind_link","text!components/showcase/2.0.0/scroll/templates/edit_last_page.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/attachment/image/app"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("text!components/showcase/2.0.0/scroll/templates/edit_last_page.html"),l=e("core/utils");return n.extend({className:"custom-scroll-page",template:t.template(a),templateHelpers:function(){return{fullfillImage:l.fullfillImage,renderLink:o}},events:{"click .js-last-page-image":"handleImageClick"},modelEvents:{"change:last_page_image_url":"render","change:last_page_link_url":"render"},onInit:function(){s.call(this)},bindValidation:function(){},handleImageClick:function(){var e=this;i.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({last_page_image_id:t.attachment_id,last_page_image_url:t.attachment_url,last_page_image_thumb_url:t.thumb_url,last_page_image_width:Number(t.width),last_page_image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({last_page_link_id:e.link_id,last_page_link_type:e.link_type,last_page_link_title:e.link_title,last_page_link_url:e.link_url})}})}),define("text!components/showcase/2.0.0/scroll/templates/edit_item.html",[],function(){return'<div class="choice-image-box">\n    <% if(image_url) { %>\n        <div class="image-box">\n            <img src="<%= fullfillImage(image_url, \'!140x140+2x.jpg\') %>" class="image">\n            <a href="javascript:;" class="modify-image js-page-image">重新上传</a>\n        </div>\n    <% } else { %>\n        <a href="javascript:;" class="add-image js-page-image"><i class="icon-add"></i> 添加图片</a>\n        <div class="control-group">\n            <div class="controls">\n                <input type="hidden" name="image_url">\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n    <div class="control-group">\n        <div class="controls">\n            <div class="control-action">\n                <a href="javascript:;" class="js-pop-anm-editor">设置动画</a>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n'}),define("text!components/showcase/2.0.0/scroll/templates/anm_workstation.html",[],function(){return'<ul class="choices js-elem-list"></ul>\n<div class="ui-box">\n    <a href="javascript:;" class="add-option js-add-elem"><i class="icon-add"></i> 添加元素</a>\n</div>\n'}),define("components/showcase/2.0.0/scroll/models/anm_item",["require","components/showcase/2.0.0/base/models/base"],function(e){"use strict";return e("components/showcase/2.0.0/base/models/base").extend({defaults:function(){return{width:"",height:"",x:0,y:0,duration:1,delay:0,anm_style:"fadeIn",image_id:"",image_url:"",image_thumb_url:""}},validation:{},initialize:function(){void 0==this.get("naturalHeight")&&this.set("naturalHeight",this.get("height")),void 0==this.get("naturalWidth")&&this.set("naturalWidth",this.get("width")),this.listenTo(this,"change:width",function(e,t){var n=this._previousAttributes.width;if(isNaN(Number(t)))return this.set({width:n},{silent:!0}),void this.trigger("render");var i=this.get("naturalHeight"),o=this.get("naturalWidth");this.set({height:~~(i*(t/o))},{silent:!0}),this.trigger("render")}),this.listenTo(this,"change:height",function(e,t){var n=this._previousAttributes.height;if(isNaN(Number(t)))return this.set({height:n},{silent:!0}),void this.trigger("render");var i=this.get("naturalHeight"),o=this.get("naturalWidth");this.set({width:~~(o*(t/i))},{silent:!0}),this.trigger("render")}),this.validNumber(["x","y","duration","delay"])},validNumber:function(e){var t=this;if(e instanceof Array)return e.forEach(function(e){t.validNumber(e)});this.listenTo(this,"change:"+e,function(t,n){var i=this._previousAttributes[e],o={};n=Number(n),isNaN(n)&&(o[e]=i,this.set(o,{silent:!0}),this.trigger("render"))})}})}),define("components/showcase/2.0.0/scroll/collections/anms",["require","backbone","components/showcase/2.0.0/scroll/models/anm_item"],function(e){"use strict";var t=e("backbone"),n=e("components/showcase/2.0.0/scroll/models/anm_item");return t.Collection.extend({model:n,toJSON:function(){return t.Collection.prototype.toJSON.apply(this,arguments).filter(function(e){return!!e.image_url})}})}),define("text!components/showcase/2.0.0/scroll/templates/anm_item.html",[],function(){return'<div class="pull-left">\n    <%if(image_url){%>\n        <div class="image-box">\n            <img src="<%= fullfillImage(image_url) %>">\n            <a href="javascript:;" class="modify-image js-upload-image">重新上传</a>\n        </div>\n    <%} else {%>\n        <a href="javascript:;" class="add-image js-upload-image"><i class="icon-add"></i>添加图片</a>\n    <%}%>\n</div>\n\n\n<div class="anm-elem-form">\n    <div class="form-inline ui-box">\n        <span class="form-inline-label">宽</span>\n        <input type="text" class="input-mini" name="width" value="<%= width %>" maxlength="3" >\n        <span class="form-inline-label">高</span>\n        <input type="text" class="input-mini" name="height" value="<%= height %>" maxlength="3" >\n    </div>\n    \n    <div class="form-horizontal">\n        <div class="control-group">\n            <label class="control-label">横向位置：</label>\n            <div class="controls">\n                <input type="text" class="input-mini" name="x" value="<%= x %>" maxlength="3">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">纵向位置：</label>\n            <div class="controls">\n                <input type="text" class="input-mini" name="y" value="<%= y %>" maxlength="3">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">动画效果：</label>\n            <div class="controls">\n                <select name="anm_style" class="input-small">\n                    <option value="-1">无</option>\n                    <option value="fadeIn">淡入</option>\n                    <option value="drop">下坠</option>\n                    <option value="float">上浮</option>\n                    <option value="leftin">左入</option>\n                    <option value="rightin">右入</option>\n                </select>\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label">开始时间：</label>\n            <div class="controls">\n                <input type="text" class="input-mini" name="delay" value="<%= delay %>" maxlength="3"> 秒\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label">动画持续：</label>\n            <div class="controls">\n                <input type="text" class="input-mini" name="duration" value="<%= duration %>" maxlength="3"> 秒\n            </div>\n        </div>\n    </div>\n\n</div>\n\n\n<div class="actions">\n    <span class="action delete close-modal js-delete" title="删除">×</span>\n</div>'}),define("components/showcase/2.0.0/scroll/views/anm_item",["require","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll/templates/anm_item.html","components/attachment/image/app","core/utils"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("text!components/showcase/2.0.0/scroll/templates/anm_item.html"),i=e("components/attachment/image/app"),o=e("core/utils");return t.extend({events:{"change :input":"updateModel","click .js-delete":"deleteSelf","click .js-upload-image":"addImage",mouseover:"onMouseover",mouseout:"onMouseout"},tagName:"li",className:"anm-elem",template:_.template(n),onInit:function(){this.listenTo(this.model,"render",this.render),this.listenTo(this.model,"hover",this.toggleHover)},bindValidation:function(){},onRender:function(){var e=this.model;this.$("select").each(function(){var t=this.name;$(this).val(e.get(t))})},templateHelpers:{fullfillImage:o.fullfillImage},deleteSelf:function(){this.model.destroy()},addImage:function(){var e=this;i.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0];var n=e.handleWH(t.width,t.height);e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,width:n.width,height:n.height,naturalWidth:t.width,naturalHeight:t.height},{silent:!0}),e.model.trigger("render")}})},handleWH:function(e,t){return t=~~(60*t/e),e=60,{width:e,height:t}},onMouseover:function(){this.model.trigger("hover",!0)},onMouseout:function(){this.model.trigger("hover",!1)},toggleHover:function(e){this.$el.toggleClass("anm-hover",e)}})}),define("components/showcase/2.0.0/scroll/views/anm_workstation",["require","marionette","text!components/showcase/2.0.0/scroll/templates/anm_workstation.html","components/showcase/2.0.0/scroll/collections/anms","components/showcase/2.0.0/scroll/views/anm_item","core/utils"],function(e){var t=e("marionette"),n=e("text!components/showcase/2.0.0/scroll/templates/anm_workstation.html"),i=e("components/showcase/2.0.0/scroll/collections/anms"),o=e("components/showcase/2.0.0/scroll/views/anm_item"),s=e("core/utils");return t.CompositeView.extend({className:"anm-editor-workstation app-design",template:_.template(n),events:{"click .js-add-elem":"addElem",mousewheel:s.handleScroll},itemViewContainer:".js-elem-list",itemView:o,initialize:function(){var e=this.model.get("anms");this.collection=new i,void 0!=e&&(e instanceof i?this.collection.reset(e.models):this.collection.reset(e)),this.model.set("anms",this.collection)},addElem:function(){this.collection.push({})}})}),define("components/showcase/2.0.0/scroll/views/anm_preview_item",["require","marionette","core/utils"],function(e){var t=e("marionette"),n=e("core/utils");return t.ItemView.extend({className:"anm-item-preview",template:_.template('<div class="js-resize anm-item-resize"></div>'),events:{mouseover:"onMouseover",mouseout:"onMouseout"},initialize:function(){var e=this;this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.listenTo(this.model,"hover",function(t){e.$el.toggleClass("anm-hover",t)}),this.initDragAndResize()},onRender:function(){var e=this.model.toJSON();e.image_url&&this.$el.css({top:~~e.y,left:~~e.x,backgroundImage:"url("+n.fullfillImage(e.image_url)+")",width:~~e.width,height:~~e.height})},onMouseover:function(){this.model.trigger("hover",!0)},onMouseout:function(){this.model.trigger("hover",!1)},initDragAndResize:function(){var e=!1,t=this,n=this.resize.bind(this),i=$(window);this.$el.draggable({containment:"parent"}).on("mousedown",function(t){$(t.target).hasClass("js-resize")&&(e=!0,i.unbind("mousemove",n),i.one("mouseup",function(){e=!1,i.unbind("mousemove",n)}).on("mousemove",n))}).on("dragstart",function(n){if(e)return!1;t.resizeStart=null}).on("dragstop",function(){var e=$(this).position();t.model.set("x",e.left).set("y",e.top).trigger("render")}).css("position","absolute").resizable()},resize:function(e){if(null==this.resizeStart)return this.resizeStart={x:e.clientX,y:e.clientY},void(this.originSize={w:this.$el.width(),h:this.$el.height()});this.model.set("width",this.originSize.w+e.clientX-this.resizeStart.x).trigger("render")}})}),define("components/showcase/2.0.0/scroll/views/anm_preview",["require","marionette","components/showcase/2.0.0/scroll/collections/anms","components/showcase/2.0.0/scroll/views/anm_preview_item"],function(e){var t=e("marionette"),n=(e("components/showcase/2.0.0/scroll/collections/anms"),e("components/showcase/2.0.0/scroll/views/anm_preview_item"));return t.CollectionView.extend({className:"anm-editor-preview",itemView:n,initialize:function(){this.collection=this.model.get("anms")}})}),define("text!components/showcase/2.0.0/scroll/templates/anm_editor.html",[],function(){return'<div class="modal-header">\n    <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> -->\n    <h3>动画编辑</h3>\n</div>\n<div class="modal-body">\n    <div class="anm-editor-preview-wrap" style="background-image: url(<%= fullfillImage(image_url) %>!640x320.jpg)">\n        <div class="js-anm-preview"></div>\n    </div>\n    <div class="alert" style="margin-left: 340px;margin-bottom: 5px">布局以 iphone6 (640x1138) 为标准</div>\n    <div class="anm-editor-workstation-wrap js-workstation">\n    </div>\n</div>\n<div class="modal-footer">\n    <a href="javascript:;" class="btn btn-primary" data-dismiss="modal">确定</a>\n</div>'}),define("components/showcase/2.0.0/scroll/views/anm_editor",["require","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/scroll/views/anm_workstation","components/showcase/2.0.0/scroll/views/anm_preview","text!components/showcase/2.0.0/scroll/templates/anm_editor.html","core/utils"],function(e){var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("components/showcase/2.0.0/scroll/views/anm_workstation"),i=e("components/showcase/2.0.0/scroll/views/anm_preview"),o=e("text!components/showcase/2.0.0/scroll/templates/anm_editor.html"),s=e("core/utils");return t.extend({className:"modal fade hide anm-editor",template:_.template(o),regions:{workRegion:".js-workstation",previewRegion:".js-anm-preview"},events:{hidden:"close"},templateHelpers:{fullfillImage:s.fullfillImage},bindValidation:function(){},onRender:function(){this.$el.modal("show"),this.workRegion.show(new n({model:this.model})),this.previewRegion.show(new i({model:this.model}))},close:function(){this.remove()}})}),define("components/showcase/2.0.0/scroll/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","components/showcase/2.0.0/scroll/views/anm_editor","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/scroll/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("components/showcase/2.0.0/scroll/views/anm_editor"),r=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){return{fullfillImage:r.fullfillImage,renderLink:o}},events:{'blur input[type="text"]':"updateModel","click .actions .delete":"delete","click .js-page-image":"chooseImage","click .js-pop-anm-editor":"popAnmEditor"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render),s.call(this)},bindValidation:function(){},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()},popAnmEditor:function(){new l({model:this.model}).render()}})}),define("components/showcase/2.0.0/scroll/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/scroll/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/scroll/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("text!components/showcase/2.0.0/scroll/templates/edit.html",[],function(){return'\n<form class="form-horizontal custom-scroll" novalidate>\n    <div class="js-meta-region"></div>\n\n    <div class="custom-scroll-pages">\n        <p class="">图片尺寸要求：640*1010 像素；建议每张图不超过200KB</p>\n\n        <div class="js-first-page-region"></div>\n\n        <div class="custom-scroll-page">\n            <h4>过场页面</h4>\n            <div class="js-pages-region">\n            </div>\n            <div class="js-options options">\n                <a href="javascript:;" class="add-option js-add-page"><i class="icon-add"></i> 添加一页</a>\n            </div>\n        </div>\n\n        <div class="js-last-page-region"></div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/scroll/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/showcase/2.0.0/scroll/views/edit_meta","components/showcase/2.0.0/scroll/views/edit_first_page","components/showcase/2.0.0/scroll/views/edit_last_page","components/showcase/2.0.0/scroll/views/edit_collection","text!components/showcase/2.0.0/scroll/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/showcase/2.0.0/scroll/views/edit_meta"),o=e("components/showcase/2.0.0/scroll/views/edit_first_page"),s=e("components/showcase/2.0.0/scroll/views/edit_last_page"),a=e("components/showcase/2.0.0/scroll/views/edit_collection"),l=e("text!components/showcase/2.0.0/scroll/templates/edit.html");return n.extend({template:t.template(l),regions:{metaRegion:".js-meta-region",firstPageRegion:".js-first-page-region",pagesRegion:".js-pages-region",lastPageRegion:".js-last-page-region"},events:{"click .js-add-page":"addPage"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.metaRegion.show(new i({model:this.model})),this.firstPageRegion.show(new o({model:this.model})),this.lastPageRegion.show(new s({model:this.model})),this.pagesRegion.show(new a({collection:this.model.get("sub_entry")})),this.toggleOptions()},addPage:function(){this.model.get("sub_entry").add({})},toggleOptions:function(){this.model.get("sub_entry").length>=30?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("text!components/showcase/2.0.0/scroll_nav/templates/edit.html",[],function(){
return'<form class="form-horizontal custom-scroll edit-scroll-nav" novalidate style="padding: 0 10px; width: auto;">\n    <div class="control-group clearfix">\n        <label class="control-label" style="text-align: left; width: auto;">主页图标：</label>\n        <div class="controls pull-left" style="margin-left: 0;">\n            <label class="checkbox inline">\n                <input type="checkbox" name="homepage_icon" <%= homepage_icon==\'1\' ? \'checked\' : \'\' %>>\n                显示店铺主页图标，用户点击后进入店铺主页\n            </label>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">背景图片</label>\n        <div class="controls">\n            <p class="help-desc" style="margin-bottom: 20px;">尺寸要求：640*1010 像素；可以添加多张，每次打开页面时，系统随机选择一张</p>\n\n            <div class="background-images">\n                <% _.each(background_images, function(image, index) { %>\n                    <div class="image-box" data-index="<%= index %>">\n                        <img src="<%= fullfillImage(image.url, \'!140x140+2x.jpg\') %>" alt="">\n                        <span class="close-modal js-delete-backgorund-image" title="删除">×</span>\n                    </div>\n                <% }); %>\n            </div>\n\n            <a href="javascript:;" class="add-image js-add-background-image"><i class="icon-add"></i> 添加图片</a>\n            <input type="hidden" name="background_images">\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景导航</label>\n\n        <div class="controls">\n            <p class="help-desc" style="margin-bottom: 20px;">建议图片尺寸：800*230像素</p>\n\n            <div class="js-collection-region custom-scroll-page ">\n\n            </div>\n\n            <div class="js-options options" style="margin: 0;">\n                <a href="javascript:;" class="add-option js-add-module"><i class="icon-add"></i> 添加一个模块</a>\n            </div>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景导航样式</label>\n\n        <div class="controls nav-styles">\n            <label class="radio inline">\n                <input name="nav_style" value="left" type="radio" <%= nav_style == \'left\'? \'checked\' : \'\' %>>向左倾斜\n            </label>\n            <label class="radio inline">\n                <input name="nav_style" value="normal" type="radio" <%= nav_style == \'normal\'? \'checked\' : \'\' %>>正常\n            </label>\n            <label class="radio inline">\n                <input name="nav_style" value="right" type="radio" <%= nav_style == \'right\'? \'checked\' : \'\' %>>向右倾斜\n            </label>\n        </div>\n    </div>\n\n    <div class="split-line"></div>\n    <div class="control-group control-group-block">\n        <label class="control-label">前景显现动画</label>\n\n        <div class="controls">\n            <label class="radio inline">\n                <input type="radio" name="animate" value="zoom" <%= animate == \'zoom\' ? \'checked\' : \'\' %>>正常\n            </label>\n            <select name="zoom_type" style="margin-right: 20px; width: 120px;">\n                <option value="zoom_out" <%= zoom_type == \'zoom_out\' ? \'selected\' : \'\' %>>缩小渐现</option>\n                <option value="zoom_in" <%= zoom_type == \'zoom_in\' ? \'selected\' : \'\' %>>放大渐现</option>\n            </select>\n            <label class="radio inline">\n                <input type="radio" name="animate" value="slide" <% if(animate == \'slide\') { %>checked<% }%>>滑入\n            </label>\n            <select name="slide_type" style="width: 120px;">\n                <option value="slide_left" <%= slide_type == \'slide_left\' ? \'selected\' : \'\' %>>从左侧滑入</option>\n                <option value="slide_right" <%= slide_type == \'slide_right\' ? \'selected\' : \'\' %>>从右侧滑入</option>\n            </select>\n        </div>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html",[],function(){return'<div class="choice-image-box">\n    <% if(image_url) { %>\n        <div class="image-box">\n            <img src="<%= fullfillImage(image_url, \'!140x140+2x.jpg\') %>" class="image">\n            <a href="javascript:;" class="modify-image js-page-image">重新上传</a>\n        </div>\n    <% } else { %>\n        <a href="javascript:;" class="add-image js-page-image"><i class="icon-add"></i> 添加图片</a>\n        <div class="control-group">\n            <div class="controls">\n                <input type="hidden" name="image_url">\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="choice-content">\n    <div class="control-group">\n        <label class="control-label">标题：</label>\n        <div class="controls">\n            <input class="" type="text" name="title" value="<%= title %>">\n        </div>\n    </div>\n    <div class="control-group">\n            <label class="control-label">副标题：</label>\n            <div class="controls">\n                <input class="" type="text" name="sub_title" value="<%= sub_title %>">\n            </div>\n        </div>\n    <div class="control-group">\n        <label class="control-label">链接：</label>\n        <div class="controls">\n            <%= renderLink(link_url, link_title, link_type) %>\n        </div>\n    </div>\n</div>\n<% if(index != 0 && index != 1) { %>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n<% } %>\n'}),define("components/showcase/2.0.0/scroll_nav/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html","components/setup_link/render_link","components/setup_link/bind_link","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/scroll_nav/templates/edit_item.html"),o=e("components/setup_link/render_link"),s=e("components/setup_link/bind_link"),a=e("components/attachment/image/app"),l=e("core/utils");return n.extend({tagName:"li",className:"choice",template:t.template(i),templateHelpers:function(){var e=this.layout.model.get("sub_entry").indexOf(this.model);return{fullfillImage:l.fullfillImage,renderLink:o,index:e}},events:{'blur input[name="title"]':"updateModel",'blur input[name="sub_title"]':"updateModel","click .actions .delete":"delete","click .js-page-image":"chooseImage"},onInit:function(e){this.parent=e.parent||{},this.listenTo(this.model,"change",this.render),s.call(this)},chooseImage:function(){var e=this;a.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set({image_id:t.attachment_id,image_url:t.attachment_url,image_thumb_url:t.thumb_url,image_width:Number(t.width),image_height:Number(t.height)})}})},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/scroll_nav/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/scroll_nav/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/scroll_nav/views/edit_item");return t.extend({itemView:n,initialize:function(e){this.options=e||{}},onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/scroll_nav/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/scroll_nav/templates/edit.html","components/showcase/2.0.0/scroll_nav/views/edit_collection","components/attachment/image/app","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/scroll_nav/templates/edit.html"),o=e("components/showcase/2.0.0/scroll_nav/views/edit_collection"),s=e("components/attachment/image/app"),a=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:a.fullfillImage},regions:{collectionRegion:".js-collection-region"},events:{'change input[name="homepage_icon"]':"updateModel",'change input[name="nav_style"]':"updateModel",'change input[name="animate"]':"updateModel",'change input[name="zoom"]':"updateModel",'change select[name="zoom_type"]':"updateModel",'change select[name="slide_type"]':"updateModel","click .js-add-background-image":"addBackgroundImage","click .js-delete-backgorund-image":"deleteBackgroundImage","click .js-add-module":"addModule"},modelEvents:{"change:background_images":"render"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},addModule:function(){this.model.get("sub_entry").add({})},addBackgroundImage:function(){var e=this,n=e.model.get("background_images")||[];s.initialize({multiChoose:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(i){t.each(i,function(e){n.push({id:e.attachment_id,url:e.attachment_url,thumb_url:e.thumb_url,width:+e.width,height:+e.height})}),e.model.set("background_images",n),e.model.trigger("change:background_images"),e.model.trigger("change")}})},deleteBackgroundImage:function(e){var t=+$(e.target).parents(".image-box").data("index"),n=this.model.get("background_images")||[];n.splice(t,1),this.model.set("background_images",n),this.model.trigger("change:background_images"),this.model.trigger("change")},toggleOptions:function(){this.model.get("sub_entry").length>=40?this.$(".js-options").hide():this.$(".js-options").show()}})}),define("text!components/showcase/2.0.0/image_text/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n\n    <div class="control-group">\n        <label>标题</label>\n        <input type="text" name="title" value="<%- title %>" data-error-style="block">\n    </div>\n\n    <div class="control-group">\n        <label>作者<span class="label-desc">（选填）</span></label>\n        <input type="text" name="author" value="<%- author %>" data-error-style="block">\n    </div>\n\n    <div class="control-group image-region js-image-region">\n\n    </div>\n\n    <div class="control-group">\n        <label class="checkbox">\n            <input type="checkbox" name="show_image" <% if (show_image == 1) { %>checked<% } %>>封面图片显示在正文中\n        </label>\n    </div>\n\n    <div class="control-group digest">\n        <label>摘要</label>\n        <textarea name="digest" cols="30" rows="3" data-error-style="block"><%- digest %></textarea>\n    </div>\n\n    <div class="control-group">\n        <label>正文</label>\n        <% if (is_fenxiao) { %>\n            <textarea name="content" data-error-style="block" class="js-editor"><%= content %></textarea>\n        <% } else {%>\n            <script class="js-editor" type="text/plain"></script>\n            <input type="hidden" name="content" data-error-style="block">\n        <% } %>\n    </div>\n\n    <div class="control-group js-link-region">\n\n    </div>\n</form>\n'}),define("tpl!components/showcase/2.0.0/image_text/templates/edit_link",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<label>阅读原文</label>\n\n"+(null==(__t=renderLink(link_url,link_title,link_type,{showDelete:!1,drop:"dropup"}))?"":__t)+"\n";return __p}}),define("components/showcase/2.0.0/image_text/views/edit_link",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/setup_link/render_link","components/setup_link/bind_link","tpl!components/showcase/2.0.0/image_text/templates/edit_link"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/setup_link/render_link"),o=e("components/setup_link/bind_link");return n.extend({template:e("tpl!components/showcase/2.0.0/image_text/templates/edit_link"),modelEvents:{"change:link_url":"render"},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);return t.extend(n,{cid:e,renderLink:i}),n},onInit:function(){o.call(this)},bindValidation:function(){},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})}})}),define("text!components/showcase/2.0.0/image_text/templates/edit_image.html",[],function(){return'<label>封面<span class="label-desc"><%= desc %></span></label>\n<% if (image) { %>\n    <img src="<%- image %>" width="100" height="100"/>\n    <a class="js-add-image control-action" href="javascript:;">重新选择</a>\n<% } else { %>\n    <a class="js-add-image control-action" href="javascript:;">添加图片...</a>\n<% } %>\n<input type="hidden" name="image" data-error-style="block">\n'}),define("components/showcase/2.0.0/image_text/views/edit_image",["require","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","underscore","core/utils","text!components/showcase/2.0.0/image_text/templates/edit_image.html","components/attachment/image/app"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("components/attachment/image/app"),i=e("underscore"),o=e("core/utils"),s=e("text!components/showcase/2.0.0/image_text/templates/edit_image.html"),n=e("components/attachment/image/app");return t.extend({template:i.template(s),events:{"click .js-add-image":"addImage"},modelEvents:{"change:image":"render"},bindValidation:function(){},addImage:function(){var e=this;o.isFenxiao()?n.initialize({multiChoose:!1,uploadURL:_global.url.fenxiao+"/common/qiniu/upToken.json",hideIconList:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){e.model.set("image",t[0].attachment_url),e.model.set("image_id",t[0].attachment_id)}}):n.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){var n=+t[0].width;if(n&&n>1200)return void o.errorNotify("图片宽度不能大于1200像素，否则会导致群发失败");e.model.set("image",t[0].attachment_url),e.model.set("image_id",t[0].attachment_id)}})},serializeData:function(){var e,t=this.model.collection.indexOf(this.model),n={big:"（图片建议尺寸：900 x 500像素）",small:"（图片建议尺寸：360 x 200像素）"};e=t<=0?o.isFenxiao()?n.big:n[this.model.imageType||"small"]:"（图片建议尺寸：200 x 200像素）";var i=this.model.get("image");return i=i&&o.fullfillImage(i),{image:i,desc:e}}})}),define("components/showcase/2.0.0/image_text/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/image_text/templates/edit.html","core/utils","components/showcase/2.0.0/image_text/views/edit_link","components/showcase/2.0.0/image_text/views/edit_image","components/modal/1.0.0/modal","components/attachment/image/app","components/ueditor_plugins/app"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/image_text/templates/edit.html"),o=e("core/utils"),s=e("components/showcase/2.0.0/image_text/views/edit_link"),a=e("components/showcase/2.0.0/image_text/views/edit_image"),l=e("components/modal/1.0.0/modal"),r=window.UE,c=e("components/attachment/image/app");return e("components/ueditor_plugins/app"),n.extend({className:"edit-rich-text",template:t.template(i),events:{"blur textarea":"updateModel",'blur input[type="text"]':"updateModel",'change input[type="checkbox"]':"updateModel"},regions:{image:".js-image-region",link:".js-link-region"},onRender:function(){var e=new a({model:this.model});if(this.image.show(e),!o.isFenxiao()){var t=new s({model:this.model});this.link.show(t)}},serializeData:function(){var e=this.model.toJSON();return o.insertFenxiaoInto(e),e},onClose:function(){this._editor&&(this._editor.removeListener("blur contentChange"),this._editor.destroy(),delete this._editor)},onShow:function(){o.isFenxiao()?this.renderFenxiaoEditor():this.renderBaiduEditor()},renderFenxiaoEditor:function(){var e=this;tinymce.init({selector:".js-editor",language:"zh_CN",convert_urls:!1,plugins:["advlist autolink link lists charmap print preview hr","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime video nonbreaking","save table contextmenu directionality qq template paste textcolor"],toolbar1:"bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | formatselect fontsizeselect",toolbar2:"bullist numlist | outdent indent blockquote | undo redo | link unlink anchor imageupload video | forecolor backcolor",toolbar3:"table | removeformat | subscript superscript | qq | goods",fontsize_formats:"10px 12px 14px 16px 18px 20px 22px 24px",menubar:!1,contextmenu:"link inserttable | cell row column deletetable",block_formats:"Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6",toolbar_items_size:"small",height:400,image_dimensions:!1,media_poster:!1,media_alt_source:!1,media_dimensions:!1,link_title:!1,object_resizing:"table",statusbar:!1,setup:function(t){t.on("change",function(n){e.model.set("content",t.getContent())}),t.on("blur",function(n){e.model.set("content",t.getContent())}),t.addButton("imageupload",{tooltip:"插入图片",icon:"image",onclick:function(){c.initialize({uploadURL:_global.url.fenxiao+"/common/qiniu/upToken.json",hideIconList:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(n){if("[object Array]"==Object.prototype.toString.call(n))for(var i=0;i<n.length;i++)t.selection.setContent(t.dom.createHTML("img",{src:o.fullfillImage(n[i].attachment_url,"!730x0.jpg",{toWebp:!1})}));else t.selection.setContent(t.dom.createHTML("img",{src:o.fullfillImage(n.attachment_url,"!730x0.jpg",{toWebp:!1})}));e.model.set("content",t.getContent())}})}}),t.addButton("goods",{text:"插入商品",icon:!1,onclick:function(){l.initialize({type:"fenxiao_goods"}).setChooseItemCallback(function(n){var i=t.getContent();if($(i).find("img[data-alias]").length>=20)return void o.errorNotify("最多支持插入20件商品");t.selection.setContent("<div>"+t.dom.createHTML("img",{"data-alias":n.data_alias,src:n.image_url})+"</div>"),e.model.set("content",t.getContent())}).modal("show")}})}})},renderBaiduEditor:function(){var e=this;this._editor=new r.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","insertvideo","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!1,elementPathEnabled:!1,initialFrameWidth:396,initialFrameHeight:300,focus:!1,pasteplain:!1});var t=this._editor;t.addListener("blur",function(){e.model.set("content",e._editor.getContent())}),t.addListener("contentChange",function(){e.model.set("content",e._editor.getContent())}),t.render(this.$(".js-editor")[0]),t.ready(function(){t.setContent(e.model.get("content"))})},save:function(){this._editor&&this.model.set("content",this._editor.getContent())}})}),define("tpl!components/showcase/2.0.0/advanced_news/templates/edit_link",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<label>链接到</label>\n"+(null==(__t=renderLink(link_url,link_title,link_type,{showDelete:!1}))?"":__t)+'\n<input type="hidden" name="link_url" data-error-style="block">\n';return __p}}),define("components/showcase/2.0.0/advanced_news/views/edit_link",["require","underscore","components/showcase/2.0.0/base/views/edit_base","components/setup_link/render_link","components/setup_link/bind_link","tpl!../templates/edit_link"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("components/setup_link/render_link"),o=e("components/setup_link/bind_link");return n.extend({template:e("tpl!../templates/edit_link"),modelEvents:{"change:link_url":"render"},onInit:function(){o.call(this)},serializeData:function(){var e=this.model.cid,n=t.clone(this.model.attributes);return t.extend(n,{cid:e,renderLink:i}),n},bindValidation:function(){},onLinkChange:function(e){this.model.set({link_id:e.link_id,link_type:e.link_type,link_title:e.link_title,link_url:e.link_url})}})}),define("tpl!components/showcase/2.0.0/advanced_news/templates/edit_image",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<label>封面<span class="label-desc">'+(null==(__t=desc)?"":__t)+"</span></label>\n",__p+=cover_url?'\n    <img src="'+(null==(__t=cover_url)?"":_.escape(__t))+'" width="100" height="100"/>\n    <a class="js-add-image control-action" href="javascript:;">重新选择</a>\n':'\n    <a class="js-add-image control-action" href="javascript:;">添加图片...</a>\n',__p+='\n<input type="hidden" name="cover_url" data-error-style="block">\n';return __p}}),define("components/showcase/2.0.0/advanced_news/views/edit_image",["require","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","core/utils","tpl!../templates/edit_image"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("components/attachment/image/app"),i=e("core/utils");return t.extend({template:e("tpl!../templates/edit_image"),events:{"click .js-add-image":"addImage"},modelEvents:{"change:cover_url":"render"},bindValidation:function(){},addImage:function(){var e=this;n.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){e.model.set("cover_url",t[0].attachment_url),e.model.set("cover_id",t[0].attachment_id)}})},serializeData:function(){var e,t=this.model.collection.indexOf(this.model),n={big:"（图片建议尺寸：900 x 500像素）",small:"（图片建议尺寸：360 x 200像素）"};return e=t<=0?n[this.model.imageType||"small"]:"（图片建议尺寸：200 x 200像素）",{cover_url:i.fullfillImage(this.model.get("cover_url")),desc:e}}})}),define("tpl!components/showcase/2.0.0/advanced_news/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n\n    <div class="control-group js-link-region">\n\n    </div>\n\n    <div class="control-group">\n        <label>标题</label>\n        <input type="text" name="title" value="'+(null==(__t=title)?"":_.escape(__t))+'" data-error-style="block">\n    </div>\n\n    <div class="control-group image-region js-image-region">\n\n    </div>\n\n    <div class="control-group digest">\n        <label>摘要</label>\n        <textarea name="digest" cols="30" rows="3" data-error-style="block">'+(null==(__t=digest)?"":_.escape(__t))+"</textarea>\n    </div>\n\n</form>\n";return __p}}),define("components/showcase/2.0.0/advanced_news/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","./edit_link","./edit_image","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("./edit_link"),i=e("./edit_image");return t.extend({className:"edit-rich-text",template:e("tpl!../templates/edit"),events:{"blur textarea":"updateModel",'blur input[type="text"]':"updateModel",'change input[type="checkbox"]':"updateModel"},regions:{imageRegion:".js-image-region",linkRegion:".js-link-region"},onRender:function(){this.imageRegion.show(new i({model:this.model})),this.linkRegion.show(new n({model:this.model}))}})}),define("text!components/showcase/2.0.0/audio/templates/edit.html",[],function(){return'<form class="form-horizontal edit-audio" novalidate>\n    <div class="control-group">\n        <label class="control-label">音频：</label>\n        <div class="controls">\n            <input type="hidden" name="audio">\n            <% if (audio) { %>\n                <div class="voice-wrapper" data-voice-src="<%- audio %>">\n                    <span class="voice-player">\n                        <span class="stop">点击播放</span>\n                        <span class="second"></span>\n                        <i class="play" style="display:none;"></i>\n                    </span>\n                    <a href="javascript:;" class="js-choose-audio control-action">重新选择音频</a>\n                </div>\n            <% } else { %>\n            <a href="javascript:;" class="js-choose-audio control-action">选择音频</a>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">样式：</label>\n        <div class="controls">\n            <label class="radio">\n                <input type="radio" name="style" value="0" <% if (style== \'0\') { %> checked <% } %>>模仿微信对话样式\n            </label>\n            <% if(style == \'0\') { %>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">头像：</label>\n                    <div class="controls">\n                        <div class="clearfix">\n                            <img src="<%= avatar %>" class="edit-audio-avatar">\n                            <div class="edit-audio-avatar-action">\n                                <div>\n                                    <a href="javascript:;" class="js-upload-avatar">上传头像</a>\n                                    <span class="c-gray"> | </span>\n                                    <a href="javascript:;" class="js-use-default-avatar">使用店铺logo</a>\n                                </div>\n                                <p class="help-desc">建议尺寸80*80像素</p>\n                                <p class="help-desc">如果不设置，默认将使用店铺logo</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">气泡：</label>\n                    <div class="controls">\n                        <label class="radio inline">\n                            <input type="radio" name="bubble" value="left" <% if(bubble == \'left\') { %>checked<% } %>>\n                            居左\n                        </label>\n                        <label class="radio inline">\n                            <input type="radio" name="bubble" value="right" <% if(bubble == \'right\') { %>checked<% } %>>\n                            居右\n                        </label>\n                    </div>\n                </div>\n            <% } %>\n            <label class="radio">\n                <input type="radio" name="style" value="1" <% if (style== \'1\') { %> checked <% } %>>简易音乐播放器\n            </label>\n            <% if (style == \'1\') { %>\n                <div class="control-group control-group-inner">\n                    <label class="control-label">标题：</label>\n                    <div class="controls">\n                        <input type="text" placeholder="标题" name="title" value="<%- title %>">\n                    </div>\n                </div>\n                <div class="control-group control-group-inner">\n                    循环：\n                    <label class="checkbox inline">\n                        <% if (+loop === 0) { %>\n                        <input type="checkbox" name="loop" value="0">开启循环播放\n                        <% } else { %>\n                        <input type="checkbox" name="loop" value="1" checked>开启循环播放\n                        <% } %>\n                    </label>\n                </div>\n            <% } %>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">播放：</label>\n        <div class="controls">\n            <label class="radio">\n                <input type="radio" name="reload" value="1" <% if (reload == \'1\') { %> checked <% } %>>暂停后再恢复播放时，从头开始\n            </label>\n            <label class="radio">\n                <input type="radio" name="reload" value="0" <% if (reload == \'0\') { %> checked <% } %>>暂停后再恢复播放时，从暂停位置开始\n            </label>\n        </div>\n    </div>\n</form>\n'}),define("components/attachment/voice/models/voice",["require","backbone","core/utils","underscore","zenjs/util/local_storage"],function(e){"use strict";var t=e("backbone"),n=e("core/utils"),i=e("underscore"),o=e("zenjs/util/local_storage");return t.Model.extend({defaults:{defaultCotegoryId:3,currentCategoryId:3,currentCategory:null,categoryList:[],mediaList:[],selectedAttachment:[],selectedAttachmentIds:[],mediaType:"voice",p:1,pageSize:10,count:0,keyword:"",fetched:!1},initialize:function(){this.localStorgeKey="widget-attachment-voice-"+window._global.kdt_id,this.listenTo(this,"sync",this.setCache.bind(this))},getCategoryList:function(){if(this.categoryListDefer){var e=this.categoryListDefer.xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()}return this.categoryListDefer=n.ajax({url:window._global.url.materials+"/category/categoryList.json",data:{mediaType:this.get("mediaType")},xhrFields:{withCredentials:!0}}).done(function(e){this.set("categoryList",e||[]);var t=this.get("currentCategoryId");this.set({currentCategoryId:t},{silent:!0}),this.trigger("sync")}.bind(this)).fail(function(e,t){t.code!==-1&&this.trigger("error","[获取分组列表失败] "+e)}.bind(this)),this.categoryListDefer},getMediaList:function(){if(this.mediaListDefer){var e=this.mediaListDefer.xhr;e&&e.readyState>0&&e.readyState<4&&e.abort()}return this.trigger("before:fetch"),this.mediaListDefer=n.ajax({url:window._global.url.materials+"/media/mediaList.json",data:{p:this.get("p"),pageSize:this.get("pageSize"),mediaType:this.get("mediaType"),keyword:this.get("keyword"),categoryId:this.get("currentCategoryId")},xhrFields:{withCredentials:!0}}).done(function(e){if(!e)return this.trigger("error","[获取列表失败] 数据错误");i.each(e.dataList,function(t,n){var o=t.meta;o=o&&i.isString(o)?JSON.parse(o):{},e.dataList[n].meta=o}),this.set({p:e.currPageNo,mediaList:e.dataList||[],count:e.count,fetched:!0}),this.trigger("sync")}.bind(this)).fail(function(e,t){t.code!==-1&&this.trigger("error","[获取列表失败] "+e)}.bind(this)),this.mediaListDefer},toggleSelectedAttachment:function(e,t){t=t||{};var n=this.get("selectedAttachmentIds"),o=this.get("selectedAttachment");if(n.indexOf(e)!=-1)o=i.reject(o,function(t){return t.attachmentId==e}),n=i.map(o,function(e){return e.attachmentId});else{var s=this.getAttachmentById(e);s&&(t.multiChoose?(o.push(s),n.push(e)):(o=[s],n=[e]))}this.set({selectedAttachment:o,selectedAttachmentIds:n},{silent:!0}),this.trigger("change:selectedAttachment")},getAttachmentById:function(e){return i.find(this.get("mediaList"),function(t){return t.attachmentId==e})},getParsedSelectedImageData:function(){var e=this.get("selectedAttachment");return i.map(e,function(e){return{attachment_full_url:n.fullfillImage(e.attachmentUrl),attachment_id:e.attachmentId+"",attachment_size:e.attachmentSize+"",attachment_title:e.attachmentTitle,attachment_url:e.attachmentUrl,bucket:e.bucket,checked:0,created_time:e.createTime,height:e.height+"",media_type:e.mediaType,source:e.source+"",thumb_url:e.thumbUrl,width:e.width+""}})},setCache:function(){this.get("keyword")||o.setItem(this.localStorgeKey,JSON.stringify(this))},getCache:function(){var e=o.getItem(this.localStorgeKey);e&&(e=JSON.parse(e),this.set(e),this.cleanSelectedAttachment())},cleanSelectedAttachment:function(){this.set({selectedAttachment:[],selectedAttachmentIds:[]},{silent:!0}),this.trigger("change:selectedAttachment")}})}),define("components/player/AudioPlayer",["require","jquery"],function(e){"use strict";function t(e){
this.options=e||{},this.callback={loading:this.options.loading||i,play:this.options.play||i,stop:this.options.stop||i},this.audio=t.audio}var n=e("jquery"),i=function(){};return t.prototype.play=function(){this.stop(),t.$audio.off(),t.audio.src=this.options.src,this.callback.loading(),t.$audio.one("canplay",function(){this.callback.play(),t.audio.play()}.bind(this)),t.$audio.one("ended",function(){this.callback.stop()}.bind(this)),t.$audio.one("error",function(){this.callback.stop()}.bind(this))},t.prototype.stop=function(){t.audio.pause(),t.$audio.trigger("ended")},t.ensumeAudioNode=function(){document.getElementById("__audio_player")||n("body").append('<audio id="__audio_player" preload="" type="audio/mpeg" src=""></audio>')},t.ensumeAudioNode(),t.audio=document.getElementById("__audio_player"),t.$audio=n(t.audio),t}),define("tpl!components/attachment/voice/templates/voice_list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",fetched?(__p+="\n    ",mediaList&&mediaList.length?(__p+='\n        <ul class="voice-list">\n            ',_.each(mediaList,function(e){__p+='\n                <li class="voice-item js-voice-item" data-id="'+(null==(__t=e.attachmentId)?"":__t)+'">\n                    <div class="voice-icon js-play-voice" data-id='+(null==(__t=e.attachmentId)?"":__t)+'>\n                        <div class="attachment-selected hide js-attachment-selected" data-id='+(null==(__t=e.attachmentId)?"":__t)+'>\n                            <i class="icon-ok icon-white"></i>\n                        </div>\n                    </div>\n                    <div class="voice-name">'+(null==(__t=e.attachmentTitle)?"":__t)+'</div>\n                    <div class="voice-createtime">'+(null==(__t=e.createTime)?"":__t)+'</div>\n                    <div class="voice-size">'+(null==(__t=formatFileSize(e.attachmentSize))?"":__t)+"</div>\n                    ";var t,n=e.meta;n&&n.format&&n.format.duration&&(t=n.format.duration),__p+='\n                    <div class="voice-duration">'+(null==(__t=t?formatDuration(t):"")?"":__t)+"</div>\n                </li>\n            "}),__p+='\n        </ul>\n        <div class="attachment-pagination js-attachment-pagination"></div>\n        ',keyword||(__p+='\n            <a href="javascript:;" class="ui-btn ui-btn-success js-show-upload-view" style="position: absolute; left: 193px; bottom: 16px;">上传语音</a>\n        '),__p+="\n    "):(__p+='\n        <div style="color: #999; text-align: center; padding-top: 130px;">\n            ',__p+=keyword?"\n                <div>还没有相关数据</div>\n            ":'\n                <div class="add-local-image-button js-show-upload-view">+</div>\n                <div>暂无数据，点击添加</div>\n            ',__p+="\n        </div>\n    "),__p+="\n"):__p+='\n    <div class="ui-page-loading"></div>\n',__p+="\n";return __p}}),define("tpl!components/attachment/voice/templates/voice",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    ',__p+=keyword?'\n        <a class="title js-back-to-voice" href="javascript:;" style="margin-right: 0">&lt; 我的语音</a>\n        <span style="font-size: 14px;"> | </span>\n        <span class="title">搜索结果</span>\n    ':'\n        <span class="title">我的语音</span>\n    ',__p+='\n    <div class="search-region">\n        <div class="ui-search-box" style="top: 6px; right: 60px;">\n            <input class="txt js-search-input" type="text" placeholder="搜索" value="'+(null==(__t=keyword)?"":__t)+'">\n        </div>\n    </div>\n</div>\n<div class="modal-body '+(null==(__t=keyword?"attachment-search-result":"")?"":__t)+'">\n    <div class="category-list-region js-category-list-region">\n        <ul class="category-list">\n            ',_.each(categoryList,function(e){__p+='\n                <li class="js-category-item '+(null==(__t=currentCategoryId==e.id?"active":"")?"":__t)+'" data-id="'+(null==(__t=e.id)?"":__t)+'">\n                    '+(null==(__t=e.name)?"":__t)+"\n                    <span>"+(null==(__t=e.count)?"":__t)+"</span>\n                </li>\n            "}),__p+='\n        </ul>\n    </div>\n    <div class="attachment-list-region js-attachment-list-region">\n\n    </div>\n</div>\n<div class="modal-footer clearfix">\n    <div class="selected-count-region js-selected-count-region hide">\n        已选择<span class="js-selected-count">2</span>个语音\n    </div>\n    <div class="text-center">\n        <button class="ui-btn ui-btn-primary js-confirm">确定</button>\n    </div>\n</div>\n';return __p}}),define("components/attachment/voice/views/voice",["require","underscore","core/utils","marionette","../models/voice","components/pagination/index","vendor/nprogress","components/player/AudioPlayer","tpl!../templates/voice_list","tpl!../templates/voice"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("marionette"),o=e("../models/voice"),s=new o,a=e("components/pagination/index"),l=e("vendor/nprogress"),r=e("components/player/AudioPlayer"),c=e("tpl!../templates/voice_list");return i.Layout.extend({template:e("tpl!../templates/voice"),templateHelpers:function(){return{fullfillImage:n.fullfillImage}},ui:{attachmentListRegion:".js-attachment-list-region"},events:{"mousewheel .js-category-list-region":n.handleScroll,"click .js-category-item":"handleCategoryClick","click .js-voice-item":"handleVoiceItemClick","click .js-play-voice":"handlePlayVoiceClick","click .js-confirm":"handleConfirm","keypress .js-search-input":"handleKeywordChange","click .js-back-to-voice":"handleBackToVoiceClick"},initialize:function(e){this.options=e,this.model=s,this.listenTo(this.model,"before:fetch",this.handleBeforeFetch),this.listenTo(this.model,"sync",this.handleSync),this.listenTo(this.model,"error",this.handleError),this.listenTo(this.model,"change:selectedAttachment",this.handleSelectedAttachmentChange),this.model.getCache(),this.model.getMediaList(),this.model.getCategoryList()},serializeData:function(){return t.extend(this.model.toJSON(),{options:this.options})},onRender:function(){this.renderAttachmentList(),this.handleSelectedAttachmentChange()},renderAttachmentList:function(){this.ui.attachmentListRegion.html(c(t.extend({fullfillImage:n.fullfillImage,formatFileSize:n.formatFileSize,formatDuration:n.formatDuration},this.model.toJSON()))),this.pagination&&this.pagination.close();var e=this.model.get("mediaList");e&&e.length&&(this.pagination=new a({el:this.$(".js-attachment-pagination"),currentPage:this.model.get("p"),totalItems:this.model.get("count"),pageSize:this.model.get("pageSize"),onPageNumberChange:this.handlePageNumberChange.bind(this)}),this.pagination.render())},handlePageNumberChange:function(e){this.model.set("p",e),this.model.getMediaList()},handleCategoryClick:function(e){var t=$(e.currentTarget),n=+t.data("id");n!=this.model.get("currentCategoryId")&&(this.model.set({currentCategoryId:n,p:1}),this.model.getMediaList(),this.$(".js-category-item").removeClass("active"),t.addClass("active"))},handleVoiceItemClick:function(e){var t=$(e.currentTarget),i=+t.data("id");if(this.model.getAttachmentById(i).attachmentSize>this.options.maxSize)return n.errorNotify("音频不能大于 "+this.options.maxSizeText);this.model.toggleSelectedAttachment(i,this.options)},handlePlayVoiceClick:function(e){var t=$(e.currentTarget),i=+t.data("id"),o=this.model.getAttachmentById(i);if(e.stopPropagation(),o.playing)return o.playing=!1,void this.stopPlayer();this.stopPlayer(),o.playing=!0,this.player=new r({src:n.fullfillImage(o.attachmentUrl,"!64k.mp3"),loading:function(e){t.addClass("loading")}.bind(this,o),play:function(e){t.addClass("playing")}.bind(this,o),stop:function(e){t.removeClass("playing").removeClass("loading"),e.playing=!1}.bind(this,o)}),this.player.play()},stopPlayer:function(){this.player&&this.player.stop()},handleSelectedAttachmentChange:function(){var e=this.model.get("selectedAttachment"),n=this.model.get("selectedAttachmentIds"),i=this.$(".js-confirm"),o=this.$(".js-selected-count-region"),s=this.$(".js-selected-count");e.length?(i.addClass("ui-btn-primary").removeClass("ui-btn-disabled").attr("disabled",!1),o.show(),s.text(e.length)):(i.removeClass("ui-btn-primary").addClass("ui-btn-disabled").attr("disabled",!0),o.hide()),this.options.multiChoose||o.hide(),this.$(".js-attachment-selected").hide(),t.each(n,function(e){this.$('.js-attachment-selected[data-id="'+e+'"]').show()},this)},handleKeywordChange:function(e){if(13==e.keyCode){var t=e.target.value;this.model.set({p:1,pageSize:t?15:10,keyword:t}),this.model.getMediaList()}},handleBackToVoiceClick:function(){this.model.set({p:1,pageSize:10,keyword:""}),this.model.getMediaList()},handleBeforeFetch:function(){this.stopPlayer(),l.start()},handleSync:function(){this.options.categoryId=this.model.get("currentCategoryId"),l.done(),this.render()},handleError:function(e){l.done(),n.errorNotify(e)},handleConfirm:function(){t.isFunction(this.options.callback)&&this.options.callback(this.options.indexView.parseFormat(this.model.get("selectedAttachment"))),this.options.indexView.hide()},onClose:function(){this.stopPlayer()}})}),define("components/attachment/voice/models/upload_local_voice_item",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({defaults:{name:"",size:0,file:null,uploading:!1,progress:0}})}),define("components/attachment/voice/collections/upload_local_voice_list",["require","backbone","../models/upload_local_voice_item"],function(e){"use strict";var t=e("backbone"),n=e("../models/upload_local_voice_item");return t.Collection.extend({model:n})}),define("tpl!components/attachment/voice/templates/upload_local_voice_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="voice-icon"></div>\n<div class="voice-name">'+(null==(__t=name)?"":__t)+'</div>\n<div class="voice-createtime">'+(null==(__t=size)?"":__t)+'</div>\n<a href="javascript:;" class="close-modal small js-remove-attachment">×</a>\n\n<div class="voice-progress js-progress hide"></div>\n\n';return __p}}),define("components/attachment/voice/views/upload_local_voice_item",["require","marionette","tpl!../templates/upload_local_voice_item"],function(e){"use strict";return e("marionette").ItemView.extend({tagName:"li",className:"upload-local-voice-item voice-item",template:e("tpl!../templates/upload_local_voice_item"),ui:{progress:".js-progress"},events:{"click .js-remove-attachment":"handleRemoveAttachmentClick"},initialize:function(){this.listenTo(this.model,"change:uploading",this.handleUploadingChange),this.listenTo(this.model,"change:progress",this.handleProgressChange)},handleRemoveAttachmentClick:function(){this.model.destroy()},handleUploadingChange:function(){var e=this.model.get("uploading");this.ui.progress.toggle(e)},handleProgressChange:function(){var e=this.model.get("progress"),t=this.ui.progress;t.css({width:e+"%"}),e>13?t.html(e+" %"):t.html("")}})}),define("components/attachment/voice/views/upload_local_voice_list",["require","marionette","./upload_local_voice_item"],function(e){"use strict";var t=e("marionette"),n=e("./upload_local_voice_item");return t.CollectionView.extend({tagName:"ul",className:"upload-local-voice-list voice-list",itemView:n,initialize:function(){}})}),define("tpl!components/attachment/voice/templates/upload",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    ',options.onlyUpload||(__p+='\n        <a href="javascript:;" class="title js-show-image-view" style="margin-right: 4px;">&lt; 选择语音</a>\n        <span style="font-size: 14px;"> | </span>\n    '),__p+='\n    <span class="title">上传语音</span>\n</div>\n<div class="modal-body" style="min-height: 220px; height: auto;">\n    <div class="local-image-region">\n        <div class="title">本地语音：</div>\n        <div class="content">\n            <div class="clearfix">\n                <div class="pull-left add-local-attachment js-add-local-attachment">\n                    <a href="javascript:;" class="js-add-local-image" style="font-size: 14px;">+ 添加</a>\n                    <input type="file" value="添加 +" class="js-local-file" accept="audio/mpeg, audio/amr">\n                </div>\n            </div>\n            <div class="js-image-preview-region">\n\n            </div>\n            <div class="c-gray" style="clear: both; padding-top: 20px;">\n                仅支持amr、mp3两种格式， 大小不超过'+(null==(__t=options.maxSizeText)?"":__t)+'；\n            </div>\n        </div>\n    </div>\n</div>\n<div class="modal-footer clearfix">\n    <div class="text-center">\n        <button class="ui-btn ui-btn-disabled js-confirm" disabled data-loading-text="正在上传...">确定</button>\n    </div>\n</div>\n';return __p}}),define("components/attachment/voice/views/upload",["require","underscore","jquery","core/utils","marionette","../../upload","jsx!../../limit_dialog","../collections/upload_local_voice_list","./upload_local_voice_list","tpl!../templates/upload"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("core/utils"),o=e("marionette"),s=e("../../upload"),a=e("jsx!../../limit_dialog"),l=e("../collections/upload_local_voice_list"),r=e("./upload_local_voice_list");return o.Layout.extend({template:e("tpl!../templates/upload"),regions:{imagePreviewRegion:".js-image-preview-region"},events:{"change .js-local-file":"handleLocalFileChange","click .js-confirm":"handleConfirmClick"},initialize:function(e){this.options=e||{},this.model=new s(null,this.options),this.collection=new l,this.listenTo(this.collection,"add remove",this.toggleConfirmButton)},onRender:function(){this.imagePreviewRegion.show(new r({collection:this.collection})),this.toggleConfirmButton()},serializeData:function(){return t.extend(this.model.toJSON(),{options:this.options})},toggleConfirmButton:function(){var e=this.$(".js-confirm");this.collection.size()>0?(e.removeClass("ui-btn-disabled").addClass("ui-btn-primary"),e.attr("disabled",!1),this.$(".js-add-local-attachment").hide()):(e.addClass("ui-btn-disabled").removeClass("ui-btn-primary"),e.attr("disabled",!0),this.$(".js-add-local-attachment").show())},handleLocalFileChange:function(e){var n=e.target.files;t.each(n,function(e){e.size<=this.options.maxSize?this.addFile(e):i.errorNotify("已经自动过滤大于"+this.options.maxSizeText+"的语音文件")},this),this.render()},addFile:function(e){this.collection.add({name:e.name,size:i.formatFileSize(e.size),file:e})},handleConfirmClick:function(e){var o=n(e.target),s=this;o.btn("loading"),this.model.uploadLocalAttachment(this.collection).always(function(){o.btn("reset")}).done(function(){if(t.isFunction(s.options.callback)){var e=s.collection.map(function(e){return e.get("attachment")});s.options.callback(e)}i.successNotify("语音上传成功"),s.options.indexView.hide()}).fail(function(e,t){t&&160400204===t.code?a.open(e):i.errorNotify(e),s.collection.each(function(e){e.set({uploading:!1,progress:0})})})}})}),define("tpl!components/attachment/voice/templates/index",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-main-region"></div>\n';return __p}}),define("components/attachment/voice/views/index",["require","underscore","marionette","core/utils","./voice","./upload","tpl!../templates/index"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=(e("core/utils"),e("./voice")),o=e("./upload"),s=[1,63077,171949,331406,719286,14640691,14610680,14197816,6725711,14602477,18704236,14219243],a={categoryId:null,multiChoose:!0,onlyUpload:!1,tabActive:"voice",maxSize:2048,useWhiteList:!1,uploadURL:_global.url.materials+"/dock/token.json",callback:function(){}};return n.Layout.extend({className:"widget-attachment modal hide",template:e("tpl!../templates/index"),events:{hidden:"handleHidden","click .js-show-image-view":"showVoiceView","click .js-show-upload-view":"showUploadView"},regions:{mainRegion:".js-main-region"},initialize:function(e){this.setOptions(e)},setOptions:function(e){if(e=e||{},this.options=t.extend({},a,e),this.options.onlyUpload&&(this.options.tabActive="upload"),e.useWhiteList){var n=+(window._global||{}).kdt_id;n&&s.indexOf(n)!=-1&&(this.options.maxSize=40960)}var i=+this.options.maxSize;this.options.maxSizeText=i%1024==0?i/1024+" MB":i+" KB",this.options.maxSize=1024*this.options.maxSize,this.options.indexView=this},show:function(){this.render(),"voice"==this.options.tabActive&&this.showVoiceView(),"upload"==this.options.tabActive&&this.showUploadView(),this.$el.modal("show")},showVoiceView:function(){this.mainRegion.show(new i(this.options))},showUploadView:function(){this.mainRegion.show(new o(this.options))},parseFormat:function(e){return t.map(e,function(e){return{attachment_file:e.attachmentFile,attachment_full_url:e.attachmentFullUrl,attachment_id:e.attachmentId+"",attachment_size:e.attachmentSize+"",attachment_title:e.attachmentTitle,attachment_url:e.attachmentUrl,bucket:e.bucket,checked:0,created_time:e.createTime,height:e.height+"",media_type:e.mediaType,source:e.source+"",thumb_url:e.thumbUrl,width:e.width+""}})},hide:function(){this.$el.modal("hide")},handleHidden:function(){this.mainRegion.close()}})}),define("components/attachment/voice/app",["require","jqueryui","components/spider/spider","./views/index"],function(e){e("jqueryui"),e("components/spider/spider");var t=e("./views/index");return{initialize:function(e){this._initialized?this._app.setOptions(e):(this._initialized=!0,this._app=new t(e)),this._app.show()}}}),define("components/showcase/2.0.0/audio/views/edit",["require","underscore","core/utils","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/audio/templates/edit.html","components/attachment/image/app","components/attachment/voice/app"],function(e){"use strict";var t=e("underscore"),n=e("core/utils"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!components/showcase/2.0.0/audio/templates/edit.html"),s=e("components/attachment/image/app"),a=e("components/attachment/voice/app");return i.extend({template:t.template(o),events:{'change input[type="checkbox"]':"updateModel",'change input[type="radio"]':"updateModel",'blur input[type="text"]':"updateModel","click .js-choose-audio":"chooseAudio","click .js-upload-avatar":"chooseImage","click .js-use-default-avatar":"useDefaultAvatar"},modelEvents:{"change:audio":"render","change:style":"render","change:avatar":"render"},serializeData:function(){var e=this.model.toJSON();return t.extend(e,{audio:n.fullfillImage(e.audio),avatar:n.fullfillImage(e.avatar||_global.mp_data.logo,"!80x80.jpg")})},chooseAudio:function(){var e=this;a.initialize({multiChoose:!1,multiUpload:!1,useWhiteList:!0,maxSize:6144,uploadTokenType:"voicePub",callback:function(t){t=t[0];var n=t.attachment_file||t.attachment_url;e.model.set({audio:n})}})},chooseImage:function(){var e=this;s.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set("avatar",t.attachment_url)}})},useDefaultAvatar:function(){this.model.set("avatar","")}})}),define("tpl!components/showcase/2.0.0/shop_banner/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <div class="custom-shop-banner" style="width: 320px; background-image: url('+(null==(__t=fullfillImage(background_image))?"":_.escape(__t))+');"></div>\n            <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <p class="help-desc">最佳尺寸：640 x 480 像素。</p>\n            <p class="help-desc">尺寸不匹配时，图片将被压缩或拉伸以铺满画面。</p>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">店铺Logo：</label>\n        <div class="controls">\n            <img src="'+(null==(__t=logo())?"":_.escape(__t))+'" width="80" height="80" class="thumb-image" style="width: 80px; height: 80px;">\n            <a class="control-action js-trigger-avatar" href="javascript: void(0);">修改店铺Logo</a>\n        </div>\n    </div>\n    ',isFenxiao()&&(__p+='\n    <div class="control-group">\n        <label class="control-label">店铺简介：</label>\n        <div class="controls">\n            <textarea name="intro" rows="2" cols="8" maxlength="40" style="resize: none;width:320px;">'+(null==(__t=intro)?"":__t)+'</textarea>\n            <p class="help-desc">最多40个字</p>\n        </div>\n    </div>\n    '),__p+="\n</form>\n";return __p}}),define("components/showcase/2.0.0/shop_banner/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","components/uploadlogo/app","core/utils","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("components/attachment/image/app"),i=e("components/uploadlogo/app"),o=e("core/utils");return t.extend({template:e("tpl!../templates/edit"),events:{"click .js-reset-bg":"resetBg","click .js-trigger-image":"chooseImage","click .js-trigger-avatar":"chooseLogo","blur textarea":"updateModel"},modelEvents:{"change:background_image":"render"},templateHelpers:{logo:function(){return o.isFenxiao()?o.fullfillImage(window._global.template_logo,"!145x145.jpg"):o.fullfillImage(window._global.mp_data.logo,"!145x145.jpg")},fullfillImage:o.fullfillImage,isFenxiao:o.isFenxiao},chooseImage:function(){var e=this;o.isFenxiao()?n.initialize({multiChoose:!1,uploadURL:_global.url.fenxiao+"/common/qiniu/upToken.json",hideIconList:!0,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set("background_image",t.attachment_url)}}):n.initialize({multiChoose:!1,fetchTokenType:"wsc",uploadTokenType:"imgPub",callback:function(t){t=t[0],e.model.set("background_image",t.attachment_url)}})},chooseLogo:function(){var e=this;new i({callback:function(){e.render(),e.model.trigger("change")}})}})}),define("tpl!components/showcase/2.0.0/shop_banner_weapp/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var bgSize="750x370";"3"==store_info_style?bgSize="750x300":"4"==store_info_style&&(bgSize="750x500"),__p+='\n\n<form class="form-horizontal" novalidate>\n    <div class="app-sidebar-title">\n        <p class="app-sidebar-title__name">添加店铺信息</p>\n    </div>\n    <div class="control-group">\n        <label class="control-label">显示样式：</label>\n        <div class="controls" style="font-size: 12px;">\n            <label class="radio inline">\n                <input type="radio" name="store_info_style" value="0" ',"0"==store_info_style&&(__p+=" checked "),__p+='>样式1\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="store_info_style" value="1" ',"1"==store_info_style&&(__p+=" checked "),__p+='>样式2\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="store_info_style" value="2" ',"2"==store_info_style&&(__p+=" checked "),__p+='>样式3\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="store_info_style" value="3" ',"3"==store_info_style&&(__p+=" checked "),__p+='>样式4\n            </label>\n            <label class="radio inline">\n                <input type="radio" name="store_info_style" value="4" ',"4"==store_info_style&&(__p+=" checked "),__p+='>样式5\n            </label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景图片：</label>\n        <div class="controls">\n            <div class="custom-shop-banner" style="width: 320px; background-image: url('+(null==(__t=fullfillImage(background_image))?"":_.escape(__t))+');"></div>\n            <a class="control-action js-trigger-image" href="javascript: void(0);">修改</a>\n            <p class="help-desc">建议尺寸：'+(null==(__t=bgSize)?"":__t)+"像素，尺寸不匹配时，图片将被压缩或拉伸以铺满画面</p>\n        </div>\n    </div>\n</form>\n"}return __p}}),define("components/showcase/2.0.0/shop_banner_weapp/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","components/attachment/image/app","core/utils","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("components/attachment/image/app"),i=e("core/utils"),o=window._global;return t.extend({template:e("tpl!../templates/edit"),events:{"click .js-trigger-image":"chooseImage",'change input[type="radio"]':"updateModel"},modelEvents:{change:"render"},templateHelpers:{logo:function(){return i.fullfillImage(o.mp_data.logo,"!145x145.jpg")},fullfillImage:i.fullfillImage},chooseImage:function(){var e=this;n.initialize({multiChoose:!1,callback:function(t){t=t[0],e.model.set("background_image",t.attachment_url)}})}})}),define("tpl!components/showcase/2.0.0/tags/templates/edit_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="edit-tags">\n    <div class="tag-source">\n        <div class="control-group">\n            <label class="control-label pull-left">商品来源：</label>\n            <div class="controls pull-left">\n                ',__p+=title?'\n                        <a href="'+(null==(__t=url)?"":_.escape(__t))+'" target="_blank" class="tag-title new-window">'+(null==(__t=title)?"":_.escape(__t))+'</a>\n                        <a href="javascript:;" class="tag-modify js-select-tag">修改</a>\n                ':'\n                    <a href="javascript:;" class="js-select-tag pull-left">选择商品分组</a>\n                ',__p+='\n                <input type="hidden" name="title">\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>\n';return __p}}),define("components/showcase/2.0.0/tags/views/edit_item",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","components/modal/1.0.0/modal","core/utils","tpl!../templates/edit_item"],function(e){"use strict";var t=e("underscore"),n=(e("jquery"),e("components/showcase/2.0.0/base/views/edit_base")),i=e("components/modal/1.0.0/modal"),o=e("core/utils");return n.extend({tagName:"li",className:"choice",template:e("tpl!../templates/edit_item"),events:{"click .actions .delete":"delete","click .js-select-tag":"handleSelectTag"},onInit:function(){this.listenTo(this.model,"change",this.render)},urlCheck:function(e){this.fullfillUrl(e,"link_url")},delete:function(){var e=this.model.collection;this.model.destroy(),e.trigger("reset")},add:function(){if(this.model.collection.length>=8)return void o.errorNotify("选项最多8个。");var e=t.clone(this.model.constructor.prototype.defaults),n=this.model.index();this.model.collection.add(e,{at:n+1}),this.model.collection.trigger("reset")},handleSelectTag:function(){var e=this;this.tagModel=i.initialize({type:"tag"}).setChooseItemCallback(function(t){e.model.set({alias:t.data_alias,type:t.data_type,id:t.data_id,title:t.title,url:t.data_url})}),this.tagModel.modal("show")}})}),define("components/showcase/2.0.0/tags/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","./edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("./edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("tpl!components/showcase/2.0.0/tags/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",is_fenxiao||(__p+='\n<form class="form-horizontal" novalidate>\n\n    <div class="control-group-large">\n        <label class="control-label">商品分组模版：</label>\n        <div class="controls">\n            <label class="radio inline"><input type="radio" class="js-toggle-type" data-field-type="tag_list" name="tag_group" value="tag_list" /> 左侧菜单</label>\n            <label class="radio inline"><input type="radio" name="tag_group" value="tags" checked /> 顶部菜单</label>\n        </div>\n    </div>\n\n    <div class="control-group js-collection-region">\n\n    </div>\n    <div class="control-group options js-add-subentry">\n        <a class="add-option js-add-option" href="javascript:void(0);"><i class="icon-add"></i> 添加商品分组</a>\n    </div>\n\n    <div class="control-group">\n        <p class="app-component-desc help-desc">选择商品来源后，左侧实时预览暂不支持显示其包含的商品数据</p>\n    </div>\n\n</form>\n'),__p+='\n\n<div class="js-goods-style-region" style="margin-top: 10px;"></div>\n';return __p}}),define("components/showcase/2.0.0/tags/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","../views/edit_collection","components/showcase/2.0.0/goods_list/views/edit_goods_style","components/modal/1.0.0/modal","core/utils","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("../views/edit_collection"),i=e("components/showcase/2.0.0/goods_list/views/edit_goods_style"),o=e("components/modal/1.0.0/modal"),s=e("core/utils");return t.extend({template:e("tpl!../templates/edit"),regions:{collectionRegion:".js-collection-region",goodsStyleRegion:".js-goods-style-region"},events:{"click .js-add-option":"addOption","click .js-toggle-type":"toggleTagType"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.toggleOptions)},serializeData:function(){var e=this.model.toJSON();return s.insertFenxiaoInto(e),e},onRender:function(){this.collectionRegion.show(new n({collection:this.model.get("sub_entry"),layout:this})),this.goodsStyleRegion.show(new i({model:this.model})),this.toggleOptions()},addOption:function(){var e=this,t=e.model.get("sub_entry");o.initialize({multiChoose:!0,type:"tag"}).setChooseItemCallback(function(e){var n=!1;if(_.each(e,function(e){t.length<4?t.add({type:e.data_type,alias:e.data_alias,id:e.data_id,title:e.title,url:e.data_url}):n=!0}),n){var i=setTimeout(s.clearNotify,3e3);s.errorNotify("商品分组不能多于4个，已经自动删除多余的分组。",function(){clearTimeout(i)})}}).modal("show")},toggleOptions:function(){this.model.get("sub_entry").length>=4?this.$(".options").hide():this.$(".options").show()},toggleTagType:function(e){var t=this.layout,n=$(e.target).data("field-type"),i=this.layout.collection,o=this.model,s=window.SHOWCASE_CONFIG.models[n].initialize(o.configCache);s.configCache=o.toJSON(),i.add(s,{at:o.index(),silent:!0}),i.trigger("reset"),o.destroy(),t.displayEditView(s)}})}),define("tpl!components/showcase/2.0.0/notice/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal edit-tpl-11-11" novalidate onsubmit="return false">\n    <div class="control-group">\n        <label class="control-label">公告：</label>\n        <div class="controls">\n            <input type="text" name="content" value="'+(null==(__t=content)?"":_.escape(__t))+'" class="input-xxlarge" placeholder="请填写内容，如果过长，将会在手机上滚动显示">\n        </div>\n    </div>\n</form>\n';return __p}}),define("components/showcase/2.0.0/notice/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils");return t.extend({template:e("tpl!../templates/edit"),events:{"blur input":"updateModel"},updateModel:n.updateModel})}),
define("tpl!components/showcase/2.0.0/notice_weapp/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal edit-tpl-11-11" novalidate onsubmit="return false">\n    <div class="control-group">\n        <label class="control-label">公告：</label>\n        <div class="controls">\n            <input type="text" name="content" value="'+(null==(__t=content)?"":_.escape(__t))+'" class="input-xxlarge" placeholder="请填写内容，如果过长，将会在手机上滚动显示">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">背景颜色：</label>\n        <div class="controls">\n            <input type="color" value="'+(null==(__t=bg_color)?"":__t)+'" name="bg_color">\n            <button class="btn js-reset-bg" type="button">重置</button>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">文字颜色：</label>\n        <div class="controls">\n            <input type="color" value="'+(null==(__t=color)?"":__t)+'" name="color">\n            <button class="btn js-reset-color" type="button">重置</button>\n        </div>\n    </div>\n</form>\n';return __p}}),define("components/showcase/2.0.0/notice_weapp/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","components/setup_link/bind_link","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils"),i=e("components/setup_link/bind_link");return t.extend({template:e("tpl!../templates/edit"),events:{"blur input":"updateModel",'change input[type="color"]':"updateModel","click .js-reset-color":"handleResetColor","click .js-reset-bg":"handleResetBackground"},handleResetColor:function(){this.model.set("color","#666"),this.$('input[name="color"]').val("#666")},handleResetBackground:function(){this.model.set("bg_color","#fff8e9"),this.$('input[name="bg_color"]').val("#fff8e9")},onInit:function(){this.listenTo(this.model,"change:link_url",this.render),i.call(this)},updateModel:n.updateModel})}),define("text!components/showcase/2.0.0/coupon/templates/edit.html",[],function(){return'<form class="form-horizontal edit-custom-coupon" novalidate onsubmit="return false">\n    <div class="control-group">\n        <label class="control-label">优惠券：</label>\n        <div class="controls">\n            <ul class="coupon-list">\n            <% _.each(coupon, function(item) { %>\n                <li>\n                    <div class="coupon-list-content">\n                        <div class="coupon-list-summary">\n                            <span class="label label-success">优惠券</span>\n                            <span><%- item.name %></span>\n                            <span class="c-gray">\n                                <% if(item.at_least) { %>\n                                    （满<%= item.at_least %>元可用）\n                                <% } else { %>\n                                    无限制\n                                <% } %>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="coupon-list-opts">\n                        <a href="javascript:;" class="js-remove-coupon">删除</a>\n                    </div>\n                </li>\n\n            <% }); %>\n            </ul>\n            <% if(coupon.length < 3) { %>\n                <a href="javascript:;" class="control-action js-add-coupon">添加优惠券</a>\n            <% } %>\n            <input type="hidden" name="coupon">\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/coupon/views/edit",["require","jquery","underscore","../../base/views/edit_base","text!../templates/edit.html","components/modal/1.0.0/modal"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("../../base/views/edit_base"),o=e("text!../templates/edit.html"),s=e("components/modal/1.0.0/modal");return i.extend({template:n.template(o),events:{"click .js-add-coupon":"handleAddCoupon","click .js-remove-coupon":"handleRemoveCoupon"},modelEvents:{"change:coupon":"render"},handleAddCoupon:function(){var e=this;this.tradeincardModal=s.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(t){var i=e.model.get("coupon");n.each(t,function(e){i.length<3&&i.push({id:e.id,alias:e.data_alias,name:e.name,value:e.value,discount:e.discount,preferential_type:e.preferential_type,is_at_least:e.is_at_least,at_least:e.at_least})}),e.model.trigger("change:coupon"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},handleRemoveCoupon:function(e){var n=t(e.target).parents("li").index();this.model.get("coupon").splice(n,1),this.model.trigger("change:coupon"),this.model.trigger("change")}})}),define("tpl!components/showcase/2.0.0/coupon_weapp/templates/edit",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form class="form-horizontal couponweapp-edit-form" novalidate>\n    <div class="control-group">\n        <div><label>添加方式：</label></div>\n        <div class="coupon-edit-source-wrapper '+(null==(__t=show_coupon_source?"open":"")?"":_.escape(__t))+'">\n            <div class="coupon-edit-source-header">\n                <label class="radio inline">\n                    <input type="radio" name="coupon_source" value="0" ',"0"==coupon_source&&(__p+=" checked "),__p+='>\n                    自动获取\n                </label>\n                <span class="ui-block-head-help" style="position: relative; top: 3px; right: 0">\n                    <a href="javascript:void(0);" class="js-help-notes" data-class="bottom center"></a>\n                    <div class="js-notes-cont hide">\n                        <div>系统自动获取店铺优惠券, 建议选择</div>\n                    </div>\n                </span>\n                <span class="setting">高级设置</span>\n            </div>\n            <div class="coupon-edit-source-body">\n                <div class="control-group coupon-num-wrapper">\n                    <label class="control-label coupon-num-label">券活动数：</label>\n                    <div class="controls coupon-num-controls">\n                        <label class="radio inline all">\n                            <input type="radio" name="coupon_num" value="0" class="coupon-num-all" ',"0"==coupon_num&&(__p+=" checked "),__p+='>全部\n                        </label>\n                        <label class="radio inline other">\n                            <input type="radio" name="coupon_num" class="coupon-num-radio" value="1" ',"0"!=coupon_num&&(__p+=" checked "),__p+='>\n                        </label>\n                        <input type="text" name="coupon_num_input" value="'+(null==(__t=coupon_num_input)?"":__t)+'" placeholder="请输入显示的券活动数" onkeyup="this.value=this.value.replace(/\\D/g,\'\')" onafterpaste="this.value=this.value.replace(/\\D/g,\'\')">\n                    </div>\n                    <div class="control-group">\n                        <div class="controls" name="coupon_num_input"></div>\n                    </div>\n                    <div class="controls">\n                        <label class="checkbox inline hide-coupon-label">\n                            ',__p+="1"==hide_unshared_coupon?'\n                            <input type="checkbox" name="hide_unshared_coupon" class="hide-coupon-checkbox" value="1" checked />\n                            ':'\n                            <input type="checkbox" name="hide_unshared_coupon" class="hide-coupon-checkbox" value="0" />\n                            ',__p+='\n                        </label>\n                        <span class="hide-unshared-des">隐藏不可分享链接的优惠券</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="coupon-edit-source-wrapper">\n            <div class="coupon-edit-source-header">\n                <label class="radio inline">\n                    <input type="radio" name="coupon_source" value="1" ',"1"==coupon_source&&(__p+=" checked "),__p+='>\n                    手动添加\n                </label>\n            </div>\n        </div>\n    </div>\n    <div class="coupon-list">\n        ',_.each(coupon,function(e){__p+='\n            <div class="cart-content coupon-item">\n                <span>优惠券: </span>\n                <span class="coupon-info">'+(null==(__t=e.name)?"":__t)+" ("+(null==(__t=e.condition)?"":__t)+')</span>\n                <span class="remove-coupon">x</span>\n            </div>\n        '}),__p+="\n    </div>\n    ","1"==coupon_source&&coupon.length<10&&(__p+='\n        <div class="control-group">\n            <div class="cart-content add-coupon">+添加优惠券</div>\n        </div>\n    '),__p+="\n    ","1"==coupon_source&&(__p+='\n    <div class="control-group">\n        <div class="controls" name="coupon"></div>\n    </div>\n    <div class="help">\n        <span>最多添加10张优惠券</span>\n        ',coupon.length>=2&&(__p+="\n        <span>, 拖动选中的优惠券可对其排序</span>\n        "),__p+="\n    </div>\n    "),__p+='\n    <div class="control-group">\n        <div class="cart-content hide-empty-coupon">\n            <label class="checkbox inline hide-coupon-label">\n                ',__p+="1"==hide_empty_coupon?'\n                <input type="checkbox" name="hide_empty_coupon" class="hide-coupon-checkbox" value="1" checked/>\n                ':'\n                <input type="checkbox" name="hide_empty_coupon" class="hide-coupon-checkbox" value="0"/>\n                ',__p+='\n            </label>\n            <span class="hide-empty-des">已抢完券隐藏<span class="help">勾选后不显示已抢完的优惠券</span></span>\n        </div>\n    </div>\n    <p class="help-desc">当页面无可显示的优惠券时，优惠券区块将隐藏</p>\n</form>\n';return __p}}),define("components/showcase/2.0.0/coupon_weapp/views/edit",["require","components/showcase/2.0.0/base/views/edit_base","core/utils","components/modal/1.0.0/modal","underscore","jquery","tpl!../templates/edit"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_base"),n=e("core/utils"),i=e("components/modal/1.0.0/modal"),o=e("underscore"),s=e("jquery");return t.extend({template:e("tpl!../templates/edit"),templateHelpers:{fullfillImage:n.fullfillImage},modelEvents:{"change:coupon":"render"},events:{"change input":"updateModel","click .setting":"toggleCouponSource","click .add-coupon":"handleAddCoupon","click .remove-coupon":"handleRemoveCoupon"},onRender:function(){var e=this;this.$(".coupon-list").sortable({items:"> .coupon-item",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("coupon")),e.model.trigger("change"),e.model.trigger("change:coupon"))}})},handleAddCoupon:function(){var e=this;this.tradeincardModal=i.initialize({type:"tradeincard",multiChoose:!0}).setChooseItemCallback(function(t){var i=!1,s=e.model.get("coupon");o.each(t,function(e){if(s.length<10){s.every(function(t){return t.id!==e.id})&&s.push({id:e.id,name:e.name,origin_value:e.origin_value,discount:e.discount,preferential_type:e.preferential_type,is_at_least:e.is_at_least,origin_at_least:e.origin_at_least,condition:e.condition})}else i=!0}),i&&n.errorNotify("优惠券不能多于10张，已经自动删除多余的优惠券。"),e.model.trigger("change:coupon"),e.model.trigger("change")}),this.tradeincardModal.modal("show")},handleRemoveCoupon:function(e){var t=s(e.target).parents(".coupon-item").index();this.model.get("coupon").splice(t,1),this.model.trigger("change:coupon"),this.model.trigger("change")},toggleCouponSource:function(){var e=this.model.get("show_coupon_source");this.model.set("show_coupon_source",!e)},resetCoupon:function(){"0"==this.model.get("coupon_source")&&this.model.set("coupon",[])},onInit:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:coupon_source",this.resetCoupon)},updateModel:n.updateModel})}),define("text!components/showcase/2.0.0/ump_activity/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">营销活动：</label>\n        <div class="controls">\n            <div class="control-action clearfix">\n                <div class="dropdown hover">\n                    <a class="dropdown-toggle"><i class="icon-add"></i> 添加活动</a>\n                    <ul class="dropdown-menu">\n                        <li>\n                            <a class="js-add-seckill-activity add-activity">秒杀</a>\n                        </li>\n                        <li>\n                            <a class="js-add-limited-discount-activity add-activity">限时折扣</a>\n                        </li>\n                    </ul>\n                </div>\n                <input type="hidden" name="activity_id">\n            </div>\n        </div>\n    </div>\n</form>\n'}),define("text!components/ump_activity_dialog/templates/dialog.html",[],function(){return'<div class="zent-dialog-header">\n    <a class="zent-dialog-close">×</a>\n    <ul class="module-nav dialog-tab">\n        <li class="active"><a href="javascript:;" class="js-dialog-tab"><%= title %></a> | </li>\n        <li><a href="<%= addUrl %>" target="_blank">新建<%= title %></a></li>\n    </ul>\n</div>\n<div class="zent-dialog-body">\n    <div class="js-activity-list-region">\n        <div class="ui-page-loading"></div>\n    </div>\n</div>\n'}),define("components/ump_activity_dialog/activity_config",["require","exports","module"],function(e,t,n){var i={SecKill:1,LimitedDiscount:2};n.exports={EnumActivity:i,UIConfig:function(){var e={};return e[i.SecKill]={title:"秒杀",addUrl:"/v2/ump/seckill#add"},e[i.LimitedDiscount]={title:"限时折扣",addUrl:"/v2/ump/limitdiscount#add"},e}()}}),define("tpl!components/ump_activity_dialog/templates/list_header",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<th class="title cell-40">\n    <div class="td-cont">\n        <span>标题</span> <a class="js-refresh" href="javascript:void(0);">刷新</a>\n    </div>\n</th>\n<th class="time text-center cell-40">\n    <div class="td-cont">\n        <span>活动时间</span>\n    </div>\n</th>\n<th class="opts cell-20">\n    <div class="td-cont">\n        <form class="form-search">\n            <div class="input-append">\n                <input class="input-small js-search-input" type="text" value="'+(null==(__t=keyword)?"":__t)+'"><a href="javascript:void(0);" class="btn js-search" data-action-type="search">搜</a>\n            </div>\n        </form>\n    </div>\n</th>\n';return __p}}),define("tpl!components/ump_activity_dialog/templates/list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=fetched?'\n    <div class="ui-box">\n        <table class="ui-table ui-table-list">\n            <thead class="js-list-header-region"></thead>\n            <tbody class="js-list-body-region"></tbody>\n        </table>\n        <div class="js-list-empty-region"></div>\n    </div>\n    <div class="js-list-footer-region ui-box"></div>\n':'\n    <div class="ui-page-loading goods-list-loading"></div>\n',__p+="\n";return __p}}),define("components/ump_activity_dialog/views/list_header",["require","exports","module","marionette"],function(e,t,n){var i=e("marionette");n.exports=i.ItemView.extend({className:"widget-list-header",tagName:"tr",ui:{searchBtn:".js-search",searchInput:".js-search-input",refreshBtn:".js-refresh"},events:{"click @ui.searchBtn":"onSearch","click @ui.refreshBtn":"onRefresh","keyup @ui.searchInput":"onInputKeyup"},initialize:function(e){e=e||{},this.model=e.model},onInputKeyup:function(e){13===(e.which?e.which:e.keyCode)&&this.onSearch()},onSearch:function(){var e=this.ui.searchInput.val();this.model.set({keyword:e,p:"1"}).fetch()},onRefresh:function(){this.model.fetch()}})}),define("components/ump_activity_dialog/views/list_base",["require","exports","module","underscore","components/list/views/list","tpl!../templates/list_header","tpl!../templates/list","./list_header"],function(e,t,n){var i=e("underscore"),o=e("components/list/views/list");n.exports=o.extend({events:{"click .js-select-activity":"onActivitySelect"},templateHelpers:function(){return{fetched:this.model.fetched}},defaults:i.extend({},o.prototype.defaults,{listHeaderTemplate:e("tpl!../templates/list_header"),listTemplate:e("tpl!../templates/list"),ListHeaderView:e("./list_header")}),onRender:function(){var e=this.model.get("items");this.model.fetched&&(e&&e.length>0?this.renderView():(this.renderHeaderView(),this.renderEmptyView()),!this._resized&&this.model.fetched&&(this.options.layout.resize(),this._resized=!0))},setHash:function(){}})}),define("components/ump_activity_dialog/models/seckill/list",["require","exports","module","underscore","components/list/models/list"],function(e,t,n){var i=e("underscore"),o=e("components/list/models/list");n.exports=o.extend({defaults:i.extend({},o.prototype.defaults,{page_size:10}),url:window._global.url.www+"/ump/seckill/listWithImage.json"})}),define("components/ump_activity_dialog/models/seckill/list_item",["require","components/list/models/list_item"],function(e){"use strict";return e("components/list/models/list_item").extend({idAttribute:"id",defaults:{id:"",title:"",begin_at:"",end_at:"",is_delete:"",status:"",image_url:"",alias:""}})}),define("tpl!components/ump_activity_dialog/templates/seckill/list_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<td class="activity-name">\n    <a href="'+(null==(__t=_global.url.www+"/ump/seckill#view/"+id)?"":__t)+'" target="_blank">'+(null==(__t=title)?"":__t)+'</a>\n</td>\n<td class="text-center">'+(null==(__t=begin_at)?"":__t)+" 至 "+(null==(__t=end_at)?"":__t)+'</td>\n<td class="text-right">\n    ',__p+="\n    ",__p+=2==is_delete||0==status?'\n        <p class="gray">不可选</p>\n    ':'\n        <a href="javascript:;" class="zent-btn zent-btn-primary js-select-activity" data-id="'+(null==(__t=id)?"":__t)+'">选择</a>\n    ',__p+="\n</td>\n";return __p}}),define("components/ump_activity_dialog/views/seckill_list",["require","exports","module","underscore","jquery","./list_base","../models/seckill/list","../models/seckill/list_item","tpl!../templates/seckill/list_item"],function(e,t,n){var i=e("underscore"),o=e("jquery"),s=e("./list_base");n.exports=s.extend({defaults:i.extend({},s.prototype.defaults,{ListModel:e("../models/seckill/list"),ListItemModel:e("../models/seckill/list_item"),listItemTemplate:e("tpl!../templates/seckill/list_item")}),onActivitySelect:function(e){var t=o(e.target).data("id"),n=this.model.get("items").get(t);this.options.handleActivitySelect({activity_id:t,title:n.get("title"),goods_title:n.get("goods_title"),image_url:n.get("image_url"),alias:n.get("alias"),tag:n.get("tag")})}})}),define("components/ump_activity_dialog/models/limited_discount/list",["require","exports","module","underscore","components/list/models/list"],function(e,t,n){var i=e("underscore"),o=e("components/list/models/list");n.exports=o.extend({defaults:i.extend({},o.prototype.defaults,{page_size:10,type:"all"}),url:window._global.url.www+"/ump/limitdiscount/shortlist.json"})}),define("components/ump_activity_dialog/models/limited_discount/list_item",["require","components/list/models/list_item"],function(e){"use strict";return e("components/list/models/list_item").extend({idAttribute:"id",defaults:{id:"",name:"",start_date:"",end_date:"",is_start:!1,is_invalid:!1,is_expired:!1}})}),define("tpl!components/ump_activity_dialog/templates/limited_discount/list_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<td class="activity-name">\n    <a href="'+(null==(__t=_global.url.www+"/ump/limitdiscount#edit/"+id)?"":__t)+'" target="_blank">'+(null==(__t=name)?"":__t)+'</a>\n</td>\n<td class="text-center">\n    '+(null==(__t=start_date)?"":__t)+" 至 "+(null==(__t=end_date)?"":__t)+"\n    ",period&&(__p+='\n    <p class="c-gray">'+(null==(__t=period)?"":__t)+"</p>\n    "),__p+='\n</td>\n<td class="text-right">\n    ',__p+=is_invalid||is_expired?'\n        <p class="gray">不可选</p>\n    ':'\n        <a href="javascript:;" class="zent-btn zent-btn-primary js-select-activity" data-id="'+(null==(__t=id)?"":__t)+'">选择</a>\n    ',__p+="\n</td>\n";return __p}}),define("components/ump_activity_dialog/views/limited_discount_list",["require","exports","module","underscore","jquery","./list_base","../models/limited_discount/list","../models/limited_discount/list_item","tpl!../templates/limited_discount/list_item"],function(e,t,n){var i=e("underscore"),o=e("jquery"),s=e("./list_base");n.exports=s.extend({defaults:i.extend({},s.prototype.defaults,{ListModel:e("../models/limited_discount/list"),ListItemModel:e("../models/limited_discount/list_item"),listItemTemplate:e("tpl!../templates/limited_discount/list_item")}),onActivitySelect:function(e){var t=o(e.target).attr("data-id"),n=this.model.get("items").get(t);this.options.handleActivitySelect({activity_id:t,title:n.get("name")})}})}),define("components/ump_activity_dialog/main",["require","exports","module","underscore","components/dialog/index","text!./templates/dialog.html","./activity_config","./views/seckill_list","./views/limited_discount_list"],function(e,t,n){var i=e("underscore"),o=e("components/dialog/index"),s=e("text!./templates/dialog.html"),a=e("./activity_config");n.exports=o.extend({className:"zent-dialog ump-activity-dialog",template:i.template(s),regions:{activityRegion:".js-activity-list-region"},templateHelpers:function(){var e=this.options.type||a.EnumActivity.SecKill;return a.UIConfig[e]},onBeforeInit:function(e){this.handleActivitySelect=e.handleActivitySelect||function(){}},onRender:function(){var t,n=this.options.type,o=a.EnumActivity;if(n===o.SecKill)t=e("./views/seckill_list");else{if(n!==o.LimitedDiscount)throw new Error("unknown activity type");t=e("./views/limited_discount_list")}this.activityList=new t({layout:this,handleActivitySelect:i(this.onActivitySelect).bind(this)}),this.activityRegion.show(this.activityList)},onActivitySelect:function(e){this.handleActivitySelect(e),this.hide()}})}),define("components/showcase/2.0.0/ump_activity/views/edit",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/ump_activity/templates/edit.html","components/ump_activity_dialog/main","components/ump_activity_dialog/activity_config"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/ump_activity/templates/edit.html"),a=e("components/ump_activity_dialog/main"),l=e("components/ump_activity_dialog/activity_config").EnumActivity,r={};r[l.SecKill]="ump_seckill",r[l.LimitedDiscount]="ump_limitdiscount";var c=function(e){return function(){new a({type:e,handleActivitySelect:this.handleActivitySelect.bind(this,e)})}};n.exports=o.extend({template:i.template(s),events:{"click .js-add-seckill-activity":"handleAddSecKillActivity","click .js-add-limited-discount-activity":"handleAddLimitedDiscountActivity"},handleAddSecKillActivity:c(l.SecKill),handleAddLimitedDiscountActivity:c(l.LimitedDiscount),handleActivitySelect:function(e,t){var n=r[e],i=window.SHOWCASE_CONFIG.models[n].initialize(t);this.layout.collection.add(i,{at:this.model.index(),silent:!0}),this.layout.collection.trigger("reset"),this.layout.displayEditView(i),this.model.destroy()}})}),define("components/showcase/2.0.0/ump_activity/views/activity_edit_base",["require","exports","module","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/ump_activity/templates/edit.html","components/ump_activity_dialog/main","components/ump_activity_dialog/activity_config"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/edit_base"),s=e("text!components/showcase/2.0.0/ump_activity/templates/edit.html"),a=e("components/ump_activity_dialog/main"),l=e("components/ump_activity_dialog/activity_config").EnumActivity;n.exports=o.extend({template:i.template(s),events:{"click .js-delete-activity":"handleDeleteActivity","click .js-change-activity":"handleAddActivity"},activityType:l.SecKill,onInit:function(){this.listenTo(this.model,"change",this.render)},handleAddActivity:function(){new a({type:this.activityType,handleActivitySelect:i(this.handleActivitySelect).bind(this)})},handleDeleteActivity:function(){var e=window.SHOWCASE_CONFIG.models.ump_activity.initialize();this.layout.collection.add(e,{at:this.model.index(),silent:!0}),this.layout.collection.trigger("reset"),this.layout.displayEditView(e),this.model.destroy()},handleActivitySelect:function(e){this.model.set(e)}})}),define("text!components/showcase/2.0.0/ump_seckill/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">营销活动：</label>\n        <div class="controls">\n            <div class="control-action clearfix">\n                <div class="link-to pull-left">\n                    <span class="label label-success" style="max-width: 240px;overflow: hidden;text-overflow: ellipsis;">秒杀 <em class="link-to-title-text"><%= title %></em></span>\n                    <a href="javascript:;" class="js-delete-activity close-modal" title="删除">×</a>\n                </div>\n                <a href="javascript:;" class="js-change-activity pull-left">修改</a>\n            </div>\n        </div>\n    </div>\n</form>\n'}),define("components/showcase/2.0.0/ump_seckill/views/edit",["require","exports","module","underscore","components/showcase/2.0.0/ump_activity/views/activity_edit_base","text!components/showcase/2.0.0/ump_seckill/templates/edit.html","components/ump_activity_dialog/activity_config"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/ump_activity/views/activity_edit_base"),s=e("text!components/showcase/2.0.0/ump_seckill/templates/edit.html"),a=e("components/ump_activity_dialog/activity_config").EnumActivity;n.exports=o.extend({template:i.template(s),activityType:a.SecKill})}),define("text!components/showcase/2.0.0/ump_limited_discount/templates/edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <label class="control-label">已选活动：</label>\n        <div class="controls">\n            <div class="control-action clearfix">\n                <div class="link-to pull-left">\n                    <span class="label label-success link-to-title" style="padding: 3px 10px;"><em><%= title %></em></span>\n                    <a href="javascript:;" class="js-delete-activity close-modal" title="删除">&times;</a>\n                </div>\n                <a href="javascript:;" class="js-change-activity pull-left">修改</a>\n            </div>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">已选商品：</label>\n        <div class="controls">\n          <ul class="module-goods-list clearfix" name="goods">\n              <% _.each(goods, function(item, index) { %>\n                  <li class="sort">\n                      <a href="<%= item.kdt_url %>" target="_blank"><img src="<%= fullfillImage(item.image_url, \'!100x100.jpg\') %>" alt="商品图" width="50" height="50"></a>\n                      <a class="close-modal js-delete-goods small hide" data-id="<% item.id %>" title="删除">×</a>\n                  </li>\n              <% }); %>\n              <li>\n                  <a href="javascript:void(0);" class="js-add-goods add-goods"><i class="icon-add"></i></a>\n              </li>\n          </ul>\n        </div>\n    </div>\n</form>\n'}),define("text!components/showcase/2.0.0/ump_limited_discount/goods_dialog/templates/dialog.html",[],function(){return'<div class="zent-dialog-header">\n    <a class="zent-dialog-close">×</a>\n    <ul class="module-nav dialog-tab">\n        <li class="active"><a href="javascript:;" class="js-dialog-tab"><%= activityTitle %></a> - 选择商品</li>\n    </ul>\n</div>\n<div class="zent-dialog-body">\n    <div class="js-activity-list-region">\n        <div class="ui-page-loading"></div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/models/good_status",["require","exports","module"],function(e,t,n){"use strict";n.exports={Added:1,Selected:2,Available:3}}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/models/list",["require","exports","module","underscore","components/list/models/list"],function(e,t,n){var i=e("underscore"),o=e("components/list/models/list");n.exports=o.extend({defaults:function(){return i.extend({},o.prototype.defaults,{page_size:10,activity_id:this.get("activity_id")})},url:window._global.url.www+"/ump/limitdiscount/activitygoodsdetaillist.json"})}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/models/list_item",["require","exports","module","components/list/models/list_item","./good_status"],function(e,t,n){"use strict";var i=e("components/list/models/list_item"),o=e("./good_status");n.exports=i.extend({idAttribute:"goods_id",defaults:{goods_id:"",title:"",image_url:"",price:"",discount_price:"",stock_num:"",kdt_url:"",status:o.Available}})}),define("tpl!components/showcase/2.0.0/ump_limited_discount/goods_dialog/templates/list_item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<td class="good-name">\n    <a href="'+(null==(__t=kdt_url)?"":__t)+'" target="_blank">'+(null==(__t=title)?"":__t)+"</a>\n</td>\n<td>\n  <div>原价：¥"+(null==(__t=price)?"":__t)+"</div>\n  <div>折后：¥"+(null==(__t=discount_price)?"":__t)+"</div>\n</td>\n<td>\n  <div>"+(null==(__t=stock_num)?"":__t)+'</div>\n</td>\n<td class="text-right">\n    ',__p+=status===EnumGoodStatus.Available?'\n      <button class="btn js-select-good" data-id="'+(null==(__t=goods_id)?"":__t)+'">选择</button>\n    ':status===EnumGoodStatus.Added?'\n      <button class="btn btn-disabled" disabled>已添加</button>\n    ':'\n      <button class="btn btn-primary js-unselect-good" data-id="'+(null==(__t=goods_id)?"":__t)+'">取消</button>\n    ',__p+="\n</td>\n";return __p}}),define("tpl!components/showcase/2.0.0/ump_limited_discount/goods_dialog/templates/list_header",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<th class="title cell-30">\n    <div class="td-cont">\n        <span>标题</span> <a class="js-refresh" href="javascript:void(0);">刷新</a>\n    </div>\n</th>\n<th class="discount cell-30">\n    <div class="td-cont">\n        <span>优惠情况</span>\n    </div>\n</th>\n<th class="stock cell-20">\n    <div class="td-cont">\n        <span>商品库存</span>\n    </div>\n</th>\n<th class="opts cell-20">\n    <!-- 搜索暂时不做，后端有成本较大 -->\n    <!-- <div class="td-cont">\n        <form class="form-search">\n            <div class="input-append">\n                <input class="input-small js-search-input" type="text" value="'+(null==(__t=keyword)?"":__t)+'"><a href="javascript:void(0);" class="btn js-search" data-action-type="search">搜</a>\n            </div>\n        </form>\n    </div> -->\n</th>\n';return __p}}),define("tpl!components/showcase/2.0.0/ump_limited_discount/goods_dialog/templates/list_footer",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="pagenavi">'+(null==(__t=page)?"":__t)+"</div>\n<button ",hasSelection||(__p+="disabled"),__p+=' class="btn btn-primary js-comfirm-selection">确定使用</button>\n';return __p}}),
define("tpl!components/showcase/2.0.0/ump_limited_discount/goods_dialog/templates/list",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=fetched?'\n    <div class="ui-box">\n        <table class="ui-table ui-table-list">\n            <thead class="js-list-header-region"></thead>\n            <tbody class="js-list-body-region"></tbody>\n        </table>\n        <div class="js-list-empty-region"></div>\n    </div>\n    <div class="js-list-footer-region ui-box"></div>\n':'\n    <div class="ui-page-loading goods-list-loading"></div>\n',__p+="\n";return __p}}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/views/list_header",["require","exports","module","marionette"],function(e,t,n){var i=e("marionette");n.exports=i.ItemView.extend({className:"widget-list-header",tagName:"tr",ui:{refreshBtn:".js-refresh"},events:{"click @ui.refreshBtn":"onRefresh"},initialize:function(e){e=e||{},this.model=e.model},onRefresh:function(){this.model.fetch()}})}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/views/list_footer",["require","exports","module","components/list/views/list_footer","underscore"],function(e,t,n){"use strict";var i=e("components/list/views/list_footer"),o=e("underscore");n.exports=i.extend({events:o.extend({},i.prototype.events,{"click .js-comfirm-selection":"confirmSelection"}),templateHelpers:function(){return{hasSelection:!o.isEmpty(this.layout.options.selectedGoods)}},confirmSelection:function(){var e=this.layout;e.options.handleGoodSelect(e.options.selectedGoods)}})}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/views/list_item",["require","exports","module","components/list/views/list_item","../models/good_status"],function(e,t,n){"use strict";var i=e("components/list/views/list_item"),o=e("../models/good_status");n.exports=i.extend({templateHelpers:function(){return{EnumGoodStatus:o}}})}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/views/list",["require","exports","module","underscore","jquery","components/list/views/list","../models/good_status","../models/list","../models/list_item","tpl!../templates/list_item","tpl!../templates/list_header","tpl!../templates/list_footer","tpl!../templates/list","./list_header","./list_footer","./list_item"],function(e,t,n){function i(e,t){var n=-1;return o.some(e,function(e,i,o){var s=t(e,i,o);return s&&(n=i),s}),n}var o=e("underscore"),s=e("jquery"),a=e("components/list/views/list"),l=e("../models/good_status");n.exports=a.extend({events:{"click .js-select-good":"onGoodSelect","click .js-unselect-good":"onGoodUnselect"},modelEvents:{"change:items":"renderFooterView"},templateHelpers:function(){return{fetched:this.model.fetched}},defaults:o.extend({},a.prototype.defaults,{ListModel:e("../models/list"),ListItemModel:e("../models/list_item"),listItemTemplate:e("tpl!../templates/list_item"),listHeaderTemplate:e("tpl!../templates/list_header"),listFooterTemplate:e("tpl!../templates/list_footer"),listTemplate:e("tpl!../templates/list"),ListHeaderView:e("./list_header"),ListFooterView:e("./list_footer"),ListItemView:e("./list_item")}),fetched:function(){a.prototype.fetched.call(this);var e=function(e){var t=e.map(function(e){return e.goods_id});return t.sort(function(e,t){return e>t?1:e===t?0:-1}),t},t=function(e,t){return o.indexOf(e,t,!0)!==-1},n=this.model.get("items"),i=this.options,s=e(i.addedGoods),r=e(i.selectedGoods);n.forEach(function(e){var n=e.get("goods_id");t(s,n)?e.set("status",l.Added):t(r,n)&&e.set("status",l.Selected)})},onRender:function(){var e=this.model.get("items");this.model.fetched&&(e&&e.length>0?this.renderView():(this.renderHeaderView(),this.renderEmptyView()),!this._resized&&this.model.fetched&&(this.options.layout.resize(),this._resized=!0))},onGoodSelect:function(e){var t=s(e.target).attr("data-id"),n=this.model.get("items").get(t);this.options.selectedGoods.push({goods_id:t,title:n.get("title"),image_url:n.get("image_url"),kdt_url:n.get("kdt_url")}),n.set("status",l.Selected),this.model.trigger("change:items"),this.model.trigger("change")},onGoodUnselect:function(e){var t=s(e.target).attr("data-id"),n=this.model.get("items").get(t),o=this.options.selectedGoods,a=i(o,function(e){return e.goods_id===t});a!==-1&&(o.splice(a,1),n.set("status",l.Available),this.model.trigger("change:items"),this.model.trigger("change"))},setHash:function(){}})}),define("components/showcase/2.0.0/ump_limited_discount/goods_dialog/main",["require","exports","module","underscore","components/dialog/index","text!./templates/dialog.html","./views/list"],function(e,t,n){var i=e("underscore"),o=e("components/dialog/index"),s=e("text!./templates/dialog.html"),a=e("./views/list");n.exports=o.extend({className:"zent-dialog ump-activity-dialog",template:i.template(s),regions:{activityRegion:".js-activity-list-region"},templateHelpers:function(){return{activityTitle:this.options.activityTitle}},onBeforeInit:function(e){this.handleGoodSelect=e.handleGoodSelect||function(){},this.selectedGoods=[]},onRender:function(){this.activityList=new a({query:{activity_id:this.options.activityId},addedGoods:this.options.addedGoods,selectedGoods:this.selectedGoods,layout:this,handleGoodSelect:this.onGoodSelect.bind(this)}),this.activityRegion.show(this.activityList)},onGoodSelect:function(e){this.handleGoodSelect(e),this.hide()}})}),define("components/showcase/2.0.0/ump_limited_discount/views/edit",["require","exports","module","underscore","jquery","components/showcase/2.0.0/ump_activity/views/activity_edit_base","text!components/showcase/2.0.0/ump_limited_discount/templates/edit.html","components/ump_activity_dialog/activity_config","core/utils","../goods_dialog/main"],function(e,t,n){var i=e("underscore"),o=e("jquery"),s=e("components/showcase/2.0.0/ump_activity/views/activity_edit_base"),a=e("text!components/showcase/2.0.0/ump_limited_discount/templates/edit.html"),l=e("components/ump_activity_dialog/activity_config").EnumActivity,r=e("core/utils"),c=e("../goods_dialog/main");n.exports=s.extend({activityType:l.LimitedDiscount,template:i.template(a),templateHelpers:{fullfillImage:r.fullfillImage},events:i.extend({},s.prototype.events,{"click .js-delete-goods":"handleDeleteGoods","click .js-add-goods":"handleAddGoods"}),onRender:function(){var e=this;this.$(".module-goods-list").sortable({items:"> .sort",cursor:"move",start:function(e,t){t.item.data("startPos",t.item.index())},stop:function(t,n){var i=n.item.data("startPos"),o=n.item.index();i!==o&&(e.sort(i,o,e.model.get("goods")),e.model.trigger("change"),e.model.trigger("change:goods"))}})},handleDeleteGoods:function(e){var t=o(e.target),n=this.$(".module-goods-list .js-delete-goods").index(t);this.model.deleteGood(n)},handleAddGoods:function(){new c({addedGoods:this.model.get("goods"),activityTitle:this.model.get("title"),activityId:this.model.get("activity_id"),handleGoodSelect:this.handleGoodSelect.bind(this)})},handleGoodSelect:function(e){this.model.appendGood(e)},handleActivitySelect:function(e){e.goods=[],s.prototype.handleActivitySelect.call(this,e)}})}),define("text!components/showcase/2.0.0/offline_head/templates/edit.html",[],function(){return'<p class="text-empty">该区域内容会根据各网点实际情况输出，左侧图片仅供参考</p>'}),define("components/showcase/2.0.0/offline_head/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/offline_head/templates/edit.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/offline_head/templates/edit.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/paid_column/templates/edit.html",[],function(){return'<div class="form-horizontal">\n    <div class="control-group">\n        <label class="control-label">标题栏：</label>\n        <div class="controls">\n            <label class="radio inline"><input type="radio" name="show_title" value="1" <% if (show_title == \'1\') { %>checked<% } %> />显示</label>\n            <label class="radio inline"><input type="radio" name="show_title" value="0" <% if (show_title == \'0\') { %>checked<% } %> />不显示</label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名称：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" />\n            <label class="checkbox inline"><input type="checkbox" name="show_title_all" <% if (show_title_all == \'1\') { %>checked<% } %> />显示查看全部专栏入口</label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名称：</label>\n        <div class="controls">\n            <label class="radio"><input type="radio" name="column_from" value="newest" <% if (column_from == \'newest\') { %>checked<% } %> />展示最新的3个专栏</label>\n            <label class="radio"><input type="radio" name="column_from" value="custom" <% if (column_from == \'custom\') { %>checked<% } %> />自定义</label>\n            <input type="hidden" name="sub_entry" />\n            <% if (column_from == \'custom\') { %>\n            <div class="js-collection-region"></div>\n            <div class="options" style="margin-top: 10px">\n                <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个专栏</a>\n            </div>\n            <% } %>\n            <p class="help-desc">最多添加10个专栏，拖动选中的专栏可对其排序</p>\n        </div>\n    </div>\n</div>'}),define("text!components/showcase/2.0.0/paid_column/templates/edit_item.html",[],function(){return'<span>专栏：<a href="<%- url %>" target="_blank"><%- title %></a></span>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>'}),define("components/showcase/2.0.0/paid_column/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/paid_column/templates/edit_item.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/paid_column/templates/edit_item.html");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{"click .actions .delete":"delete"},onInit:function(){},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/paid_column/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/paid_column/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/paid_column/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/paid_column/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/paid_column/templates/edit.html","components/showcase/2.0.0/paid_column/views/edit_collection","components/paidcontent_select_dialog/index","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/paid_column/templates/edit.html"),o=e("components/showcase/2.0.0/paid_column/views/edit_collection"),s=e("components/paidcontent_select_dialog/index"),a=e("core/utils");return n.extend({className:"edit-paid-column",template:t.template(i),events:{"change input":"updateModel","click .js-add-option":"openSelectDialog"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions),this.listenTo(this.model,"change:column_from",this.render)},openSelectDialog:function(){var e=this;s.open({type:"column",callback:function(t){var n=e.model.get("sub_entry");n.length+t.length>10&&(t=t.slice(0,10-n.length),a.errorNotify("专栏最多添加10条")),t.forEach(function(t){e.hasExistInSubEntry(t)||e.model.get("sub_entry").add(t)})}})},hasExistInSubEntry:function(e){return this.model.get("sub_entry").some(function(t){return t.get("alias")===e.alias})},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},toggleOptions:function(){this.model.get("sub_entry").length>=10?this.$(".options").hide():this.$(".options").show()}})}),define("text!components/showcase/2.0.0/paid_content/templates/edit.html",[],function(){return'<div class="form-horizontal">\n    <div class="control-group">\n        <label class="control-label">标题栏：</label>\n        <div class="controls">\n            <label class="radio inline"><input type="radio" name="show_title" value="1" <% if (show_title == \'1\') { %>checked<% } %> />显示</label>\n            <label class="radio inline"><input type="radio" name="show_title" value="0" <% if (show_title == \'0\') { %>checked<% } %> />不显示</label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名称：</label>\n        <div class="controls">\n            <input type="text" name="title" value="<%- title %>" />\n            <label class="checkbox inline"><input type="checkbox" name="show_title_all" <% if (show_title_all == \'1\') { %>checked<% } %> />显示查看全部内容入口</label>\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label">标题名称：</label>\n        <div class="controls">\n            <label class="radio"><input type="radio" name="content_from" value="newest" <% if (content_from == \'newest\') { %>checked<% } %> />展示最新的6篇内容</label>\n            <label class="radio"><input type="radio" name="content_from" value="custom" <% if (content_from == \'custom\') { %>checked<% } %> />自定义</label>\n            <input type="hidden" name="sub_entry">\n            <% if (content_from == \'custom\') { %>\n            <div class="js-collection-region"></div>\n            <div class="options" style="margin-top: 10px">\n                <a href="javascript:void(0);" class="add-option js-add-option"><i class="icon-add"></i> 添加一个内容</a>\n            </div>\n            <% } %>\n            <p class="help-desc">最多添加10篇内容，拖动选中的内容可对其排序</p>\n        </div>\n    </div>\n</div>'}),define("text!components/showcase/2.0.0/paid_content/templates/edit_item.html",[],function(){return'<span>内容：<a href="<%- url %>" target="_blank"><%- title %></a></span>\n<div class="actions">\n    <span class="action delete close-modal" title="删除">×</span>\n</div>'}),define("components/showcase/2.0.0/paid_content/views/edit_item",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/paid_content/templates/edit_item.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/paid_content/templates/edit_item.html");return n.extend({tagName:"li",className:"choice",template:t.template(i),events:{"click .actions .delete":"delete"},onInit:function(){},delete:function(){this.model.destroy()}})}),define("components/showcase/2.0.0/paid_content/views/edit_collection",["require","components/showcase/2.0.0/base/views/edit_collection_base","components/showcase/2.0.0/paid_content/views/edit_item"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/edit_collection_base"),n=e("components/showcase/2.0.0/paid_content/views/edit_item");return t.extend({itemView:n,onShow:function(){this.sortable()}})}),define("components/showcase/2.0.0/paid_content/views/edit",["require","underscore","components/showcase/2.0.0/base/views/edit_base","text!components/showcase/2.0.0/paid_content/templates/edit.html","components/showcase/2.0.0/paid_content/views/edit_collection","components/paidcontent_select_dialog/index","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/edit_base"),i=e("text!components/showcase/2.0.0/paid_content/templates/edit.html"),o=e("components/showcase/2.0.0/paid_content/views/edit_collection"),s=e("components/paidcontent_select_dialog/index"),a=e("core/utils");return n.extend({className:"edit-paid-content",template:t.template(i),events:{"change input":"updateModel","click .js-add-option":"openSelectDialog"},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset remove add",this.toggleOptions),this.listenTo(this.model,"change:content_from",this.render)},openSelectDialog:function(){var e=this;s.open({type:"content",callback:function(t){var n=e.model.get("sub_entry");n.length+t.length>10&&(t=t.slice(0,10-n.length),a.errorNotify("内容最多添加10条")),t.forEach(function(t){e.hasExistInSubEntry(t)||e.model.get("sub_entry").add(t)})}})},hasExistInSubEntry:function(e){return this.model.get("sub_entry").some(function(t){return t.get("alias")===e.alias})},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this})),this.toggleOptions()},toggleOptions:function(){this.model.get("sub_entry").length>=10?this.$(".options").hide():this.$(".options").show()}})}),define("components/showcase/2.0.0/base/views/show_base",["require","underscore","jquery","marionette","components/popover/confirm/app"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("marionette"),o=e("components/popover/confirm/app");return i.Layout.extend({className:"app-field clearfix",events:{"click .delete":"handleDelete","click .add":"handleAdd","click .edit":"handleEdit","click .duplicate":"handleDuplicate",click:"handleClick"},initialize:function(e){this._setOptions(e),this._bind(),this.triggerMethod("init",e)},_setOptions:function(e){this.options=e||{},this.layout=this.options.layout},_bind:function(){this.listenTo(this,"close",this._handleViewClose),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"valid:error",this.validError),this.listenTo(this.layout,"editing",this.editing)},_handleViewClose:function(){this.layout=null},handleEdit:function(e){e.stopPropagation(),this.layout.collection.disableEdit||this.layout.displayEditView(this.model,{edit:!0})},handleDelete:function(e){if(e.preventDefault(),e.stopPropagation(),!this.layout.collection.disableEdit){var i=t.bind(function(){var e,t=this.layout,n=this.model.index();n=0===n?n+1:n-1,e=this.model.collection.at(n),this.model.get("is_singleton")&&window.NC.trigger("single_field:delete",this.model.get("type")),this.model.destroy(),e&&t.displayEditView(e)},this);new o({of:n(e.target),data:{title:"确定删除？"},callback:i})}},handleDuplicate:function(){var e=t.result(this.model.constructor.prototype,"defaults"),n=t.pick(this.model.toJSON(),t.keys(e)),i=this.model.index();n=JSON.parse(JSON.stringify(n)),this.model.parse&&(n=this.model.parse(n)),this.model.collection.add(n,{at:i+1})},handleClick:function(e){e.stopPropagation(),this.layout.displayEditView(this.model)},handleAdd:function(e){var t=!!(this.layout&&this.layout.collection&&this.layout.collection.disableEdit);e.stopPropagation(),t||this.layout.displayEditView(this.model,{add:!0})},editing:function(e){e===this.model?this.$el.addClass("editing"):this.$el.removeClass("editing")},validError:function(){this.layout.displayEditView(this.model,{error:!0})},position:function(){return this.$el.position()},offset:function(){return this.$el.offset()}})}),define("text!components/showcase/2.0.0/rich_text/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-richtext<% if (fullscreen == 1) { %> custom-richtext-fullscreen<% } %>" style="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>background-color: <%= color %><% } %>"><%= content || \'<p>点此编辑『富文本』内容 ——&gt;</p><p>你可以对文字进行<strong>加粗</strong>、<em>斜体</em>、<span style="text-decoration: underline;">下划线</span>、<span style="text-decoration: line-through;">删除线</span>、文字<span style="color: rgb(0, 176, 240);">颜色</span>、<span style="background-color: rgb(255, 192, 0); color: rgb(255, 255, 255);">背景色</span>、以及字号<span style="font-size: 20px;">大</span><span style="font-size: 14px;">小</span>等简单排版操作。</p><p>还可以在这里加入表格了</p><table><tbody><tr><td width="93" valign="top" style="word-break: break-all;">中奖客户</td><td width="93" valign="top" style="word-break: break-all;">发放奖品</td><td width="93" valign="top" style="word-break: break-all;">备注</td></tr><tr><td width="93" valign="top" style="word-break: break-all;">猪猪</td><td width="93" valign="top" style="word-break: break-all;">内测码</td><td width="93" valign="top" style="word-break: break-all;"><em><span style="color: rgb(255, 0, 0);">已经发放</span></em></td></tr><tr><td width="93" valign="top" style="word-break: break-all;">大麦</td><td width="93" valign="top" style="word-break: break-all;">积分</td><td width="93" valign="top" style="word-break: break-all;"><a href="javascript: void(0);" target="_blank">领取地址</a></td></tr></tbody></table><p style="text-align: left;"><span style="text-align: left;">也可在这里插入图片、并对图片加上超级链接，方便用户点击。</span></p>\' %></div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/rich_text/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/rich_text/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/rich_text/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/goods/templates/show.html",[],function(){
return'<div class="control-group">\n    <%  var showtype ;\n        if ( size_type == 0 ) {\n            showtype = \'card\';\n        } else if ( size_type == 1 ) {\n            showtype = \'waterfall\';\n        } else if (size_type == 3) {\n            showtype = \'promotion\';\n        } else {\n            showtype = \'normal\';\n        }\n\n        var btn_type = 0;\n        if ( buy_btn == \'1\' ) {\n            btn_type = buy_btn_type;\n        }\n        var is_show_wish_btn = show_wish_btn == \'1\' && window._global.isWishOpen == 1;\n\n        var is_show_sub_title = size == \'0\' && show_sub_title == \'1\';\n        var is_have_sub_title = is_show_sub_title;\n        var sub_title_class = is_show_sub_title ? \'has-sub-title\' : \'\';\n    %>\n    <ul class="sc-goods-list clearfix size-<%=size %> <%-showtype %> <%-size == 3? \'list\' : \'pic\' %>">\n        <!-- 大图  -->\n        <% if (size == \'0\') { %>\n            <% _.each(goods, function(item, index) { %>\n                <% is_have_sub_title = is_show_sub_title && item.sub_title %>\n                <li class="goods-card big-pic <%-showtype %> <%= sub_title_class %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>" />\n                        </div>\n                        <% if ( title == 1 || price == 1 || is_have_sub_title ) { %>\n                            <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %> btn<%=btn_type %>">\n                                <% if (price == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-sub-title c-black <%= is_have_sub_title ? \'\' : \'hide\' %>"><%=item.sub_title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <p class="goods-price-taobao"></p>\n                                <% } %>\n                                <% if (price == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-sub-title c-black <%= is_have_sub_title ? \'\' : \'hide\' %>"><%=item.sub_title %></p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                <% } %>\n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != \'normal\') { %>\n                            <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-title info-no-price\' : \'\' %>"></div>\n                        <% } %>\n                        <% if ( is_show_wish_btn ) { %>\n                            <div class="goods-wish btn-wish"></div>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <!-- 小图 -->\n        <% } else if ( size == \'1\' && showtype != \'waterfall\' ) { %>\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card small-pic <%-showtype %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>" />\n                        </div>\n                        <% if ( price != 0 || (title != 0 && showtype != \'promotion\' && showtype != \'normal\') || showtype == \'promotion\' ) { %>\n                            <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %>">\n                                <% if (price == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <p class="goods-price-taobao"></p>\n                                <% } %>\n                                <% if (price == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                <% } %>\n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != \'normal\' ) { %>\n                            <div class="goods-buy btn<%-buy_btn_type %>">\n                                <%- showtype == \'promotion\'? \'我要抢购\': \'\'%>\n                            </div>\n                            <% if ( title && !price && showtype != \'promotion\' ) { %>\n                                <div class=\'buy-tag-space\'></div>\n                            <% } %>\n                        <% } %>\n                        <% if ( is_show_wish_btn ) { %>\n                            <div class="goods-wish btn-wish"></div>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <% } else if (size == \'1\' && showtype == \'waterfall\') { %>\n\n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 != 1 ) { %>\n                    <li class="goods-card goods-list small-pic waterfall">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( is_show_wish_btn ) { %>\n                                <div class="goods-wish btn-wish"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 == 1 ) { %>\n                    <li class="goods-card small-pic waterfall">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( is_show_wish_btn ) { %>\n                                <div class="goods-wish btn-wish"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n        <% } else if (size == \'2\') { %>\n            <!-- 一大两小 -->\n            <% _.each(goods, function(item, index) { %>\n                <% if ((index+1) % 3 === 1) { %>\n                    <!-- 大图 -->\n                    <li class="goods-card big-pic <%-showtype %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>" />\n                            </div>\n                            <% if ( title == 1 || price == 1 ) { %>\n                                <div class="info clearfix <%- title == \'1\' ? \'\' : \'info-no-title\' %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != \'normal\') { %>\n                                <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-title info-no-price\' : \'\' %>"></div>\n                            <% } %>\n                            <% if ( is_show_wish_btn ) { %>\n                                <div class="goods-wish btn-wish"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } else { %>\n                <!-- 小图 -->\n                    <li class="goods-card small-pic <%-showtype %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>" />\n                            </div>\n                            <% if ( !(price == 0 && ((showtype == \'normal\' ) || showtype != \'normal\' && title == 0 ))) { %>\n                                <div class="info clearfix <%- title == \'1\'? \'\' : \'info-no-title\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"></p>\n                                        <p class="goods-price-taobao"></p>\n                                    <% } %>\n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( is_show_wish_btn ) { %>\n                                <div class="goods-wish btn-wish"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n            <% }); %>\n        <% } else if (size == \'3\') { %>\n            <!-- 列表 -->\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card <%-showtype %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                       <div class="photo-block">\n                           <img class="goods-photo js-goods-lazy" src="<%= fullfillImage(item.image_url) %>"/>\n                       </div>\n                       <div class="info">\n                            <p class="goods-title"><%- item.title %></p>\n                            <p class="goods-price"><em>￥<%= item.price %></em></p>\n                            <p class="goods-price-taobao"></p>\n                            <% if ( buy_btn ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                            <% } %>\n                            <% if ( is_show_wish_btn ) { %>\n                                <div class="goods-wish btn-wish"></div>\n                            <% } %>\n                       </div>\n                    </a>\n                </li>\n            <% }); %>\n        <% } %>\n    </ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/goods/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/goods/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/goods/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},serializeData:function(){var e=this.model.toJSON(),n=e.default_image_url;return t.isEmpty(e.goods)&&(1==this.model.get("size")?e.goods=[{id:null,url:null,image_url:n||"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}]:e.goods=[{id:null,url:null,image_url:n||"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}]),e}})}),define("text!components/showcase/2.0.0/goods_weapp/templates/show.html",[],function(){
return'<div class="control-group">\n    <%  var showtype ;\n        if ( size_type == 0 ) {\n            showtype = \'card\';\n        } else if ( size_type == 1 ) {\n            showtype = \'waterfall\';\n        } else if (size_type == 3) {\n            showtype = \'promotion\';\n        } else {\n            showtype = \'normal\';\n        }\n\n        var btn_type = 0;\n        if ( buy_btn == \'1\' ) {\n            btn_type = buy_btn_type;\n        }\n\n        var is_show_sub_title = size == \'0\' && title == \'1\' && show_sub_title == \'1\';\n        var is_have_sub_title = is_show_sub_title;\n        var sub_title_class = is_show_sub_title ? \'has-sub-title\' : \'\';\n        var has_price_class = price == \'1\' ? \'has-price\' : \'\';\n        var has_button_class = buy_btn == \'1\' ? \'has-btn\' : \'not-has-btn\';\n        var info_title_class = title == \'1\' ? \'info-has-title\' : \'info-no-title\';\n    %>\n    <ul class="sc-goods-list clearfix size-<%=size %> <%-showtype %> <%-size == 3? \'list\' : \'pic\' %>">\n        <!-- 大图  -->\n        <% if (size == \'0\') { %>\n            <% _.each(goods, function(item, index) { %>\n                <% is_have_sub_title = is_show_sub_title && item.sub_title %>\n                <li class="goods-card big-pic <%-showtype %> <%= sub_title_class %> <%= has_price_class %> <%= has_button_class %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>" />\n                        </div>\n                        <% if ( title == 1 || price == 1 || is_have_sub_title ) { %>\n                            <div class="info clearfix <%- info_title_class %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %> btn<%=btn_type %>">\n                                <% if (price == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-sub-title c-black <%= is_have_sub_title ? \'\' : \'hide\' %>"><%=item.sub_title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                <% } %>\n                                <% if (price == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-sub-title c-black <%= is_have_sub_title ? \'\' : \'hide\' %>"><%=item.sub_title %></p>\n                                <% } %>\n                            </div>\n                        <% }%>\n                        <% if ( buy_btn && showtype != \'normal\') { %>\n                            <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-title info-no-price\' : \'\' %>"></div>\n                        <% } %>\n                        <% if ( show_corner_mark == 1 ) { %>\n                            <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <!-- 小图 -->\n        <% } else if ( size == \'1\' && showtype != \'waterfall\' ) { %>\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card small-pic <%-showtype %> <%= has_button_class %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>" />\n                        </div>\n                        <% if (price == \'1\' || title == \'1\') { %>\n                            <div class="info clearfix <%- info_title_class %>">\n                                <% if (price == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                <% } %>\n                                <% if (price == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                <% } %>\n                            </div>\n                        <% }%>\n                        <% if ( (buy_btn && showtype != \'normal\') || showtype == \'promotion\' ) { %>\n                            <div class="goods-buy btn<%-buy_btn_type %>">\n                                <%- showtype == \'promotion\'? \'我要抢购\': \'\'%>\n                            </div>\n                        <% } %>\n                        <% if ( show_corner_mark == 1 ) { %>\n                            <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                        <% } %>\n                    </a>\n                </li>\n            <% }); %>\n        <% } else if (size == \'1\' && showtype == \'waterfall\') { %>\n\n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 != 1 ) { %>\n                    <li class="goods-card goods-list small-pic waterfall <%= has_button_class %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- info_title_class %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( show_corner_mark == 1 ) { %>\n                                <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n            <li class="sc-waterfall-half clearfix">\n                <ul class="clearfix">\n                <% _.each(goods, function(item, index) { %>\n                <% if( index % 2 == 1 ) { %>\n                    <li class="goods-card small-pic waterfall <%= has_button_class %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>"/>\n                            </div>\n                            <% if ( !(price == 0 && showtype != \'normal\' && title == 0 )) { %>\n                                <div class="info clearfix <%- info_title_class %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                    <% } %>\n                                </div>\n                            <% } %>\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( show_corner_mark == 1 ) { %>\n                                <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n                <% }); %>\n                </ul>\n            </li>\n        <% } else if (size == \'2\') { %>\n            <!-- 一大两小 -->\n            <% _.each(goods, function(item, index) { %>\n                <% if ((index+1) % 3 === 1) { %>\n                    <!-- 大图 -->\n                    <li class="goods-card big-pic <%-showtype %> <%= has_button_class %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix" style="margin-bottom: 5px;">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>" />\n                            </div>\n                            <% if ( title == 1 || price == 1 ) { %>\n                                <div class="info clearfix <%- info_title_class %> <%- price == \'1\' ? \'info-price\' : \'info-no-price\' %>">\n                                    <% if (price == \'1\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                        <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                    <% } %>\n                                    <% if (price == \'0\') { %>\n                                        <p class="goods-title"><%- item.title %></p>\n                                    <% } %>\n                                </div>\n                            <% }%>\n                            <% if ( buy_btn && showtype != \'normal\') { %>\n                                <div class="goods-buy btn<%-buy_btn_type %> <%-title == \'1\' && price == \'0\'? \'info-title info-no-price\' : \'\' %>"></div>\n                            <% } %>\n                            <% if ( show_corner_mark == 1 ) { %>\n                                <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } else { %>\n                <!-- 小图 -->\n                    <li class="goods-card small-pic <%-showtype %> <%= has_button_class %>">\n                        <a href="javascript: void(0);" class="link js-goods clearfix">\n                            <div class="photo-block">\n                                <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>" />\n                            </div>\n\n                            <% if (price == \'1\' || title == \'1\') { %>\n                            <div class="info clearfix <%- info_title_class %>">\n                                <% if (price == \'1\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                    <p class="goods-price"><em>￥<%= item.price %></em></p>\n                                <% } %>\n                                <% if (price == \'0\') { %>\n                                    <p class="goods-title"><%- item.title %></p>\n                                <% } %>\n                            </div>\n                            <% } %>\n\n                            <% if ( buy_btn && showtype != \'normal\' ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                                <% if ( title && !price) { %>\n                                    <div class=\'buy-tag-space\'></div>\n                                <% } %>\n                            <% } %>\n                            <% if ( show_corner_mark == 1 ) { %>\n                                <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                            <% } %>\n                        </a>\n                    </li>\n                <% } %>\n            <% }); %>\n        <% } else if (size == \'3\') { %>\n            <!-- 列表 -->\n            <% _.each(goods, function(item, index) { %>\n                <li class="goods-card <%-showtype %> <%= has_button_class %>">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                       <div class="photo-block">\n                           <img class="goods-photo js-goods-lazy" style="width: 100%" src="<%= fullfillImage(item.image_url) %>"/>\n                       </div>\n                       <div class="info">\n                            <p class="goods-title"><%- item.title %></p>\n                            <p class="goods-price"><em>￥<%= item.price %></em></p>\n                            <% if ( buy_btn ) { %>\n                                <div class="goods-buy btn<%-buy_btn_type %>"></div>\n                            <% } %>\n                            <% if ( show_corner_mark == 1 ) { %>\n                                <div class="corner-mark mark<%= corner_mark_type %>"></div>\n                            <% } %>\n                       </div>\n                    </a>\n                </li>\n            <% }); %>\n        <% } %>\n    </ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/goods_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/goods_weapp/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/goods_weapp/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},serializeData:function(){var e=this.model.toJSON(),n=e.default_image_url;return t.isEmpty(e.goods)&&(1==this.model.get("size")?e.goods=[{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}]:e.goods=[{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{id:null,url:null,image_url:n||"public_files/2017/07/17/9f344f5fb8188caa6d03dd9a95457bc9.png",price:"9999.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}]),e}})}),define("tpl!components/showcase/2.0.0/goods_list/templates/show_goods_style",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var showtype;showtype=0==size_type?"card":1==size_type?"waterfall":3==size_type?"promotion":"normal";var btn_type=0;"1"==buy_btn&&(btn_type=buy_btn_type);var is_show_wish_btn="1"==show_wish_btn&&1==window._global.isWishOpen,is_show_sub_title="0"==size&&"1"==show_sub_title,is_have_sub_title=is_show_sub_title,sub_title_class=is_show_sub_title?"has-sub-title":"";if(__p+="\n\n","1"==size){__p+="\n    ";var goodsSample=[{image_url:"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"379.00",price_tao:"原价：380.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"5.50",price_tao:"原价：8.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg",price:"32.00",price_tao:"原价：60.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg",price:"60.00",price_tao:"原价：80.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}];__p+="\n"}else{__p+="\n    ";var goodsSample=[{image_url:"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"379.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"5.50",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg",price:"60.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}];__p+="\n"}__p+='\n<ul class="sc-goods-list clearfix size-'+(null==(__t=size)?"":__t)+" "+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=3==size?"list":"pic")?"":_.escape(__t))+'">\n    <!-- 大图  -->\n    ',"0"==size?(__p+="\n        ",_.each(goodsSample,function(e,t){__p+='\n            <li class="goods-card big-pic '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=sub_title_class)?"":__t)+'">\n                <a href="javascript: void(0);" class="link js-goods clearfix">\n                    <div class="photo-block">\n                        <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" />\n                    </div>\n                    ',(1==title||1==price||is_have_sub_title)&&(__p+='\n                        <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+" "+(null==(__t="1"==price?"info-price":"info-no-price")?"":_.escape(__t))+" btn"+(null==(__t=btn_type)?"":__t)+'">\n                            ',"1"==price&&(__p+='\n                                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                <p class="goods-sub-title c-black '+(null==(__t=is_have_sub_title?"":"hide")?"":__t)+'">'+(null==(__t=e.sub_title)?"":__t)+'</p>\n                                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                <p class="goods-price-taobao"></p>\n                            '),__p+="\n                            ","0"==price&&(__p+='\n                                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                <p class="goods-sub-title c-black '+(null==(__t=is_have_sub_title?"":"hide")?"":__t)+'">'+(null==(__t=e.sub_title)?"":__t)+'</p>\n                                <p class="goods-price "></p>\n                                <p class="goods-price-taobao"></p>\n                            '),__p+="\n                        </div>\n                    "),__p+="\n                    ",buy_btn&&"normal"!=showtype&&(__p+='\n                        <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+" "+(null==(__t="1"==title&&"0"==price?"info-title info-no-price":"")?"":_.escape(__t))+'"></div>\n                        ',title&&!price&&"card"!=showtype&&(__p+="\n                            <div class='buy-tag-space'></div>\n                        "),__p+="\n                    "),__p+="\n                    ",is_show_wish_btn&&(__p+='\n                        <div class="goods-wish btn-wish"></div>\n                    '),__p+="\n                </a>\n            </li>\n        "}),__p+="\n    <!-- 小图 -->\n    "):"1"==size&&"waterfall"!=showtype?(__p+="\n        ",_.each(goodsSample,function(e,t){__p+='\n            <li class="goods-card small-pic '+(null==(__t=showtype)?"":_.escape(__t))+'">\n                <a href="javascript: void(0);" class="link js-goods clearfix">\n                    <div class="photo-block">\n                        <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" />\n                    </div>\n                    ',(0!=price||0!=title&&"promotion"!=showtype&&"normal"!=showtype||"promotion"==showtype)&&(__p+='\n                        <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+'">\n                            ',"1"==price&&(__p+='\n                                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                <p class="goods-price-taobao">'+(null==(__t=e.price_tao)?"":_.escape(__t))+"</p>\n                            "),__p+="\n                            ","0"==price&&(__p+='\n                                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                <p class="goods-price"></p>\n                                <p class="goods-price-taobao">'+(null==(__t=e.price_tao)?"":_.escape(__t))+"</p>\n                            "),__p+="\n                        </div>\n                    "),__p+="\n                    ",buy_btn&&"normal"!=showtype&&(__p+='\n                        <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'">\n                            '+(null==(__t="promotion"==showtype?"我要抢购":"")?"":_.escape(__t))+"\n                        </div>\n                        ",title&&!price&&"promotion"!=showtype&&(__p+="\n                            <div class='buy-tag-space'></div>\n                        "),__p+="\n                    "),__p+="\n                    ",is_show_wish_btn&&(__p+='\n                        <div class="goods-wish btn-wish"></div>\n                    '),__p+="\n                </a>\n            </li>\n        "}),__p+="\n    "):"1"==size&&"waterfall"==showtype?(__p+='\n\n        <li class="sc-waterfall-half clearfix">\n            <ul class="clearfix">\n            ',_.each(goodsSample,function(e,t){__p+="\n            ",t%2!=1&&(__p+='\n                <li class="goods-card small-pic waterfall">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" style="height:'+(null==(__t=145+30*t)?"":__t)+'px;"/>\n                        </div>\n                        ',0==price&&"normal"!=showtype&&0==title||(__p+='\n                            <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+'">\n                                ',"1"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                                ","0"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                            </div>\n                        "),__p+="\n                        ",buy_btn&&"normal"!=showtype&&(__p+='\n                            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                            ',title&&!price&&(__p+="\n                                <div class='buy-tag-space'></div>\n                            "),__p+="\n                        "),__p+="\n                        ",is_show_wish_btn&&(__p+='\n                            <div class="goods-wish btn-wish"></div>\n                        '),__p+="\n                    </a>\n                </li>\n            "),__p+="\n            "}),__p+='\n            </ul>\n        </li>\n        <li class="sc-waterfall-half clearfix">\n            <ul class="clearfix">\n            ',_.each(goodsSample,function(e,t){__p+="\n            ",t%2==1&&(__p+='\n                <li class="goods-card small-pic waterfall">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" style="height:'+(null==(__t=145+10*t)?"":__t)+'px;"/>\n                        </div>\n                        ',0==price&&"normal"!=showtype&&0==title||(__p+='\n                            <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+'">\n                                ',"1"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                                ","0"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                            </div>\n                        "),__p+="\n                        ",buy_btn&&"normal"!=showtype&&(__p+='\n                            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                            ',title&&!price&&(__p+="\n                                <div class='buy-tag-space'></div>\n                            "),__p+="\n                        "),__p+="\n                        ",is_show_wish_btn&&(__p+='\n                            <div class="goods-wish btn-wish"></div>\n                        '),__p+="\n                    </a>\n                </li>\n            "),__p+="\n            "}),__p+="\n            </ul>\n        </li>\n    "):"2"==size?(__p+="\n        <!-- 一大两小 -->\n        ",_.each(goodsSample,function(e,t){__p+="\n            ",(t+1)%3==1?(__p+='\n                <!-- 大图 -->\n                <li class="goods-card big-pic '+(null==(__t=showtype)?"":_.escape(__t))+'">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" />\n                        </div>\n                        ',1!=title&&1!=price||(__p+='\n                            <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+" "+(null==(__t="1"==price?"info-price":"info-no-price")?"":_.escape(__t))+'">\n                                ',"1"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                                ","0"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                            </div>\n                        "),__p+="\n                        ",buy_btn&&"normal"!=showtype&&(__p+='\n                            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+" "+(null==(__t="1"==title&&"0"==price?"info-title info-no-price":"")?"":_.escape(__t))+'"></div>\n                        '),__p+="\n                        ",is_show_wish_btn&&(__p+='\n                            <div class="goods-wish btn-wish"></div>\n                        '),__p+="\n                    </a>\n                </li>\n            "):(__p+='\n            <!-- 小图 -->\n                <li class="goods-card small-pic '+(null==(__t=showtype)?"":_.escape(__t))+'">\n                    <a href="javascript: void(0);" class="link js-goods clearfix">\n                        <div class="photo-block">\n                            <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" />\n                        </div>\n                        ',0==price&&("normal"==showtype||"normal"!=showtype&&0==title)||(__p+='\n                            <div class="info clearfix '+(null==(__t="1"==title?"":"info-no-title")?"":_.escape(__t))+'">\n                                ',"1"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                                ","0"==price&&(__p+='\n                                    <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                                    <p class="goods-price"></p>\n                                    <p class="goods-price-taobao"></p>\n                                '),__p+="\n                            </div>\n                        "),__p+="\n                        ",buy_btn&&"normal"!=showtype&&(__p+='\n                            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                            ',title&&!price&&(__p+="\n                                <div class='buy-tag-space'></div>\n                            "),__p+="\n                        "),__p+="\n                        ",is_show_wish_btn&&(__p+='\n                            <div class="goods-wish btn-wish"></div>\n                        '),__p+="\n                    </a>\n                </li>\n            "),__p+="\n        "}),__p+="\n    "):"3"==size&&(__p+="\n        <!-- 列表 -->\n        ",_.each(goodsSample,function(e,t){
__p+='\n            <li class="goods-card '+(null==(__t=showtype)?"":_.escape(__t))+'">\n                <a href="javascript: void(0);" class="link js-goods clearfix">\n                   <div class="photo-block">\n                       <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n                   </div>\n                   <div class="info">\n                        <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                        <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+'</em></p>\n                        <p class="goods-price-taobao"></p>\n                        ',buy_btn&&(__p+='\n                            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                        '),__p+="\n                        ",is_show_wish_btn&&(__p+='\n                            <div class="goods-wish btn-wish"></div>\n                        '),__p+="\n                   </div>\n                </a>\n            </li>\n        "}),__p+="\n    "),__p+="\n</ul>\n"}return __p}}),define("components/showcase/2.0.0/goods_list/views/show_goods_style",["require","marionette","core/utils","tpl!../templates/show_goods_style"],function(e){"use strict";var t=e("marionette"),n=e("core/utils");return t.ItemView.extend({template:e("tpl!../templates/show_goods_style"),templateHelpers:{fullfillImage:n.fullfillImage}})}),define("tpl!components/showcase/2.0.0/goods_list/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="js-goods-style-region"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/goods_list/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","./show_goods_style","tpl!../templates/show"],function(e){"use strict";var t=(e("underscore"),e("components/showcase/2.0.0/base/views/show_base")),n=e("./show_goods_style");return t.extend({template:e("tpl!../templates/show"),regions:{goodsStyleRegion:".js-goods-style-region"},onRender:function(){this.goodsStyleRegion.show(new n({model:this.model}))}})}),define("tpl!components/showcase/2.0.0/goods_list_weapp/templates/show_goods_style",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var showtype;showtype=0==size_type?"card":1==size_type?"waterfall":3==size_type?"promotion":"normal";var btn_type=0;"1"==buy_btn&&(btn_type=buy_btn_type);var is_show_sub_title="0"==size&&"1"==title&&"1"==show_sub_title,is_have_sub_title=is_show_sub_title,sub_title_class=is_show_sub_title?"has-sub-title":"",has_price_class="1"==price?"has-price":"",has_button_class="1"==buy_btn?"has-btn":"not-has-btn",info_title_class="1"==title?"info-has-title":"info-no-title";if(__p+="\n\n","1"==size){__p+="\n    ";var goodsSample=[{image_url:"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"379.00",price_tao:"原价：380.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"5.50",price_tao:"原价：8.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg",price:"32.00",price_tao:"原价：60.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg",price:"60.00",price_tao:"原价：80.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}];__p+="\n"}else{__p+="\n    ";var goodsSample=[{image_url:"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"379.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"5.50",title:"此处显示商品名称",sub_title:"此处显示商品描述"},{image_url:"public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg",price:"60.00",title:"此处显示商品名称",sub_title:"此处显示商品描述"}];__p+="\n"}__p+='\n\n<ul class="sc-goods-list clearfix size-'+(null==(__t=size)?"":__t)+" "+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=3==size?"list":"pic")?"":_.escape(__t))+'">\n    <!-- 大图  -->\n    ',"0"==size?(__p+="\n    ",_.each(goodsSample,function(e,t){__p+="\n    ",is_have_sub_title=is_show_sub_title&&e.sub_title,__p+='\n    <li class="goods-card big-pic '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=sub_title_class)?"":__t)+" "+(null==(__t=has_price_class)?"":__t)+" "+(null==(__t=has_button_class)?"":__t)+'">\n        <a href="javascript: void(0);" class="link js-goods clearfix">\n            <div class="photo-block">\n                <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n            </div>\n            ',(1==title||1==price||is_have_sub_title)&&(__p+='\n            <div\n                class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+" "+(null==(__t="1"==price?"info-price":"info-no-price")?"":_.escape(__t))+" btn"+(null==(__t=btn_type)?"":__t)+'">\n                ',"1"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-sub-title c-black '+(null==(__t=is_have_sub_title?"":"hide")?"":__t)+'">'+(null==(__t=e.sub_title)?"":__t)+'</p>\n                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                "),__p+="\n                ","0"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-sub-title c-black '+(null==(__t=is_have_sub_title?"":"hide")?"":__t)+'">'+(null==(__t=e.sub_title)?"":__t)+"</p>\n                "),__p+="\n            </div>\n            "),__p+="\n            ",buy_btn&&"normal"!=showtype&&(__p+='\n            <div\n                class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+" "+(null==(__t="1"==title&&"0"==price?"info-title info-no-price":"")?"":_.escape(__t))+'"></div>\n            '),__p+="\n        </a>\n    </li>\n    "}),__p+="\n    <!-- 小图 -->\n    "):"1"==size&&"waterfall"!=showtype?(__p+="\n    ",_.each(goodsSample,function(e,t){__p+='\n    <li class="goods-card small-pic '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=has_button_class)?"":__t)+'">\n        <a href="javascript: void(0);" class="link js-goods clearfix">\n            <div class="photo-block">\n                <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n            </div>\n            ',"1"!=price&&"1"!=title||(__p+='\n            <div class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+'">\n                ',"1"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                "),__p+="\n                ","0"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+"</p>\n                "),__p+="\n            </div>\n            "),__p+="\n            ",(buy_btn&&"normal"!=showtype||"promotion"==showtype)&&(__p+='\n            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'">\n                '+(null==(__t="promotion"==showtype?"我要抢购":"")?"":_.escape(__t))+"\n            </div>\n            "),__p+="\n        </a>\n    </li>\n    "}),__p+="\n    "):"1"==size&&"waterfall"==showtype?(__p+='\n\n    <li class="sc-waterfall-half clearfix">\n        <ul class="clearfix">\n            ',_.each(goodsSample,function(e,t){__p+="\n            ",t%2!=1&&(__p+='\n            <li class="goods-card goods-list small-pic waterfall '+(null==(__t=has_button_class)?"":__t)+'">\n                <a href="javascript: void(0);" class="link js-goods clearfix">\n                    <div class="photo-block">\n                        <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" style="height:'+(null==(__t=145+10*t)?"":__t)+'px;"/>\n                    </div>\n                    ',0==price&&"normal"!=showtype&&0==title||(__p+='\n                    <div class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+'">\n                        ',"1"==price&&(__p+='\n                        <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                        <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                        "),__p+="\n                        ","0"==price&&(__p+='\n                        <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+"</p>\n                        "),__p+="\n                    </div>\n                    "),__p+="\n                    ",buy_btn&&"normal"!=showtype&&(__p+='\n                    <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                    ',title&&!price&&(__p+="\n                    <div class='buy-tag-space'></div>\n                    "),__p+="\n                    "),__p+="\n                </a>\n            </li>\n            "),__p+="\n            "}),__p+='\n        </ul>\n    </li>\n    <li class="sc-waterfall-half clearfix">\n        <ul class="clearfix">\n            ',_.each(goodsSample,function(e,t){__p+="\n            ",t%2==1&&(__p+='\n            <li class="goods-card small-pic waterfall '+(null==(__t=has_button_class)?"":__t)+'">\n                <a href="javascript: void(0);" class="link js-goods clearfix">\n                    <div class="photo-block">\n                        <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'" style="height:'+(null==(__t=145+10*t)?"":__t)+'px;"/>\n                    </div>\n                    ',0==price&&"normal"!=showtype&&0==title||(__p+='\n                    <div class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+'">\n                        ',"1"==price&&(__p+='\n                        <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                        <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                        "),__p+="\n                        ","0"==price&&(__p+='\n                        <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+"</p>\n                        "),__p+="\n                    </div>\n                    "),__p+="\n                    ",buy_btn&&"normal"!=showtype&&(__p+='\n                    <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                    ',title&&!price&&(__p+="\n                    <div class='buy-tag-space'></div>\n                    "),__p+="\n                    "),__p+="\n                </a>\n            </li>\n            "),__p+="\n            "}),__p+="\n        </ul>\n    </li>\n    "):"2"==size?(__p+="\n    <!-- 一大两小 -->\n    ",_.each(goodsSample,function(e,t){__p+="\n    ",(t+1)%3==1?(__p+='\n    <!-- 大图 -->\n    <li class="goods-card big-pic '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=has_button_class)?"":__t)+'">\n        <a href="javascript: void(0);" class="link js-goods clearfix" style="margin-bottom: 5px;">\n            <div class="photo-block">\n                <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n            </div>\n            ',1!=title&&1!=price||(__p+='\n            <div class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+" "+(null==(__t="1"==price?"info-price":"info-no-price")?"":_.escape(__t))+'">\n                ',"1"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                "),__p+="\n                ","0"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+"</p>\n                "),__p+="\n            </div>\n            "),__p+="\n            ",buy_btn&&"normal"!=showtype&&(__p+='\n            <div\n                class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+" "+(null==(__t="1"==title&&"0"==price?"info-title info-no-price":"")?"":_.escape(__t))+'"></div>\n            '),__p+="\n        </a>\n    </li>\n    "):(__p+='\n    <!-- 小图 -->\n    <li class="goods-card small-pic '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=has_button_class)?"":__t)+'">\n        <a href="javascript: void(0);" class="link js-goods clearfix">\n            <div class="photo-block">\n                <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n            </div>\n\n            ',"1"!=price&&"1"!=title||(__p+='\n            <div class="info clearfix '+(null==(__t=info_title_class)?"":_.escape(__t))+'">\n                ',"1"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                "),__p+="\n                ","0"==price&&(__p+='\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+"</p>\n                "),__p+="\n            </div>\n            "),__p+="\n\n            ",buy_btn&&"normal"!=showtype&&(__p+='\n            <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n            ',title&&!price&&(__p+="\n            <div class='buy-tag-space'></div>\n            "),__p+="\n            "),__p+="\n        </a>\n    </li>\n    "),__p+="\n    "}),__p+="\n    "):"3"==size&&(__p+="\n    <!-- 列表 -->\n    ",_.each(goodsSample,function(e,t){__p+='\n    <li class="goods-card '+(null==(__t=showtype)?"":_.escape(__t))+" "+(null==(__t=has_button_class)?"":__t)+'">\n        <a href="javascript: void(0);" class="link js-goods clearfix">\n            <div class="photo-block">\n                <img class="goods-photo js-goods-lazy" src="'+(null==(__t=fullfillImage(e.image_url))?"":__t)+'"/>\n            </div>\n            <div class="info">\n                <p class="goods-title">'+(null==(__t=e.title)?"":_.escape(__t))+'</p>\n                <p class="goods-price"><em>￥'+(null==(__t=e.price)?"":__t)+"</em></p>\n                ",buy_btn&&(__p+='\n                <div class="goods-buy btn'+(null==(__t=buy_btn_type)?"":_.escape(__t))+'"></div>\n                '),__p+="\n            </div>\n        </a>\n    </li>\n    "}),__p+="\n    "),__p+="\n</ul>\n"}return __p}}),define("components/showcase/2.0.0/goods_list_weapp/views/show_goods_style",["require","marionette","core/utils","tpl!../templates/show_goods_style"],function(e){"use strict";var t=e("marionette"),n=e("core/utils");return t.ItemView.extend({template:e("tpl!../templates/show_goods_style"),templateHelpers:{fullfillImage:n.fullfillImage}})}),define("tpl!components/showcase/2.0.0/goods_list_weapp/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="js-goods-style-region"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/goods_list_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","./show_goods_style","tpl!../templates/show"],function(e){"use strict";var t=(e("underscore"),e("components/showcase/2.0.0/base/views/show_base")),n=e("./show_goods_style");return t.extend({template:e("tpl!../templates/show"),regions:{goodsStyleRegion:".js-goods-style-region"},onRender:function(){this.goodsStyleRegion.show(new n({model:this.model}))}})}),define("tpl!components/showcase/2.0.0/goods_template_split/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-goods-ad-split goods-template-block">\n        <p>商品详情区</p>\n        <p class="c-gray">每个商品独立编辑</p>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/goods_template_split/views/show",["require","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show")})}),define("text!components/showcase/2.0.0/groupon/templates/show.html",[],function(){return'<%  var sizeType ;\n    if (size == \'0\') {\n        sizeType = \'big\';\n    } else if (size == \'1\') {\n        sizeType = \'small\';\n    } else if (size == \'2\') {\n        sizeType = \'list\';\n    }\n\n    var goodsBodyClass = \'\';\n    if (show_buy_btn == \'0\') {\n        goodsBodyClass += \' cap-ump-groupon-goods__body--no-btn\';\n    }\n    if (buy_btn_type == \'0\') {\n        goodsBodyClass += \' cap-ump-groupon-goods__body--btn-0\';\n    } else if (buy_btn_type == \'1\') {\n        goodsBodyClass += \' cap-ump-groupon-goods__body--btn-1\';\n    }\n\n    if (show_origin_price == \'0\') {\n        goodsBodyClass += \' cap-ump-groupon-goods__body--no-origin\';\n    }\n%>\n\n<div class="control-group">\n    <div>\n        <ul class="cap-ump-groupon cap-ump-groupon--<%-sizeType %>">\n            <% _.each(goods, function(item, index) { %>\n                <li class="cap-ump-groupon-goods">\n                    <div class="cap-ump-groupon-goods__header">\n                        <div class="cap-ump-groupon-goods__image-wrap">\n                            <img class="cap-ump-groupon-goods__image" src="<%= fullfillImage(item.image_url) %>">\n                            <% if (size != \'0\') { %>\n                                <div class="cap-ump-groupon-goods__activity-tag-wrap">\n                                    <p class="cap-ump-groupon-goods__activity-tag"><%= item.condition_num %>人团</p>\n                                </div>\n                            <% } %>\n                        </div>\n                        <div class="cap-ump-groupon-goods__activity-info">\n                            <% if (size == \'0\') { %>\n                                <span class="cap-ump-groupon-goods__activity-text"><%= item.condition_num %>人拼团</span>\n                            <% } %>\n                            <div class="cap-ump-groupon-goods__count-down">\n                                <% if (show_countdown == \'1\') { %>\n                                    <% if (size == \'0\') { %>\n                                    <span class="cap-ump-groupon-goods__count-down-text">距结束仅剩: </span>\n                                    <% } %>\n                                    <span class="cap-countdown__day"><%= item.days %></span>\n                                    <span class="cap-countdown__time-text">天</span>\n                                    <span class="cap-countdown__hour"><%= item.hours %></span>\n                                    <span class="cap-countdown__time-text">时</span>\n                                    <span class="cap-countdown__minute"><%= item.mins %></span>\n                                    <span class="cap-countdown__time-text">分</span>\n                                    <span class="cap-countdown__second"><%= item.secs %></span>\n                                    <span class="cap-countdown__time-text">秒</span>\n                                <% } %>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="cap-ump-groupon-goods__body <%- goodsBodyClass %>">\n                        <% if (show_title == \'1\') { %>\n                            <h3 class="cap-ump-groupon-goods__title">\n                                <% if (show_discount == \'1\' && size != \'2\') { %>\n                                    <span class="cap-ump-groupon-goods__discount">立减<%= Math.round(item.origin_price / 100 - item.min_sku_price / 100) %>元</span>\n                                <% } %>\n                                <%= item.title %>\n                            </h3>\n                        <% } %>\n                        <% if (show_discount == \'1\' && size == \'2\') { %>\n                            <span class="cap-ump-groupon-goods__discount">立减<%= Math.round(item.origin_price / 100 - item.min_sku_price / 100) %>元</span>\n                        <% } %>\n                        <div class="cap-ump-groupon-goods__goods-info">\n                            <div class="cap-ump-groupon-goods__groupon-price">\n                                <span class="cap-ump-groupon-goods__groupon-price-symbol">¥</span>\n                                <span class="cap-ump-groupon-goods__groupon-price-yuan"><%= Math.floor(item.min_sku_price / 100) %></span><span class="cap-ump-groupon-goods__groupon-price-cent">.<%= item.min_sku_price % 100 == 0 ? \'00\' : item.min_sku_price % 100 %></span>\n                            </div>\n                            <% if (show_origin_price == \'1\') { %>\n                                <div class="cap-ump-groupon-goods__origin-price">\n                                    <span class="cap-ump-groupon-goods__origin-price-symbol">¥</span>\n                                    <span class="cap-ump-groupon-goods__origin-price-value"><%= (item.origin_price / 100).toFixed(2) %></span>\n                                </div>\n                            <% } %>\n                            <% if (show_buy_btn == \'1\') { %>\n                                <div class="cap-ump-groupon-goods__action">\n                                    <% if (buy_btn_type == \'0\') { %>\n                                        去开团\n                                    <% } else { %>\n                                        购买\n                                    <% } %>\n                                </div>\n                            <% } %>\n                        </div>\n                    </div>\n                </li>\n            <% }); %>\n        </ul>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/groupon/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/groupon/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/groupon/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},zeroFill:function(e){return e<10?"0"+e:e},remainDays:function(e){var t=Date.parse(new Date)/1e3;return this.zeroFill(Math.floor((e-t)/3600/24))},remainHours:function(e){var t=Date.parse(new Date)/1e3;return this.zeroFill(Math.floor((e-t)/3600)%24)},remainMins:function(e){var t=Date.parse(new Date)/1e3;return this.zeroFill(Math.floor((e-t)%3600/60))},remainSecs:function(e){var t=Date.parse(new Date)/1e3;return this.zeroFill(Math.floor((e-t)%3600%60))},serializeData:function(){var e=this.model.toJSON(),n=this;return t.isEmpty(e.goods)?"0"==this.model.get("size")?e.goods=[{title:"此处显示商品名称",start_at:"1500884118",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"}]:"1"==this.model.get("size")?e.goods=[{title:"此处显示商品名称",start_at:"1500884118",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"},{title:"此处显示商品名称",start_at:"1500884118",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"},{title:"此处显示商品名称",start_at:"1500884118",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"},{title:"此处显示商品名称",start_at:"1500545490",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"}]:"2"==this.model.get("size")&&(e.goods=[{title:"此处显示商品名称",start_at:"1500545490",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"},{title:"此处显示商品名称",start_at:"1500545490",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"},{title:"此处显示商品名称",start_at:"1500545490",end_at:"1501056915",condition_num:3,image_url:window._global.url.imgqn+"/public_files/2017/7/28/3769c9fa7ac90c752ef0bb6c18fcda45.png",min_sku_price:5999,origin_price:7999,days:"01",hours:"12",mins:"08",secs:"08"}]):e.goods.forEach(function(e){e.days=n.remainDays(e.end_at),e.hours=n.remainHours(e.end_at),e.mins=n.remainMins(e.end_at),e.secs=n.remainSecs(e.end_at)}),e}})}),define("text!components/showcase/2.0.0/period_buy/templates/show.html",[],function(){return'<%  var sizeType ;\n    if (size == \'0\') {\n        sizeType = \'big\';\n    } else if (size == \'1\') {\n        sizeType = \'small\';\n    } else if (size == \'2\') {\n        sizeType = \'list\';\n    }\n    var noTitleClass = show_title != \'1\' ? \'cap-goods-item--no-title\' : \'\';\n    var noBtnClass = show_buy_btn != \'1\' ? \'cap-goods-item--no-btn\' : \'\';\n    var showSkuAfterPrice = (size != \'1\' || (size == \'1\' && show_title != \'1\'));\n%>\n\n<div class="control-group">\n    <div class="cap-goods__layout">\n        <div class="cap-goods__content--<%- sizeType %>">\n            <% _.each(goods, function(item, index) { %>\n                <div class="cap-goods-item cap-goods-item--<%- sizeType %> <%- noTitleClass %> <%- noBtnClass %>">\n                    <div class="cap-goods-item-picture">\n                        <div class="cap-goods-img-wrap" style="background: url(<%= item.image_url %>) center center/cover no-repeat"></div>\n                    </div>\n                    <div class="cap-goods-info">\n                        <% if (show_title == \'1\') { %>\n                            <div class="cap-goods-info__intro">\n                                <h4 class="cap-goods-info__title"><%= item.title %></h4>\n                                <% if (show_desc == \'1\') { %>\n                                    <p class="cap-goods-info__desc"><%= item.description %></p>\n                                <% } %>\n                            </div>\n                        <% } %>\n                        <% if (!showSkuAfterPrice) { %>\n                            <span class="cap-goods-info__sku"><%= item.min_sku_description %></span>\n                        <% } %>\n                        <div class="cap-goods-info__bottom">\n                            <div class="cap-goods-info__price">\n                                <span class="cap-goods-info__symbol">¥</span><span class="cap-goods-info__yuan"><%= Math.floor(item.min_sku_price / 100) %></span><span class="cap-goods-info__cent">.<%= item.min_sku_price % 100 == 0 ? \'00\' : item.min_sku_price % 100 %></span>\n                                <% if (showSkuAfterPrice) { %>\n                                    <% if (size == \'0\') { %>\n                                        <span class="cap-goods-info__sku" style="padding-right:20px">（ <%= item.min_sku_description %></span>\n                                    <% } else { %>\n                                        <% if (noTitleClass && size == \'1\') { %>\n                                            <span class="cap-goods-info__sku" style="max-width: 45px"><%= item.min_sku_description %></span>\n                                        <% } else { %>\n                                            <span class="cap-goods-info__sku"><%= item.min_sku_description %></span>\n                                        <% } %>\n                                    <% } %>\n                                <% } %>\n                            </div>\n                            <% if (show_buy_btn == \'1\') { %>\n                                <div class="cap-goods-info__btn cap-goods-info__btn--<%= buy_btn_type %>"><%= buy_btn_type == \'0\' ? \'购买\' : \'立即购买\' %></div>\n                            <% } %>\n                        </div>\n                    </div>\n                </div>\n            <% }); %>\n        </div>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/period_buy/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/period_buy/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/period_buy/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},serializeData:function(){var e=this.model.toJSON();return t.isEmpty(e.goods)&&("0"==this.model.get("size")?e.goods=[{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"4束，1周1束"}]:"1"==this.model.get("size")?e.goods=[{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"1周1束"},{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"1周1束"},{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"1周1束"},{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"1周1束"}]:"2"==this.model.get("size")&&(e.goods=[{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",
image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"4束，1周1束"},{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"4束，1周1束"},{title:"周周体验不同 异国鲜花1周1束",description:"精致礼盒装，订购3期送欧式花瓶",image_url:window._global.url.imgqn+"/public_files/2017/9/11/113bd1018832776142bdb1c794c14f38.png",min_sku_price:12990,min_sku_description:"4束，1周1束"}])),e}})}),define("text!components/showcase/2.0.0/image_ad_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n        <% if (show_method == \'0\') {%>\n        <div class="custom-image-swiper">\n            <div class="image-weapp-item">\n                <p class="image-weapp-item__title">点击编辑图片广告</p>\n                <p class="image-weapp-item__desc">建议宽度750像素</p>\n            </div>\n        </div>\n        <% } else { %>\n            <% if (size == \'0\') {%>\n                <div class="image-weapp-wrapper">\n                    <ul class="image-weapp-container size0 clearfix">\n                        <li class="image-weapp-item">\n                            <p class="image-weapp-item__title">大图滑动</p>\n                        </li>\n                        <li class="image-weapp-item">\n                            <p class="image-weapp-item__title">大图滑动</p>\n                        </li>\n                    </ul>\n                </div>\n            <% } else { %>\n                <div class="image-weapp-wrapper">\n                    <ul class="image-weapp-container size1 clearfix">\n                        <li class="image-weapp-item">\n                            <p class="image-weapp-item__title">小图滑动</p>\n                        </li>\n                        <li class="image-weapp-item">\n                            <p class="image-weapp-item__title">小图滑动</p>\n                        </li>\n                        <li class="image-weapp-item">\n                            <p class="image-weapp-item__title">小图滑动</p>\n                        </li>\n                    </ul>\n                </div>\n            <% } %>\n        <% } %>\n    <% } else { %>\n        <% if (show_method == \'0\') { %>\n            <% if (sub_entry && sub_entry.length > 0) { %>\n            <div class="custom-image-swiper">\n                <div class="swiper-container" style="height: <%- height || 320 %>px">\n                    <div class="swiper-wrapper">\n                    </div>\n                </div>\n            </div>\n            <% } %>\n            <% if (sub_entry && sub_entry.length > 1) { %>\n            <div class="swiper-pagination">\n                <span class="swiper-pagination-switch swiper-active-switch"></span>\n                <% _.times(sub_entry.length - 1, function() { %>\n                    <span class="swiper-pagination-switch"></span>\n                <% }); %>\n            </div>\n            <% } %>\n        <% } else { %>\n            <div class="image-weapp-wrapper">\n                <ul class="image-weapp-container size<%=size%> clearfix">\n                </ul>\n            </div>\n        <% } %>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/image_ad_weapp/templates/show_item.html",[],function(){return'<% if (show_method == \'0\') { %>\n    <a href="javascript: void(0);" class="cover-image-item" style="width: <%= width %>px; height: <%= height %>px; background-image: url(<%= fullfillImage(image_url) %>);">\n        <% if (title !== \'\') { %>\n            <h3 class="title"><%- title %></h3>\n        <% } %>\n    </a>\n<% } else { %>\n    <div class="image-weapp-item__cover" style="width: <%= width %>px; height: <%= height %>px; background-image: url(<%= fullfillImage(image_url) %>);">\n        <% if (title !== \'\') { %>\n        <h3 class="title"><%- title %></h3>\n        <% } %>\n    </div>\n<% } %>\n'}),define("components/showcase/2.0.0/image_ad_weapp/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/image_ad_weapp/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/image_ad_weapp/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:function(){return"0"==this.options.parent.get("show_method")?"div":"li"},className:function(){return"0"==this.options.parent.get("show_method")?"swiper-slide":"image-weapp-item"},attributes:function(){var e=this;return{style:function(){return"height: "+e.options.parent.get("height")+"px"}}},template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{show_method:this.parent.get("show_method"),size:this.parent.get("size"),width:this.parent.get("width"),height:this.parent.get("height")});var n=this.model.get("image_url");return n=n&&o.fullfillImage(n),e.image_url=n,e.image_thumb_url=n,e}})}),define("components/showcase/2.0.0/image_ad_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/image_ad_weapp/templates/show.html","components/showcase/2.0.0/image_ad_weapp/views/show_item","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/image_ad_weapp/templates/show.html"),o=e("components/showcase/2.0.0/image_ad_weapp/views/show_item"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset update remove",this.render)},onBeforeRender:function(){this.model.calculateImage()},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e,t=this;e="0"==this.model.get("show_method")?this.$(".swiper-wrapper"):this.$(".image-weapp-container"),this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:t.model});e.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/image_ad/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n        <% if (show_method == \'0\') {%>\n        <div class="custom-image-swiper">\n            <div class="swiper-container" style="height: 80px">\n                <div class="swiper-wrapper">\n                    <img style="max-height: 80px; display: block;" src="<%= fullfillImage(\'public_files/2015/10/28/aae1f435dfb5c908c9e86e0e52bc524c.jpg\') %>">\n                </div>\n            </div>\n        </div>\n        <% } else { %>\n        <ul class="custom-image clearfix">\n            <li>\n                <img src="<%= fullfillImage(\'public_files/2015/10/28/f079bd7e4ecdbc02551ab51ab882feab.jpg\') %>" style="display: block;">\n            </li>\n        </ul>\n        <% } %>\n    <% } else { %>\n        <% if (show_method == \'0\') { %>\n            <% if (sub_entry && sub_entry.length > 0) { %>\n            <div class="custom-image-swiper">\n                <div class="swiper-container" style="height: <%- height || 160 %>px">\n                    <div class="swiper-wrapper">\n                    </div>\n                </div>\n            </div>\n            <% } %>\n            <% if (sub_entry && sub_entry.length > 1) { %>\n            <div class="swiper-pagination">\n                <span class="swiper-pagination-switch swiper-active-switch"></span>\n                <% _.times(sub_entry.length - 1, function() { %>\n                    <span class="swiper-pagination-switch"></span>\n                <% }); %>\n            </div>\n            <% } %>\n        <% } else { %>\n        <ul class="custom-image clearfix">\n\n        </ul>\n        <% } %>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/image_ad/templates/show_item.html",[],function(){return'<% if (show_method == \'0\') { %>\n    <a href="javascript: void(0);" style="height: <%- Math.round(height) || 160 %>px;">\n        <% if (title !== \'\') { %>\n            <h3 class="title"><%- title %></h3>\n        <% } %>\n        <img src="<%= fullfillImage(image_url) %>" style="max-height: <%- Math.round(height) || 160 %>px;">\n    </a>\n<% } else { %>\n    <% if (title !== \'\') { %>\n    <h3 class="title"><%- title %></h3>\n    <% } %>\n    <img src="<%= fullfillImage(image_url) %>">\n<% } %>\n'}),define("components/showcase/2.0.0/image_ad/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/image_ad/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/image_ad/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:function(){return"0"==this.options.parent.get("show_method")?"div":"li"},className:function(){return"0"==this.options.parent.get("show_method")?"swiper-slide":"0"==this.options.parent.get("size")?"":"custom-image-small"},attributes:function(){var e=this;return{style:function(){if("0"==e.options.parent.get("show_method"))return"height: "+e.options.parent.get("height")+"px"}}},template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes);t.extend(e,{show_method:this.parent.get("show_method"),size:this.parent.get("size"),height:this.parent.get("height")});var n=this.model.get("image_url");return n=n&&o.fullfillImage(n),e.image_url=n,e.image_thumb_url=n,e}})}),define("components/showcase/2.0.0/image_ad/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/image_ad/templates/show.html","components/showcase/2.0.0/image_ad/views/show_item","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/image_ad/templates/show.html"),o=e("components/showcase/2.0.0/image_ad/views/show_item"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset update remove",this.render)},onBeforeRender:function(){this.model.calculateImage()},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e,t=this;e="0"==this.model.get("show_method")?this.$(".swiper-wrapper"):this.$(".custom-image"),this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:t.model});e.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/nav/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n\n    <% } else { %>\n        <ul class="custom-nav-4 clearfix">\n\n        </ul>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/nav/templates/show_item.html",[],function(){return'<a href="javascript:;">\n    <span class="nav-img-wap">\n        <img src="<%= image_url %>">\n    </span>\n    <% if (title !== \'\') { %>\n    <span class="title"><%- title %></span>\n    <% } %>\n</a>\n'}),define("components/showcase/2.0.0/nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/nav/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/nav/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes),n=this.model.get("image_url");return n=n&&o.fullfillImage(n),e.image_url=n,e.image_thumb_url=n,e}})}),define("components/showcase/2.0.0/nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/nav/templates/show.html","components/showcase/2.0.0/nav/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/nav/templates/show.html"),o=e("components/showcase/2.0.0/nav/views/show_item");return n.extend({template:t.template(i),onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new o({model:t,parent:e.model}),s=this.$(".custom-nav-4"),a=n.indexOf(t);0===a?i.render().$el.appendTo(s):i.render().$el.insertAfter(s.children().eq(a-1)),e.render()}),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".custom-nav-4");this.model.get("sub_entry").length>0&&t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/nav_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <ul class="custom-nav-list-<%= display_num %> clearfix">\n\n    </ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/nav_weapp/templates/show_item.html",[],function(){return'<a href="javascript:;">\n    <span class="nav-img-wap">\n        <img src="<%= image_url %>">\n    </span>\n</a>\n'}),define("components/showcase/2.0.0/nav_weapp/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/nav_weapp/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/nav_weapp/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=t.clone(this.model.attributes),n=this.model.get("image_url");return n=n&&o.fullfillImage(n),e.image_url=n,e}})}),define("components/showcase/2.0.0/nav_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/nav_weapp/templates/show.html","components/showcase/2.0.0/nav_weapp/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/nav_weapp/templates/show.html"),o=e("components/showcase/2.0.0/nav_weapp/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset update remove",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.model.get("display_num"),n=this.$(".custom-nav-list-"+t);this.model.get("sub_entry").length>0&&n.empty(),this.model.get("sub_entry").each(function(t){var i=new o({model:t,parent:e.model});n.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/showcase/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n\n    <% } else { %>\n    <div class="custom-showcase-wrap custom-showcase-wrap-<%= mode %>">\n        <% if (title) { %>\n        <div class="custom-showcase-wrap-title">\n            <%= title %>\n        </div>\n        <% } %>\n        <div class="custom-showcase-body <% if(without_space == \'1\') { %>custom-showcase-without-space<% } %>">\n            <ul class="custom-showcase clearfix">\n\n            </ul>\n            <% if (body_title) { %>\n            <div class="custom-showcase-body-title text-center">\n                <%= body_title %>\n            </div>\n            <% } %>\n            <% if (body_desc) { %>\n            <p class="custom-showcase-body-desc text-center">\n                <%= body_desc %>\n            </p>\n            <% } %>\n        </div>\n    </div>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/showcase/templates/show_item.html",[],function(){return"<%\n    var defaultImage = [\n        'public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg',\n        'public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg',\n        'public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg'\n    ]\n%>\n<img src=\"<%= fullfillImage(image_url ? image_url : defaultImage[index]) %>\">\n<% if (title !== '') { %>\n<span class=\"title\"><%- title %></span>\n<% } %>\n"});define("components/showcase/2.0.0/showcase/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/showcase/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/showcase/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"li",className:function(){return 0===this.model.index()?"custom-showcase-big":"custom-showcase-small"},template:t.template(i),templateHelpers:function(){return{index:this.model.index(),fullfillImage:o.fullfillImage}},initialize:function(){this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/showcase/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/showcase/templates/show.html","components/showcase/2.0.0/showcase/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/showcase/templates/show.html"),o=e("components/showcase/2.0.0/showcase/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",function(e){var t=new o({model:e}),n=this.$(".custom-showcase"),i=e.index();0===i?t.render().$el.appendTo(n):t.render().$el.insertAfter(n.children().eq(i-1))}),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this.$(".custom-showcase");this.model.get("sub_entry").length>0&&e.empty(),this.model.get("sub_entry").each(function(t){var n=new o({model:t});e.append(n.render().el)})}})}),define("text!components/showcase/2.0.0/level/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-level">\n        <img class="custom-level-img<% if (_.isUndefined(is_default) || is_default) { %> custom-level-img-blur<% } %>" src="<%= fullfillImage(image.url) %>">\n        <% if (show_level == \'1\' && show_point == \'1\') { %>\n            <div class="custom-level-title-section">\n                <h5 class="custom-level-title"><%= level_msg %>高级会员<br><%= point_msg %>100分</h5>\n            </div>\n        <% } else if (show_point == \'1\') { %>\n            <div class="custom-level-title-section">\n                <h5 class="custom-level-title"><%= point_msg %>100分</h5>\n            </div>\n        <% } else if (show_level == \'1\') { %>\n            <div class="custom-level-title-section">\n               <h5 class="custom-level-title"><%= level_msg %>高级会员</h5>\n            </div>\n        <% } %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/level/views/show",["components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/level/templates/show.html","core/utils"],function(e,t,n){return e.extend({className:"app-field",template:_.template(t),onInit:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.destroying),this.listenTo(this.model,"editing:error",this.showEditAndError)},render:function(){return this.$el.html(this.template(_.extend({},this.model.attributes,{fullfillImage:n.fullfillImage}))),this}})}),define("text!components/showcase/2.0.0/link/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n    <ul class="custom-nav clearfix">\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第1条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第2条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n            <li>\n        <a class="clearfix" href="javascript: void(0);" target="_blank">\n            <span class="custom-nav-title">点此编辑第n条『关联链接』</span>\n                            <i class="pull-right right-arrow"></i>\n                    </a>\n    </li>\n    </ul>\n    <% } %>\n    <ul class="custom-link clearfix"></ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/link/templates/show_item.html",[],function(){return'<a href="javascript:;" class="custom-link-link">\n    <h3 class="title">\n        <% if (source_type == \'link\') { %>\n            <%- source_title %>\n        <% } else { %>\n            第<%= index %>条 <%- source_title %> 的『关联链接』\n        <% } %>\n    </h3>\n    <i class="pull-right right-arrow"></i>\n</a>\n'}),define("components/showcase/2.0.0/link/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/link/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/link/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.index=e.index,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){return t.extend(this.model.toJSON(),{index:this.index})}})}),define("components/showcase/2.0.0/link/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/link/templates/show.html","components/showcase/2.0.0/link/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/link/templates/show.html"),o=e("components/showcase/2.0.0/link/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render),this.listenTo(this.model.get("sub_entry"),"change",this.refreshOptions)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this.$(".custom-link");e.empty(),this.model.get("sub_entry").each(function(n){var i,s=n.get("source_type");s&&(i="link"==s?1:+n.get("number"),t.times(i,function(t){var i=new o({model:n,index:t+1});e.append(i.render().el)}))})}})}),define("text!components/showcase/2.0.0/text_nav/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (sub_entry.length < 1) { %>\n    <ul class="custom-nav clearfix">\n        <li>\n            <a class="clearfix" href="javascript:void(0);">\n                <span class="custom-nav-title">点此添加一个『文本导航』</span><i class="pull-right right-arrow"></i>\n            </a>\n        </li>\n    </ul>\n    <% } %>\n    <ul class="custom-nav clearfix js-custom-nav"></ul>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/text_nav/templates/show_item.html",[],function(){return'<a class="clearfix" href="javascript:void(0);"><span class="custom-nav-title"><%= title %></span><i class="pull-right right-arrow"></i></a>\n'}),define("components/showcase/2.0.0/text_nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/text_nav/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/text_nav/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/text_nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/text_nav/templates/show.html","components/showcase/2.0.0/text_nav/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/text_nav/templates/show.html"),o=e("components/showcase/2.0.0/text_nav/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".js-custom-nav");t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("tpl!components/showcase/2.0.0/text_weapp/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-text-weapp">\n        <pre class="'+(null==(__t="0"==show_method?"text-left":"1"==show_method?"text-center":"text-right")?"":__t)+'"\n        style="font-size: '+(null==(__t=font_size)?"":__t)+"px; color: "+(null==(__t=color)?"":__t)+"; background-color: "+(null==(__t=bg_color)?"":__t)+'">'+(null==(__t=text||"点击添加一段文本")?"":__t)+'</pre>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n\n';return __p}}),define("components/showcase/2.0.0/text_weapp/views/show",["require","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show")})}),define("text!components/showcase/2.0.0/rich_text_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-richtext<% if (fullscreen == 1) { %> custom-richtext-fullscreen<% } %>" style="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>background-color: <%= color %><% } %>"><%= content || \'<p>点此编辑『富文本』内容 ——&gt;</p><p>你可以对文字进行<strong>加粗</strong>、<em>斜体</em>、<span style="text-decoration: underline;">下划线</span>、<span style="text-decoration: line-through;">删除线</span>、文字<span style="color: rgb(0, 176, 240);">颜色</span>、<span style="background-color: rgb(255, 192, 0); color: rgb(255, 255, 255);">背景色</span>、以及字号<span style="font-size: 20px;">大</span><span style="font-size: 14px;">小</span>等简单排版操作。</p><p>还可以在这里插入图片和表格</p><table><tbody><tr><td width="93" valign="top" style="word-break: break-all;">中奖客户</td><td width="93" valign="top" style="word-break: break-all;">发放奖品</td><td width="93" valign="top" style="word-break: break-all;">备注</td></tr><tr><td width="93" valign="top" style="word-break: break-all;">猪猪</td><td width="93" valign="top" style="word-break: break-all;">内测码</td><td width="93" valign="top" style="word-break: break-all;"><em><span style="color: rgb(255, 0, 0);">已经发放</span></em></td></tr><tr><td width="93" valign="top" style="word-break: break-all;">大麦</td><td width="93" valign="top" style="word-break: break-all;">积分</td><td width="93" valign="top" style="word-break: break-all;"><a href="javascript: void(0);" target="_blank">领取地址</a></td></tr></tbody></table>\' %></div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/rich_text_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/rich_text_weapp/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/rich_text_weapp/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/tag_list/templates/show.html",[],function(){
return'<div class="control-group">\n    <div class="custom-tag-list clearfix">\n        <div class="custom-tag-list-menu-block js-collection-region" style="min-height: 323px;">\n        </div>\n        <div class="custom-tag-list-goods">\n            <ul class="custom-tag-list-goods-list">\n                <%\n                    var images_url = [\n                        \'public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg\',\n                        \'public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg\',\n                        \'public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg\',\n                        \'public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg\'\n                    ]; %>\n                <% _.each(images_url, function(url){ %>\n                <li class="custom-tag-list-single-goods clearfix">\n                    <div class="custom-tag-list-goods-img">\n                        <img src="<%= fullfillImage(url, \'!60x60+2x.jpg\') %>" style="display: inline;">\n                    </div>\n                    <div class="custom-tag-list-goods-detail">\n                        <p class="custom-tag-list-goods-title">此处显示商品名称</p>\n                        <span class="custom-tag-list-goods-price">￥100.00</span>\n                        <a class="custom-tag-list-goods-buy" href="javascript:void(0)"><span></span></a>\n                    </div>\n                </li>\n                <% }); %>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/tag_list/templates/show_item.html",[],function(){return'<a href="javascript:;"><span><%= title %></span></a>\n'}),define("components/showcase/2.0.0/tag_list/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tag_list/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tag_list/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),className:function(){return 0===this.model.index()?"current":""},initialize:function(e){e=e||{},this.listenTo(this.model,"change",this.render)},serializeData:function(){var e=this.model.toJSON();return t.extend(e,{index:this.model.index()})}})}),define("text!components/showcase/2.0.0/tag_list/templates/show_empty.html",[],function(){return'<a href="javascript:;" class="current">商品组一</a>\n<a href="javascript:;">商品组二</a>\n<a href="javascript:;">商品组三</a>\n'}),define("components/showcase/2.0.0/tag_list/views/show_empty",["require","underscore","marionette","text!components/showcase/2.0.0/tag_list/templates/show_empty.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tag_list/templates/show_empty.html");return n.ItemView.extend({tagName:"li",template:t.template(i)})}),define("components/showcase/2.0.0/tag_list/views/show_collection",["require","marionette","components/showcase/2.0.0/tag_list/views/show_item","components/showcase/2.0.0/tag_list/views/show_empty"],function(e){"use strict";var t=e("marionette"),n=e("components/showcase/2.0.0/tag_list/views/show_item"),i=e("components/showcase/2.0.0/tag_list/views/show_empty");return t.CollectionView.extend({tagName:"ul",className:"custom-tag-list-side-menu",itemView:n,emptyView:i})}),define("components/showcase/2.0.0/tag_list/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tag_list/templates/show.html","components/showcase/2.0.0/tag_list/views/show_collection","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tag_list/templates/show.html"),o=e("components/showcase/2.0.0/tag_list/views/show_collection"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},regions:{collectionRegion:".js-collection-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry")}))}})}),define("text!components/showcase/2.0.0/tag_list_weapp/templates/show.html",[],function(){return'<div class="control-group tag-list-weapp-show">\n    <div class="custom-tag-list clearfix">\n        <div class="goods-tags" style="<% if(sub_entry.length === 0) { %>display: none!important;<% } %>" title="项目变多后，会变成可滚动">\n            <% sub_entry.each(function(tag, index) { %>\n            <div class="goods-tag <%= index == 0 ? \'goods-tag-selected\'+nav_style : \'\' %>">\n                <div class="goods-tag-text-style<%= nav_style %>">\n                    <%= tag.get(\'title\') %>\n                    <div class="arrow-<%= nav_style %>"></div>\n                </div>\n            </div>\n            <% }) %>\n        </div>\n\n        <div class="custom-tag-list-goods">\n            <%\n                var images_url = [\n                    \'public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg\',\n                    \'public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg\',\n                    \'public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg\',\n                    \'public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg\'\n                ]; %>\n            <ul class="custom-tag-list-goods-list">\n            <% _.each(images_url, function(url){ %>\n                <li class="custom-tag-list-single-goods clearfix">\n                    <div class="custom-tag-list-goods-img">\n                        <img src="<%= fullfillImage(url, \'!60x60+2x.jpg\') %>" style="display: inline;">\n                    </div>\n                    <div class="custom-tag-list-goods-detail">\n                        <p class="custom-tag-list-goods-title">此处显示商品名称</p>\n                        <span class="custom-tag-list-goods-price">￥100.00</span>\n                        <a class="custom-tag-list-goods-buy" href="javascript:void(0)"><span></span></a>\n                    </div>\n                </li>\n            <% }); %>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tag_list_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tag_list_weapp/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tag_list_weapp/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)}})}),define("text!components/showcase/2.0.0/title/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (title_template == \'0\') {%>\n        <% if (show_method == \'0\') { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-left">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } else if (show_method == \'1\') { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-center">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } else { %>\n        <div class="<% if (color !== \'#ffffff\' && color !== \'#F9F9F9\') { %>custom-title-noline<% } %>"<% if (color !== \'#ffffff\') { %>style="background-color: <%= color %>"<% } %>>\n            <div class="custom-title text-right">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %><span class="custom-title-link-container"></span></h2>\n                <p class="sub_title"><%= sub_title %></p>\n            </div>\n        </div>\n        <% } %>\n    <% } else { %>\n        <div>\n            <div class="custom-title text-left">\n                <h2 class="title"><%= title || \'点击编辑『标题』\' %></h2>\n                <% if(wx_title_date != \'\' || wx_title_author != \'\' || wx_title_link != \'\') {%>\n                <p class="sub_title"><span class="sub_title_date"><%= wx_title_date %></span><span class="sub_title_author"><%= wx_title_author %></span><a class="sub_title_link" href="javascript:;"><%= wx_title_link %></a></p>\n                <% } %>\n            </div>\n        </div>\n    <% } %>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/title/templates/show_item.html",[],function(){return'<span class="gray">-</span> <a><%- title %></a>\n'}),define("components/showcase/2.0.0/title/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/title/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/title/templates/show_item.html");return n.ItemView.extend({tagName:"span",className:"custom-title-link",template:t.template(i),initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/title/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/title/templates/show.html","components/showcase/2.0.0/title/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/title/templates/show.html"),o=e("components/showcase/2.0.0/title/views/show_item");return n.extend({template:t.template(i),onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new o({model:t,parent:e.model}),s=this.$(".custom-title-link-container"),a=n.indexOf(t);0===a?i.render().$el.appendTo(s):i.render().$el.insertAfter(s.children().eq(a-1))})},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".custom-title-link-container");t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/component/templates/show.html",[],function(){return'<div class="control-group">\n    <div style="font-size: 16px;padding: 10px;">\n        <%= title || \'点击编辑『自定义页面模块』\' %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/component/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/component/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/component/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/search/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-search" style="background-color: <%= color %>">\n        <form action="/" method="GET">\n            <input type="text" class="custom-search-input" placeholder="搜索商品" disabled>\n            <button type="submit" class="custom-search-button">搜索</button>\n        </form>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/search/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/search/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/search/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/line/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-line-wrap" style="margin: 0 <% if (hasPadding) { %>10px<% } %>">\n        <div class="custom-line" style="height: 0px; border: none; border-top: 1px <%= lineType %> <%= color %>"></div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/line/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/line/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/line/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/line_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-line-wrap" style="margin: 0 <% if (hasPadding) { %>10px<% } %>">\n        <div class="custom-line" style="height: 0px; border: none; border-top: 1px <%= lineType %> <%= color %>"></div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/line_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/line_weapp/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/line_weapp/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/cube2/templates/show.html",[],function(){return'<div class="control-group custom-cube2-table">\n    <table>\n        <tbody>\n            <%= tableContent %>\n        </tbody>\n    </table>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <span class="action add">加内容</span>\n        <span class="action delete">删除</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/cube2/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/cube2/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/cube2/templates/show.html");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.$el.on("click","td a",function(e){e.preventDefault()})},onBeforeRender:function(){this.model.denerateTableContent()}})}),define("text!components/showcase/2.0.0/tpl_shop/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-shop">\n        <div class="tpl-shop-header" style="<% if(backgroundImage) { %>background-image: url(<%- fullfillImage(backgroundImage) %>);<% } %> background-color: <%- backgroundColor %>;">\n            <div class="tpl-shop-title"><%- window._global.mp_data.team_name %></div>\n            <div class="tpl-shop-avatar">\n                <img src="<%- fullfillImage(window._global.mp_data.logo, \'!145x145.jpg\') %>" alt="">\n            </div>\n        </div>\n        <div class="tpl-shop-content">\n            <ul class="clearfix">\n                <li>\n                    <a href="javascript:;">\n                        <span class="count">0</span>\n                        <span class="text">全部商品</span>\n                    </a>\n                </li>\n                <li>\n                    <a href="javascript:;">\n                        <span class="count">0</span>\n                        <span class="text">上新商品</span>\n                    </a>\n                </li>\n                <li>\n                    <a href="javascript:;">\n                        <span class="count user"></span>\n                        <span class="text">我的订单</span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_shop/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_shop/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_shop/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage}})}),define("text!components/showcase/2.0.0/tpl_weixin/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-weixin">\n        <img src="<%= fullfillImage(background) %>">\n        <div class="js-collection-region">\n            <ul class="tpl-weixin-list clearfix" style="top: <%= top %>%;"></ul>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html",[],function(){return'<a href="javascript:;"><%- title %></a>'}),define("components/showcase/2.0.0/tpl_weixin/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/show_item.html");return n.ItemView.extend({tagName:"li",className:function(){return"tpl-weixin-list-item tpl-weixin-list-item-"+(this.model.index()+1)+" done"},template:t.template(i),initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/tpl_weixin/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_weixin/templates/show.html","components/showcase/2.0.0/tpl_weixin/views/show_item","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_weixin/templates/show.html"),o=e("components/showcase/2.0.0/tpl_weixin/views/show_item"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},onInit:function(){var e=this;this.listenTo(this.model.get("sub_entry"),"add",function(t,n){var i=new o({model:t,parent:e.model}),s=this.$(".tpl-weixin-list"),a=n.indexOf(t);0===a?i.render().$el.appendTo(s):i.render().$el.insertAfter(s.children().eq(a-1))}),this.listenTo(this.model.get("sub_entry"),"reset remove",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".tpl-weixin-list");t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/tpl_fbb/templates/show.html",[],function(){return'<div class="control-group">\n    <style>\n        .tpl-fbb {\n            background-image: url(<%= fullfillImage(background) %>);\n            background-position: center top;\n            background-repeat: no-repeat;\n            background-size: 320px <%= height / (width / 320) %>px;\n            height: <%= height / (width / 320) %>px;\n        }\n        .swiper-wrapper {\n            width: 500px;\n        }\n    </style>\n    <div class="tpl-fbb">\n        <div class="swiper-container js-tpl-fbb js-collection-region">\n            <div class="swiper-wrapper clearfix js-subentry-list">\n\n            </div>\n        </div>\n    </div>\n    <div class="component-border"></div>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html",[],function(){return'<a href="javascript:;"<% if (bg_image_url) { %> class="slide-bg" style="background-image: url(<%= fullfillImage(bg_image_url) %>)"<% } %>>\n    <% if (bg_image_url) { %>\n        <div class="swiper-item-bg"></div>\n    <% } %>\n    <div class="tpl-fbb-item-wrap">\n        <div class="tpl-fbb-item-name">\n            <%= title %>\n        </div>\n        <div class="tpl-fbb-item-line"></div>\n        <div class="tpl-fbb-item-icon">\n            <% if (icon_image_url) { %>\n                <img src="<%= fullfillImage(icon_image_url) %>" width="30" height="30">\n            <% } %>\n        </div>\n        <div class="tpl-fbb-item-text">\n            <%= text %>\n        </div>\n        <div class="tpl-fbb-item-date">\n            <%= date %>\n        </div>\n    </div>\n</a>\n'}),define("components/showcase/2.0.0/tpl_fbb/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"div",className:"swiper-slide tpl-fbb-item done",template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},initialize:function(){this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/tpl_fbb/views/show_collection",["require","marionette","components/showcase/2.0.0/tpl_fbb/views/show_item"],function(e){"use strict";var t=e("marionette"),n=e("components/showcase/2.0.0/tpl_fbb/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"swiper-wrapper clearfix",itemView:n})}),define("components/showcase/2.0.0/tpl_fbb/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_fbb/templates/show.html","components/showcase/2.0.0/tpl_fbb/views/show_collection","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_fbb/templates/show.html"),o=e("components/showcase/2.0.0/tpl_fbb/views/show_collection"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/tpl_course/templates/show.html",[],function(){return'<div class="control-group">\n    <style>\n        .tpl-fbb {\n            background-image: url(<%= fullfillImage(background) %>);\n            background-position: center top;\n            background-repeat: no-repeat;\n            background-size: 320px <%= height / (width / 320) %>px;\n            height: <%= height / (width / 320) %>px;\n        }\n        .swiper-wrapper {\n            width: 500px;\n        }\n        .tpl-course {\n            position: relative;\n        }\n    </style>\n    <div class="tpl-fbb tpl-course">\n        <h1 class="tpl-course-title" style="color: <%- title_color %>"><%- title %></h1>\n        <h2 class="tpl-course-sub-title" style="color: <%- sub_title_color %>"><%- sub_title %></h2>\n        <div class="text-center butn-section" style="top: <%- top %>%;">\n            <a href="javascript:;" class="butn butn-xxlarge butn-primary butn-buy"><%- button_text %></a>\n        </div>\n        <div class="swiper-container js-tpl-fbb js-collection-region">\n\n        </div>\n    </div>\n</div>\n'}),define("text!components/showcase/2.0.0/tpl_course/templates/show_item.html",[],function(){return'<a href="javascript:;"<% if (bg_image_url) { %> class="slide-bg" style="background-image: url(<%= bg_image_url %>)"<% } %>>\n    <% if (bg_image_url) { %>\n        <div class="swiper-item-bg"></div>\n    <% } %>\n    <div class="tpl-fbb-item-wrap">\n        <div class="tpl-fbb-item-name">\n            <%= title %>\n        </div>\n        <div class="tpl-fbb-item-line"></div>\n        <div class="tpl-fbb-item-icon">\n            <% if (icon_image_url) { %>\n                <img src="<%= icon_image_url %>" width="30" height="30">\n            <% } %>\n        </div>\n    </div>\n</a>'}),define("components/showcase/2.0.0/tpl_course/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/tpl_course/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/tpl_course/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"div",className:"swiper-slide tpl-fbb-item done",template:t.template(i),initialize:function(e){this.options=e||{},this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},serializeData:function(){var e=this.model.toJSON();return e.icon_image_url=o.fullfillImage(e.icon_image_url),e.bg_image_url=o.fullfillImage(e.bg_image_url),e}})}),define("components/showcase/2.0.0/tpl_course/views/show_collection",["require","marionette","components/showcase/2.0.0/tpl_course/views/show_item"],function(e){"use strict";var t=e("marionette"),n=e("components/showcase/2.0.0/tpl_course/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"swiper-wrapper clearfix",itemView:n})}),define("components/showcase/2.0.0/tpl_course/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_course/templates/show.html","components/showcase/2.0.0/tpl_course/views/show_collection","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_course/templates/show.html"),o=e("components/showcase/2.0.0/tpl_course/views/show_collection"),s=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:s.fullfillImage},regions:{collectionRegion:".js-collection-region"},serializeData:function(){var e=this.model.toJSON();return e.background=s.fullfillImage(e.background),e},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/tpl_wxd/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="tpl-wxd">\n        <div class="tpl-wxd-header" style="background-image: url(<%- fullfillImage(backgroundImage) %>)">\n            <div class="tpl-wxd-title"><%- window._global.mp_data.team_name %></div>\n            <div class="tpl-wxd-avatar">\n                <img src="<%- fullfillImage(window._global.mp_data.logo) %>" alt="">\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_wxd/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_wxd/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_wxd/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage}})}),define("text!components/showcase/2.0.0/tpl_11_11/templates/show.html",[],function(){
return'<div class="control-group">\n    <div class="tpl-11-11">\n        <div class="tpl-11-11-banner" style="<% if(banner) { %>background-image: url(<%= fullfillImage(banner) %>)<% } %>"></div>\n        <div class="tpl-11-11-title clearfix">\n            <span class="tpl-11-11-team-name"><%= _global.mp_data.team_name %></span>\n            <div class="pull-right">\n                <a href="javascript:;" class="tpl-11-11-follow">关注</a>\n            </div>\n        </div>\n        <ul class="custom-coupon">\n            <% if(tradeincard.length) { %>\n                <% _.each(tradeincard, function(item) { %>\n                    <li>\n                        <a href="javascript:;">\n                            <div class="custom-coupon-price"><span>￥</span><%= item.value %></div>\n                            <div class="custom-coupon-desc">\n                                <% if(item.at_least) { %>\n                                    满<%= item.at_least %>元可用\n                                <% } else { %>\n                                    无限制\n                                <% } %>\n\n                            </div>\n                        </a>\n                    </li>\n                <% }); %>\n            <% } else { %>\n                <% for(var i = 0; i < 3; i++) { %>\n                    <li>\n                        <a href="javascript:;">\n                            <div class="custom-coupon-price"><span>￥</span>100</div>\n                            <div class="custom-coupon-desc">\n                                满500元可用\n                            </div>\n                        </a>\n                    </li>\n                <% } %>\n            <% } %>\n        </ul>\n        <div class="custom-notice">\n            <div class="custom-notice-inner">\n                <div class="custom-notice-scroll">\n                    <span>\n                        公告：<%= notice ? _.escape(notice).replace(/\\s/g, \'&nbsp;\') : \'请填写内容，如果过长，将会在手机上滚动显示\' %>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/tpl_11_11/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_11_11/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/tpl_11_11/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage}})}),define("tpl!components/showcase/2.0.0/tpl_2016_11_11/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="www-tpl-2016-11-11">\n        <div class="www-tpl-logo" style="background-image: url('+(null==(__t=logo())?"":__t)+')"></div>\n        <div class="www-tpl-title">\n            <div class="team-name">'+(null==(__t=team_name)?"":__t)+'</div>\n            <div class="title">'+(null==(__t=first_page_title)?"":__t)+"</div>\n        </div>\n    </div>\n</div>\n";return __p}}),define("components/showcase/2.0.0/tpl_2016_11_11/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","core/utils","tpl!../templates/show"],function(e){"use strict";var t=(e("underscore"),e("components/showcase/2.0.0/base/views/show_base")),n=e("core/utils");return t.extend({className:"app-field clearfix not-sortable js-not-sortable",template:e("tpl!../templates/show"),templateHelpers:{logo:function(){return n.fullfillImage(window._global.mp_data.logo,"!200x200.jpg")},fullfillImage:n.fullfillImage},modelEvents:{"change:team_name":"render","change:first_page_title":"render"}})}),define("text!components/showcase/2.0.0/tpl_dragon_boat/templates/show.html",[],function(){return'<div class="control-group">\n    <%\n        var image_url = window._global.url.cdn_static + \'/image/tpl_dragon_boat/first_page@2x.png\';\n    %>\n    <div class="www-tpl-scroll">\n        <% if(music_icon == \'1\') { %>\n            <div class="ui-right-btns">\n                <i class="ui-music-btn"></i>\n            </div>\n        <% } %>\n        <img src="<%= image_url %>" alt="端午节">\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/tpl_dragon_boat/views/show",["require","exports","module","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/tpl_dragon_boat/templates/show.html","core/utils"],function(e,t,n){var i=e("underscore"),o=e("components/showcase/2.0.0/base/views/show_base"),s=e("text!components/showcase/2.0.0/tpl_dragon_boat/templates/show.html"),a=e("core/utils");n.exports=o.extend({template:i.template(s),templateHelpers:{fullfillImage:a.fullfillImage}})}),define("text!components/showcase/2.0.0/tpl_take_away/templates/show_item.html",[],function(){return'<a href="javascript:;"><span><%= title %></span></a>\n'}),define("components/showcase/2.0.0/tpl_take_away/views/show_item",["require","underscore","marionette","text!../templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!../templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),className:function(){return 0===this.model.index()?"current":""},initialize:function(e){e=e||{},this.listenTo(this.model,"change",this.render)},serializeData:function(){var e=this.model.toJSON();return t.extend(e,{index:this.model.index()})}})}),define("text!components/showcase/2.0.0/tpl_take_away/templates/show_empty.html",[],function(){return'<a href="javascript:;" class="current">商品组一</a>\n<a href="javascript:;">商品组二</a>\n<a href="javascript:;">商品组三</a>\n'}),define("components/showcase/2.0.0/tpl_take_away/views/show_empty",["require","underscore","marionette","text!../templates/show_empty.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!../templates/show_empty.html");return n.ItemView.extend({tagName:"li",template:t.template(i)})}),define("components/showcase/2.0.0/tpl_take_away/views/show_collection",["require","marionette","./show_item","./show_empty"],function(e){"use strict";var t=e("marionette"),n=e("./show_item"),i=e("./show_empty");return t.CollectionView.extend({tagName:"ul",className:"custom-tag-list-side-menu",itemView:n,emptyView:i})}),define("tpl!components/showcase/2.0.0/tpl_take_away/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="control-group">\n    ',__p+=1==window._global.is_weapp_setting?'\n        <img src="'+(null==(__t=window._global.url.imgqn+"/public_files/2017/3/3/ede2aa9ea46b33653a5e3d1e87595873.png")?"":__t)+'" />\n    ':'\n        <img src="'+(null==(__t=window._global.url.imgqn+"/public_files/2017/04/27/d345dafee4b81bfffb0c0610ca8cee72.png")?"":__t)+'" />\n    ',__p+='\n</div>\n<div class="control-group">\n    <div class="custom-tag-list clearfix">\n        <div class="custom-tag-list-menu-block js-collection-region" style="min-height: 323px;">\n        </div>\n        <div class="custom-tag-list-goods">\n            <ul class="custom-tag-list-goods-list">\n                ';var images_url=["public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg","public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg","public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg","public_files/2015/10/28/2093f717f75f617bf551b63dd8bd4339.jpg"];__p+="\n                ",_.each(images_url,function(e){__p+='\n                <li class="custom-tag-list-single-goods clearfix">\n                    <div class="custom-tag-list-goods-img">\n                        <img src="'+(null==(__t=fullfillImage(e,"!60x60+2x.jpg"))?"":__t)+'" style="display: inline;">\n                    </div>\n                    <div class="custom-tag-list-goods-detail">\n                        <p class="custom-tag-list-goods-title">此处显示商品名称</p>\n                        <span class="custom-tag-list-goods-price">￥100.00</span>\n                        <a class="custom-tag-list-goods-buy" href="javascript:void(0)"><span></span></a>\n                    </div>\n                </li>\n                '}),__p+="\n            </ul>\n        </div>\n    </div>\n</div>\n",1==window._global.is_weapp_setting&&(__p+='\n    <div class="control-group" style="margin-top: -5px;">\n        <img src="'+(null==(__t=window._global.url.imgqn+"/public_files/2017/3/2/5ec6f353ef3b9b65e9b11a45ea59d34d.png")?"":__t)+'" />\n    </div>\n'),__p+="\n"}return __p}}),define("components/showcase/2.0.0/tpl_take_away/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","./show_collection","core/utils","tpl!../templates/show"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("./show_collection"),o=e("core/utils");return n.extend({className:"app-field clearfix not-sortable js-not-sortable",template:e("tpl!../templates/show"),templateHelpers:{fullfillImage:o.fullfillImage},updateModel:o.updateModel,regions:{collectionRegion:".js-collection-region"},onInit:function(){var e=this.model.get("sub_entry"),n=this;t.each(e.models,function(e){"notice"===e.get("type")&&n.listenTo(e,"change",n.render)})},onRender:function(){var e=this.model.get("sub_entry"),n=this;t.each(e.models,function(e){"take_away_tag_list"===e.get("type")?n.collectionRegion.show(new i({collection:e.get("sub_entry")})):"notice"===e.get("type")&&n.model.set("content",e.get("content"))})}})}),define("text!components/showcase/2.0.0/category/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-category js-collection-region">\n\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/category/templates/show_item.html",[],function(){return"<% if (title !== '') { %>\n<a href=\"javascript:;\"><%- title %></a>\n<% } %>\n"}),define("components/showcase/2.0.0/category/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/category/templates/show_item.html"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/category/templates/show_item.html");return n.ItemView.extend({tagName:"li",template:t.template(i),modelEvents:{change:"render"}})}),define("components/showcase/2.0.0/category/views/show_collection",["require","marionette","components/showcase/2.0.0/category/views/show_item"],function(e){"use strict";var t=e("marionette"),n=e("components/showcase/2.0.0/category/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"custom-category-list clearfix",itemView:n})}),define("components/showcase/2.0.0/category/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/category/templates/show.html","components/showcase/2.0.0/category/views/show_collection"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/category/templates/show.html"),o=e("components/showcase/2.0.0/category/views/show_collection");return n.extend({template:t.template(i),regions:{collectionRegion:".js-collection-region"},onRender:function(){this.collectionRegion.show(new o({collection:this.model.get("sub_entry"),layout:this}))}})}),define("text!components/showcase/2.0.0/white/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-white text-center" style="height: <%= height %>px;">\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/white/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/white/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/white/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/white_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-white text-center" style="height: <%= height %>px;">\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/white_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/white_weapp/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/white_weapp/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/store/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="custom-store block-item">\n        <a class="custom-store-link clearfix" href="javascript:;">\n            <div class="custom-store-img"></div>\n            <div class="custom-store-name">\n                <%- title %>\n            </div>\n            <div class="custom-store-enter">\n                进入店铺\n            </div>\n        </a>\n    </div>\n\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/store/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/store/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/store/templates/show.html");return n.extend({template:t.template(i),serializeData:function(){return{title:window._global.mp_data.team_name||""}}})}),define("tpl!components/showcase/2.0.0/recommend_goods/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<div class="control-group">\n    <div class="custom-recommend-goods clearfix">\n        <div class="custom-recommend-goods-title">\n            <a href="javascript:;">推荐商品</a>\n        </div>\n        <ul class="custom-recommend-goods-list clearfix">\n            ';for(var i=0;i<goodsSample.length;i++)__p+='\n                <li>\n                    <a href="javascript:;">\n                        <img src="'+(null==(__t=fullfillImage(goodsSample[i].image_url))?"":__t)+'" alt="">\n                    </a>\n                </li>\n            ';__p+='\n        </ul>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}return __p}}),define("components/showcase/2.0.0/recommend_goods/views/show",["require","components/showcase/2.0.0/base/views/show_base","core/utils","tpl!../templates/show"],function(e){"use strict";var t=e("components/showcase/2.0.0/base/views/show_base"),n=e("core/utils");return t.extend({template:e("tpl!../templates/show"),templateHelpers:{fullfillImage:n.fullfillImage},serializeData:function(){return{goodsSample:[{image_url:"public_files/2015/10/28/69b0970572eb1ff21f919d265f4d1312.jpg",price:"379.00"},{image_url:"public_files/2015/10/28/86551866bfc73cd54d4036f2248d3b06.jpg",price:"5.50"},{image_url:"public_files/2015/10/28/2811e55fde033b2f87294b2b9f92080c.jpg",price:"32.00"}]}}})}),define("text!components/showcase/2.0.0/scroll/templates/show.html",[],function(){return'<div class="control-group">\n    <%\n        var image_url = \'\';\n        if(first_page_image_url) {\n            image_url = fullfillImage(first_page_image_url);\n        } else {\n            image_url = window._global.url.cdn_static + \'/image/scroll/default2.gif\';\n        }\n    %>\n    <div class="www-tpl-scroll">\n        <% if(homepage_icon == \'1\') { %>\n            <div class="ui-left-btns">\n                <i class="ui-homepage-btn"></i>\n            </div>\n        <% } %>\n        <% if(music_icon == \'1\') { %>\n            <div class="ui-right-btns">\n                <i class="ui-music-btn"></i>\n            </div>\n        <% } %>\n        <img src="<%= image_url %>" alt="全画幅场景">\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/scroll/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/scroll/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage}})}),define("text!components/showcase/2.0.0/scroll_nav/templates/show_item.html",[],function(){return'<% if(image_url) { %>\n<div class="scroll-nav-item" style="background-image: url(\'<%= fullfillImage(image_url) %>\');">\n<% } else { %>\n<div class="scroll-nav-item">\n<% } %>\n    <div class="scroll-nav-item-bg"></div>\n    <div class="scroll-nav-item-title"><%- title %></div>\n    <div class="scroll-nav-item-sub-title"><%- sub_title %></div>\n</div>\n\n\n'}),define("components/showcase/2.0.0/scroll_nav/views/show_item",["require","underscore","marionette","text!components/showcase/2.0.0/scroll_nav/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("marionette"),i=e("text!components/showcase/2.0.0/scroll_nav/templates/show_item.html"),o=e("core/utils");return n.ItemView.extend({tagName:"li",template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},initialize:function(e){e=e||{},this.listenTo(this.model,"change",this.render)}})}),define("components/showcase/2.0.0/scroll_nav/views/show_collection",["require","marionette","components/showcase/2.0.0/scroll_nav/views/show_item"],function(e){"use strict";var t=e("marionette"),n=e("components/showcase/2.0.0/scroll_nav/views/show_item");return t.CollectionView.extend({tagName:"ul",className:"clearfix",itemView:n})}),define("text!components/showcase/2.0.0/scroll_nav/templates/show.html",[],function(){return'<div class="control-group">\n    <%\n        var image_url = window._global.url.cdn_static + \'/image/scroll_nav/default.gif\';\n\n        if(background_images && background_images.length) {\n            image_url = fullfillImage(background_images[0].url, \'!640x320.jpg\');\n        }\n    %>\n    <div class="www-tpl-scroll www-scroll-nav">\n        <% if(homepage_icon == \'1\') { %>\n            <div class="ui-left-btns">\n                <i class="ui-homepage-btn"></i>\n            </div>\n        <% } %>\n        <img src="<%= image_url %>" alt="">\n\n        <div class="js-scroll-nav-show-collection-region nav-style-<%= nav_style %>"></div>\n    </div>\n</div>\n'}),define("components/showcase/2.0.0/scroll_nav/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","components/showcase/2.0.0/scroll_nav/views/show_collection","text!components/showcase/2.0.0/scroll_nav/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("components/showcase/2.0.0/scroll_nav/views/show_collection"),o=e("text!components/showcase/2.0.0/scroll_nav/templates/show.html"),s=e("core/utils");return n.extend({template:t.template(o),templateHelpers:{fullfillImage:s.fullfillImage},regions:{collectionRegion:".js-scroll-nav-show-collection-region"},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry")}))}})}),define("text!components/showcase/2.0.0/image_text/templates/show.html",[],function(){return'<% if (position === 0) { %>\n<div class="appmsg appmsg-multiple-first">\n    <h4 class="appmsg-title"><%- title || \'标题\' %></h4>\n    <p class="appmsg-meta"><%- currentDay %></p>\n    <div class="appmsg-thumb-wrap">\n        <% if (image) { %>\n        <img src="<%- image %>"/>\n        <% } else { %>\n        <p>封面图片</p>\n        <% } %>\n    </div>\n    <% if (digest) { %>\n    <div class="appmsg-digest">\n        <%- digest %>\n    </div>\n    <% } %>\n    <div class="appmsg-view-full clearfix">\n        <span>阅读全文</span>\n        <span class="pull-right">&gt;</span>\n    </div>\n</div>\n<% } else { %>\n<div class="appmsg appmsg-multiple-others">\n    <h4 class="appmsg-title"><%- title || \'标题\' %></h4>\n    <div class="appmsg-thumb-wrap">\n        <% if (image) { %>\n        <img src="<%- image %>" width="50" height="50" />\n        <% } else { %>\n        <p>缩略图</p>\n        <% } %>\n    </div>\n</div>\n<% } %>\n\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <% if (position > 1) { %>\n        <span class="action delete">删除</span>\n        <% } %>\n    </div>\n</div>'}),define("components/showcase/2.0.0/image_text/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","core/utils","text!components/showcase/2.0.0/image_text/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("core/utils"),o=e("text!components/showcase/2.0.0/image_text/templates/show.html");return n.extend({className:function(){return this.model.position()>0?"app-field clearfix":"app-field clearfix not-sortable js-not-sortable"},template:t.template(o),serializeData:function(){var e=this.model.attributes,n=this.model.position(),o=this.model.get("image");o=o&&i.fullfillImage(o);var s=i.getCurrentDay();return t.extend({},e,{image:o,position:n,currentDay:s})}})}),define("tpl!components/showcase/2.0.0/advanced_news/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0===position?(__p+='\n    <div class="appmsg appmsg-multiple-first">\n        <h4 class="appmsg-title">'+(null==(__t=title||"标题")?"":_.escape(__t))+'</h4>\n        <p class="appmsg-meta">'+(null==(__t=currentDay)?"":_.escape(__t))+"</p>\n        ",isSingle?(__p+="\n            ",cover_url&&(__p+='\n                <div class="appmsg-thumb-wrap">\n                    <img src="'+(null==(__t=fullfillImage(cover_url))?"":_.escape(__t))+'"/>\n                </div>\n            '),__p+="\n        "):(__p+='\n            <div class="appmsg-thumb-wrap">\n                ',__p+=cover_url?'\n                    <img src="'+(null==(__t=fullfillImage(cover_url))?"":_.escape(__t))+'"/>\n                ':"\n                    <p>封面图片</p>\n                ",__p+="\n            </div>\n        "),__p+="\n        ",digest&&(__p+='\n            <div class="appmsg-digest">\n                '+(null==(__t=digest)?"":_.escape(__t))+"\n            </div>\n        "),__p+='\n        <div class="appmsg-view-full clearfix">\n            <span>阅读全文</span>\n            <span class="pull-right">&gt;</span>\n        </div>\n    </div>\n'):(__p+='\n    <div class="appmsg appmsg-multiple-others">\n        <h4 class="appmsg-title">'+(null==(__t=title||"标题")?"":_.escape(__t))+"</h4>\n        ",cover_url&&(__p+='\n            <div class="appmsg-thumb-wrap">\n                <img src="'+(null==(__t=fullfillImage(cover_url))?"":_.escape(__t))+'" width="50" height="50" />\n            </div>\n        '),__p+="\n    </div>\n"),__p+='\n\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        ',position>1&&(__p+='\n            <span class="action delete">删除</span>\n        '),__p+="\n    </div>\n</div>\n";return __p}}),define("components/showcase/2.0.0/advanced_news/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","core/utils","text!components/showcase/2.0.0/image_text/templates/show.html","tpl!../templates/show"],function(e){"use strict";var t=(e("underscore"),e("components/showcase/2.0.0/base/views/show_base")),n=e("core/utils");e("text!components/showcase/2.0.0/image_text/templates/show.html");return t.extend({className:function(){return this.model.position()>0?"app-field clearfix":"app-field clearfix not-sortable js-not-sortable"},template:e("tpl!../templates/show"),templateHelpers:function(){return{position:this.model.position(),currentDay:n.getCurrentDay(),fullfillImage:n.fullfillImage,isSingle:this.model.isSingle()}}})}),define("text!components/showcase/2.0.0/audio/templates/show.html",[],function(){return'<div class="control-group">\n    <% if (+style==0 ) { %>\n        <div class="custom-audio">\n            <div class="custom-audio-weixin clearfix <% if(bubble == \'right\') { %>custom-audio-weixin-right<% } %> ">\n                <img src="<%= avatar %>" width="40" height="40" class="custom-audio-logo">\n                <span class="custom-audio-bar">\n                    <img class="js-animation hide" src="<%= _global.url.cdn_static %>/image/wap/audio/player.gif" alt="播放器动画" width="13" height="17">\n                    <i class="custom-audio-animation-static js-animation-static"></i>\n                </span>\n                <span class="custom-audio-time js-duration"></span>\n            </div>\n        </div>\n    <% } else { %>\n        <div class="custom-audio">\n            <div class="custom-audio-music">\n                <i class="custom-audio-btn js-trigger"></i>\n                <span class="custom-audio-title"><%- title %></span>\n                <span class="custom-audio-status js-status"></span>\n                <span class="custom-audio-time">\n                    <span class="js-current-time"></span>\n                    <span class="js-duration"></span>\n                </span>\n                <span class="custom-audio-timeline js-percentage"></span>\n            </div>\n        </div>\n    <% } %>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <span class="action add">加内容</span>\n        <span class="action delete">删除</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/audio/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/audio/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/audio/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),serializeData:function(){var e=this.model.toJSON();return t.extend(e,{avatar:o.fullfillImage(e.avatar||_global.mp_data.logo,"!80x80.jpg")})}})}),define("tpl!components/showcase/2.0.0/shop_banner/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-shop-banner"\n        style="background-image: url('+(null==(__t=fullfillImage(background_image))?"":__t)+');">\n\n        <div class="custom-shop-banner-inner">\n            <div class="custom-shop-banner-logo">\n                <img src="'+(null==(__t=logo())?"":__t)+'" alt="Logo">\n            </div>\n            <h1>'+(null==(__t=_global.mp_data.team_name)?"":__t)+'</h1>\n            <p style="color: #fff;padding: 0 20px;">'+(null==(__t=intro)?"":__t)+'</p>\n        </div>\n\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        ',isFenxiao()||(__p+='\n        <span class="action add">加内容</span>\n        '),__p+="\n    </div>\n</div>\n",isFenxiao()||(__p+='\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'),__p+="\n";return __p}}),define("components/showcase/2.0.0/shop_banner/views/show",["require","core/utils","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";var t=e("core/utils");return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show"),templateHelpers:{logo:function(){return t.isFenxiao()?t.fullfillImage(window._global.template_logo,"!145x145.jpg"):t.fullfillImage(window._global.mp_data.logo,"!145x145.jpg")},fullfillImage:t.fullfillImage,isFenxiao:t.isFenxiao}})}),define("tpl!components/showcase/2.0.0/shop_banner_weapp/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="shop-banner-weapp type'+(null==(__t=store_info_style)?"":__t)+'">\n\n        <div class="shop-banner-weapp__cover"\n            style="background-image: url('+(null==(__t=fullfillImage(background_image))?"":__t)+');">\n            <div class="shop-banner-weapp__mask"></div>\n        </div>\n\n        <div class="shop-banner-weapp__inner">\n            <div class="shop-banner-weapp__content">\n                <div class="shop-banner-weapp__logo">\n                    <img src="'+(null==(__t=logo())?"":__t)+'" alt="Logo">\n                </div>\n                <div class="content-right">\n                    <h1>'+(null==(__t=_global.mp_data.team_name)?"":__t)+"</h1>\n\n                    ",__p+="0"==store_info_style?'\n                        <div class="promotion-bar">\n                            <span class="tag">满减</span><span class="text">在线支付满150减30，满100减20... ></span>\n                        </div>\n                    ':'\n                        <p class="shop-sum">\n                           <span class="total">全部商品1234</span>\n                           <span class="total">上新12</span>\n                        </p>\n                    ',__p+='\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        <span class="action add">加内容</span>\n        <span class="action delete">删除</span>\n    </div>\n</div>\n\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/shop_banner_weapp/views/show",["require","core/utils","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";var t=e("core/utils");return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show"),templateHelpers:{logo:function(){return t.fullfillImage(window._global.mp_data.logo,"!145x145.jpg")},fullfillImage:t.fullfillImage}})}),define("tpl!components/showcase/2.0.0/tags/templates/show_item",[],function(){return function(obj){
var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+=(null==(__t=title)?"":__t)+"\n";return __p}}),define("components/showcase/2.0.0/tags/views/show_item",["require","marionette","tpl!../templates/show_item"],function(e){"use strict";return e("marionette").ItemView.extend({tagName:"a",template:e("tpl!../templates/show_item"),className:function(){return 0===this.model.index()?"active":""},initialize:function(){this.listenTo(this.model,"change",this.render)}})}),define("tpl!components/showcase/2.0.0/tags/templates/show_empty",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="javascript:;">请添加商品分组</a>\n';return __p}}),define("components/showcase/2.0.0/tags/views/show_empty",["require","marionette","tpl!../templates/show_empty"],function(e){"use strict";return e("marionette").ItemView.extend({tagName:"li",template:e("tpl!../templates/show_empty")})}),define("components/showcase/2.0.0/tags/views/show_collection",["require","marionette","./show_item","./show_empty"],function(e){"use strict";var t=e("marionette"),n=e("./show_item"),i=e("./show_empty");return t.CollectionView.extend({tagName:"ul",className:function(){var e=this.collection.length>1?"":"hide";return"tabber tabber-bottom red clearfix tabber-n"+Math.max(this.collection.length,1)+" "+e},itemView:n,emptyView:i})}),define("tpl!components/showcase/2.0.0/tags/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-tags">\n        <div class="js-collection-region"></div>\n        <div class="js-goods-style-region"></div>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n        ',isFenxiao()||(__p+='\n        <span class="action add">加内容</span>\n        <span class="action delete">删除</span>\n        '),__p+="        \n    </div>\n</div>\n",isFenxiao()||(__p+='\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'),__p+="\n";return __p}}),define("components/showcase/2.0.0/tags/views/show",["require","underscore","core/utils","components/showcase/2.0.0/base/views/show_base","./show_collection","components/showcase/2.0.0/goods_list/views/show_goods_style","tpl!../templates/show"],function(e){"use strict";var t=(e("underscore"),e("core/utils")),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("./show_collection"),o=e("components/showcase/2.0.0/goods_list/views/show_goods_style");return n.extend({template:e("tpl!../templates/show"),regions:{collectionRegion:".js-collection-region",goodsStyleRegion:".js-goods-style-region"},onInit:function(){this.listenTo(this.model.get("sub_entry"),"reset add remove",this.render)},onRender:function(){this.collectionRegion.show(new i({collection:this.model.get("sub_entry")})),this.goodsStyleRegion.show(new o({model:this.model}))},templateHelpers:{isFenxiao:t.isFenxiao}})}),define("tpl!components/showcase/2.0.0/notice/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-notice">\n        <div class="custom-notice-inner">\n            <div class="custom-notice-scroll">\n                <span>\n                    公告：'+(null==(__t=content?_.escape(content).replace(/\s/g,"&nbsp;"):"请填写内容，如果过长，将会在手机上滚动显示")?"":__t)+'\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/notice/views/show",["require","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show")})}),define("tpl!components/showcase/2.0.0/notice_weapp/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <div class="custom-notice" style="color: '+(null==(__t=color)?"":__t)+"; background-color: "+(null==(__t=bg_color)?"":__t)+'">\n        <div class="custom-notice-inner">\n            <div class="custom-notice-scroll">\n                <img src="'+(null==(__t=window._global.url.imgqn)?"":__t)+'/public_files/2017/8/10/6af5b7168eed548100d9041f07b7c616.png" width="16px" height="14px" style="top: -1px" />\n                <span>\n                    '+(null==(__t=content?_.escape(content).replace(/\s/g,"&nbsp;"):"请填写内容，如果过长，将会在手机上滚动显示")?"":__t)+'\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/notice_weapp/views/show",["require","components/showcase/2.0.0/base/views/show_base","tpl!../templates/show"],function(e){"use strict";return e("components/showcase/2.0.0/base/views/show_base").extend({template:e("tpl!../templates/show")})}),define("tpl!components/showcase/2.0.0/coupon/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='<div class="control-group">\n    <ul class="custom-coupon clearfix">\n        ',coupon.length)__p+="\n            ",_.each(coupon,function(e){__p+='\n                <li>\n                    <a href="javascript:;">\n                        <div class="custom-coupon-price">\n                            ',__p+=2==e.preferential_type?"\n                                "+(null==(__t=e.discount/10)?"":_.escape(__t))+"折\n                            ":"\n                                <span>￥</span>"+(null==(__t=e.value)?"":__t)+"\n                            ",__p+='\n                        </div>\n                        <div class="custom-coupon-desc">\n                            ',__p+=e.at_least?"\n                                满"+(null==(__t=e.at_least)?"":__t)+"元可用\n                            ":"\n                                无门槛使用\n                            ",__p+="\n\n                        </div>\n                    </a>\n                </li>\n            "}),__p+="\n        ";else{__p+="\n            ";for(var i=0;i<3;i++)__p+='\n                <li>\n                    <a href="javascript:;">\n                        <div class="custom-coupon-price"><span>￥</span>100</div>\n                        <div class="custom-coupon-desc">\n                            满500元可用\n                        </div>\n                    </a>\n                </li>\n            ';__p+="\n        "}__p+='\n    </ul>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span>\n    </div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}return __p}}),define("components/showcase/2.0.0/coupon/views/show",["require","../../base/views/show_base","tpl!../templates/show"],function(e){"use strict";return e("../../base/views/show_base").extend({template:e("tpl!../templates/show")})}),define("text!components/showcase/2.0.0/coupon_weapp/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="couponweapp-show-wrapper">\n        <ul class="couponweapp-show">\n            <% _.each(coupon, function(item) { %>\n                <li class="<%= item.is_empty ? "coupon-empty" : "couponweapp-show-item-num"+(coupon.length <= 3 ? coupon.length : "N") %>">\n                    <div class="border left-border"></div>\n                    <div class="<%= coupon.length == 1 ? "left-content" : "coupon-content" %>">\n                        <% if (item.preferential_type == 2) { %>\n                            <div class="discount">\n                                <span class="discount-num"><%= (item.discount / 10) %></span>\n                                <span class="discount-text">折</span>\n                            </div>\n                        <% } else { %>\n                            <div class="price">\n                                <span class="price-symbol">￥</span>\n                                <span class="price-yuan"><%= Math.floor(item.origin_value / 100) %></span>\n                                <% if (item.origin_value % 100 != 0) { %>\n                                    <% if ((item.origin_value % 100) < 10) { %>\n                                        <span class="price-cent">.0<%= item.origin_value % 100 %></span>\n                                    <% } else if ((item.origin_value % 100) % 10 == 0) {%>\n                                        <span class="price-cent">.<%= (item.origin_value % 100) / 10 %></span>\n                                    <% } else { %>\n                                        <span class="price-cent">.<%= item.origin_value % 100 %></span>\n                                    <% } %>\n                                <% } %>\n                            </div>\n                        <% } %>\n                        <div class="desc">\n                            <% if (coupon.length == 1) { %>\n                                <div class="title">优惠券</div>\n                                <div class="at-least"><%= item.is_at_least ? \'满\'+ parseFloat(item.origin_at_least / 100)+\'元可用\' : \'无门槛使用\' %></div>\n                            <% } else { %>\n                                <%= item.is_at_least ? \'满\'+ parseFloat(item.origin_at_least / 100)+\'元可用\' : \'无门槛使用\' %>\n                            <% } %>\n                        </div>\n                    </div>\n                    <% if (coupon.length == 1) { %>\n                        <div class="right-content">立即领取</div>\n                    <% } %>\n                    <div class="border right-border"></div>\n                    <% if (item.is_empty) { %>\n                        <div class="coupon-empty-text">已领取</div>\n                    <% } %>\n                </li>\n            <% }); %>\n        </ul>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/coupon_weapp/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/coupon_weapp/templates/show.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/coupon_weapp/templates/show.html"),o=e("core/utils");return n.extend({template:t.template(i),templateHelpers:{fullfillImage:o.fullfillImage},serializeData:function(){var e=this.model.toJSON();return t.isEmpty(e.coupon)&&(e.coupon=[{origin_value:10001,discount:0,preferential_type:1,is_at_least:!1,origin_at_least:0},{origin_value:0,discount:88,preferential_type:2,is_at_least:!0,origin_at_least:29990,is_empty:!0},{origin_value:0,discount:80,preferential_type:2,is_at_least:!0,origin_at_least:59900,is_empty:!0},{origin_value:0,discount:80,preferential_type:2,is_at_least:!0,origin_at_least:59900,is_empty:!0}]),e}})}),define("text!components/showcase/2.0.0/ump_activity/templates/show.html",[],function(){return'<div class="control-group">\n    <div style="padding: 10px; font-size: 16px;">\n        点击编辑【营销活动模块】\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/ump_activity/views/show",["require","exports","module","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/ump_activity/templates/show.html","underscore"],function(e,t,n){var i=e("components/showcase/2.0.0/base/views/show_base"),o=e("text!components/showcase/2.0.0/ump_activity/templates/show.html"),s=e("underscore");n.exports=i.extend({template:s.template(o)})}),define("text!components/showcase/2.0.0/ump_seckill/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="ump-seckill">\n        <div class="thumb-wrap">\n            <img class="thumb" src="<%= image_url %>">\n        </div>\n        <div class="goods-activity">\n            <div class="activity-info clearfix">\n                <div class="activity-price current-price">\n                   <span class="price-title"><%= tag %></span>￥<i class="js-goods-price price">X</i>\n                </div>\n                <div class="original-price">\n                   ￥Y\n                </div>\n                <div class="overview-countdown">\n                   <div class="countdown-title">距秒杀结束还剩余</div>\n                   <div class="js-time-count-down countdown">\n                       <span class="js-day">D</span> :\n                       <span class="js-hour">H</span> :\n                       <span class="js-min">M</span> :\n                       <span class="js-sec">S</span>\n                   </div>\n                </div>\n            </div>\n            <h3 class="title ellipsis"><%= goods_title %></h3>\n            <a href="javascript:;" class="tag tag-red tag-activity">立即抢购</a>\n            <span class="activity-tips">剩余Z件</span>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("components/showcase/2.0.0/ump_seckill/views/show",["require","exports","module","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/ump_seckill/templates/show.html","underscore"],function(e,t,n){var i=e("components/showcase/2.0.0/base/views/show_base"),o=e("text!components/showcase/2.0.0/ump_seckill/templates/show.html"),s=e("underscore");n.exports=i.extend({template:s.template(o)})}),define("tpl!components/showcase/2.0.0/ump_limited_discount/templates/show",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n  ',goods&&goods.length>0?(__p+='\n    <div class="ump-limitdiscount">\n      ',goods.forEach(function(e){__p+='\n        <div class="ump-limitdiscount-good">\n          <div class="good-time-info">\n            <div class="good-image" style="background-image: url('+(null==(__t=fullfillImage(e.image_url,"!600x600.jpg"))?"":__t)+');"></div>\n            <div class="good-image-mask">\n              <div class="mask-icon"></div>\n            </div>\n            <div class="discount-countdown">\n              <div class="ump-type-text">限时折扣</div>\n              <div class="js-countdown clearfix">\n                <span class="countdown-title">距离折扣结束还剩</span>\n                <span class="countdown-time"><span class="countdown-number countdown-day">D</span><span class="countdown-colon">:</span><span class="countdown-number countdown-hour">H</span><span class="countdown-colon">:</span><span class="countdown-number countdown-minute">M</span><span class="countdown-colon">:</span><span class="countdown-number countdown-second">S</span></span>\n              </div>\n            </div>\n          </div>\n          <div class="good-detail clearfix">\n            <div class="good-title overflow-to-ellipsis">\n              <span class="discount-type">x折</span>\n              <span class="title-text">'+(null==(__t=e.title)?"":_.escape(__t))+'</span>\n            </div>\n            <div class="price">\n              <span class="discount-price"><span class="yen">￥</span>xx.xx</span>\n              <span class="original-price"><span class="yen">￥</span>xx.xx</span>\n            </div>\n            <div class="good-detail-right">\n              <a class="js-btn-good-link" href="'+(null==(__t=e.kdt_url)?"":__t)+'">立即查看</a>\n              <div class="stock overflow-to-ellipsis" style="display: none;">剩余：xxx件</div>\n            </div>\n          </div>\n        </div>\n      '}),__p+="\n    </div>\n  "):__p+='\n    <div style="padding: 10px; font-size: 16px;">请添加商品</div>\n  ',__p+='\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n';return __p}}),define("components/showcase/2.0.0/ump_limited_discount/views/show",["require","exports","module","components/showcase/2.0.0/base/views/show_base","tpl!components/showcase/2.0.0/ump_limited_discount/templates/show","core/utils"],function(e,t,n){var i=e("components/showcase/2.0.0/base/views/show_base"),o=e("tpl!components/showcase/2.0.0/ump_limited_discount/templates/show"),s=e("core/utils");n.exports=i.extend({template:o,templateHelpers:{fullfillImage:s.fullfillImage}})}),define("text!components/showcase/2.0.0/offline_head/templates/show.html",[],function(){return'<div class="multi-store-header">\n    <img src="<%= window._global.url.imgqn + \'/upload_files/2016/10/11/Fi4bDOl-RLPR989o3ypOer9zFmS8.png\' %>" />\n</div>'}),define("components/showcase/2.0.0/offline_head/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/offline_head/templates/show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/offline_head/templates/show.html");return n.extend({template:t.template(i)})}),define("text!components/showcase/2.0.0/paid_column/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="paid-content__wrap">\n        <% if (+show_title) { %>\n        <div class="paid-content__head">\n            <% if (+show_title_all) { %><span class="paid-content__head-all">查看全部</span><% } %>\n            <div class="paid-content__head-title"><%- title %></div>\n        </div>\n        <% } %>\n        <% if (sub_entry.length < 1 || column_from === \'newest\') { %>\n        <section class="paid-content__column-list">\n            <a>\n                <div class="paid-content__column">\n                    <div class="paid-content__column-cover">\n                        <img src="https://img.yzcdn.cn/public_files/2017/04/25/b38f282370424140afdf222a13958155.png">\n                    </div>\n                    <div class="paid-content__column-detail">\n                        <div class="paid-content__column-info">\n                            <h3 class="paid-content__column-title">些处显示专栏标题</h3>\n                            <p class="paid-content__column-summary">些处显示描述文案</p>\n                        </div>\n                        <div class="paid-content__column-meta">\n                            <span class="paid-content__column-counts">已更新0期</span>\n                            <span class="paid-content__column-subscription">0人订阅</span>\n                            <span class="paid-content__column-price">￥80.00</span>\n                        </div>\n                    </div>\n                </div>\n            </a>\n        </section>\n        <% } else { %>\n        <section class="paid-content__column-list js-custom-paid-column"></section>\n        <% } %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/paid_column/templates/show_item.html",[],function(){return'<div class="paid-content__column">\n    <div class="paid-content__column-cover">\n        <img src="<%- cover %>">\n    </div>\n    <div class="paid-content__column-detail">\n        <div class="paid-content__column-info">\n            <h3 class="paid-content__column-title"><%- title %></h3>\n            <p class="paid-content__column-summary"><%- summary %></p>\n        </div>\n        <div class="paid-content__column-meta">\n            <span class="paid-content__column-counts">已更新<%- contents_count %>期</span>\n            <span class="paid-content__column-subscription"><%- subscriptions_count %>人订阅</span>\n            <span class="paid-content__column-price">￥<%- (price / 100).toFixed(2) %></span>\n        </div>\n    </div>\n</div>'}),define("components/showcase/2.0.0/paid_column/views/show_item",["require","underscore","backbone","marionette","text!components/showcase/2.0.0/paid_column/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("marionette"),o=e("text!components/showcase/2.0.0/paid_column/templates/show_item.html"),s=e("core/utils");return i.ItemView.extend({tagName:"a",className:"column-item",template:t.template(o),serializeData:function(){var e=n.Marionette.ItemView.prototype.serializeData.apply(this,arguments);return e.cover=s.fullfillImage(e.cover,"!80x80.jpg"),e},initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/paid_column/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/paid_column/templates/show.html","components/showcase/2.0.0/paid_column/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/paid_column/templates/show.html"),o=e("components/showcase/2.0.0/paid_column/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".js-custom-paid-column");t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("text!components/showcase/2.0.0/paid_content/templates/show.html",[],function(){return'<div class="control-group">\n    <div class="paid-content-container">\n        <% if (+show_title) { %>\n        <div class="paid-content__header">\n            <% if (+show_title_all) { %><a class="paid-content__view-all" href="#">查看全部</a><% } %>\n            <h3 class="paid-content__title"><%- title %></h3>\n        </div>\n        <% } %>\n        <% if (sub_entry.length < 1 || content_from === \'newest\') { %>\n        <div class="paid-content__list">\n            <div class="paid-content__list-item paid-content__list-item--imgtext">\n                <div class="paid-content__img-wrap">\n                    <img class="paid-content__item-img" src="https://img.yzcdn.cn/public_files/2017/05/08/cba93c60294ca325ba889a1798143402.png" />\n                </div>\n                <div class="paid-content__item-detail">\n                    <h4 class="paid-content__item-title">此处显示标题内容</h4>\n                    <p class="paid-content__item-info">04-18 所属专栏</p>\n                    <p class="paid-content__subscription">50</p>\n                    <span class="paid-content__price">￥80.00</span>\n                </div>\n            </div>\n        </div>\n        <% } else { %>\n        <div class="paid-content__list js-custom-paid-content"></div>\n        <% } %>\n    </div>\n    <div class="component-border"></div>\n</div>\n<div class="actions">\n    <div class="actions-wrap"><span class="action edit">编辑</span><span class="action add">加内容</span><span class="action delete">删除</span></div>\n</div>\n<div class="sort">\n    <i class="sort-handler"></i>\n</div>\n'}),define("text!components/showcase/2.0.0/paid_content/templates/show_item.html",[],function(){return'<div class="paid-content__img-wrap">\n    <img class="paid-content__item-img" src="<%- cover %>" />\n</div>\n<div class="paid-content__item-detail">\n    <h4 class="paid-content__item-title"><%- title %></h4>\n    <p class="paid-content__item-info">04-18 <%- column_title %></p>\n    <p class="paid-content__subscription">50</p>\n    <span class="paid-content__price">￥<%- (price / 100).toFixed(2) %></span>\n</div>\n'}),define("components/showcase/2.0.0/paid_content/views/show_item",["require","underscore","backbone","marionette","text!components/showcase/2.0.0/paid_content/templates/show_item.html","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("marionette"),o=e("text!components/showcase/2.0.0/paid_content/templates/show_item.html"),s=e("core/utils");return i.ItemView.extend({tagName:"div",className:"paid-content__list-item paid-content__list-item--imgtext",template:t.template(o),serializeData:function(){var e=n.Marionette.ItemView.prototype.serializeData.apply(this,arguments);return e.cover=s.fullfillImage(e.cover,"!80x80.jpg"),e},initialize:function(e){e=e||{},this.parent=e.parent,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}})}),define("components/showcase/2.0.0/paid_content/views/show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!components/showcase/2.0.0/paid_content/templates/show.html","components/showcase/2.0.0/paid_content/views/show_item"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!components/showcase/2.0.0/paid_content/templates/show.html"),o=e("components/showcase/2.0.0/paid_content/views/show_item");return n.extend({template:t.template(i),onInit:function(){this.listenTo(this.model.get("sub_entry"),"remove",this.render),this.listenTo(this.model.get("sub_entry"),"add",this.render),this.listenTo(this.model.get("sub_entry"),"reset",this.render)},onRender:function(){this.refreshOptions()},refreshOptions:function(){var e=this,t=this.$(".js-custom-paid-content");t.empty(),this.model.get("sub_entry").each(function(n){var i=new o({model:n,parent:e.model});t.append(i.render().el)})}})}),define("components/showcase/2.0.0/config",["require","./base/models/base","./rich_text/models/rich_text","./goods/models/goods","./goods_weapp/models/goods","./goods_list/models/goods","./goods_list_weapp/models/goods","./goods_template_split/models/model","./groupon/models/model","./period_buy/models/model","./image_ad_weapp/models/model","./image_ad/models/model","./nav/models/model","./nav_weapp/models/model","./showcase/models/model","./level/models/level","./link/models/model","./text_nav/models/model","./text_weapp/models/model","./rich_text_weapp/models/rich_text_weapp","./tag_list/models/model","./tag_list_weapp/models/model","./title/models/model","./component/models/component","./search/models/model","./line/models/model","./line_weapp/models/model","./cube2/models/model","./tpl_shop/models/model","./tpl_weixin/models/model","./tpl_fbb/models/model","./tpl_course/models/model","./tpl_wxd/models/model","./tpl_11_11/models/model","./tpl_2016_11_11/models/model","./tpl_dragon_boat/models/model","./tpl_take_away/models/model","./category/models/model","./white/models/model","./white_weapp/models/model","./store/models/model","./recommend_goods/models/model","./scroll/models/model","./scroll_nav/models/model","./image_text/models/model","./advanced_news/models/model","./audio/models/model","./shop_banner/models/model","./shop_banner_weapp/models/model","./tags/models/model","./notice_weapp/models/model","./notice/models/model","./coupon/models/model","./coupon_weapp/models/model","./ump_activity/models/model","./ump_seckill/models/model","./ump_limited_discount/models/model","./offline_head/models/model","./paid_column/models/model","./paid_content/models/model","./base/views/edit_base","./rich_text/views/edit","./goods/views/edit","./goods_weapp/views/edit","./goods_list/views/edit","./goods_list_weapp/views/edit","./goods_template_split/views/edit","./groupon/views/edit","./period_buy/views/edit","./image_ad_weapp/views/edit","./image_ad/views/edit","./nav/views/edit","./nav_weapp/views/edit","./showcase/views/edit","./level/views/edit","./link/views/edit","./text_nav/views/edit","./text_weapp/views/edit","./rich_text_weapp/views/edit","./tag_list/views/edit","./tag_list_weapp/views/edit","./title/views/edit","./component/views/edit","./search/views/edit","./line/views/edit","./line_weapp/views/edit","./cube2/views/edit","./tpl_shop/views/edit","./tpl_weixin/views/edit","./tpl_fbb/views/edit","./tpl_course/views/edit","./tpl_wxd/views/edit","./tpl_11_11/views/edit","./tpl_2016_11_11/views/edit","./tpl_dragon_boat/views/edit","./tpl_take_away/views/edit","./category/views/edit","./white/views/edit","./white_weapp/views/edit","./store/views/edit","./recommend_goods/views/edit","./scroll/views/edit","./scroll_nav/views/edit","./image_text/views/edit","./advanced_news/views/edit","./audio/views/edit","./shop_banner/views/edit","./shop_banner_weapp/views/edit","./tags/views/edit","./notice/views/edit","./notice_weapp/views/edit","./coupon/views/edit","./coupon_weapp/views/edit","./ump_activity/views/edit","./ump_seckill/views/edit","./ump_limited_discount/views/edit","./offline_head/views/edit","./paid_column/views/edit","./paid_content/views/edit","./base/views/show_base","./rich_text/views/show","./goods/views/show","./goods_weapp/views/show","./goods_list/views/show","./goods_list_weapp/views/show","./goods_template_split/views/show","./groupon/views/show","./period_buy/views/show","./image_ad_weapp/views/show","./image_ad/views/show","./nav/views/show","./nav_weapp/views/show","./showcase/views/show","./level/views/show","./link/views/show","./text_nav/views/show","./text_weapp/views/show","./rich_text_weapp/views/show","./tag_list/views/show","./tag_list_weapp/views/show","./title/views/show","./component/views/show","./search/views/show","./line/views/show","./line_weapp/views/show","./cube2/views/show","./tpl_shop/views/show","./tpl_weixin/views/show","./tpl_fbb/views/show","./tpl_course/views/show","./tpl_wxd/views/show","./tpl_11_11/views/show","./tpl_2016_11_11/views/show","./tpl_dragon_boat/views/show","./tpl_take_away/views/show","./category/views/show","./white/views/show","./white_weapp/views/show","./store/views/show","./recommend_goods/views/show","./scroll/views/show","./scroll_nav/views/show","./image_text/views/show","./advanced_news/views/show","./audio/views/show","./shop_banner/views/show","./shop_banner_weapp/views/show","./tags/views/show","./notice/views/show","./notice_weapp/views/show","./coupon/views/show","./coupon_weapp/views/show","./ump_activity/views/show","./ump_seckill/views/show","./ump_limited_discount/views/show","./offline_head/views/show","./paid_column/views/show","./paid_content/views/show"],function(e){"use strict";var t=1===window._global.is_weapp_setting;return{models:{config:e("./base/models/base"),rich_text:e("./rich_text/models/rich_text"),
goods:e("./goods/models/goods"),goods_weapp:e("./goods_weapp/models/goods"),goods_list:e("./goods_list/models/goods"),goods_list_weapp:e("./goods_list_weapp/models/goods"),goods_template_split:e("./goods_template_split/models/model"),groupon:e("./groupon/models/model"),period_buy:e("./period_buy/models/model"),image_ad:e(t?"./image_ad_weapp/models/model":"./image_ad/models/model"),nav:e("./nav/models/model"),nav_weapp:e("./nav_weapp/models/model"),showcase:e("./showcase/models/model"),level:e("./level/models/level"),link:e("./link/models/model"),text_nav:e("./text_nav/models/model"),text_weapp:e("./text_weapp/models/model"),rich_text_weapp:e("./rich_text_weapp/models/rich_text_weapp"),tag_list:e("./tag_list/models/model"),tag_list_weapp:e("./tag_list_weapp/models/model"),title:e("./title/models/model"),component:e("./component/models/component"),search:e("./search/models/model"),line:e("./line/models/model"),line_weapp:e("./line_weapp/models/model"),cube2:e("./cube2/models/model"),tpl_shop:e("./tpl_shop/models/model"),tpl_weixin:e("./tpl_weixin/models/model"),tpl_fbb:e("./tpl_fbb/models/model"),tpl_course:e("./tpl_course/models/model"),tpl_wxd:e("./tpl_wxd/models/model"),tpl_11_11:e("./tpl_11_11/models/model"),tpl_2016_11_11:e("./tpl_2016_11_11/models/model"),tpl_dragon_boat:e("./tpl_dragon_boat/models/model"),tpl_take_away:e("./tpl_take_away/models/model"),category:e("./category/models/model"),white:e("./white/models/model"),white_weapp:e("./white_weapp/models/model"),store:e("./store/models/model"),recommend_goods:e("./recommend_goods/models/model"),scroll:e("./scroll/models/model"),scroll_nav:e("./scroll_nav/models/model"),image_text:e("./image_text/models/model"),advanced_news:e("./advanced_news/models/model"),audio:e("./audio/models/model"),shop_banner:e("./shop_banner/models/model"),shop_banner_weapp:e("./shop_banner_weapp/models/model"),tags:e("./tags/models/model"),notice_weapp:e("./notice_weapp/models/model"),notice:e("./notice/models/model"),coupon:e("./coupon/models/model"),coupon_weapp:e("./coupon_weapp/models/model"),ump_activity:e("./ump_activity/models/model"),ump_seckill:e("./ump_seckill/models/model"),ump_limitdiscount:e("./ump_limited_discount/models/model"),offline_head:e("./offline_head/models/model"),paid_column:e("./paid_column/models/model"),paid_content:e("./paid_content/models/model")},editViews:{config:e("./base/views/edit_base"),rich_text:e("./rich_text/views/edit"),goods:e("./goods/views/edit"),goods_weapp:e("./goods_weapp/views/edit"),goods_list:e("./goods_list/views/edit"),goods_list_weapp:e("./goods_list_weapp/views/edit"),goods_template_split:e("./goods_template_split/views/edit"),groupon:e("./groupon/views/edit"),period_buy:e("./period_buy/views/edit"),image_ad:e(t?"./image_ad_weapp/views/edit":"./image_ad/views/edit"),nav:e("./nav/views/edit"),nav_weapp:e("./nav_weapp/views/edit"),showcase:e("./showcase/views/edit"),level:e("./level/views/edit"),link:e("./link/views/edit"),text_nav:e("./text_nav/views/edit"),text_weapp:e("./text_weapp/views/edit"),rich_text_weapp:e("./rich_text_weapp/views/edit"),tag_list:e("./tag_list/views/edit"),tag_list_weapp:e("./tag_list_weapp/views/edit"),title:e("./title/views/edit"),component:e("./component/views/edit"),search:e("./search/views/edit"),line:e("./line/views/edit"),line_weapp:e("./line_weapp/views/edit"),cube2:e("./cube2/views/edit"),tpl_shop:e("./tpl_shop/views/edit"),tpl_weixin:e("./tpl_weixin/views/edit"),tpl_fbb:e("./tpl_fbb/views/edit"),tpl_course:e("./tpl_course/views/edit"),tpl_wxd:e("./tpl_wxd/views/edit"),tpl_11_11:e("./tpl_11_11/views/edit"),tpl_2016_11_11:e("./tpl_2016_11_11/views/edit"),tpl_dragon_boat:e("./tpl_dragon_boat/views/edit"),tpl_take_away:e("./tpl_take_away/views/edit"),category:e("./category/views/edit"),white:e("./white/views/edit"),white_weapp:e("./white_weapp/views/edit"),store:e("./store/views/edit"),recommend_goods:e("./recommend_goods/views/edit"),scroll:e("./scroll/views/edit"),scroll_nav:e("./scroll_nav/views/edit"),image_text:e("./image_text/views/edit"),advanced_news:e("./advanced_news/views/edit"),audio:e("./audio/views/edit"),shop_banner:e("./shop_banner/views/edit"),shop_banner_weapp:e("./shop_banner_weapp/views/edit"),tags:e("./tags/views/edit"),notice:e("./notice/views/edit"),notice_weapp:e("./notice_weapp/views/edit"),coupon:e("./coupon/views/edit"),coupon_weapp:e("./coupon_weapp/views/edit"),ump_activity:e("./ump_activity/views/edit"),ump_seckill:e("./ump_seckill/views/edit"),ump_limitdiscount:e("./ump_limited_discount/views/edit"),offline_head:e("./offline_head/views/edit"),paid_column:e("./paid_column/views/edit"),paid_content:e("./paid_content/views/edit")},showViews:{config:e("./base/views/show_base"),rich_text:e("./rich_text/views/show"),goods:e("./goods/views/show"),goods_weapp:e("./goods_weapp/views/show"),goods_list:e("./goods_list/views/show"),goods_list_weapp:e("./goods_list_weapp/views/show"),goods_template_split:e("./goods_template_split/views/show"),groupon:e("./groupon/views/show"),period_buy:e("./period_buy/views/show"),image_ad:e(t?"./image_ad_weapp/views/show":"./image_ad/views/show"),nav:e("./nav/views/show"),nav_weapp:e("./nav_weapp/views/show"),showcase:e("./showcase/views/show"),level:e("./level/views/show"),link:e("./link/views/show"),text_nav:e("./text_nav/views/show"),text_weapp:e("./text_weapp/views/show"),rich_text_weapp:e("./rich_text_weapp/views/show"),tag_list:e("./tag_list/views/show"),tag_list_weapp:e("./tag_list_weapp/views/show"),title:e("./title/views/show"),component:e("./component/views/show"),search:e("./search/views/show"),line:e("./line/views/show"),line_weapp:e("./line_weapp/views/show"),cube2:e("./cube2/views/show"),tpl_shop:e("./tpl_shop/views/show"),tpl_weixin:e("./tpl_weixin/views/show"),tpl_fbb:e("./tpl_fbb/views/show"),tpl_course:e("./tpl_course/views/show"),tpl_wxd:e("./tpl_wxd/views/show"),tpl_11_11:e("./tpl_11_11/views/show"),tpl_2016_11_11:e("./tpl_2016_11_11/views/show"),tpl_dragon_boat:e("./tpl_dragon_boat/views/show"),tpl_take_away:e("./tpl_take_away/views/show"),category:e("./category/views/show"),white:e("./white/views/show"),white_weapp:e("./white_weapp/views/show"),store:e("./store/views/show"),recommend_goods:e("./recommend_goods/views/show"),scroll:e("./scroll/views/show"),scroll_nav:e("./scroll_nav/views/show"),image_text:e("./image_text/views/show"),advanced_news:e("./advanced_news/views/show"),audio:e("./audio/views/show"),shop_banner:e("./shop_banner/views/show"),shop_banner_weapp:e("./shop_banner_weapp/views/show"),tags:e("./tags/views/show"),notice:e("./notice/views/show"),notice_weapp:e("./notice_weapp/views/show"),coupon:e("./coupon/views/show"),coupon_weapp:e("./coupon_weapp/views/show"),ump_activity:e("./ump_activity/views/show"),ump_seckill:e("./ump_seckill/views/show"),ump_limitdiscount:e("./ump_limited_discount/views/show"),offline_head:e("./offline_head/views/show"),paid_column:e("./paid_column/views/show"),paid_content:e("./paid_content/views/show")}}}),define("components/showcase/2.0.0/base/views/add",["require","underscore","jquery","components/showcase/2.0.0/base/views/edit_base","core/utils"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("core/utils");return i.extend({events:{"click .js-new-field":"handleAddField"},onShow:function(){this.listenTo(window.NC,"single_field:delete",this.onFieldDelete),this.listenTo(window.NC,"single_field:add",this.onFieldAdd)},checkHasField:function(e){var n=this.layout.collection.models,i=!1;return t.forEach(n,function(t){t.get("type")===e&&(i=!0)}),i},handleAddField:function(e){e.stopPropagation();var t=this.layout.collection.MAX_LENGTH||50;if(!this.layout.disableEdit){if(this.layout.collection.length>=t)return void o.errorNotify("内容最多"+t+"个。");var i=n(e.target),s=i.data("field-type"),a=window.SHOWCASE_CONFIG.models[s].initialize();a.get("is_singleton")&&(i.addClass("disabled"),this.checkHasField(s))||(this.model.collection?(this.layout.collection.add(a,{at:this.model.index()+1,silent:!0}),this.layout.collection.trigger("reset")):this.layout.collection.add(a),this.layout.displayEditView(a))}},onFieldDelete:function(e){this.$("[data-field-type="+e+"]").removeClass("disabled")},onFieldAdd:function(e){this.$("[data-field-type="+e+"]").addClass("disabled")}})}),define("tpl!components/showcase/2.0.0/base/templates/design",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="app-preview">\n    <div class="app-header"></div>\n    <div class="app-entry">\n        <div class="app-config js-config-region"></div>\n        <div class="app-fields js-fields-region"></div>\n    </div>\n    <div class="js-add-region"></div>\n</div>\n<div class="app-sidebar">\n    <div class="arrow"></div>\n    <div class="app-sidebar-inner js-sidebar-region">\n\n    </div>\n</div>\n<div class="app-actions">\n    <div class="form-actions text-center">\n        <input class="btn btn-primary btn-add" type="submit" value="上 架" data-loading-text="上架...">\n        <input class="btn btn-save" type="submit" value="保存成草稿" data-loading-text="保存成草稿...">\n        <input class="btn btn-preview" type="submit" value="预览效果" data-loading-text="预览效果...">\n    </div>\n</div>\n';return __p}}),define("tpl!components/showcase/2.0.0/base/templates/add_content",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="app-add-field">\n    <h4>添加内容</h4>\n    <ul>\n        <li><a class="js-new-field" data-field-type="rich_text">富文本</a></li>\n        <li><a class="js-new-field" data-field-type="goods">商品</a></li>\n        <li><a class="js-new-field" data-field-type="goods_list">商品<br/>列表</a></li>\n        <li><a class="js-new-field" data-field-type="image_ad">图片<br/>广告</a> </li>\n        <li><a class="js-new-field" data-field-type="cube2">魔方</a></li>\n        <li><a class="js-new-field" data-field-type="title">标题</a></li>\n        <li><a class="js-new-field" data-field-type="text_nav">文本<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="nav">图片<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="link">关联<br/>链接</a></li>\n        <li><a class="js-new-field" data-field-type="search">商品<br/>搜索</a></li>\n        <li><a class="js-new-field" data-field-type="showcase">橱窗</a></li>\n        <li><a class="js-new-field" data-field-type="line">辅助线</a></li>\n        <li><a class="js-new-field" data-field-type="white">辅助<br/>空白</a></li>\n        <li><a class="js-new-field" data-field-type="store">进入<br/>店铺</a></li>\n        <li><a class="js-new-field" data-field-type="notice">公告</a></li>\n    </ul>\n</div>\n';return __p}}),define("components/showcase/2.0.0/base/views/design",["require","underscore","jquery","backbone","marionette","components/showcase/2.0.0/base/views/show_collection","text!components/showcase/2.0.0/base/templates/stroagealert.html","components/showcase/2.0.0/config","components/showcase/2.0.0/base/views/add","tpl!components/showcase/2.0.0/base/templates/design","tpl!components/showcase/2.0.0/base/templates/add_content"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("components/showcase/2.0.0/base/views/show_collection"),a=e("text!components/showcase/2.0.0/base/templates/stroagealert.html"),l=e("components/showcase/2.0.0/config"),r=e("components/showcase/2.0.0/base/views/add");return window.SHOWCASE_CONFIG=l,o.Layout.extend({SHOWCASE_CONFIG:l,className:"app-design clearfix",template:e("tpl!components/showcase/2.0.0/base/templates/design"),AddViewTemplate:e("tpl!components/showcase/2.0.0/base/templates/add_content"),regions:{configRegion:".js-config-region",showRegion:".js-fields-region",editRegion:".js-sidebar-region",addRegion:".js-add-region"},collectionEvents:{sync:"fetched onShow"},ShowCollectionView:s,_fetched:!1,disableEdit:!1,addShowcaseConfig:function(){},initialize:function(e){r=r.extend({template:this.AddViewTemplate}),this.options=e||{},this.addShowcaseConfig(),this.triggerMethod("init",e),this.options.isCreating&&this.fetched(),this.options.localStorage&&(this._storagedData=this.collection.localFetch(),this._initAutoLocalStroage(),this.options.isCreating&&this.showStorageAlert(),this.listenTo(this.collection,"sync",this.showStorageAlert)),this.listenTo(this.collection,"add remove reset sort sync",this.toggleSidebar),this.listenTo(window.NC,"notify:show",this.onNotifyShow),this.listenTo(window.NC,"notify:close",this.onNotifyClose),this.bindKeybroad()},fetched:function(){this._fetched=!0},toggleAction:function(){this.$(".app-actions").toggle(this._fetched)},onShow:function(){var e=this.collection.first(),n=(new i.Model).set("disableEdit",this.disableEdit);if(e&&"config"===e.get("type")){var o=this.SHOWCASE_CONFIG.showViews.config;o&&this.configRegion.show(new o({model:e,layout:this}))}else this.configRegion.reset();this.showRegion.show(new this.ShowCollectionView(t.extend({},this.options,{collection:t.extend(this.collection,{disableEdit:this.disableEdit}),layout:this,unsortable:this.disableEdit}))),this.addRegion.show(new r({model:n,layout:this})),this.createAllEditView(),this.displayFirstEditView(),setTimeout(t.bind(this.toggleAddView,this),10),this.toggleAction(),this.fixActionsPosition()},toggleAddView:function(){this.collection.includeFullscreenModel()?this.$el.addClass("without-add-region"):this.$el.removeClass("without-add-region")},displayEditView:function(e,t){t=t||{};var n=this.editRegion.currentView&&this.editRegion.currentView.model;if(e=e||n){var i=t.add?r:this.getEditViewConstructor(e),o=this.getShowViewInstance(e),s=this,a=this.$(".app-sidebar");if(a.css("margin-top",o.position().top),this.disableEdit&&!this.disableEditDone&&(a.append('<div class="app-sidebar-disabled"></div>'),this.disableEditDone=!0),this.trigger("editing",e),t.edit&&this.scrollTop(o.offset().top-10),n===e&&!t.add&&!t.edit)return void this._scorllToFirstError(this.editRegion.currentView);e.set("disableEdit",this.disableEdit);var l=new i({model:e,layout:this});t.error&&l.once("show",function(){this.model.checkValid(),s._scorllToFirstError(this)}),t.notShow||this.editRegion.show(l)}},_scorllToFirstError:function(e){var t=e.$(".control-group.error").first();t.length>0&&this.scrollTop(t.offset().top-60)},createAllEditView:function(){for(var e=this,t=this.collection.models,n=t.length-1;n>=0;n--){var i=t[n];e.displayEditView(i,{notShow:!0}),i.get("is_singleton")&&window.NC.trigger("single_field:add",i.get("type"))}},displayFirstEditView:function(){var e=this.collection.first();e&&this.displayEditView(e)},getEditViewConstructor:function(e){var t=e.get("type");if(t in this.SHOWCASE_CONFIG.editViews)return this.SHOWCASE_CONFIG.editViews[t];throw new Error("type not exist.")},getShowViewInstance:function(e){return"config"===e.get("type")?this.configRegion.currentView:this.showRegion.currentView.children.findByModel(e)},add:function(){return this.sync({is_display:1})},save:function(){return this.sync({is_display:0})},preview:function(){return this.sync()},sync:function(e){return this.collection.sync(e)},bindKeybroad:function(){var e=this;n(window).off("keydown.design").on("keydown.design",function(t){var n=t.target.nodeName.toLowerCase();if(["input","textarea","select"].indexOf(n)===-1)switch(t.keyCode){case 74:e._handleKeyDown(t);break;case 75:e._handleKeyUp(t)}})},_handleKeyUp:function(e){var t,n=this.editRegion.currentView||{},i=n.model;i&&(t=i.index()-1)>=0&&(this.displayEditView(this.collection.at(t),{edit:!0}),e.preventDefault())},_handleKeyDown:function(e){var t,n=this.editRegion.currentView||{},i=n.model;i&&(t=i.index()+1)<this.collection.length&&(this.displayEditView(this.collection.at(t),{edit:!0}),e.preventDefault())},_initAutoLocalStroage:function(){var e=function(){this.collection.localSync()};clearInterval(this._autoLocalStorageTimter),this._autoLocalStorageTimter=setInterval(t.bind(e,this),3e4)},showStorageAlert:function(){if(!t.isEmpty(this._storagedData)&&JSON.stringify(this._storagedData)!==JSON.stringify(this.collection)){var e=n(a);e.one("click",".js-use-storage",t.bind(function(){this.collection.reset(this._storagedData,{parse:!0,silent:!0}),this.onShow(),e.alert("close")},this)),t.defer(t.bind(function(){this.$el.before(e)},this))}},toggleSidebar:function(){this.collection.length?this.$(".app-sidebar").show():this.$(".app-sidebar").hide()},scrollTop:function(e,t){t=t||200,n("html, body").animate({scrollTop:e},t)},fixActionsPosition:function(){this.$(".app-actions").css("bottom",n(".js-notify").height())},onNotifyShow:function(){this.fixActionsPosition()},onNotifyClose:function(){this.$(".app-actions").css("bottom",0)},onClose:function(){clearInterval(this._autoLocalStorageTimter)}})}),define("text!templates/design.html",[],function(){return'<% var lockItems = obj[\'items\'][0][\'item_lock_types\'] || [];\n    if (lockItems.length && lockItems.indexOf(101) !== -1) { %>\n    <div class="alert"><p class="alert-title">该商品已报名有赞微信公众号推广活动，图文编辑功能暂不可用，如需修改请在活动结束后进行修改</p></div>\n<% } %>\n<div class="app-preview">\n    <div class="app-header"></div>\n    <div class="app-entry">\n        <div class="app-config ">\n            <div class="app-field" style="cursor: default;">\n                <h1><span></span></h1>\n                <div class="goods-details-block">\n                    <h4>基本信息区</h4>\n                    <p>固定样式，显示商品主图、价格等信息</p>\n                </div>\n            </div>\n            <div class="js-config-region"></div>\n        </div>\n        <div class="app-fields js-fields-region"></div>\n    </div>\n    <div class="js-add-region"></div>\n</div>\n<div class="app-sidebar">\n    <div class="app-sidebar-inner goods-sidebar-goods-template js-goods-sidebar-sub-title hide">\n        <div class="form-horizontal">\n            <div class="control-group">\n                <label class="control-label">商品页模版：</label>\n                <div class="controls">\n                    <select class="js-goods-template chosen-select" name="components_extra_id" data-selected-id="<%= obj[\'items\'][0][\'components_extra_id\'] %>" data-placeholder="选择商品页模版" style="width: 160px;">\n                    </select>\n                    <p class="help-inline">\n                        <a class="js-refresh-goods-template" href="javascript:void(0);">刷新</a>\n                        <span>|</span>\n                        <a class="new_window" target="_blank" href="<%= window._global.url.www + \'/showcase/goodstemplate#create\' %>">+新建</a>\n                        <div class="ui-block-head-help soldout-help js-soldout-help hide" style="display: block; top: -180px;">\n                            <a href="javascript:void(0);" class="js-help-notes" data-class="left"></a>\n                            <div class="js-notes-cont hide">\n                                <p>默认启用简洁流畅版， 了解什么是<a href="https://help.youzan.com/qa#/menu/2111/detail/859" target="_blank" class="new-window">商品模版</a></p>\n                            </div>\n                        </div>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="app-sidebar-inner goods-sidebar-sub-title js-goods-sidebar-sub-title hide">\n        <p class="">商品简介(选填，微信分享给好友时会显示这里的文案)</p>\n        <textarea rows="2" class="js-sub-title input-sub-title"><%- obj[\'items\'][0][\'sub_title\'] %></textarea>\n    </div>\n    <div class="arrow"></div>\n    <div class="app-sidebar-inner js-sidebar-region">\n\n    </div>\n</div>\n<div class="app-actions" style="z-index: 11;">\n    <div class="form-actions text-center">\n        <button class="zent-btn js-switch-step" data-next-step="2">上一步</button>\n        <button class="zent-btn zent-btn-primary js-btn-load">上架</button>\n        <button class="zent-btn js-btn-unload">下架</button>\n        <button class="zent-btn js-btn-preview">预览</button>\n    </div>\n</div>\n'}),define("text!templates/add_content.html",[],function(){return'<div class="app-add-field">\n    <h4>添加内容</h4>\n    <ul>\n        <li><a class="js-new-field" data-field-type="rich_text">富文本</a></li>\n        <li><a class="js-new-field" data-field-type="goods">商品</a></li>\n        <li><a class="js-new-field" data-field-type="goods_list">商品<br/>列表</a></li>\n        <li><a class="js-new-field" data-field-type="image_ad">图片<br/>广告</a> </li>\n        <li><a class="js-new-field" data-field-type="cube2">魔方</a></li>\n        <li><a class="js-new-field" data-field-type="title">标题</a></li>\n        <li><a class="js-new-field" data-field-type="text_nav">文本<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="nav">图片<br/>导航</a></li>\n        <li><a class="js-new-field" data-field-type="link">关联<br/>链接</a></li>\n        <li><a class="js-new-field" data-field-type="search">商品<br/>搜索</a></li>\n        <li><a class="js-new-field" data-field-type="showcase">橱窗</a></li>\n        <li><a class="js-new-field" data-field-type="line">辅助线</a></li>\n        <li><a class="js-new-field" data-field-type="white">辅助<br/>空白</a></li>\n        <li><a class="js-new-field" data-field-type="component">自定义<br/>模块</a></li>\n        <li><a class="js-new-field" data-field-type="audio">语音</a></li>\n        <li><a class="js-new-field" data-field-type="notice">公告</a></li>\n        <li><a class="js-new-field" data-field-type="ump_activity">营销活动</a></li>\n    </ul>\n\n    <% if (disableEdit) { %>\n        <div class="app-add-disabled"></div>\n    <% } %>\n</div>\n'}),define("text!templates/config_edit.html",[],function(){return'<form class="form-horizontal" novalidate>\n    <div class="control-group">\n        <script class="js-editor" type="text/plain"></script>\n    </div>\n</form>\n'}),define("views/config_edit",["require","jquery","underscore","components/showcase/2.0.0/base/views/edit_base","text!templates/config_edit.html"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("components/showcase/2.0.0/base/views/edit_base"),o=e("text!templates/config_edit.html"),s=window.UE;return i.extend({template:n.template(o),onShow:function(){this.renderEditor(),t(".js-goods-sidebar-sub-title").show()},renderEditor:function(){var e=this,t=this._editor=new s.ui.Editor({toolbars:[["bold","italic","underline","strikethrough","forecolor","backcolor","justifyleft","justifycenter","justifyright","|","insertunorderedlist","insertorderedlist","blockquote"],["emotion","uploadimage","insertvideo","link","removeformat","|","rowspacingtop","rowspacingbottom","lineheight","paragraph","fontsize"],["inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols"]],autoClearinitialContent:!1,autoFloatEnabled:!0,wordCount:!1,elementPathEnabled:!1,initialFrameWidth:396,initialFrameHeight:360,pasteplain:!1,readonly:!!this.layout.collection.disableEdit});t.addListener("blur",function(){e.model.set("content",e._editor.getContent())}),t.addListener("contentChange",function(){e.model.set("content",e._editor.getContent())}),t.render(this.$(".js-editor")[0]),t.ready(function(){t.setContent(e.model.get("content"))})},onClose:function(){this._editor&&(this.model.set("content",this._editor.getContent()),t(".js-goods-sidebar-sub-title").hide())}})}),define("text!templates/config_show.html",[],function(){return'<div class="control-group">\n    <% if(content) { %>\n        <div class="custom-richtext">\n            <%= content %>\n        </div>\n    <% } else { %>\n        <div class="goods-details-block" style="background: #fff;">\n            <h4>商品详情区</h4>\n            <p>点击进行编辑</p>\n        </div>\n    <% } %>\n</div>\n<div class="actions">\n    <div class="actions-wrap">\n        <span class="action edit">编辑</span>\n    </div>\n</div>\n'}),define("views/config_show",["require","underscore","components/showcase/2.0.0/base/views/show_base","text!templates/config_show.html"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/show_base"),i=e("text!templates/config_show.html");return n.extend({template:t.template(i),position:function(){var e=this.$el.position();return e.top+=28,e}})}),define("components/fenxiao_sku_change/help",["require","core/utils"],function(e){"use strict";var t=e("core/utils");return{floor:function(e){return parseInt(100*e,10)/100},getSuggestPrice:function(e){e=parseFloat(e,10);var n=this.floor(e/1.05),i=4*n;return{fx_price:t.decimalFix(n,2),min_retail_price:t.decimalFix(n,2),max_retail_price:t.decimalFix(i,2)}}}}),define("components/fenxiao_sku_change/models/item",["require","underscore","backbone","../help","core/utils"],function(e){"use strict";var t=(e("underscore"),e("backbone")),n=e("../help");e("core/utils");return t.Model.extend({idAttribute:"__id",defaults:{v1_id:null,v2_id:null,v3_id:null,price:"",fx_price:"",min_retail_price:"",max_retail_price:"",ignore_list:{}},validation:{fx_price:function(e,t,i){var o=parseFloat(i.price,10)||0,s=parseFloat(i.fx_price,10)||0;if(window._global.is_in_profit_white_list){if(s>o)return"供货价必须小于等于微商城售价"}else if(1*s>o)return"供货价必须小于等于"+n.floor(o/1)+"元（供货价必须小于等于微商城售价）";if(!s)return"价格最低为 0.01"},min_retail_price:function(e,t,n){var i=parseFloat(n.price,10)||0,o=parseFloat(n.fx_price,10)||0,s=parseFloat(n.min_retail_price,10)||0;return s<o?"最低建议零售价不能低于供货价":s>i?"最低建议零售价不能大于微商城售价":e?void 0:"价格最低为 0.01"},max_retail_price:function(e,t,n){var i=(parseFloat(n.price,10),parseFloat(n.fx_price,10)||0),o=parseFloat(n.min_retail_price,10)||0,s=parseFloat(n.max_retail_price,10)||0;return s<o?"最高建议零售价不能小于最低建议零售价":s>2*i&&n.ignore_list.ignore_max_retail_price!==!0?"最高建议零售价，不能高于供货价的200%":e?void 0:"价格最低为 0.01"}}})}),define("components/fenxiao_sku_change/models/app",["require","underscore","jquery","backbone","core/utils","./item"],function(e){"use strict";var t=e("underscore"),n=(e("jquery"),e("backbone")),i=e("core/utils"),o=e("./item");return n.Model.extend({defaults:{fx_price:"",min_retail_price:"",max_retail_price:"",ignore_list:{}},validation:t.extend({},o.prototype.validation),initialize:function(){this.calcRowNumber()},fetch:function(){return i.ajax({url:window._global.url.www+"/showcase/goods/FenXiaoSku.json",type:"GET",data:{goods_id:this.get("goods_id")}}).done(t.bind(this._fetchDone,this)).fail(t.bind(this._fetchFail,this))},_fetchDone:function(e){var n,o=this.get("stock");0===o.length?(n=t.find(e,function(e){return"1"===e.is_combined}))&&this.set({fx_price:i.decimalFix(n.fx_price,2),min_retail_price:i.decimalFix(n.min_retail_price,2),max_retail_price:i.decimalFix(n.max_retail_price,2)},{silent:!0}):t.each(o,function(o){n=t.find(e,function(e){return e.kdt_goods_sku_id===o.id&&"0"===e.is_combined}),o.price=i.decimalFix(o.price,2),n&&(o.fx_price=i.decimalFix(n.fx_price,2),o.min_retail_price=i.decimalFix(n.min_retail_price,2),o.max_retail_price=i.decimalFix(n.max_retail_price,2))}),this.trigger("sync")},_fetchFail:function(e){this.trigger("error",e)},calcRowNumber:function(){var e=0,n=0,i=0,o=this.get("stock");t.each(o,function(t,s){t.v1_id===o[e].v1_id?e!==s?(o[e].row_1_num++,t.row_1_num=0):t.row_1_num=1:(t.row_1_num=1,e=s),t.v2_id===o[n].v2_id?n!==s?(o[n].row_2_num++,t.row_2_num=0):t.row_2_num=1:(t.row_2_num=1,n=s),t.v3_id===o[i].v3_id?i!==s?(o[i].row_3_num++,t.row_3_num=0):t.row_3_num=1:(t.row_3_num=1,i=s)})}})}),define("components/fenxiao_sku_change/collections/collection",["require","backbone","../models/item"],function(e){"use strict";var t=e("backbone"),n=e("../models/item");return t.Collection.extend({model:n,validate:function(){var e=!1;return this.each(function(t){t.validate()&&(e=!0)}),e}})}),define("tpl!components/fenxiao_sku_change/templates/item",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",v1_id&&row_1_num>0&&(__p+='\n    <td class="js-v1-row" rowspan="'+(null==(__t=row_1_num)?"":__t)+'">'+(null==(__t=v1)?"":__t)+"</td>\n"),__p+="\n",v2_id&&row_2_num>0&&(__p+='\n    <td class="js-v2-row" rowspan="'+(null==(__t=row_2_num)?"":__t)+'">'+(null==(__t=v2)?"":__t)+"</td>\n"),__p+="\n",v3_id&&row_3_num>0&&(__p+='\n    <td class="js-v3-row" rowspan="'+(null==(__t=row_3_num)?"":__t)+'">'+(null==(__t=v3)?"":__t)+"</td>\n"),__p+="\n<td>¥ "+(null==(__t=price)?"":__t)+'</td>\n<td>\n    <input type="text" class="input-mini" name="fx_price" value="'+(null==(__t=fx_price)?"":__t)+'">\n</td>\n<td class="min-retail-price">\n    <input type="text" class="input-mini" name="min_retail_price" value="'+(null==(__t=min_retail_price)?"":__t)+'" placeholder="最低">\n</td>\n<td class="max-retail-price">\n    <input type="text" class="input-mini" name="max_retail_price" value="'+(null==(__t=max_retail_price)?"":__t)+'" placeholder="最高">\n</td>\n';return __p}}),define("components/fenxiao_sku_change/views/item",["require","underscore","jquery","backbone","marionette","core/utils","tpl!../templates/item"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("core/utils");return o.ItemView.extend({tagName:"tr",template:e("tpl!../templates/item"),events:{'blur input[type="text"]':"updateModel"},modelEvents:{change:"render","validated:invalid":"handleInvalid","validated:valid":"handleValid"},initialize:function(){i.Validation.bind(this)},updateModel:function(e){var t=n(e.target),i=t.attr("name"),o=t.val();if(o=s.decimalFix(o,2),isNaN(o)&&(o=""),this.model.set(i,o,{validate:!1}),t.val(o),this.model.validate){var a={};a[i]=o,this.model.validate(a)}e.stopPropagation()},handleInvalid:function(e,t){this.addErrorMessage(t),this.removeErrorMessage(t)},handleValid:function(){this.removeErrorMessage({})},addErrorMessage:function(e){t.each(e,function(e,t){var i=this.$('[name="'+t+'"]'),o=i.parent("td"),s=o.find(".error-message");o.addClass("manual-valid-error").addClass("error"),0===s.size()&&(s=n("<div>").addClass("error-message"),o.append(s)),s.html(e)},this)},removeErrorMessage:function(e){var n=["fx_price","min_retail_price","max_retail_price"];t.each(n,function(t){if(!e[t]){var n=this.$('[name="'+t+'"]'),i=n.parent("td"),o=i.find(".error-message");i.removeClass("manual-valid-error").removeClass("error"),o.remove()}},this)}})}),define("tpl!components/fenxiao_sku_change/templates/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h3 class="title">\n        编辑分销商品\n    </h3>\n</div>\n<div class="modal-body">\n    <div class="ui-message-warning">\n        <span class="red">您所做的操作会造成分销商无法正常销售该商品，请编辑分销信息或选择退出分销</span>\n    </div>\n    ',
0===stock.length)__p+='\n        <form class="js-form form-horizontal" onSubmit="return false;">\n            <div class="control-group">\n                <label class="control-label">微商城售价：</label>\n                <div class="controls">\n                    <div class="input-prepend">\n                        <span class="add-on">￥</span>\n                        <input type="text" name="price" value="'+(null==(__t=price)?"":__t)+'" class="input-small" readonly disabled>\n                    </div>\n                </div>\n            </div>\n            <div class="control-group">\n                <label class="control-label">供货价格：</label>\n                <div class="controls">\n                    <div class="input-prepend">\n                        <span class="add-on">￥</span>\n                        <input type="text" name="fx_price" value="'+(null==(__t=fx_price)?"":__t)+'" class="input-small">\n                    </div>\n                </div>\n            </div>\n            <div class="control-group">\n                <label class="control-label">建议售价：</label>\n                <div class="controls">\n                    <div class="input-prepend">\n                        <span class="add-on">￥</span>\n                        <input type="text" name="min_retail_price" value="'+(null==(__t=min_retail_price)?"":__t)+'" class="input-small">\n                    </div>\n                    <span>-</span>\n                    <div class="input-prepend">\n                        <span class="add-on">￥</span>\n                        <input type="text" name="max_retail_price" value="'+(null==(__t=max_retail_price)?"":__t)+'" class="input-small">\n                    </div>\n                </div>\n            </div>\n        </form>\n    ';else{if(__p+='\n        <table class="table-sku-stock">\n            <thead>\n                <tr>\n                    ',stock[0].k1_id&&(__p+="\n                        <th>"+(null==(__t=stock[0].k1)?"":__t)+"</th>\n                    "),__p+="\n                    ",stock[0].k2_id&&(__p+="\n                        <th>"+(null==(__t=stock[0].k2)?"":__t)+"</th>\n                    "),__p+="\n                    ",stock[0].k3_id&&(__p+="\n                        <th>"+(null==(__t=stock[0].k3)?"":__t)+"</th>\n                    "),__p+='\n                    <th>微商城售价</th>\n                    <th>供货价(元)</th>\n                    <th colspan="2">建议售价(元)</th>\n                </tr>\n            </thead>\n            <tbody class="js-list">\n\n            </tbody>\n            ',stock.length>1){__p+="\n                <tfoot>\n                    <tr>\n                        ";var colspan=5;stock[0].k3_id?colspan=7:stock[0].k2_id&&(colspan=6),__p+='\n                        <td colspan="'+(null==(__t=colspan)?"":__t)+'">\n                            <div class="batch-opts">\n                                批量设置：\n                                <span class="js-batch-type" style="display: inline;">\n                                    <a data-attr="fx_price" href="javascript:;">供货价格</a>\n                                    &nbsp;&nbsp;\n                                    <a data-attr="min_retail_price" href="javascript:;">最低建议零售价</a>\n                                    &nbsp;&nbsp;\n                                    <a data-attr="max_retail_price" href="javascript:;">最高建议零售价</a>\n                                </span>\n                                <span class="js-batch-form" style="display: none;">\n                                    <input type="text" class="js-batch-txt input-small" placeholder="请输入价格">\n                                    <a class="js-batch-save" href="javascript:;">保存</a>\n                                    <a class="js-batch-cancel" href="javascript:;">取消</a>\n                                </span>\n                            </div>\n                        </td>\n                    </tr>\n                </tfoot>\n            '}__p+="\n        </table>\n    "}__p+='\n    <div class="buttons">\n        <button class="ui-btn ui-btn-primary js-confirm">保存设置</button>\n        <button class="ui-btn js-quit">退出分销</button>\n    </div>\n</div>\n'}return __p}}),define("components/fenxiao_sku_change/app",["require","jquery","backbone","marionette","core/utils","./models/app","./collections/collection","./views/item","tpl!./templates/app"],function(e){"use strict";var t=e("jquery"),n=e("backbone"),i=e("marionette"),o=e("core/utils"),s=e("./models/app"),a=e("./collections/collection"),l=e("./views/item");return i.CompositeView.extend({className:"widget-fenxiao-sku-change modal fade in",template:e("tpl!./templates/app"),events:{hidden:"hidden",'blur .js-form input[type="text"]':"updateModel","click .js-confirm":"handleConfirm","click .js-quit":"handleQuit","click .js-batch-type a":"handleBatchTypeClick","click .js-batch-save":"handleBatchSaveClick","click .js-batch-cancel":"handleBatchCancelClick","keypress .js-batch-txt":"handleBatchTxtKeypress"},itemView:l,updateModel:l.prototype.updateModel,initialize:function(e){this.options=e||{};var t=JSON.parse(JSON.stringify(this.options.data));this.model=new s(t),this.collection=new a(this.model.get("stock")),this.setIgnore_list(),this.once("render",this.show),this.listenTo(this.model,"sync",this.onSync),this.model.fetch(),n.Validation.bind(this),this.render()},onSync:function(){this.collection.reset(this.model.get("stock")),this.setIgnore_list(),this.render()},onCompositeModelRendered:function(){this.$itemViewContainer=this.$(".js-list")},setIgnore_list:function(){var e;if(this.collection&&this.collection.length)for(var t=0;t<this.collection.length;t++)(e=this.collection.at(t))&&e.set("ignore_list",this.model.get("ignore_list")||{})},handleConfirm:function(){var e=null;if(!this.validate()){if(e=this.collection.size()>0?{cancel:!1,stock:this.collection.toJSON()}:{cancel:!1,price:this.model.get("price"),fx_price:this.model.get("fx_price"),min_retail_price:this.model.get("min_retail_price"),max_retail_price:this.model.get("max_retail_price"),stock:[]},e.stock&&e.stock.length)for(var t=0;t<e.stock.length;t++)delete e.stock[t].ignore_list;this.callback(e),this.hide()}},handleQuit:function(){this.callback({cancel:!0}),this.hide()},validate:function(){var e;return e=this.collection.size()>0?this.collection.validate():this.model.validate(),e&&this.scrollToError(),e},scrollToError:function(){var e=t(".error").offset();e&&t(window).scrollTop(e.top)},handleBatchTypeClick:function(e){this.currentBatchAttr=t(e.target).data("attr"),this.$(".js-batch-type").hide(),this.$(".js-batch-form").show()},handleBatchSaveClick:function(){var e=t.trim(this.$(".js-batch-txt").val());if(!e)return this.handleBatchCancelClick();e=parseFloat(e,10),e=parseInt(100*e)/100,e=o.decimalFix(e,2);var n=this.currentBatchAttr;this.collection.each(function(t){t.set(n,e,{validate:!1,silent:!0}),t.trigger("change"),t.validate()}),this.handleBatchCancelClick()},handleBatchCancelClick:function(){this.$(".js-batch-txt").val(""),this.$(".js-batch-type").show(),this.$(".js-batch-form").hide()},handleBatchTxtKeypress:function(e){13===e.keyCode&&this.handleBatchSaveClick()},show:function(){this.$el.modal("show")},hide:function(){this.$el.modal("hide")},hidden:function(){this.close()},callback:function(e){this.options.callback&&(this.options.callback(JSON.stringify(e)),this.options.callback=null)}})}),define("tpl!zenjs/marionette/modal/base/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h3 class="title">弹层标题</h3>\n</div>\n<div class="modal-body">\n    弹层内容\n</div>\n<div class="modal-footer clearfix">\n    <button class="ui-btn ui-btn-primary pull-right js-close">关闭</button>\n</div>\n';return __p}}),define("zenjs/marionette/modal/base/app",["require","marionette","tpl!./app"],function(e){"use strict";return e("marionette").Layout.extend({className:"modal hide fade",template:e("tpl!./app"),events:{hidden:"hidden","click .js-close":"hide"},initialize:function(e){this.triggerMethod("before:init",e),this.render(),this.show(),this.triggerMethod("init",e)},show:function(){this.triggerMethod("before:modal:show"),this.$el.modal("show"),this.triggerMethod("modal:show")},hide:function(){this.triggerMethod("before:modal:close"),this.$el.modal("hide"),this.triggerMethod("modal:close")},hidden:function(){this.$el.data("modal",null),this.close()}})}),define("tpl!zenjs/marionette/modal/confirm/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-header">\n    <a class="close" data-dismiss="modal">×</a>\n    <h3 class="title">'+(null==(__t=title)?"":__t)+'</h3>\n</div>\n<div class="modal-body" style="font-size: 14px; line-height: 2em;">\n    '+(null==(__t=content)?"":__t)+'\n</div>\n<div class="modal-footer clearfix text-right">\n    ',_.each(renderButtons,function(e){__p+='\n        <button class="'+(null==(__t=e.className)?"":__t)+'">'+(null==(__t=e.text)?"":__t)+"</button>\n    "}),__p+="\n</div>\n";return __p}}),define("zenjs/marionette/modal/confirm/app",["require","underscore","../base/app","tpl!./app"],function(e){var t=e("underscore"),n=e("../base/app");return n.extend({className:"modal hide",template:e("tpl!./app"),events:t.extend({},n.prototype.events,{"click .js-confirm":"confirm"}),getDefaultButtons:function(){return{confirm:{className:"ui-btn ui-btn-primary js-confirm",text:"确认"},cancel:{className:"ui-btn js-close",text:"取消"},delete:{className:"ui-btn ui-btn-danger js-confirm",text:"删除"}}},onBeforeInit:function(e){this.options=e||{},this.defaultButtons=$.extend(!0,this.getDefaultButtons(),this.options.defaultButtons||{}),this.buttons=this.options.buttons||["confirm","cancel"],this.renderButtons=t.pick.apply(null,[this.defaultButtons].concat(this.buttons))},serializeData:function(){return t.extend({renderButtons:this.renderButtons,title:"提示"},this.options)},onRender:function(){var e=this.options.width||400,t=-e/2;this.$el.css({width:e,marginLeft:t,top:"30%"})},confirm:function(){t.isFunction(this.options.callback)&&this.options.callback(),this.hide()}})}),define("components/groupon_modal/index",["require","zenjs/marionette/modal/confirm/app"],function(e){"use strict";return e("zenjs/marionette/modal/confirm/app").extend({getDefaultButtons:function(){return{confirm:{className:"zent-btn zent-btn-primary js-confirm",text:"去设置"},cancel:{className:"zent-btn js-close",text:"取消"}}},confirm:function(){window.location.href=window._global.url.www+"/ump/groupon",this.hide()}})}),define("text!templates/alert_modal.html",[],function(){return'<div class="modal-header">\n    <a class="close" href="<%= _global.url.www %>/showcase/goods">×</a>\n    <h3 class="title">系统提示</h3>\n</div>\n<div class="modal-body" style="text-align: center;">\n    <p>上架成功。该商品还没设置可售网点，需要设置才会在各网点出售。</p>\n</div>\n<div class="modal-footer">\n    <div class="ui-btn-group">\n        <a class="ui-btn ui-btn-primary js-btn-jump" data-hrefself="<%= _global.url.www %>/showcase/goods#list" data-href="<%= _global.url.www %>/ump/multistore#goodmanage&id=<%= goods_id %>&alias=<%= alias %>">去设置</a>\n        <a class="ui-btn" href="<%= _global.url.www %>/showcase/goods">暂不设置</a>\n    </div>\n</div>\n'}),define("views/alert_modal",["require","jquery","underscore","zenjs/marionette/modal/base/app","text!templates/alert_modal.html"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),i=e("zenjs/marionette/modal/base/app"),o=e("text!templates/alert_modal.html");return i.extend({tpl:n.template(o),onModalShow:function(){this.$el.css("width","400px"),this.$el.css("margin-left","-200px")},events:{"click .js-btn-jump":"handleJump"},initialize:function(e){this.app=e.app,this.template=this.tpl({goods_id:e.goods_id,alias:e.alias})},handleJump:function(e){e.preventDefault(),window.open(t(e.target).data("href")),window.open(t(e.target).data("hrefself"),"_self")},onRender:function(){this.$el.addClass("setting—modal"),this.$el.css({width:450,marginLeft:-225}),this.$el.html(this.template),this.$Tip=this.$(".js-error-tip"),this.show()}})}),define("views/step3",["require","underscore","components/showcase/2.0.0/base/views/design","text!templates/design.html","text!templates/add_content.html","models/config","views/config_edit","views/config_show","core/reqres","core/utils","components/fenxiao_sku_change/app","zenjs/marionette/modal/confirm/app","components/groupon_modal/index","zenjs/util/local_storage","views/alert_modal","components/dialog/index","components/dialog/alert/index"],function(e){"use strict";var t=e("underscore"),n=e("components/showcase/2.0.0/base/views/design"),i=e("text!templates/design.html"),o=e("text!templates/add_content.html"),s=e("models/config"),a=e("views/config_edit"),l=e("views/config_show"),r=e("core/reqres"),c=e("core/utils"),d=e("components/fenxiao_sku_change/app"),u=e("zenjs/marionette/modal/confirm/app"),p=e("components/groupon_modal/index"),m=e("zenjs/util/local_storage"),h=e("views/alert_modal"),f=e("components/dialog/index"),_=e("components/dialog/alert/index");return n.extend({template:t.template(i),AddViewTemplate:t.template(o),ui:{load:".js-btn-load",unload:".js-btn-unload",preview:".js-btn-preview"},events:{"click @ui.load":"handleLoad","click @ui.unload":"handleUnload","click @ui.preview":"handlePreview","change .js-sub-title":"onSubTitleChange","change .js-goods-template":"onGoodsTemplateChange"},regions:t.extend({},n.prototype.regions,{modalRegion:".js-modal-region"}),addShowcaseConfig:function(){this.SHOWCASE_CONFIG.models.config=s,this.SHOWCASE_CONFIG.editViews.config=a,this.SHOWCASE_CONFIG.showViews.config=l},onInit:function(e){var t=this;if(t.collection=e.collection,t.goodsModel=t.collection.at(0),t.disableEdit=t.isActivityLock(),window.fieldCollection=t.collection,window.design=t,t.collection.options.isCreating){var n=m.getItem("showcase-goods-components-extra-id:"+window._global.kdt_id);n&&t.goodsModel.set({components_extra_id:n},{silent:!0})}t.setupValidationResp(),t.fetched()},onShow:function(){n.prototype.onShow.apply(this,arguments),this.renderChosen()},renderChosen:function(){var e=this,n=this.$(".js-goods-template"),i=n.chosen({no_results_text:"木有找到这个模版："});this.$(".js-refresh-goods-template").on("click",function(o){var s=e.goodsModel.get("components_extra_id");c.ajax({url:window._global.url.www+"/showcase/goodstemplate/listsimple.json"}).done(function(e){var o=[],a=t.template('<option value="<%= id %>" <%= selected %>><%= title %></option>');o.push(a({id:"-1",title:"普通版",selected:"-1"==s?"selected":""})),o.push(a({id:"-2",title:"简洁流畅版",selected:"-2"==s?"selected":""})),t.each(e,function(e){e.selected=e.id==s?"selected":"",o.push(a(e))}),n.html(o.join("")),i.trigger("chosen:updated")})}).trigger("click")},setupValidationResp:function(){var e=this;r.setHandler("step3:validate",function(){return e.collection.validate()})},onSubTitleChange:function(){var e=this.$(".js-sub-title");this.goodsModel.set("sub_title",e.val())},onGoodsTemplateChange:function(e){this.goodsModel.set("components_extra_id",e.target.value)},getConfigModel:function(){return this.collection.at(0)},checkFenxiaoBeforeSync:function(e){var t=this.getConfigModel();t.needToSetFenxiaoPrice()?new d({data:t.toJSON(),callback:function(t){e(t)}}):e()},showEditLockModal:function(e){new u({content:"分销活动商品修改仅库存生效",callback:e})},isEditLock:function(){return+this.collection.is_edit_lock},isCPLock:function(){return 1==+this.collection.is_lock},isFenxiaoLock:function(){return 2==+this.collection.is_lock},isGrouponLock:function(){return 3==+this.collection.is_lock},isPointsstoreLock:function(){return 4==+this.collection.is_lock},isActivityLock:function(){var e=this.collection.item_lock_types;return!!(e&&e.length>0&&e.indexOf(101)!==-1)},isCreateLock:function(){return window._global.team_status&&window._global.team_status.is_goods_create_lock},handleLoad:function(){if(this.collection.options.isCreating&&this.isCreateLock())return new _({title:"提示",content:'你的发布商品功能已被锁定，详情请至<a href="'+window._global.url.www+'/notice/dashboard#2">商家后台通知中心</a>查看！'}),!1;if(!this.collection.validate()){var e=this._load.bind(this);this.isEditLock()&&this.isFenxiaoLock()?this.showEditLockModal(e):this.checkFenxiaoBeforeSync(e)}},handlePreview:function(){if(this.collection.options.isCreating&&this.isCreateLock())return new _({title:"提示",content:'你的发布商品功能已被锁定，详情请至<a href="'+window._global.url.www+'/notice/dashboard#2">商家后台通知中心</a>查看！'}),!1;if(!this.collection.validate()){var e=this._preview.bind(this);this.isEditLock()&&this.isFenxiaoLock()?this.showEditLockModal(e):this.checkFenxiaoBeforeSync(e)}},handleUnload:function(){if(!this.collection.validate()){var e=this._unload.bind(this);this.isActivityLock()?new u({buttons:["confirm"],content:"该商品已报名有赞微信公众号推广活动，下架请在活动结束后操作"}):this.isEditLock()&&this.isFenxiaoLock()?new u({buttons:["confirm"],content:"该商品正在参加分销活动，活动期间暂不支持下架"}):this.isEditLock()&&this.isGrouponLock()?new p({content:"该商品已参加多人拼团活动，为保证活动体验，商品不可下架。你可先使该商品活动失效，再进行下架。"}):window.editConfig.unload.confirm?f.confirm({title:"提示",closeable:!1,content:window.editConfig.unload.confirm_message,confirmText:"确定下架",cancelText:"取消",onConfirm:t(function(){this.checkFenxiaoBeforeSync(e)}).bind(this)}):this.checkFenxiaoBeforeSync(e)}},_load:function(e){var t=this,n=this.collection.id,i=this.collection.alias,o=+this.goodsModel.get("is_hotel");t.ui.load.btn("loading"),t.sync({is_display:1,fenxiao_sku:e}).done(function(e){if(+e.multi_store_status&&!+e.offline_count&&1==+e.show_offline_modal)new h({goods_id:n?n:e.id,alias:i?i:e.alias}).render();else if(!o||1!=t.goodsModel.get("hasNewSkuAdded")&&i)c.successNotify("上架成功。",function(){var e=window._global.url,n=t.collection.options.fromStore||!1;window.location.href=n?e.store+"/goods/goods/index":e.www+"/showcase/goods"});else{var s="上架成功！当前房间新增规格默认为关房状态，如需开启请在房态管理进行操作";i||(s="上架成功！当前房型默认为关房状态，如需开启请在房态管理进行操作"),f.alert({title:"提示",confirmText:"我知道了",closeable:!1,content:s,onConfirm:function(){window.location.href=window._global.url.www+"/showcase/goods"}})}}).fail(function(){t.ui.load.btn("reset")})},_unload:function(e){var t=this;t.ui.unload.btn("loading"),t.sync({is_display:0,fenxiao_sku:e}).done(function(){c.successNotify("下架成功。",function(){window.location.href=window._global.url.www+"/showcase/goods#list&is_display=0"})}).fail(function(){t.ui.unload.btn("reset")})},_preview:function(e){if(!this.collection.validate()){var t=this;t.ui.preview.btn("loading"),t.sync({fenxiao_sku:e}).done(function(e){c.successNotify("保存成功，正在重定向到 预览页面。",function(){var n=t.collection.alias||e.alias;window.location.href=window._global.url.wap+"/showcase/goods?alias="+n+(window._global.isSuperStore?"&fromStore=true":"")})}).fail(function(){t.ui.preview.btn("reset")})}}})}),define("tpl!templates/app",[],function(){return function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="ui-nav-tab">\n    <li data-next-step="1" class="js-switch-step js-step-1"><a href="javascript:;">1.选择商品品类</a></li>\n    <li data-next-step="2" class="js-switch-step js-step-2"><a href="javascript:;">2.编辑基本信息</a></li>\n    <li data-next-step="3" class="js-switch-step js-step-3"><a href="javascript:;">3.编辑商品详情</a></li>\n</ul>\n<div id="step-content-region">\n</div>\n';return __p}}),define("views/app",["require","underscore","jquery","backbone","marionette","vendor/nprogress","core/reqres","core/event","core/utils","commons/utils","models/config","collections/field","views/step1","views/step2","views/step3","zenjs/util/local_storage","tpl!templates/app"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("marionette"),s=e("vendor/nprogress"),a=e("core/reqres"),l=e("core/event"),r=e("core/utils"),c=e("commons/utils"),d=e("models/config"),u=e("collections/field"),p=e("views/step1"),m=e("views/step2"),h=e("views/step3"),f=e("zenjs/util/local_storage");return o.Layout.extend({className:"goods-edit-area",template:e("tpl!templates/app"),regions:{stepContentRegion:"#step-content-region"},ui:{switchTabs:"li.js-switch-step",switchBtn:"button.js-switch-step",switchLink:"a.js-switch-step"},events:{"click @ui.switchTabs":"switchStep","click @ui.switchBtn":"switchStep","click @ui.switchLink":"switchStep"},modelEvents:{},initialize:function(){var e=this;e.setServerUrl(),e.ajaxFlag=!1,window.SHOWCASE_CONFIG&&(window.SHOWCASE_CONFIG.models.config=d),e.listenTo(l,"goods:create",e.openCreateView),e.listenTo(l,"goods:edit",e.openEditView),e.listenTo(l,"goods:sync",e.openSyncView)},init:function(){},onRender:function(){this.bindUIElements()},setServerUrl:function(){var e=this,t=window._global.url.www;t+="goods"===window._global.goods_type?"/showcase/goods/item.json":"/showcase/material/item.json",e.goodsUrl=t},updateCurrentStep:function(e){this.currentStep=e},openCreateView:function(e){var t=this;s.done(),t.collection=new u([],{url:t.goodsUrl,isCreating:!0,localStorage:!1});var n=t.model=new d;t.collection.add(n),(!e||e>2)&&(e=1),t.initBaseModules(),t.updateCurrentStep(e),t["showStep"+t.currentStep+"View"]()},openEditView:function(e,t,n){var i=this;if(!e)return r.errorNotify("请输入一个正确的商品ID。"),!1;i.collection=new u([],{url:i.goodsUrl,id:e,isCreating:!1,localStorage:!1,fromStore:n}),t=t||2,i.updateCurrentStep(t),i.fetchCollectionData()},openSyncView:function(e){var t=this;if(!e.itemId||!e.shopId)return r.errorNotify("参数错误"),!1;t.collection=new u([],{isCreating:!0,localStorage:!1,fromStore:e.fromStore});var n=e.step||2;t.updateCurrentStep(n),t.fetchCollectionData({url:e.url,data:{retail_item_id:e.itemId,retail_shop_id:e.shopId}})},initBaseModules:function(){this._initFlag||(this.setAttrsResp(),this.setupValidation(),this._initFlag=!0)},setupValidation:function(){var e=this;i.Validation.bind(e),e.listenTo(e.model,"change",e.validateModel)},setAttrsResp:function(){var e=this.model;a.setHandler("goods_attr:get",function(t){return e.get(t)})},validateModel:function(e){e.validate(e.changed)},fetchCollectionData:function(e){r.clearNotify(),e=e||{},this.collection.fetch(e).done(t.bind(this.fetchSuccess.bind(this))).fail(t.bind(this.fetchError.bind(this)))},fetchSuccess:function(){s.done(),this.model=this.collection.at(0),this.initBaseModules(),this["showStep"+this.currentStep+"View"]()},fetchError:function(){r.errorNotify("获取商品数据失败。")},switchNavTab:function(e){var t=this;t.ui.switchTabs.removeClass("active"),t.ui.switchTabs.filter(".js-step-"+e).addClass("active")},showStep1View:function(){this.step1View=new p({model:this.model}),this.switchNavTab(1),this.stepContentRegion.show(this.step1View)},showStep2View:function(){var e=this;e.step2View=new m({model:e.model}),e.switchNavTab(2),e.stepContentRegion.show(e.step2View)},showStep3View:function(){var e=this;e.step3View=new h({collection:e.collection}),e.switchNavTab(3),e.stepContentRegion.show(e.step3View)},toStep1:function(){this.prepareToStep1()},toStep2:function(){var e=this,t=e.currentStep;if(a.request("step"+t+":validate"))return e.errorHandler(2),!1;e.prepareToStep2()},toStep3:function(){var e=this.model.validate(),t=a.request("attrs:validate"),i=a.request("stock:validate");if(a.request("delivery:sku_weight:validate")||t||i>0||!this.model.isValid())return e&&e.sku_value&&(r.errorNotify(e.sku_value),n("body, html").animate({scrollTop:this.$(".js-goods-sku").offset().top},200)),this.errorHandler(3),!1;f.setItem("service_tel_code",this.model.get("service_tel_code")),f.setItem("service_tel",this.model.get("service_tel")),this.prepareToStep3()},prepareToStep1:function(){this.showStep1View(),this.appNavigate(1)},prepareToStep2:function(){var e=this;a.request("class_info:has_changed")&&e.updateGoodsModel(),e.showStep2View(),e.appNavigate(2)},prepareToStep3:function(){this.showStep3View(),this.appNavigate(3)},collectStep2Data:function(){var e=this,t=e.getBaseData();return t.data[0]=e.model.toJSON(),t.data=JSON.stringify(t.data),t},getBaseData:function(){return this.collection.toJSON()},saveStep2Data:function(e){var t=this,n=t.$("button.js-switch-step");r.ajax({url:t.goodsUrl,type:"POST",timeout:8e3,cache:!1,data:e,beforeSend:function(){t.ajaxFlag=!0,c.button(n,"保存中...",!0)}}).done(function(e){t.prepareToStep3(e)}).fail(function(e){r.errorNotify(e),c.button(n,"下一步",!1)}).always(function(){t.ajaxFlag=!1})},switchStep:function(e){var t=this;if(e.preventDefault(),t.ajaxFlag)return!1;t["toStep"+n(e.currentTarget).data("next-step")]()},appNavigate:function(e,t){var n=this;n.updateCurrentStep(e);var o=n.processHash(e);t=void 0!==t&&t,i.history.navigate(o,{trigger:t})},processHash:function(e){var t=i.history.fragment,o=r.deparam(t);return o.step=e,t=n.param(o)},errorHandler:function(e){var t=this;if(e-t.currentStep>1)return r.errorNotify("请一步步填写页面所需的信息。"),!1;t.focusFirstError()},focusFirstError:function(){var e=n(".error-message:eq(0)").parents(".control-group");if(0===e.length)return!1;var t=e.offset(),i=t.top-60;n(window).scrollTop(i)},updateGoodsModel:function(){var e=this,n={},i=a.request("class_info:get");t(n).extend(i),e.model.set(n)}})}),define("app",["require","marionette","core/utils","views/app"],function(e){"use strict";var t=e("marionette"),n=e("core/utils"),i=e("views/app"),o=new t.Application;return window.Utils=n,o.addRegions({appRegion:"#app-region"}),o.addInitializer(function(e){var t=new i(e);o.appRegion.show(t)}),o}),define("routers/router",["require","components/page_help/help","backbone","core/event","underscore","core/utils"],function(e){"use strict";var t=e("components/page_help/help"),n=e("backbone"),i=e("core/event"),o=e("underscore"),s=e("core/utils");return t("showcase_goods_create"),n.Router.extend({routes:{"":"createGoods","id=:id&step=:step&fromStore=:fromStore":"editGoods","id=:id&step=:step":"editGoods","id=:id":"editGoods","step=:step":"createGoods","*query":"syncGoods"},createGoods:function(e){s.switchThirdSidebar(".js-page-breadcrumb","发布商品"),e=e?Number(e):"",i.trigger("goods:create",e)},editGoods:function(e,t,n){s.switchThirdSidebar(".js-page-breadcrumb","编辑商品"),t=t?Number(t):"",i.trigger("goods:edit",e,t,n)},syncGoods:function(e){s.switchThirdSidebar(".js-page-breadcrumb","同步商品"),e=s.deparam(e),e=o.extend({step:1},e),i.trigger("goods:sync",{url:window._global.url.www+"/showcase/goods/retailItemSync.json",itemId:e.itemId,shopId:e.shopId,step:e.step,fromStore:e.fromStore})}})}),define("main",["require","backbone","vendor/nprogress","common","bootstrap","chosen","select2","backbone.modelbinder","components/help_notes/com","components/message/message_bot_lite","app","routers/router"],function(e){"use strict";var t=e("backbone"),n=e("vendor/nprogress");e("common"),e("bootstrap"),e("chosen"),e("select2"),e("backbone.modelbinder"),e("components/help_notes/com");var i=e("components/message/message_bot_lite"),o=e("app"),s=e("routers/router");return{initialize:function(e){i.init(),n.start(),o.start(e),window.router=new s,t.history.start()}}});