webpackJsonp([8],{SlB3:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Dd8w"),n=s.n(e),o=s("fxnj"),a=s.n(o),r=s("NYxO"),c=s("4FCr"),h=s("S8Wg"),d=s("KeBu"),l=(n()({},Object(r.c)(["getfrWishlt"])),n()({},Object(r.b)(["friendsWish","addItemToShoppingCart"]),{goToIndex:function(){a.a.miniProgram.switchTab({url:"/pages/home/index"})},wiDetail:function(t){a.a.miniProgram.navigateTo({url:"/pages/webview/index?path=wishDetail&wishId="+t})},goToDe:function(t){a.a.miniProgram.navigateTo({url:"/pages/goodDetail/index?id="+t})},goTo:function(t){a.a.miniProgram.navigateTo({url:"/pages/sureorder/index?orderType=wishCart&cartType=buyCart&wishId="+t.wishId+"&adressId="+t.adressId})},helpFr:function(t){if(t.contactMechId){var i=t.products,s=i.map(function(t){return t.price}),e=i.map(function(t){return t.productId}),n=i.map(function(t){return 1});if(1==s.length){var o={add_product_id:e.join(),quantity:n.join(),price:s.join(),cartType:"buyCart"};this.addItemToShoppingCart({data:o,this:this,n:1,wishId:t.wishId,adressId:t.contactMechId})}else{var a={productIds:e.join(),productNums:n.join(),productPrices:s.join(),cartType:"buyCart"};this.addItemToShoppingCart({data:a,this:this,wishId:a.wishId,adressId:a.contactMechId})}}else this.showTost("缺少好友收获地址")},getList:function(t,i){this.showLoading(),this.friendsWish({this:this,flag:i,data:{page:t,pageSize:this.pageSize,status:"WISH_WAIT_ACHIEVE"},method:this.friendsWish})},ontouchstart:function(t){this.sy=t.changedTouches[0].pageY},ontouchend:function(t){this.ey=t.changedTouches[0].pageY,this.sy-this.ey>30&&this.bindScroll()},jizw:function(){this.onFetching=!1},bindScroll:function(){var t=this.getfrWishlt.list.length;if(t==this.getfrWishlt.max)return this.tips="没有更多了",void(this.onFetching=!0);var i=this.$refs.content.scrollTop,s=this.$refs.content.clientHeight;this.$refs.content1.clientHeight-i<s&&(this.onFetching||(this.onFetching=!0,this.tips="正在加载",this.getList(Math.ceil(t/this.pageSize),!0)))},test:function(t){console.log(t),t.stopPropagation()},onScrollBottom:function(){var t=this;this.onFetching||(this.onFetching=!0,setTimeout(function(){console.log(8),t.$nextTick(function(){t.$refs.scrollerBottom.reset()}),t.onFetching=!1},2e3))}}),c.a,h.a,d.a,{name:"toberealizedf",data:function(){return{pageSize:10,tips:"",onFetching:!1,obj:null,nu:2,sy:"",ey:""}},filters:{statusFls:function(t){var i=void 0;switch(t){case"WISH_WAIT_ACHIEVE":i="待实现";break;case"WISH_WAIT_PAY":i="待付款，已经生成订单";break;case"WISH_WAIT_ACHIEVE":i="待实现";break;case"WISH_HAS_ACHIEVE":i="已实现"}return i}},mounted:function(){document.title="好友心愿",this.$route.query.token&&localStorage.setItem("token",decodeURIComponent(this.$route.query.token)),this.$route.query.refreshToken&&localStorage.setItem("refreshToken",decodeURIComponent(this.$route.query.refreshToken)),this.getList(0,"")},computed:n()({},Object(r.c)(["getfrWishlt"])),methods:n()({},Object(r.b)(["friendsWish","addItemToShoppingCart"]),{goToIndex:function(){a.a.miniProgram.switchTab({url:"/pages/home/index"})},wiDetail:function(t){a.a.miniProgram.navigateTo({url:"/pages/webview/index?path=wishDetail&wishId="+t})},goToDe:function(t){a.a.miniProgram.navigateTo({url:"/pages/goodDetail/index?id="+t})},goTo:function(t){a.a.miniProgram.navigateTo({url:"/pages/sureorder/index?orderType=wishCart&cartType=buyCart&wishId="+t.wishId+"&adressId="+t.adressId})},helpFr:function(t){if(t.contactMechId){var i=t.products,s=i.map(function(t){return t.price}),e=i.map(function(t){return t.productId}),n=i.map(function(t){return 1});if(1==s.length){var o={add_product_id:e.join(),quantity:n.join(),price:s.join(),cartType:"buyCart"};this.addItemToShoppingCart({data:o,this:this,n:1,wishId:t.wishId,adressId:t.contactMechId})}else{var a={productIds:e.join(),productNums:n.join(),productPrices:s.join(),cartType:"buyCart"};this.addItemToShoppingCart({data:a,this:this,wishId:a.wishId,adressId:a.contactMechId})}}else this.showTost("缺少好友收获地址")},getList:function(t,i){this.showLoading(),this.friendsWish({this:this,flag:i,data:{page:t,pageSize:this.pageSize,status:"WISH_WAIT_ACHIEVE"},method:this.friendsWish})},ontouchstart:function(t){this.sy=t.changedTouches[0].pageY},ontouchend:function(t){this.ey=t.changedTouches[0].pageY,this.sy-this.ey>30&&this.bindScroll()},jizw:function(){this.onFetching=!1},bindScroll:function(){var t=this.getfrWishlt.list.length;if(t==this.getfrWishlt.max)return this.tips="没有更多了",void(this.onFetching=!0);var i=this.$refs.content.scrollTop,s=this.$refs.content.clientHeight;this.$refs.content1.clientHeight-i<s&&(this.onFetching||(this.onFetching=!0,this.tips="正在加载",this.getList(Math.ceil(t/this.pageSize),!0)))},test:function(t){console.log(t),t.stopPropagation()},onScrollBottom:function(){var t=this;this.onFetching||(this.onFetching=!0,setTimeout(function(){console.log(8),t.$nextTick(function(){t.$refs.scrollerBottom.reset()}),t.onFetching=!1},2e3))}}),components:{LoadMore:c.a,Scroller:h.a,empty:d.a}}),u={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"content",staticStyle:{height:"calc(100% - 0.8rem)",overflow:"hidden","overflow-y":"auto"},on:{touchend:t.ontouchend,touchstart:t.ontouchstart}},[t.getfrWishlt.list&&!t.getfrWishlt.list.length?e("empty",[e("img",{staticStyle:{width:"1.89rem",height:"1.91rem"},attrs:{slot:"img",src:s("OrkP"),alt:""},slot:"img"}),t._v(" "),e("button",{staticClass:"btnn  bred",attrs:{slot:"an"},on:{click:t.goToIndex},slot:"an"},[t._v("去首页")])]):t._e(),t._v(" "),e("ul",{ref:"content1",staticClass:"drem2 content"},[t._l(t.getfrWishlt.list,function(i){return[1==i.products.length?e("li",{ref:"last"+i,refInFor:!0,class:{lili:10==i},on:{click:function(s){t.goToDe(i.products[0].productId)}}},[e("div",{staticClass:"p20 bf"},[e("p",{staticClass:"flexbox justifyx p1"},[e("span",[t._v(t._s(i.sendPartyName)+"的心愿")]),e("span",{staticClass:"money"},[t._v(t._s(t._f("statusFls")(i.status)))])]),t._v(" "),e("p",{staticClass:"p2"},[t._v(t._s(i.sendDate))])]),t._v(" "),e("div",{staticClass:"zjdiv  flexbox"},[e("div",{staticClass:"imgdiv"},[e("img",{staticClass:"goods_img",attrs:{src:i.products[0].imgUrl}})]),t._v(" "),e("div",{staticClass:"flexbox flexdr centery"},[e("p",{staticClass:"ms"},[t._v(t._s(i.products[0].productName))]),t._v(" "),e("div",{staticClass:"bq"},t._l(i.products[0].feature,function(i){return e("p",{key:i.productFeatureName},[t._v(t._s(i.productFeatureTypeName+"："+i.productFeatureName))])}))])]),t._v(" "),e("div",{staticClass:"flexbox justifyx wb centerx bf"},[e("div",{staticClass:"wbz"},[t._v("\n            共"+t._s(i.products.length)+"件，总金额 "),e("span",{staticClass:"money bold"},[t._v("￥"+t._s(i.sumPrice))])]),t._v(" "),e("div",[e("button",{staticClass:"btnn",on:{click:function(s){s.stopPropagation(),t.wiDetail(i.wishId)}}},[t._v("查看心愿")]),e("button",{staticClass:"btnn",on:{click:function(s){s.stopPropagation(),t.helpFr(i)}}},[t._v("帮助好友")])])])]):e("li",{ref:"last"+i,refInFor:!0},[e("div",{staticClass:"p20 bf"},[e("p",{staticClass:"flexbox justifyx p1"},[e("span",[t._v(t._s(i.sendPartyName)+"的心愿")]),e("span",{staticClass:"money"},[t._v(t._s(t._f("statusFls")(i.status)))])]),t._v(" "),e("p",{staticClass:"p2"},[t._v(t._s(i.sendDate))])]),t._v(" "),e("div",{staticClass:"zjdiv p20 multy bf"},[e("scroller",{attrs:{"lock-y":"","scrollbar-x":!1,width:"100%"}},[e("ul",{staticClass:"flexbox boxwrap",style:{width:2.67*i.products.length+2.14+.4+"rem"}},t._l(i.products,function(i,s){return e("li",{key:i.productId+s,on:{click:function(s){t.goToDe(i.productId)}}},[e("img",{staticClass:"goods_img",attrs:{src:i.imgUrl}}),t._v(" "),e("p",[t._v(t._s(i.productName))])])}))])],1),t._v(" "),e("div",{staticClass:"flexbox justifyx wb centerx bf"},[e("div",{staticClass:"wbz"},[t._v("\n            共"+t._s(i.products.length)+"件，总金额 "),e("span",{staticClass:"money bold"},[t._v("￥"+t._s(i.sumPrice))])]),t._v(" "),e("div",[e("button",{staticClass:"btnn",on:{click:function(s){s.stopPropagation(),t.wiDetail(i.wishId)}}},[t._v("查看心愿")]),e("button",{staticClass:"btnn",on:{click:function(s){s.stopPropagation(),t.helpFr(i)}}},[t._v("帮助好友")])])])])]})],2),t._v(" "),t.onFetching?e("load-more",{attrs:{tip:t.tips,"show-loading":!1}}):t._e()],1)},staticRenderFns:[]};var p=s("VU/8")(l,u,!1,function(t){s("tibr"),s("tx7T")},"data-v-eab448c2",null);i.default=p.exports},tibr:function(t,i){},tx7T:function(t,i){}});
//# sourceMappingURL=8.766d3bbe12401fb95413.js.map