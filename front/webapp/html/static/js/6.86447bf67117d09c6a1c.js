webpackJsonp([6],{DlRD:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Gu7T"),n=e.n(s),o=e("Dd8w"),a=e.n(o),h=e("fxnj"),r=e.n(h),l=e("NYxO"),d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vux-swipeout"},[this._t("default")],2)},staticRenderFns:[]};var u=e("VU/8")({name:"swipeout"},d,!1,function(t){e("OdoJ")},null,null).exports,c=e("mvHQ"),f=e.n(c),p=(Number,Boolean,Boolean,Number,String,String,{name:"swipeout-item",props:{sensitivity:{type:Number,default:0},autoCloseOnButtonClick:{type:Boolean,default:!0},disabled:Boolean,threshold:{type:Number,default:.3},underlayColor:String,transitionMode:{type:String,default:"reveal"}},mounted:function(){var t=this;this.$nextTick(function(){t.render()})},methods:{render:function(){this.target=this.$refs.content,this.$slots["left-menu"]&&(this.hasLeftMenu=!0,this.caculateMenuWidth("left")),this.$slots["right-menu"]&&(this.hasRightMenu=!0,this.caculateMenuWidth("right"))},caculateMenuWidth:function(t){var i=0;this.$slots[t+"-menu"][0].children.filter(function(t){return t.tag}).forEach(function(t){var e=t.componentOptions?t.componentOptions.propsData:{};i+=e.width||80}),this[t+"MenuWidth"]=i},onContentClick:function(){-1===this.styles.transform.indexOf("(0px, 0, 0)")&&this._setClose(200)},onItemClick:function(){this.autoCloseOnButtonClick&&this._setClose()},start:function(t){if(!this.disabled&&!this.isOpen&&"button"!==t.target.nodeName.toLowerCase()){if("swipeout"===this.$parent.$options._componentTag){var i=this.$parent.$children.filter(function(t){return-1===t.$data.styles.transform.indexOf("(0px, 0, 0)")});if(i.length>0)return i.forEach(function(t){t.setOffset(0,!0)}),void t.preventDefault()}var e=t.touches?t.touches[0]:t;this.pageX=e.pageX,this.pageY=e.pageY}},move:function(t){if(!this.disabled)if("button"!==t.target.nodeName.toLowerCase())if(void 0!==this.pageX){var i=t.touches?t.touches[0]:t;if(this.distX=i.pageX-this.pageX,this.distY=i.pageY-this.pageY,this.direction||(this.direction=this.distX>0?"left":"right"),("right"===this.direction&&this.distX>0&&this.hasRightMenu||"left"===this.direction&&this.distX<0&&this.hasLeftMenu)&&(this.valid=!0,t.preventDefault()),void 0===this.valid&&(this.distX>0&&!1===this.hasLeftMenu?this.valid=!1:this.distX<0&&!1===this.hasRightMenu?this.valid=!1:Math.abs(this.distX)>this.sensitivity||Math.abs(this.distY)>this.sensitivity?this.valid=Math.abs(this.distX)>Math.abs(this.distY):t.preventDefault()),!0===this.valid){if(Math.abs(this.distX)<=this.menuWidth)this.setOffset(this.distX,!1);else{var e=.5*(Math.abs(this.distX)-this.menuWidth),s=(this.menuWidth+e)*(this.distX<0?-1:1);this.setOffset(s,!1)}t.preventDefault()}}else t.preventDefault();else t.preventDefault()},end:function(t){if(!this.disabled&&"button"!==t.target.nodeName.toLowerCase()){if(!0===this.valid){if(this.distX<0&&"right"===this.direction){var i=this.threshold<=1?this.rightMenuWidth*this.threshold:this.threshold;this.distX<-i?(this.setOffset(-this.rightMenuWidth,!0),this.$emit("on-open"),this.isOpen=!0):this._setClose()}else if(this.distX>0&&"left"===this.direction){var e=this.threshold<=1?this.leftMenuWidth*this.threshold:this.threshold;this.distX>e?(this.setOffset(this.leftMenuWidth,!0),this.$emit("on-open"),this.isOpen=!0):this._setClose()}}else this.pageX;this.pageX=this.pageY=this.valid=void 0,this.direction=""}},setOffset:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments[2];if(this.isAnimated=e,!this.disabled||s){if(("right"===this.direction&&t>0||"left"===this.direction&&t<0)&&(t=0),0===t&&setTimeout(function(){i.isOpen=!1},300),t<0&&Math.abs(t)===this.rightMenuWidth?this.distX=-this.rightMenuWidth:t>0&&Math.abs(t)===this.leftMenuWidth&&(this.distX=this.leftMenuWidth),e&&this.target){this.target&&this.target.classList.add("vux-swipeout-content-animated");var n=(o=this,a=this.target,function(){a.classList.remove("vux-swipeout-content-animated"),o.isAnimated=!1,a.removeEventListener("webkitTransitionEnd",n),a.removeEventListener("transitionend",n)});this.target.addEventListener("webkitTransitionEnd",n),this.target.addEventListener("transitionend",n)}var o,a;this.styles.transform="translate3d("+t+"px, 0, 0)"}},_setClose:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setOffset(0,!0),this.$emit("on-close"),i?setTimeout(function(){t.isOpen=!1},i):this.isOpen=!1,this.distX=0},open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"right";this.setOffset("right"===t?-this.rightMenuWidth:this.leftMenuWidth,!0,!0)},close:function(){this.setOffset(0,!0,!0)}},computed:{menuWidth:function(){return!this.hasLeftMenu&&this.hasRightMenu?this.rightMenuWidth:this.hasLeftMenu&&!this.hasRightMenu?this.leftMenuWidth:this.hasLeftMenu&&this.hasRightMenu?this.distX<0?this.rightMenuWidth:this.leftMenuWidth:void 0},buttonBoxStyle:function(){return{backgroundColor:this.underlayColor}},leftButtonBoxStyle:function(){var t=JSON.parse(f()(this.buttonBoxStyle));if("follow"===this.transitionMode){var i=-1===this.styles.transform.indexOf("(0px, 0, 0)")?this.leftMenuWidth-this.distX:this.leftMenuWidth;t.transform="translate3d(-"+i+"px, 0, 0)"}return t},rightButtonBoxStyle:function(){var t=JSON.parse(f()(this.buttonBoxStyle));if("follow"===this.transitionMode){var i=-1===this.styles.transform.indexOf("(0px, 0, 0)")?this.rightMenuWidth-Math.abs(this.distX):this.rightMenuWidth;i<0&&(i=0),this.isAnimated&&(t.transition="transform 0.2s"),t.transform="translate3d("+i+"px, 0, 0)"}return t}},data:function(){return{pageX:void 0,pageY:void 0,distX:0,distY:0,hasLeftMenu:!1,hasRightMenu:!1,animated:!1,isAnimated:!1,isOpen:!1,styles:{transform:"translate3d(0px, 0, 0)"},direction:"",leftMenuWidth:160,rightMenuWidth:160}},watch:{disabled:function(t,i){!0!==t||i||this.setOffset(0,!0,!0)}}}),g={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"vux-swipeout-item",on:{touchstart:t.start,mousedown:t.start,touchmove:t.move,mousemove:t.move,touchend:t.end,mouseup:t.end,touchcancel:t.end}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.distX>=0,expression:"distX >= 0"}],staticClass:"vux-swipeout-button-box vux-swipeout-button-box-left",style:t.leftButtonBoxStyle},[t._t("left-menu")],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.distX<=0,expression:"distX <= 0"}],staticClass:"vux-swipeout-button-box",style:t.rightButtonBoxStyle},[t._t("right-menu")],2),t._v(" "),e("div",{ref:"content",staticClass:"vux-swipeout-content",style:t.styles,on:{mousedown:t.onContentClick,touchstart:t.onContentClick}},[t._t("content")],2)])},staticRenderFns:[]},v=e("VU/8")(p,g,!1,null,null,null).exports,m=(String,String,String,Number,{name:"swipeout-button",props:{text:String,backgroundColor:String,type:String,width:{type:Number,default:80}},methods:{onButtonClick:function(){"swipeout-item"===this.$parent.$options._componentTag&&this.$parent.onItemClick(this.text)}}}),b={render:function(){var t=this,i=t.$createElement;return(t._self._c||i)("button",{staticClass:"vux-swipeout-button",class:{"vux-swipeout-button-primary":"primary"===t.type,"vux-swipeout-button-warn":"warn"===t.type,"vux-swipeout-button-default":"default"===t.type},style:{width:t.width+"px",backgroundColor:t.backgroundColor},attrs:{type:"button"},on:{click:t.onButtonClick}},[t._t("default",[t._v(t._s(t.text))])],2)},staticRenderFns:[]},y=e("VU/8")(m,b,!1,null,null,null).exports,w=e("4FCr"),x=(w.a,a()({},Object(l.b)(["browseHistorys","delBrowseHistorys"]),{ontouchstart:function(t){this.sy=t.changedTouches[0].pageY},ontouchend:function(t){this.ey=t.changedTouches[0].pageY,this.sy-this.ey>30&&(this.onFetching||this.bindScroll())},bindScroll:function(){var t=this.listObj.list.length;if(t>=this.listObj.max)return this.tips="没有更多了",void(this.onFetching=!0);var i=this.$refs.outer,e=i.scrollTop,s=i.clientHeight,n=this.$refs.comd.$el.clientHeight;console.log(e),console.log(n),console.log(s),n-e<=s&&(this.onFetching=!0,this.tips="正在加载",this.getData(parseInt(t/this.pageSize),"",1))},goHome:function(){r.a.miniProgram.switchTab({url:"/pages/home/index"})},goTo:function(t){r.a.miniProgram.navigateTo({url:"/pages/goodDetail/index?id="+t})},delJv1:function(){this.delBrowseHistorys({data:{isAllClear:!0},this:this})},delJv:function(t){this.delBrowseHistorys({data:{browseHistoryId:t},this:this})},getCopy:function(t){var i;t.add?(i=this.listObj.list).push.apply(i,n()(t.data.recordsList)):(this.$set(this.listObj,"max",t.data.totalSize),this.$set(this.listObj,"list",t.data.recordsList))},getData:function(t,i,e){this.showLoading(),this.browseHistorys({this:this,data:{viewIndex:t,viewSize:this.pageSize},method:this.browseHistorys,fn:i,add:e})},handleEvents:function(t){console.log("event: ",t)}}),{components:{Swipeout:u,SwipeoutItem:v,SwipeoutButton:y,LoadMore:w.a},data:function(){return{pageSize:10,sy:0,ey:0,onFetching:!1,tips:"",listObj:{max:"",list:[]}}},created:function(){document.title="浏览记录",this.$route.query.token&&localStorage.setItem("token",decodeURIComponent(this.$route.query.token)),this.$route.query.refreshToken&&localStorage.setItem("refreshToken",decodeURIComponent(this.$route.query.refreshToken)),this.getData(0)},methods:a()({},Object(l.b)(["browseHistorys","delBrowseHistorys"]),{ontouchstart:function(t){this.sy=t.changedTouches[0].pageY},ontouchend:function(t){this.ey=t.changedTouches[0].pageY,this.sy-this.ey>30&&(this.onFetching||this.bindScroll())},bindScroll:function(){var t=this.listObj.list.length;if(t>=this.listObj.max)return this.tips="没有更多了",void(this.onFetching=!0);var i=this.$refs.outer,e=i.scrollTop,s=i.clientHeight,n=this.$refs.comd.$el.clientHeight;console.log(e),console.log(n),console.log(s),n-e<=s&&(this.onFetching=!0,this.tips="正在加载",this.getData(parseInt(t/this.pageSize),"",1))},goHome:function(){r.a.miniProgram.switchTab({url:"/pages/home/index"})},goTo:function(t){r.a.miniProgram.navigateTo({url:"/pages/goodDetail/index?id="+t})},delJv1:function(){this.delBrowseHistorys({data:{isAllClear:!0},this:this})},delJv:function(t){this.delBrowseHistorys({data:{browseHistoryId:t},this:this})},getCopy:function(t){var i;t.add?(i=this.listObj.list).push.apply(i,n()(t.data.recordsList)):(this.$set(this.listObj,"max",t.data.totalSize),this.$set(this.listObj,"list",t.data.recordsList))},getData:function(t,i,e){this.showLoading(),this.browseHistorys({this:this,data:{viewIndex:t,viewSize:this.pageSize},method:this.browseHistorys,fn:i,add:e})},handleEvents:function(t){console.log("event: ",t)}})}),C={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.listObj.list.length||""===t.listObj.max?s("div",{staticClass:"outer re"},[t.listObj.list.length>1?s("div",{staticClass:"yjqk flex flexcenter",on:{click:t.delJv1}},[s("i",{staticClass:"iconfont"},[t._v("")]),s("span",[t._v("一键清空")])]):t._e(),t._v(" "),s("div",{ref:"outer",staticClass:"ouy",on:{touchend:function(i){i.stopPropagation(),t.ontouchend(i)},touchstart:function(i){i.stopPropagation(),t.ontouchstart(i)}}},[s("swipeout",{ref:"comd",staticClass:"MyCollection"},t._l(t.listObj.list,function(i){return s("swipeout-item",{key:i.productId,attrs:{id:"comd","transition-mode":"follow"},on:{"on-close":function(i){t.handleEvents("on-close")},"on-open":function(i){t.handleEvents("on-open")}}},[s("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[s("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(e){t.delJv(i.browseHistoryId)}}},[t._v("删除")])],1),t._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},t._l(i.products,function(e){return s("ul",{key:e.productId,staticClass:"flex",on:{click:function(e){e.stopPropagation(),t.goTo(i.productId)}}},[s("li",{staticClass:"z_li"},[s("img",{staticClass:"goods_img",attrs:{src:e.mediumImageUrl,alt:""}})]),t._v(" "),s("li",{staticClass:"y_li flex flexcolumn  flexaround re"},[s("p",{staticClass:"lineclamp"},["Y"==e.isInner?s("button",{staticClass:"buttons"},[t._v("自营")]):t._e(),t._v(t._s(e.productName))]),t._v(" "),s("div",{staticClass:"flex justifyx"},[s("p",{staticClass:"money bold",staticStyle:{color:"#f03d33"}},[s("i",[t._v("￥")]),t._v(t._s(e.price))]),t._v(" "),s("p",[t._v(t._s(i.createdStamp.indexOf(".")>-1?i.createdStamp.slice(0,i.createdStamp.indexOf(".")):i.createdStamp))])])])])}))])})),t._v(" "),t.onFetching?s("load-more",{attrs:{tip:t.tips,"show-loading":!1}}):t._e()],1)]):s("div",{staticClass:"empty_myCo",on:{click:t.goHome}},[s("img",{attrs:{src:e("OIsL"),alt:""}})])},staticRenderFns:[]};var M=e("VU/8")(x,C,!1,function(t){e("RoLG"),e("aEpq")},"data-v-12cbb3be",null);i.default=M.exports},OIsL:function(t,i,e){t.exports=e.p+"static/img/brd.3434bba.png"},OdoJ:function(t,i){},RoLG:function(t,i){},aEpq:function(t,i){}});
//# sourceMappingURL=6.86447bf67117d09c6a1c.js.map